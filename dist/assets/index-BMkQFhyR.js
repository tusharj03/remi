(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Uy={exports:{}},jc={},zy={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var El=Symbol.for("react.element"),RE=Symbol.for("react.portal"),bE=Symbol.for("react.fragment"),PE=Symbol.for("react.strict_mode"),NE=Symbol.for("react.profiler"),OE=Symbol.for("react.provider"),DE=Symbol.for("react.context"),ME=Symbol.for("react.forward_ref"),LE=Symbol.for("react.suspense"),VE=Symbol.for("react.memo"),jE=Symbol.for("react.lazy"),pm=Symbol.iterator;function FE(t){return t===null||typeof t!="object"?null:(t=pm&&t[pm]||t["@@iterator"],typeof t=="function"?t:null)}var By={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$y=Object.assign,Hy={};function Vo(t,e,n){this.props=t,this.context=e,this.refs=Hy,this.updater=n||By}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wy(){}Wy.prototype=Vo.prototype;function Af(t,e,n){this.props=t,this.context=e,this.refs=Hy,this.updater=n||By}var kf=Af.prototype=new Wy;kf.constructor=Af;$y(kf,Vo.prototype);kf.isPureReactComponent=!0;var mm=Array.isArray,qy=Object.prototype.hasOwnProperty,Cf={current:null},Gy={key:!0,ref:!0,__self:!0,__source:!0};function Ky(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)qy.call(e,r)&&!Gy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var h=Array(c),p=0;p<c;p++)h[p]=arguments[p+2];i.children=h}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:El,type:t,key:s,ref:a,props:i,_owner:Cf.current}}function UE(t,e){return{$$typeof:El,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===El}function zE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gm=/\/+/g;function xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zE(""+t.key):e.toString(36)}function bu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case El:case RE:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+xh(a,0):r,mm(i)?(n="",t!=null&&(n=t.replace(gm,"$&/")+"/"),bu(i,e,n,"",function(p){return p})):i!=null&&(Rf(i)&&(i=UE(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(gm,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",mm(t))for(var c=0;c<t.length;c++){s=t[c];var h=r+xh(s,c);a+=bu(s,e,n,h,i)}else if(h=FE(t),typeof h=="function")for(t=h.call(t),c=0;!(s=t.next()).done;)s=s.value,h=r+xh(s,c++),a+=bu(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function lu(t,e,n){if(t==null)return t;var r=[],i=0;return bu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function BE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},Pu={transition:null},$E={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:Pu,ReactCurrentOwner:Cf};function Qy(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:lu,forEach:function(t,e,n){lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return lu(t,function(){e++}),e},toArray:function(t){return lu(t,function(e){return e})||[]},only:function(t){if(!Rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Vo;pe.Fragment=bE;pe.Profiler=NE;pe.PureComponent=Af;pe.StrictMode=PE;pe.Suspense=LE;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$E;pe.act=Qy;pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$y({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Cf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)qy.call(e,h)&&!Gy.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){c=Array(h);for(var p=0;p<h;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:El,type:t.type,key:i,ref:s,props:r,_owner:a}};pe.createContext=function(t){return t={$$typeof:DE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OE,_context:t},t.Consumer=t};pe.createElement=Ky;pe.createFactory=function(t){var e=Ky.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:ME,render:t}};pe.isValidElement=Rf;pe.lazy=function(t){return{$$typeof:jE,_payload:{_status:-1,_result:t},_init:BE}};pe.memo=function(t,e){return{$$typeof:VE,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Pu.transition;Pu.transition={};try{t()}finally{Pu.transition=e}};pe.unstable_act=Qy;pe.useCallback=function(t,e){return Lt.current.useCallback(t,e)};pe.useContext=function(t){return Lt.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Lt.current.useEffect(t,e)};pe.useId=function(){return Lt.current.useId()};pe.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Lt.current.useMemo(t,e)};pe.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};pe.useRef=function(t){return Lt.current.useRef(t)};pe.useState=function(t){return Lt.current.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Lt.current.useTransition()};pe.version="18.3.1";zy.exports=pe;var Q=zy.exports;const HE=CE(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE=Q,qE=Symbol.for("react.element"),GE=Symbol.for("react.fragment"),KE=Object.prototype.hasOwnProperty,QE=WE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YE={key:!0,ref:!0,__self:!0,__source:!0};function Yy(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)KE.call(e,r)&&!YE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qE,type:t,key:s,ref:a,props:i,_owner:QE.current}}jc.Fragment=GE;jc.jsx=Yy;jc.jsxs=Yy;Uy.exports=jc;var E=Uy.exports,ad={},Xy={exports:{}},nn={},Jy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,X){var se=G.length;G.push(X);e:for(;0<se;){var fe=se-1>>>1,me=G[fe];if(0<i(me,X))G[fe]=X,G[se]=me,se=fe;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var X=G[0],se=G.pop();if(se!==X){G[0]=se;e:for(var fe=0,me=G.length,Se=me>>>1;fe<Se;){var jt=2*(fe+1)-1,Nt=G[jt],ut=jt+1,Ft=G[ut];if(0>i(Nt,se))ut<me&&0>i(Ft,Nt)?(G[fe]=Ft,G[ut]=se,fe=ut):(G[fe]=Nt,G[jt]=se,fe=jt);else if(ut<me&&0>i(Ft,se))G[fe]=Ft,G[ut]=se,fe=ut;else break e}}return X}function i(G,X){var se=G.sortIndex-X.sortIndex;return se!==0?se:G.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],p=[],y=1,v=null,w=3,A=!1,O=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(G){for(var X=n(p);X!==null;){if(X.callback===null)r(p);else if(X.startTime<=G)r(p),X.sortIndex=X.expirationTime,e(h,X);else break;X=n(p)}}function V(G){if(M=!1,P(G),!O)if(n(h)!==null)O=!0,wt(F);else{var X=n(p);X!==null&&Ke(V,X.startTime-G)}}function F(G,X){O=!1,M&&(M=!1,k(T),T=-1),A=!0;var se=w;try{for(P(X),v=n(h);v!==null&&(!(v.expirationTime>X)||G&&!N());){var fe=v.callback;if(typeof fe=="function"){v.callback=null,w=v.priorityLevel;var me=fe(v.expirationTime<=X);X=t.unstable_now(),typeof me=="function"?v.callback=me:v===n(h)&&r(h),P(X)}else r(h);v=n(h)}if(v!==null)var Se=!0;else{var jt=n(p);jt!==null&&Ke(V,jt.startTime-X),Se=!1}return Se}finally{v=null,w=se,A=!1}}var B=!1,I=null,T=-1,S=5,R=-1;function N(){return!(t.unstable_now()-R<S)}function D(){if(I!==null){var G=t.unstable_now();R=G;var X=!0;try{X=I(!0,G)}finally{X?C():(B=!1,I=null)}}else B=!1}var C;if(typeof x=="function")C=function(){x(D)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,rt=Fe.port2;Fe.port1.onmessage=D,C=function(){rt.postMessage(null)}}else C=function(){L(D,0)};function wt(G){I=G,B||(B=!0,C())}function Ke(G,X){T=L(function(){G(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){O||A||(O=!0,wt(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(w){case 1:case 2:case 3:var X=3;break;default:X=w}var se=w;w=X;try{return G()}finally{w=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,X){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var se=w;w=G;try{return X()}finally{w=se}},t.unstable_scheduleCallback=function(G,X,se){var fe=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?fe+se:fe):se=fe,G){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,G={id:y++,callback:X,priorityLevel:G,startTime:se,expirationTime:me,sortIndex:-1},se>fe?(G.sortIndex=se,e(p,G),n(h)===null&&G===n(p)&&(M?(k(T),T=-1):M=!0,Ke(V,se-fe))):(G.sortIndex=me,e(h,G),O||A||(O=!0,wt(F))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var X=w;return function(){var se=w;w=X;try{return G.apply(this,arguments)}finally{w=se}}}})(Zy);Jy.exports=Zy;var XE=Jy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE=Q,en=XE;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ev=new Set,Ka={};function ys(t,e){Eo(t,e),Eo(t+"Capture",e)}function Eo(t,e){for(Ka[t]=e,t=0;t<e.length;t++)ev.add(e[t])}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ld=Object.prototype.hasOwnProperty,ZE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ym={},vm={};function e1(t){return ld.call(vm,t)?!0:ld.call(ym,t)?!1:ZE.test(t)?vm[t]=!0:(ym[t]=!0,!1)}function t1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function n1(t,e,n,r){if(e===null||typeof e>"u"||t1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vt[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bf=/[\-:]([a-z])/g;function Pf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bf,Pf);vt[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bf,Pf);vt[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bf,Pf);vt[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});vt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nf(t,e,n,r){var i=vt.hasOwnProperty(e)?vt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n1(e,n,i,r)&&(n=null),r||i===null?e1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sr=JE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uu=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),tv=Symbol.for("react.provider"),nv=Symbol.for("react.context"),Df=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),rv=Symbol.for("react.offscreen"),_m=Symbol.iterator;function da(t){return t===null||typeof t!="object"?null:(t=_m&&t[_m]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Ih;function Ia(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var Sh=!1;function Ah(t,e){if(!t||Sh)return"";Sh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{Sh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ia(t):""}function r1(t){switch(t.tag){case 5:return Ia(t.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 2:case 15:return t=Ah(t.type,!1),t;case 11:return t=Ah(t.type.render,!1),t;case 1:return t=Ah(t.type,!0),t;default:return""}}function dd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case Ks:return"Portal";case ud:return"Profiler";case Of:return"StrictMode";case cd:return"Suspense";case hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nv:return(t.displayName||"Context")+".Consumer";case tv:return(t._context.displayName||"Context")+".Provider";case Df:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:dd(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return dd(t(e))}catch{}}return null}function i1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dd(e);case 8:return e===Of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s1(t){var e=iv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cu(t){t._valueTracker||(t._valueTracker=s1(t))}function sv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fd(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ov(t,e){e=e.checked,e!=null&&Nf(t,"checked",e,!1)}function pd(t,e){ov(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?md(t,e.type,n):e.hasOwnProperty("defaultValue")&&md(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Em(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function md(t,e,n){(e!=="number"||Xu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Sa=Array.isArray;function ao(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Sa(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function av(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hu,uv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hu=hu||document.createElement("div"),hu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o1=["Webkit","ms","Moz","O"];Object.keys(Da).forEach(function(t){o1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Da[e]=Da[t]})});function cv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Da.hasOwnProperty(t)&&Da[t]?(""+e).trim():e+"px"}function hv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=cv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var a1=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(a1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function _d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ed=null,lo=null,uo=null;function Im(t){if(t=Il(t)){if(typeof Ed!="function")throw Error(H(280));var e=t.stateNode;e&&(e=$c(e),Ed(t.stateNode,t.type,e))}}function dv(t){lo?uo?uo.push(t):uo=[t]:lo=t}function fv(){if(lo){var t=lo,e=uo;if(uo=lo=null,Im(t),e)for(t=0;t<e.length;t++)Im(e[t])}}function pv(t,e){return t(e)}function mv(){}var kh=!1;function gv(t,e,n){if(kh)return t(e,n);kh=!0;try{return pv(t,e,n)}finally{kh=!1,(lo!==null||uo!==null)&&(mv(),fv())}}function Ya(t,e){var n=t.stateNode;if(n===null)return null;var r=$c(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Td=!1;if(gr)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){Td=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{Td=!1}function l1(t,e,n,r,i,s,a,c,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(y){this.onError(y)}}var Ma=!1,Ju=null,Zu=!1,xd=null,u1={onError:function(t){Ma=!0,Ju=t}};function c1(t,e,n,r,i,s,a,c,h){Ma=!1,Ju=null,l1.apply(u1,arguments)}function h1(t,e,n,r,i,s,a,c,h){if(c1.apply(this,arguments),Ma){if(Ma){var p=Ju;Ma=!1,Ju=null}else throw Error(H(198));Zu||(Zu=!0,xd=p)}}function vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sm(t){if(vs(t)!==t)throw Error(H(188))}function d1(t){var e=t.alternate;if(!e){if(e=vs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sm(i),t;if(s===r)return Sm(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function vv(t){return t=d1(t),t!==null?_v(t):null}function _v(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_v(t);if(e!==null)return e;t=t.sibling}return null}var wv=en.unstable_scheduleCallback,Am=en.unstable_cancelCallback,f1=en.unstable_shouldYield,p1=en.unstable_requestPaint,Ge=en.unstable_now,m1=en.unstable_getCurrentPriorityLevel,Vf=en.unstable_ImmediatePriority,Ev=en.unstable_UserBlockingPriority,ec=en.unstable_NormalPriority,g1=en.unstable_LowPriority,Tv=en.unstable_IdlePriority,Fc=null,$n=null;function y1(t){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Fc,t,void 0,(t.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:w1,v1=Math.log,_1=Math.LN2;function w1(t){return t>>>=0,t===0?32:31-(v1(t)/_1|0)|0}var du=64,fu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=Aa(c):(s&=a,s!==0&&(r=Aa(s)))}else a=n&~i,a!==0?r=Aa(a):s!==0&&(r=Aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-An(e),i=1<<n,r|=t[n],e&=~i;return r}function E1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-An(s),c=1<<a,h=i[a];h===-1?(!(c&n)||c&r)&&(i[a]=E1(c,e)):h<=e&&(t.expiredLanes|=c),s&=~c}}function Id(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function xv(){var t=du;return du<<=1,!(du&4194240)&&(du=64),t}function Ch(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-An(e),t[e]=n}function x1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-An(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-An(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function Iv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sv,Ff,Av,kv,Cv,Sd=!1,pu=[],ni=null,ri=null,ii=null,Xa=new Map,Ja=new Map,Gr=[],I1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function km(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(e.pointerId)}}function pa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Il(e),e!==null&&Ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S1(t,e,n,r,i){switch(e){case"focusin":return ni=pa(ni,t,e,n,r,i),!0;case"dragenter":return ri=pa(ri,t,e,n,r,i),!0;case"mouseover":return ii=pa(ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xa.set(s,pa(Xa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ja.set(s,pa(Ja.get(s)||null,t,e,n,r,i)),!0}return!1}function Rv(t){var e=Ji(t.target);if(e!==null){var n=vs(e);if(n!==null){if(e=n.tag,e===13){if(e=yv(n),e!==null){t.blockedOn=e,Cv(t.priority,function(){Av(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wd=r,n.target.dispatchEvent(r),wd=null}else return e=Il(n),e!==null&&Ff(e),t.blockedOn=n,!1;e.shift()}return!0}function Cm(t,e,n){Nu(t)&&n.delete(e)}function A1(){Sd=!1,ni!==null&&Nu(ni)&&(ni=null),ri!==null&&Nu(ri)&&(ri=null),ii!==null&&Nu(ii)&&(ii=null),Xa.forEach(Cm),Ja.forEach(Cm)}function ma(t,e){t.blockedOn===e&&(t.blockedOn=null,Sd||(Sd=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,A1)))}function Za(t){function e(i){return ma(i,t)}if(0<pu.length){ma(pu[0],t);for(var n=1;n<pu.length;n++){var r=pu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ni!==null&&ma(ni,t),ri!==null&&ma(ri,t),ii!==null&&ma(ii,t),Xa.forEach(e),Ja.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)Rv(n),n.blockedOn===null&&Gr.shift()}var co=Sr.ReactCurrentBatchConfig,nc=!0;function k1(t,e,n,r){var i=Ce,s=co.transition;co.transition=null;try{Ce=1,Uf(t,e,n,r)}finally{Ce=i,co.transition=s}}function C1(t,e,n,r){var i=Ce,s=co.transition;co.transition=null;try{Ce=4,Uf(t,e,n,r)}finally{Ce=i,co.transition=s}}function Uf(t,e,n,r){if(nc){var i=Ad(t,e,n,r);if(i===null)jh(t,e,r,rc,n),km(t,r);else if(S1(i,t,e,n,r))r.stopPropagation();else if(km(t,r),e&4&&-1<I1.indexOf(t)){for(;i!==null;){var s=Il(i);if(s!==null&&Sv(s),s=Ad(t,e,n,r),s===null&&jh(t,e,r,rc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else jh(t,e,r,null,n)}}var rc=null;function Ad(t,e,n,r){if(rc=null,t=Lf(r),t=Ji(t),t!==null)if(e=vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rc=t,null}function bv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m1()){case Vf:return 1;case Ev:return 4;case ec:case g1:return 16;case Tv:return 536870912;default:return 16}default:return 16}}var Zr=null,zf=null,Ou=null;function Pv(){if(Ou)return Ou;var t,e=zf,n=e.length,r,i="value"in Zr?Zr.value:Zr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Ou=i.slice(t,1<r?1-r:void 0)}function Du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mu(){return!0}function Rm(){return!1}function rn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?mu:Rm,this.isPropagationStopped=Rm,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),e}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bf=rn(jo),xl=Be({},jo,{view:0,detail:0}),R1=rn(xl),Rh,bh,ga,Uc=Be({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$f,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ga&&(ga&&t.type==="mousemove"?(Rh=t.screenX-ga.screenX,bh=t.screenY-ga.screenY):bh=Rh=0,ga=t),Rh)},movementY:function(t){return"movementY"in t?t.movementY:bh}}),bm=rn(Uc),b1=Be({},Uc,{dataTransfer:0}),P1=rn(b1),N1=Be({},xl,{relatedTarget:0}),Ph=rn(N1),O1=Be({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),D1=rn(O1),M1=Be({},jo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),L1=rn(M1),V1=Be({},jo,{data:0}),Pm=rn(V1),j1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},F1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},U1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=U1[t])?!!e[t]:!1}function $f(){return z1}var B1=Be({},xl,{key:function(t){if(t.key){var e=j1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?F1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$f,charCode:function(t){return t.type==="keypress"?Du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$1=rn(B1),H1=Be({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=rn(H1),W1=Be({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$f}),q1=rn(W1),G1=Be({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),K1=rn(G1),Q1=Be({},Uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y1=rn(Q1),X1=[9,13,27,32],Hf=gr&&"CompositionEvent"in window,La=null;gr&&"documentMode"in document&&(La=document.documentMode);var J1=gr&&"TextEvent"in window&&!La,Nv=gr&&(!Hf||La&&8<La&&11>=La),Om=" ",Dm=!1;function Ov(t,e){switch(t){case"keyup":return X1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ys=!1;function Z1(t,e){switch(t){case"compositionend":return Dv(e);case"keypress":return e.which!==32?null:(Dm=!0,Om);case"textInput":return t=e.data,t===Om&&Dm?null:t;default:return null}}function eT(t,e){if(Ys)return t==="compositionend"||!Hf&&Ov(t,e)?(t=Pv(),Ou=zf=Zr=null,Ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nv&&e.locale!=="ko"?null:e.data;default:return null}}var tT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tT[t.type]:e==="textarea"}function Mv(t,e,n,r){dv(r),e=ic(e,"onChange"),0<e.length&&(n=new Bf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Va=null,el=null;function nT(t){qv(t,0)}function zc(t){var e=Zs(t);if(sv(e))return t}function rT(t,e){if(t==="change")return e}var Lv=!1;if(gr){var Nh;if(gr){var Oh="oninput"in document;if(!Oh){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Oh=typeof Lm.oninput=="function"}Nh=Oh}else Nh=!1;Lv=Nh&&(!document.documentMode||9<document.documentMode)}function Vm(){Va&&(Va.detachEvent("onpropertychange",Vv),el=Va=null)}function Vv(t){if(t.propertyName==="value"&&zc(el)){var e=[];Mv(e,el,t,Lf(t)),gv(nT,e)}}function iT(t,e,n){t==="focusin"?(Vm(),Va=e,el=n,Va.attachEvent("onpropertychange",Vv)):t==="focusout"&&Vm()}function sT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zc(el)}function oT(t,e){if(t==="click")return zc(e)}function aT(t,e){if(t==="input"||t==="change")return zc(e)}function lT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:lT;function tl(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ld.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function jm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fm(t,e){var n=jm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jm(n)}}function jv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fv(){for(var t=window,e=Xu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xu(t.document)}return e}function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uT(t){var e=Fv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jv(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Fm(n,s);var a=Fm(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cT=gr&&"documentMode"in document&&11>=document.documentMode,Xs=null,kd=null,ja=null,Cd=!1;function Um(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cd||Xs==null||Xs!==Xu(r)||(r=Xs,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ja&&tl(ja,r)||(ja=r,r=ic(kd,"onSelect"),0<r.length&&(e=new Bf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xs)))}function gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:gu("Animation","AnimationEnd"),animationiteration:gu("Animation","AnimationIteration"),animationstart:gu("Animation","AnimationStart"),transitionend:gu("Transition","TransitionEnd")},Dh={},Uv={};gr&&(Uv=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function Bc(t){if(Dh[t])return Dh[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Uv)return Dh[t]=e[n];return t}var zv=Bc("animationend"),Bv=Bc("animationiteration"),$v=Bc("animationstart"),Hv=Bc("transitionend"),Wv=new Map,zm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){Wv.set(t,e),ys(e,[t])}for(var Mh=0;Mh<zm.length;Mh++){var Lh=zm[Mh],hT=Lh.toLowerCase(),dT=Lh[0].toUpperCase()+Lh.slice(1);vi(hT,"on"+dT)}vi(zv,"onAnimationEnd");vi(Bv,"onAnimationIteration");vi($v,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(Hv,"onTransitionEnd");Eo("onMouseEnter",["mouseout","mouseover"]);Eo("onMouseLeave",["mouseout","mouseover"]);Eo("onPointerEnter",["pointerout","pointerover"]);Eo("onPointerLeave",["pointerout","pointerover"]);ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Bm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,h1(r,e,void 0,t),t.currentTarget=null}function qv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],h=c.instance,p=c.currentTarget;if(c=c.listener,h!==s&&i.isPropagationStopped())break e;Bm(i,c,p),s=h}else for(a=0;a<r.length;a++){if(c=r[a],h=c.instance,p=c.currentTarget,c=c.listener,h!==s&&i.isPropagationStopped())break e;Bm(i,c,p),s=h}}}if(Zu)throw t=xd,Zu=!1,xd=null,t}function Me(t,e){var n=e[Od];n===void 0&&(n=e[Od]=new Set);var r=t+"__bubble";n.has(r)||(Gv(e,t,2,!1),n.add(r))}function Vh(t,e,n){var r=0;e&&(r|=4),Gv(n,t,r,e)}var yu="_reactListening"+Math.random().toString(36).slice(2);function nl(t){if(!t[yu]){t[yu]=!0,ev.forEach(function(n){n!=="selectionchange"&&(fT.has(n)||Vh(n,!1,t),Vh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yu]||(e[yu]=!0,Vh("selectionchange",!1,e))}}function Gv(t,e,n,r){switch(bv(e)){case 1:var i=k1;break;case 4:i=C1;break;default:i=Uf}n=i.bind(null,e,n,t),i=void 0,!Td||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function jh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Ji(c),a===null)return;if(h=a.tag,h===5||h===6){r=s=a;continue e}c=c.parentNode}}r=r.return}gv(function(){var p=s,y=Lf(n),v=[];e:{var w=Wv.get(t);if(w!==void 0){var A=Bf,O=t;switch(t){case"keypress":if(Du(n)===0)break e;case"keydown":case"keyup":A=$1;break;case"focusin":O="focus",A=Ph;break;case"focusout":O="blur",A=Ph;break;case"beforeblur":case"afterblur":A=Ph;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=P1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=q1;break;case zv:case Bv:case $v:A=D1;break;case Hv:A=K1;break;case"scroll":A=R1;break;case"wheel":A=Y1;break;case"copy":case"cut":case"paste":A=L1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Nm}var M=(e&4)!==0,L=!M&&t==="scroll",k=M?w!==null?w+"Capture":null:w;M=[];for(var x=p,P;x!==null;){P=x;var V=P.stateNode;if(P.tag===5&&V!==null&&(P=V,k!==null&&(V=Ya(x,k),V!=null&&M.push(rl(x,V,P)))),L)break;x=x.return}0<M.length&&(w=new A(w,O,null,n,y),v.push({event:w,listeners:M}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",w&&n!==wd&&(O=n.relatedTarget||n.fromElement)&&(Ji(O)||O[yr]))break e;if((A||w)&&(w=y.window===y?y:(w=y.ownerDocument)?w.defaultView||w.parentWindow:window,A?(O=n.relatedTarget||n.toElement,A=p,O=O?Ji(O):null,O!==null&&(L=vs(O),O!==L||O.tag!==5&&O.tag!==6)&&(O=null)):(A=null,O=p),A!==O)){if(M=bm,V="onMouseLeave",k="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(M=Nm,V="onPointerLeave",k="onPointerEnter",x="pointer"),L=A==null?w:Zs(A),P=O==null?w:Zs(O),w=new M(V,x+"leave",A,n,y),w.target=L,w.relatedTarget=P,V=null,Ji(y)===p&&(M=new M(k,x+"enter",O,n,y),M.target=P,M.relatedTarget=L,V=M),L=V,A&&O)t:{for(M=A,k=O,x=0,P=M;P;P=Hs(P))x++;for(P=0,V=k;V;V=Hs(V))P++;for(;0<x-P;)M=Hs(M),x--;for(;0<P-x;)k=Hs(k),P--;for(;x--;){if(M===k||k!==null&&M===k.alternate)break t;M=Hs(M),k=Hs(k)}M=null}else M=null;A!==null&&$m(v,w,A,M,!1),O!==null&&L!==null&&$m(v,L,O,M,!0)}}e:{if(w=p?Zs(p):window,A=w.nodeName&&w.nodeName.toLowerCase(),A==="select"||A==="input"&&w.type==="file")var F=rT;else if(Mm(w))if(Lv)F=aT;else{F=sT;var B=iT}else(A=w.nodeName)&&A.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(F=oT);if(F&&(F=F(t,p))){Mv(v,F,n,y);break e}B&&B(t,w,p),t==="focusout"&&(B=w._wrapperState)&&B.controlled&&w.type==="number"&&md(w,"number",w.value)}switch(B=p?Zs(p):window,t){case"focusin":(Mm(B)||B.contentEditable==="true")&&(Xs=B,kd=p,ja=null);break;case"focusout":ja=kd=Xs=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Um(v,n,y);break;case"selectionchange":if(cT)break;case"keydown":case"keyup":Um(v,n,y)}var I;if(Hf)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ys?Ov(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Nv&&n.locale!=="ko"&&(Ys||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ys&&(I=Pv()):(Zr=y,zf="value"in Zr?Zr.value:Zr.textContent,Ys=!0)),B=ic(p,T),0<B.length&&(T=new Pm(T,t,null,n,y),v.push({event:T,listeners:B}),I?T.data=I:(I=Dv(n),I!==null&&(T.data=I)))),(I=J1?Z1(t,n):eT(t,n))&&(p=ic(p,"onBeforeInput"),0<p.length&&(y=new Pm("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:p}),y.data=I))}qv(v,e)})}function rl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ya(t,n),s!=null&&r.unshift(rl(t,s,i)),s=Ya(t,e),s!=null&&r.push(rl(t,s,i))),t=t.return}return r}function Hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $m(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,h=c.alternate,p=c.stateNode;if(h!==null&&h===r)break;c.tag===5&&p!==null&&(c=p,i?(h=Ya(n,s),h!=null&&a.unshift(rl(n,h,c))):i||(h=Ya(n,s),h!=null&&a.push(rl(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var pT=/\r\n?/g,mT=/\u0000|\uFFFD/g;function Hm(t){return(typeof t=="string"?t:""+t).replace(pT,`
`).replace(mT,"")}function vu(t,e,n){if(e=Hm(e),Hm(t)!==e&&n)throw Error(H(425))}function sc(){}var Rd=null,bd=null;function Pd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,gT=typeof clearTimeout=="function"?clearTimeout:void 0,Wm=typeof Promise=="function"?Promise:void 0,yT=typeof queueMicrotask=="function"?queueMicrotask:typeof Wm<"u"?function(t){return Wm.resolve(null).then(t).catch(vT)}:Nd;function vT(t){setTimeout(function(){throw t})}function Fh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Za(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fo=Math.random().toString(36).slice(2),Bn="__reactFiber$"+Fo,il="__reactProps$"+Fo,yr="__reactContainer$"+Fo,Od="__reactEvents$"+Fo,_T="__reactListeners$"+Fo,wT="__reactHandles$"+Fo;function Ji(t){var e=t[Bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yr]||n[Bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=qm(t);t!==null;){if(n=t[Bn])return n;t=qm(t)}return e}t=n,n=t.parentNode}return null}function Il(t){return t=t[Bn]||t[yr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function $c(t){return t[il]||null}var Dd=[],eo=-1;function _i(t){return{current:t}}function Le(t){0>eo||(t.current=Dd[eo],Dd[eo]=null,eo--)}function Oe(t,e){eo++,Dd[eo]=t.current,t.current=e}var pi={},bt=_i(pi),qt=_i(!1),as=pi;function To(t,e){var n=t.type.contextTypes;if(!n)return pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gt(t){return t=t.childContextTypes,t!=null}function oc(){Le(qt),Le(bt)}function Gm(t,e,n){if(bt.current!==pi)throw Error(H(168));Oe(bt,e),Oe(qt,n)}function Kv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,i1(t)||"Unknown",i));return Be({},n,r)}function ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,as=bt.current,Oe(bt,t),Oe(qt,qt.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=Kv(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,Le(qt),Le(bt),Oe(bt,t)):Le(qt),Oe(qt,n)}var lr=null,Hc=!1,Uh=!1;function Qv(t){lr===null?lr=[t]:lr.push(t)}function ET(t){Hc=!0,Qv(t)}function wi(){if(!Uh&&lr!==null){Uh=!0;var t=0,e=Ce;try{var n=lr;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lr=null,Hc=!1}catch(i){throw lr!==null&&(lr=lr.slice(t+1)),wv(Vf,wi),i}finally{Ce=e,Uh=!1}}return null}var to=[],no=0,lc=null,uc=0,cn=[],hn=0,ls=null,ur=1,cr="";function Qi(t,e){to[no++]=uc,to[no++]=lc,lc=t,uc=e}function Yv(t,e,n){cn[hn++]=ur,cn[hn++]=cr,cn[hn++]=ls,ls=t;var r=ur;t=cr;var i=32-An(r)-1;r&=~(1<<i),n+=1;var s=32-An(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ur=1<<32-An(e)+i|n<<i|r,cr=s+t}else ur=1<<s|n<<i|r,cr=t}function qf(t){t.return!==null&&(Qi(t,1),Yv(t,1,0))}function Gf(t){for(;t===lc;)lc=to[--no],to[no]=null,uc=to[--no],to[no]=null;for(;t===ls;)ls=cn[--hn],cn[hn]=null,cr=cn[--hn],cn[hn]=null,ur=cn[--hn],cn[hn]=null}var Zt=null,Jt=null,je=!1,xn=null;function Xv(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Jt=null,!0):!1;default:return!1}}function Md(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ld(t){if(je){var e=Jt;if(e){var n=e;if(!Qm(t,e)){if(Md(t))throw Error(H(418));e=si(n.nextSibling);var r=Zt;e&&Qm(t,e)?Xv(r,n):(t.flags=t.flags&-4097|2,je=!1,Zt=t)}}else{if(Md(t))throw Error(H(418));t.flags=t.flags&-4097|2,je=!1,Zt=t}}}function Ym(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function _u(t){if(t!==Zt)return!1;if(!je)return Ym(t),je=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pd(t.type,t.memoizedProps)),e&&(e=Jt)){if(Md(t))throw Jv(),Error(H(418));for(;e;)Xv(t,e),e=si(e.nextSibling)}if(Ym(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Zt?si(t.stateNode.nextSibling):null;return!0}function Jv(){for(var t=Jt;t;)t=si(t.nextSibling)}function xo(){Jt=Zt=null,je=!1}function Kf(t){xn===null?xn=[t]:xn.push(t)}var TT=Sr.ReactCurrentBatchConfig;function ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function wu(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xm(t){var e=t._init;return e(t._payload)}function Zv(t){function e(k,x){if(t){var P=k.deletions;P===null?(k.deletions=[x],k.flags|=16):P.push(x)}}function n(k,x){if(!t)return null;for(;x!==null;)e(k,x),x=x.sibling;return null}function r(k,x){for(k=new Map;x!==null;)x.key!==null?k.set(x.key,x):k.set(x.index,x),x=x.sibling;return k}function i(k,x){return k=ui(k,x),k.index=0,k.sibling=null,k}function s(k,x,P){return k.index=P,t?(P=k.alternate,P!==null?(P=P.index,P<x?(k.flags|=2,x):P):(k.flags|=2,x)):(k.flags|=1048576,x)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function c(k,x,P,V){return x===null||x.tag!==6?(x=Gh(P,k.mode,V),x.return=k,x):(x=i(x,P),x.return=k,x)}function h(k,x,P,V){var F=P.type;return F===Qs?y(k,x,P.props.children,V,P.key):x!==null&&(x.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Wr&&Xm(F)===x.type)?(V=i(x,P.props),V.ref=ya(k,x,P),V.return=k,V):(V=zu(P.type,P.key,P.props,null,k.mode,V),V.ref=ya(k,x,P),V.return=k,V)}function p(k,x,P,V){return x===null||x.tag!==4||x.stateNode.containerInfo!==P.containerInfo||x.stateNode.implementation!==P.implementation?(x=Kh(P,k.mode,V),x.return=k,x):(x=i(x,P.children||[]),x.return=k,x)}function y(k,x,P,V,F){return x===null||x.tag!==7?(x=is(P,k.mode,V,F),x.return=k,x):(x=i(x,P),x.return=k,x)}function v(k,x,P){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Gh(""+x,k.mode,P),x.return=k,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uu:return P=zu(x.type,x.key,x.props,null,k.mode,P),P.ref=ya(k,null,x),P.return=k,P;case Ks:return x=Kh(x,k.mode,P),x.return=k,x;case Wr:var V=x._init;return v(k,V(x._payload),P)}if(Sa(x)||da(x))return x=is(x,k.mode,P,null),x.return=k,x;wu(k,x)}return null}function w(k,x,P,V){var F=x!==null?x.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return F!==null?null:c(k,x,""+P,V);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case uu:return P.key===F?h(k,x,P,V):null;case Ks:return P.key===F?p(k,x,P,V):null;case Wr:return F=P._init,w(k,x,F(P._payload),V)}if(Sa(P)||da(P))return F!==null?null:y(k,x,P,V,null);wu(k,P)}return null}function A(k,x,P,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return k=k.get(P)||null,c(x,k,""+V,F);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case uu:return k=k.get(V.key===null?P:V.key)||null,h(x,k,V,F);case Ks:return k=k.get(V.key===null?P:V.key)||null,p(x,k,V,F);case Wr:var B=V._init;return A(k,x,P,B(V._payload),F)}if(Sa(V)||da(V))return k=k.get(P)||null,y(x,k,V,F,null);wu(x,V)}return null}function O(k,x,P,V){for(var F=null,B=null,I=x,T=x=0,S=null;I!==null&&T<P.length;T++){I.index>T?(S=I,I=null):S=I.sibling;var R=w(k,I,P[T],V);if(R===null){I===null&&(I=S);break}t&&I&&R.alternate===null&&e(k,I),x=s(R,x,T),B===null?F=R:B.sibling=R,B=R,I=S}if(T===P.length)return n(k,I),je&&Qi(k,T),F;if(I===null){for(;T<P.length;T++)I=v(k,P[T],V),I!==null&&(x=s(I,x,T),B===null?F=I:B.sibling=I,B=I);return je&&Qi(k,T),F}for(I=r(k,I);T<P.length;T++)S=A(I,k,T,P[T],V),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?T:S.key),x=s(S,x,T),B===null?F=S:B.sibling=S,B=S);return t&&I.forEach(function(N){return e(k,N)}),je&&Qi(k,T),F}function M(k,x,P,V){var F=da(P);if(typeof F!="function")throw Error(H(150));if(P=F.call(P),P==null)throw Error(H(151));for(var B=F=null,I=x,T=x=0,S=null,R=P.next();I!==null&&!R.done;T++,R=P.next()){I.index>T?(S=I,I=null):S=I.sibling;var N=w(k,I,R.value,V);if(N===null){I===null&&(I=S);break}t&&I&&N.alternate===null&&e(k,I),x=s(N,x,T),B===null?F=N:B.sibling=N,B=N,I=S}if(R.done)return n(k,I),je&&Qi(k,T),F;if(I===null){for(;!R.done;T++,R=P.next())R=v(k,R.value,V),R!==null&&(x=s(R,x,T),B===null?F=R:B.sibling=R,B=R);return je&&Qi(k,T),F}for(I=r(k,I);!R.done;T++,R=P.next())R=A(I,k,T,R.value,V),R!==null&&(t&&R.alternate!==null&&I.delete(R.key===null?T:R.key),x=s(R,x,T),B===null?F=R:B.sibling=R,B=R);return t&&I.forEach(function(D){return e(k,D)}),je&&Qi(k,T),F}function L(k,x,P,V){if(typeof P=="object"&&P!==null&&P.type===Qs&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case uu:e:{for(var F=P.key,B=x;B!==null;){if(B.key===F){if(F=P.type,F===Qs){if(B.tag===7){n(k,B.sibling),x=i(B,P.props.children),x.return=k,k=x;break e}}else if(B.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Wr&&Xm(F)===B.type){n(k,B.sibling),x=i(B,P.props),x.ref=ya(k,B,P),x.return=k,k=x;break e}n(k,B);break}else e(k,B);B=B.sibling}P.type===Qs?(x=is(P.props.children,k.mode,V,P.key),x.return=k,k=x):(V=zu(P.type,P.key,P.props,null,k.mode,V),V.ref=ya(k,x,P),V.return=k,k=V)}return a(k);case Ks:e:{for(B=P.key;x!==null;){if(x.key===B)if(x.tag===4&&x.stateNode.containerInfo===P.containerInfo&&x.stateNode.implementation===P.implementation){n(k,x.sibling),x=i(x,P.children||[]),x.return=k,k=x;break e}else{n(k,x);break}else e(k,x);x=x.sibling}x=Kh(P,k.mode,V),x.return=k,k=x}return a(k);case Wr:return B=P._init,L(k,x,B(P._payload),V)}if(Sa(P))return O(k,x,P,V);if(da(P))return M(k,x,P,V);wu(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,x!==null&&x.tag===6?(n(k,x.sibling),x=i(x,P),x.return=k,k=x):(n(k,x),x=Gh(P,k.mode,V),x.return=k,k=x),a(k)):n(k,x)}return L}var Io=Zv(!0),e0=Zv(!1),cc=_i(null),hc=null,ro=null,Qf=null;function Yf(){Qf=ro=hc=null}function Xf(t){var e=cc.current;Le(cc),t._currentValue=e}function Vd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ho(t,e){hc=t,Qf=ro=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Qf!==t)if(t={context:t,memoizedValue:e,next:null},ro===null){if(hc===null)throw Error(H(308));ro=t,hc.dependencies={lanes:0,firstContext:t}}else ro=ro.next=t;return e}var Zi=null;function Jf(t){Zi===null?Zi=[t]:Zi.push(t)}function t0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Jf(e)):(n.next=i.next,i.next=n),e.interleaved=n,vr(t,r)}function vr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vr(t,n)}return i=r.interleaved,i===null?(e.next=e,Jf(r)):(e.next=i.next,i.next=e),r.interleaved=e,vr(t,n)}function Mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}function Jm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dc(t,e,n,r){var i=t.updateQueue;qr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,p=h.next;h.next=null,a===null?s=p:a.next=p,a=h;var y=t.alternate;y!==null&&(y=y.updateQueue,c=y.lastBaseUpdate,c!==a&&(c===null?y.firstBaseUpdate=p:c.next=p,y.lastBaseUpdate=h))}if(s!==null){var v=i.baseState;a=0,y=p=h=null,c=s;do{var w=c.lane,A=c.eventTime;if((r&w)===w){y!==null&&(y=y.next={eventTime:A,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var O=t,M=c;switch(w=e,A=n,M.tag){case 1:if(O=M.payload,typeof O=="function"){v=O.call(A,v,w);break e}v=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=M.payload,w=typeof O=="function"?O.call(A,v,w):O,w==null)break e;v=Be({},v,w);break e;case 2:qr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[c]:w.push(c))}else A={eventTime:A,lane:w,tag:c.tag,payload:c.payload,callback:c.callback,next:null},y===null?(p=y=A,h=v):y=y.next=A,a|=w;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;w=c,c=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(y===null&&(h=v),i.baseState=h,i.firstBaseUpdate=p,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);cs|=a,t.lanes=a,t.memoizedState=v}}function Zm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var Sl={},Hn=_i(Sl),sl=_i(Sl),ol=_i(Sl);function es(t){if(t===Sl)throw Error(H(174));return t}function ep(t,e){switch(Oe(ol,e),Oe(sl,t),Oe(Hn,Sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Le(Hn),Oe(Hn,e)}function So(){Le(Hn),Le(sl),Le(ol)}function r0(t){es(ol.current);var e=es(Hn.current),n=yd(e,t.type);e!==n&&(Oe(sl,t),Oe(Hn,n))}function tp(t){sl.current===t&&(Le(Hn),Le(sl))}var Ue=_i(0);function fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zh=[];function np(){for(var t=0;t<zh.length;t++)zh[t]._workInProgressVersionPrimary=null;zh.length=0}var Lu=Sr.ReactCurrentDispatcher,Bh=Sr.ReactCurrentBatchConfig,us=0,ze=null,Ze=null,at=null,pc=!1,Fa=!1,al=0,xT=0;function It(){throw Error(H(321))}function rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function ip(t,e,n,r,i,s){if(us=s,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lu.current=t===null||t.memoizedState===null?kT:CT,t=n(r,i),Fa){s=0;do{if(Fa=!1,al=0,25<=s)throw Error(H(301));s+=1,at=Ze=null,e.updateQueue=null,Lu.current=RT,t=n(r,i)}while(Fa)}if(Lu.current=mc,e=Ze!==null&&Ze.next!==null,us=0,at=Ze=ze=null,pc=!1,e)throw Error(H(300));return t}function sp(){var t=al!==0;return al=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?ze.memoizedState=at=t:at=at.next=t,at}function yn(){if(Ze===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=at===null?ze.memoizedState:at.next;if(e!==null)at=e,Ze=t;else{if(t===null)throw Error(H(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},at===null?ze.memoizedState=at=t:at=at.next=t}return at}function ll(t,e){return typeof e=="function"?e(t):e}function $h(t){var e=yn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,h=null,p=s;do{var y=p.lane;if((us&y)===y)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var v={lane:y,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(c=h=v,a=r):h=h.next=v,ze.lanes|=y,cs|=y}p=p.next}while(p!==null&&p!==s);h===null?a=r:h.next=c,Cn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ze.lanes|=s,cs|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hh(t){var e=yn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Cn(s,e.memoizedState)||(Wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function i0(){}function s0(t,e){var n=ze,r=yn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Wt=!0),r=r.queue,op(l0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,ul(9,a0.bind(null,n,r,i,e),void 0,null),lt===null)throw Error(H(349));us&30||o0(n,e,i)}return i}function o0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function a0(t,e,n,r){e.value=n,e.getSnapshot=r,u0(e)&&c0(t)}function l0(t,e,n){return n(function(){u0(e)&&c0(t)})}function u0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function c0(t){var e=vr(t,1);e!==null&&kn(e,t,1,-1)}function eg(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:t},e.queue=t,t=t.dispatch=AT.bind(null,ze,t),[e.memoizedState,t]}function ul(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function h0(){return yn().memoizedState}function Vu(t,e,n,r){var i=zn();ze.flags|=t,i.memoizedState=ul(1|e,n,void 0,r===void 0?null:r)}function Wc(t,e,n,r){var i=yn();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var a=Ze.memoizedState;if(s=a.destroy,r!==null&&rp(r,a.deps)){i.memoizedState=ul(e,n,s,r);return}}ze.flags|=t,i.memoizedState=ul(1|e,n,s,r)}function tg(t,e){return Vu(8390656,8,t,e)}function op(t,e){return Wc(2048,8,t,e)}function d0(t,e){return Wc(4,2,t,e)}function f0(t,e){return Wc(4,4,t,e)}function p0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m0(t,e,n){return n=n!=null?n.concat([t]):null,Wc(4,4,p0.bind(null,e,t),n)}function ap(){}function g0(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function y0(t,e){var n=yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function v0(t,e,n){return us&21?(Cn(n,e)||(n=xv(),ze.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function IT(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=Bh.transition;Bh.transition={};try{t(!1),e()}finally{Ce=n,Bh.transition=r}}function _0(){return yn().memoizedState}function ST(t,e,n){var r=li(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},w0(t))E0(e,n);else if(n=t0(t,e,n,r),n!==null){var i=Mt();kn(n,t,r,i),T0(n,e,r)}}function AT(t,e,n){var r=li(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(w0(t))E0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,Cn(c,a)){var h=e.interleaved;h===null?(i.next=i,Jf(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=t0(t,e,i,r),n!==null&&(i=Mt(),kn(n,t,r,i),T0(n,e,r))}}function w0(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function E0(t,e){Fa=pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function T0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}var mc={readContext:gn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},kT={readContext:gn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:tg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vu(4194308,4,p0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vu(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ST.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:eg,useDebugValue:ap,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=eg(!1),e=t[0];return t=IT.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,i=zn();if(je){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),lt===null)throw Error(H(349));us&30||o0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,tg(l0.bind(null,r,s,t),[t]),r.flags|=2048,ul(9,a0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=lt.identifierPrefix;if(je){var n=cr,r=ur;n=(r&~(1<<32-An(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CT={readContext:gn,useCallback:g0,useContext:gn,useEffect:op,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:f0,useMemo:y0,useReducer:$h,useRef:h0,useState:function(){return $h(ll)},useDebugValue:ap,useDeferredValue:function(t){var e=yn();return v0(e,Ze.memoizedState,t)},useTransition:function(){var t=$h(ll)[0],e=yn().memoizedState;return[t,e]},useMutableSource:i0,useSyncExternalStore:s0,useId:_0,unstable_isNewReconciler:!1},RT={readContext:gn,useCallback:g0,useContext:gn,useEffect:op,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:f0,useMemo:y0,useReducer:Hh,useRef:h0,useState:function(){return Hh(ll)},useDebugValue:ap,useDeferredValue:function(t){var e=yn();return Ze===null?e.memoizedState=t:v0(e,Ze.memoizedState,t)},useTransition:function(){var t=Hh(ll)[0],e=yn().memoizedState;return[t,e]},useMutableSource:i0,useSyncExternalStore:s0,useId:_0,unstable_isNewReconciler:!1};function En(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qc={isMounted:function(t){return(t=t._reactInternals)?vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=li(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=oi(t,s,i),e!==null&&(kn(e,t,i,r),Mu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mt(),i=li(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=oi(t,s,i),e!==null&&(kn(e,t,i,r),Mu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mt(),r=li(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=oi(t,i,r),e!==null&&(kn(e,t,r,n),Mu(e,t,r))}};function ng(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!tl(n,r)||!tl(i,s):!0}function x0(t,e,n){var r=!1,i=pi,s=e.contextType;return typeof s=="object"&&s!==null?s=gn(s):(i=Gt(e)?as:bt.current,r=e.contextTypes,s=(r=r!=null)?To(t,i):pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function rg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qc.enqueueReplaceState(e,e.state,null)}function Fd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Zf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gn(s):(s=Gt(e)?as:bt.current,i.context=To(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qc.enqueueReplaceState(i,i.state,null),dc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ao(t,e){try{var n="",r=e;do n+=r1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ud(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bT=typeof WeakMap=="function"?WeakMap:Map;function I0(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yc||(yc=!0,Yd=r),Ud(t,e)},n}function S0(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ud(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ud(t,e),typeof r!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ig(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bT;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=HT.bind(null,t,e,n),e.then(t,t))}function sg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function og(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,oi(n,e,1))),n.lanes|=1),t)}var PT=Sr.ReactCurrentOwner,Wt=!1;function Dt(t,e,n,r){e.child=t===null?e0(e,null,n,r):Io(e,t.child,n,r)}function ag(t,e,n,r,i){n=n.render;var s=e.ref;return ho(e,i),r=ip(t,e,n,r,s,i),n=sp(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(je&&n&&qf(e),e.flags|=1,Dt(t,e,r,i),e.child)}function lg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,A0(t,e,s,r,i)):(t=zu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:tl,n(a,r)&&t.ref===e.ref)return _r(t,e,i)}return e.flags|=1,t=ui(s,r),t.ref=e.ref,t.return=e,e.child=t}function A0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(tl(s,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,_r(t,e,i)}return zd(t,e,n,r,i)}function k0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(so,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(so,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(so,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(so,Xt),Xt|=r;return Dt(t,e,i,n),e.child}function C0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zd(t,e,n,r,i){var s=Gt(n)?as:bt.current;return s=To(e,s),ho(e,i),n=ip(t,e,n,r,s,i),r=sp(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(je&&r&&qf(e),e.flags|=1,Dt(t,e,n,i),e.child)}function ug(t,e,n,r,i){if(Gt(n)){var s=!0;ac(e)}else s=!1;if(ho(e,i),e.stateNode===null)ju(t,e),x0(e,n,r),Fd(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=gn(p):(p=Gt(n)?as:bt.current,p=To(e,p));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||h!==p)&&rg(e,a,r,p),qr=!1;var w=e.memoizedState;a.state=w,dc(e,r,a,i),h=e.memoizedState,c!==r||w!==h||qt.current||qr?(typeof y=="function"&&(jd(e,n,y,r),h=e.memoizedState),(c=qr||ng(e,n,c,r,w,h,p))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=p,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,n0(t,e),c=e.memoizedProps,p=e.type===e.elementType?c:En(e.type,c),a.props=p,v=e.pendingProps,w=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=gn(h):(h=Gt(n)?as:bt.current,h=To(e,h));var A=n.getDerivedStateFromProps;(y=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==v||w!==h)&&rg(e,a,r,h),qr=!1,w=e.memoizedState,a.state=w,dc(e,r,a,i);var O=e.memoizedState;c!==v||w!==O||qt.current||qr?(typeof A=="function"&&(jd(e,n,A,r),O=e.memoizedState),(p=qr||ng(e,n,p,r,w,O,h)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,O,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,O,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=O),a.props=r,a.state=O,a.context=h,r=p):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return Bd(t,e,n,r,s,i)}function Bd(t,e,n,r,i,s){C0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Km(e,n,!1),_r(t,e,s);r=e.stateNode,PT.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Io(e,t.child,null,s),e.child=Io(e,null,c,s)):Dt(t,e,c,s),e.memoizedState=r.state,i&&Km(e,n,!0),e.child}function R0(t){var e=t.stateNode;e.pendingContext?Gm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gm(t,e.context,!1),ep(t,e.containerInfo)}function cg(t,e,n,r,i){return xo(),Kf(i),e.flags|=256,Dt(t,e,n,r),e.child}var $d={dehydrated:null,treeContext:null,retryLane:0};function Hd(t){return{baseLanes:t,cachePool:null,transitions:null}}function b0(t,e,n){var r=e.pendingProps,i=Ue.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(Ue,i&1),t===null)return Ld(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Qc(a,r,0,null),t=is(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Hd(n),e.memoizedState=$d,t):lp(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return NT(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=ui(i,h),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=ui(c,s):(s=is(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Hd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=$d,r}return s=t.child,t=s.sibling,r=ui(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lp(t,e){return e=Qc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eu(t,e,n,r){return r!==null&&Kf(r),Io(e,t.child,null,n),t=lp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NT(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Wh(Error(H(422))),Eu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Qc({mode:"visible",children:r.children},i,0,null),s=is(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Io(e,t.child,null,a),e.child.memoizedState=Hd(a),e.memoizedState=$d,s);if(!(e.mode&1))return Eu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(H(419)),r=Wh(s,r,void 0),Eu(t,e,a,r)}if(c=(a&t.childLanes)!==0,Wt||c){if(r=lt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vr(t,i),kn(r,t,i,-1))}return pp(),r=Wh(Error(H(421))),Eu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WT.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=si(i.nextSibling),Zt=e,je=!0,xn=null,t!==null&&(cn[hn++]=ur,cn[hn++]=cr,cn[hn++]=ls,ur=t.id,cr=t.overflow,ls=e),e=lp(e,r.children),e.flags|=4096,e)}function hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vd(t.return,e,n)}function qh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function P0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hg(t,n,e);else if(t.tag===19)hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qh(e,!0,n,null,s);break;case"together":qh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ju(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ui(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ui(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OT(t,e,n){switch(e.tag){case 3:R0(e),xo();break;case 5:r0(e);break;case 1:Gt(e.type)&&ac(e);break;case 4:ep(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(cc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?b0(t,e,n):(Oe(Ue,Ue.current&1),t=_r(t,e,n),t!==null?t.sibling:null);Oe(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return P0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,k0(t,e,n)}return _r(t,e,n)}var N0,Wd,O0,D0;N0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wd=function(){};O0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,es(Hn.current);var s=null;switch(n){case"input":i=fd(t,i),r=fd(t,r),s=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),s=[];break;case"textarea":i=gd(t,i),r=gd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sc)}vd(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var c=i[p];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Ka.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var h=r[p];if(c=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&h!==c&&(h!=null||c!=null))if(p==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(s||(s=[]),s.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(s=s||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Ka.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&Me("scroll",t),s||c===h||(s=[])):(s=s||[]).push(p,h))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};D0=function(t,e,n,r){n!==r&&(e.flags|=4)};function va(t,e){if(!je)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function DT(t,e,n){var r=e.pendingProps;switch(Gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Gt(e.type)&&oc(),St(e),null;case 3:return r=e.stateNode,So(),Le(qt),Le(bt),np(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_u(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xn!==null&&(Zd(xn),xn=null))),Wd(t,e),St(e),null;case 5:tp(e);var i=es(ol.current);if(n=e.type,t!==null&&e.stateNode!=null)O0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return St(e),null}if(t=es(Hn.current),_u(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Bn]=e,r[il]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<ka.length;i++)Me(ka[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":wm(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":Tm(r,s),Me("invalid",r)}vd(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&vu(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&vu(r.textContent,c,t),i=["children",""+c]):Ka.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Me("scroll",r)}switch(n){case"input":cu(r),Em(r,s,!0);break;case"textarea":cu(r),xm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Bn]=e,t[il]=r,N0(t,e,!1,!1),e.stateNode=t;e:{switch(a=_d(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<ka.length;i++)Me(ka[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":wm(t,r),i=fd(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Tm(t,r),i=gd(t,r),Me("invalid",t);break;default:i=r}vd(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];s==="style"?hv(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&uv(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Qa(t,h):typeof h=="number"&&Qa(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ka.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Me("scroll",t):h!=null&&Nf(t,s,h,a))}switch(n){case"input":cu(t),Em(t,r,!1);break;case"textarea":cu(t),xm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ao(t,!!r.multiple,s,!1):r.defaultValue!=null&&ao(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)D0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=es(ol.current),es(Hn.current),_u(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bn]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:vu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bn]=e,e.stateNode=r}return St(e),null;case 13:if(Le(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(je&&Jt!==null&&e.mode&1&&!(e.flags&128))Jv(),xo(),e.flags|=98560,s=!1;else if(s=_u(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Bn]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else xn!==null&&(Zd(xn),xn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?tt===0&&(tt=3):pp())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return So(),Wd(t,e),t===null&&nl(e.stateNode.containerInfo),St(e),null;case 10:return Xf(e.type._context),St(e),null;case 17:return Gt(e.type)&&oc(),St(e),null;case 19:if(Le(Ue),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)va(s,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=fc(t),a!==null){for(e.flags|=128,va(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>ko&&(e.flags|=128,r=!0,va(s,!1),e.lanes=4194304)}else{if(!r)if(t=fc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!je)return St(e),null}else 2*Ge()-s.renderingStartTime>ko&&n!==1073741824&&(e.flags|=128,r=!0,va(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Ue.current,Oe(Ue,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return fp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function MT(t,e){switch(Gf(e),e.tag){case 1:return Gt(e.type)&&oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return So(),Le(qt),Le(bt),np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tp(e),null;case 13:if(Le(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Ue),null;case 4:return So(),null;case 10:return Xf(e.type._context),null;case 22:case 23:return fp(),null;case 24:return null;default:return null}}var Tu=!1,Ct=!1,LT=typeof WeakSet=="function"?WeakSet:Set,Y=null;function io(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function qd(t,e,n){try{n()}catch(r){He(t,e,r)}}var dg=!1;function VT(t,e){if(Rd=nc,t=Fv(),Wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,p=0,y=0,v=t,w=null;t:for(;;){for(var A;v!==n||i!==0&&v.nodeType!==3||(c=a+i),v!==s||r!==0&&v.nodeType!==3||(h=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(A=v.firstChild)!==null;)w=v,v=A;for(;;){if(v===t)break t;if(w===n&&++p===i&&(c=a),w===s&&++y===r&&(h=a),(A=v.nextSibling)!==null)break;v=w,w=v.parentNode}v=A}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},nc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var O=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var M=O.memoizedProps,L=O.memoizedState,k=e.stateNode,x=k.getSnapshotBeforeUpdate(e.elementType===e.type?M:En(e.type,M),L);k.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(V){He(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return O=dg,dg=!1,O}function Ua(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&qd(e,n,s)}i=i.next}while(i!==r)}}function Gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function M0(t){var e=t.alternate;e!==null&&(t.alternate=null,M0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bn],delete e[il],delete e[Od],delete e[_T],delete e[wT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function L0(t){return t.tag===5||t.tag===3||t.tag===4}function fg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||L0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sc));else if(r!==4&&(t=t.child,t!==null))for(Kd(t,e,n),t=t.sibling;t!==null;)Kd(t,e,n),t=t.sibling}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}var ft=null,Tn=!1;function zr(t,e,n){for(n=n.child;n!==null;)V0(t,e,n),n=n.sibling}function V0(t,e,n){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Fc,n)}catch{}switch(n.tag){case 5:Ct||io(n,e);case 6:var r=ft,i=Tn;ft=null,zr(t,e,n),ft=r,Tn=i,ft!==null&&(Tn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(Tn?(t=ft,n=n.stateNode,t.nodeType===8?Fh(t.parentNode,n):t.nodeType===1&&Fh(t,n),Za(t)):Fh(ft,n.stateNode));break;case 4:r=ft,i=Tn,ft=n.stateNode.containerInfo,Tn=!0,zr(t,e,n),ft=r,Tn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&qd(n,e,a),i=i.next}while(i!==r)}zr(t,e,n);break;case 1:if(!Ct&&(io(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){He(n,e,c)}zr(t,e,n);break;case 21:zr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,zr(t,e,n),Ct=r):zr(t,e,n);break;default:zr(t,e,n)}}function pg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LT),e.forEach(function(r){var i=qT.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:ft=c.stateNode,Tn=!1;break e;case 3:ft=c.stateNode.containerInfo,Tn=!0;break e;case 4:ft=c.stateNode.containerInfo,Tn=!0;break e}c=c.return}if(ft===null)throw Error(H(160));V0(s,a,i),ft=null,Tn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(p){He(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)j0(e,t),e=e.sibling}function j0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),Un(t),r&4){try{Ua(3,t,t.return),Gc(3,t)}catch(M){He(t,t.return,M)}try{Ua(5,t,t.return)}catch(M){He(t,t.return,M)}}break;case 1:wn(e,t),Un(t),r&512&&n!==null&&io(n,n.return);break;case 5:if(wn(e,t),Un(t),r&512&&n!==null&&io(n,n.return),t.flags&32){var i=t.stateNode;try{Qa(i,"")}catch(M){He(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&ov(i,s),_d(c,a);var p=_d(c,s);for(a=0;a<h.length;a+=2){var y=h[a],v=h[a+1];y==="style"?hv(i,v):y==="dangerouslySetInnerHTML"?uv(i,v):y==="children"?Qa(i,v):Nf(i,y,v,p)}switch(c){case"input":pd(i,s);break;case"textarea":av(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var A=s.value;A!=null?ao(i,!!s.multiple,A,!1):w!==!!s.multiple&&(s.defaultValue!=null?ao(i,!!s.multiple,s.defaultValue,!0):ao(i,!!s.multiple,s.multiple?[]:"",!1))}i[il]=s}catch(M){He(t,t.return,M)}}break;case 6:if(wn(e,t),Un(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(M){He(t,t.return,M)}}break;case 3:if(wn(e,t),Un(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Za(e.containerInfo)}catch(M){He(t,t.return,M)}break;case 4:wn(e,t),Un(t);break;case 13:wn(e,t),Un(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(hp=Ge())),r&4&&pg(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(p=Ct)||y,wn(e,t),Ct=p):wn(e,t),Un(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!y&&t.mode&1)for(Y=t,y=t.child;y!==null;){for(v=Y=y;Y!==null;){switch(w=Y,A=w.child,w.tag){case 0:case 11:case 14:case 15:Ua(4,w,w.return);break;case 1:io(w,w.return);var O=w.stateNode;if(typeof O.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,O.props=e.memoizedProps,O.state=e.memoizedState,O.componentWillUnmount()}catch(M){He(r,n,M)}}break;case 5:io(w,w.return);break;case 22:if(w.memoizedState!==null){gg(v);continue}}A!==null?(A.return=w,Y=A):gg(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{i=v.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=v.stateNode,h=v.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=cv("display",a))}catch(M){He(t,t.return,M)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(M){He(t,t.return,M)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:wn(e,t),Un(t),r&4&&pg(t);break;case 21:break;default:wn(e,t),Un(t)}}function Un(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(L0(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qa(i,""),r.flags&=-33);var s=fg(t);Qd(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=fg(t);Kd(t,c,a);break;default:throw Error(H(161))}}catch(h){He(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jT(t,e,n){Y=t,F0(t)}function F0(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Tu;if(!a){var c=i.alternate,h=c!==null&&c.memoizedState!==null||Ct;c=Tu;var p=Ct;if(Tu=a,(Ct=h)&&!p)for(Y=i;Y!==null;)a=Y,h=a.child,a.tag===22&&a.memoizedState!==null?yg(i):h!==null?(h.return=a,Y=h):yg(i);for(;s!==null;)Y=s,F0(s),s=s.sibling;Y=i,Tu=c,Ct=p}mg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):mg(t)}}function mg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||Gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:En(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zm(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zm(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var y=p.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Za(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Ct||e.flags&512&&Gd(e)}catch(w){He(e,e.return,w)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function gg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function yg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gc(4,e)}catch(h){He(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){He(e,i,h)}}var s=e.return;try{Gd(e)}catch(h){He(e,s,h)}break;case 5:var a=e.return;try{Gd(e)}catch(h){He(e,a,h)}}}catch(h){He(e,e.return,h)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var FT=Math.ceil,gc=Sr.ReactCurrentDispatcher,up=Sr.ReactCurrentOwner,pn=Sr.ReactCurrentBatchConfig,_e=0,lt=null,Xe=null,gt=0,Xt=0,so=_i(0),tt=0,cl=null,cs=0,Kc=0,cp=0,za=null,Ht=null,hp=0,ko=1/0,ar=null,yc=!1,Yd=null,ai=null,xu=!1,ei=null,vc=0,Ba=0,Xd=null,Fu=-1,Uu=0;function Mt(){return _e&6?Ge():Fu!==-1?Fu:Fu=Ge()}function li(t){return t.mode&1?_e&2&&gt!==0?gt&-gt:TT.transition!==null?(Uu===0&&(Uu=xv()),Uu):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:bv(t.type)),t):1}function kn(t,e,n,r){if(50<Ba)throw Ba=0,Xd=null,Error(H(185));Tl(t,n,r),(!(_e&2)||t!==lt)&&(t===lt&&(!(_e&2)&&(Kc|=n),tt===4&&Kr(t,gt)),Kt(t,r),n===1&&_e===0&&!(e.mode&1)&&(ko=Ge()+500,Hc&&wi()))}function Kt(t,e){var n=t.callbackNode;T1(t,e);var r=tc(t,t===lt?gt:0);if(r===0)n!==null&&Am(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Am(n),e===1)t.tag===0?ET(vg.bind(null,t)):Qv(vg.bind(null,t)),yT(function(){!(_e&6)&&wi()}),n=null;else{switch(Iv(r)){case 1:n=Vf;break;case 4:n=Ev;break;case 16:n=ec;break;case 536870912:n=Tv;break;default:n=ec}n=G0(n,U0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function U0(t,e){if(Fu=-1,Uu=0,_e&6)throw Error(H(327));var n=t.callbackNode;if(fo()&&t.callbackNode!==n)return null;var r=tc(t,t===lt?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_c(t,r);else{e=r;var i=_e;_e|=2;var s=B0();(lt!==t||gt!==e)&&(ar=null,ko=Ge()+500,rs(t,e));do try{BT();break}catch(c){z0(t,c)}while(!0);Yf(),gc.current=s,_e=i,Xe!==null?e=0:(lt=null,gt=0,e=tt)}if(e!==0){if(e===2&&(i=Id(t),i!==0&&(r=i,e=Jd(t,i))),e===1)throw n=cl,rs(t,0),Kr(t,r),Kt(t,Ge()),n;if(e===6)Kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!UT(i)&&(e=_c(t,r),e===2&&(s=Id(t),s!==0&&(r=s,e=Jd(t,s))),e===1))throw n=cl,rs(t,0),Kr(t,r),Kt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Yi(t,Ht,ar);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=hp+500-Ge(),10<e)){if(tc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Nd(Yi.bind(null,t,Ht,ar),e);break}Yi(t,Ht,ar);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-An(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FT(r/1960))-r,10<r){t.timeoutHandle=Nd(Yi.bind(null,t,Ht,ar),r);break}Yi(t,Ht,ar);break;case 5:Yi(t,Ht,ar);break;default:throw Error(H(329))}}}return Kt(t,Ge()),t.callbackNode===n?U0.bind(null,t):null}function Jd(t,e){var n=za;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=_c(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Zd(e)),t}function Zd(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function UT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~cp,e&=~Kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-An(e),r=1<<n;t[n]=-1,e&=~r}}function vg(t){if(_e&6)throw Error(H(327));fo();var e=tc(t,0);if(!(e&1))return Kt(t,Ge()),null;var n=_c(t,e);if(t.tag!==0&&n===2){var r=Id(t);r!==0&&(e=r,n=Jd(t,r))}if(n===1)throw n=cl,rs(t,0),Kr(t,e),Kt(t,Ge()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,Ht,ar),Kt(t,Ge()),null}function dp(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(ko=Ge()+500,Hc&&wi())}}function hs(t){ei!==null&&ei.tag===0&&!(_e&6)&&fo();var e=_e;_e|=1;var n=pn.transition,r=Ce;try{if(pn.transition=null,Ce=1,t)return t()}finally{Ce=r,pn.transition=n,_e=e,!(_e&6)&&wi()}}function fp(){Xt=so.current,Le(so)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gT(n)),Xe!==null)for(n=Xe.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oc();break;case 3:So(),Le(qt),Le(bt),np();break;case 5:tp(r);break;case 4:So();break;case 13:Le(Ue);break;case 19:Le(Ue);break;case 10:Xf(r.type._context);break;case 22:case 23:fp()}n=n.return}if(lt=t,Xe=t=ui(t.current,null),gt=Xt=e,tt=0,cl=null,cp=Kc=cs=0,Ht=za=null,Zi!==null){for(e=0;e<Zi.length;e++)if(n=Zi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Zi=null}return t}function z0(t,e){do{var n=Xe;try{if(Yf(),Lu.current=mc,pc){for(var r=ze.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pc=!1}if(us=0,at=Ze=ze=null,Fa=!1,al=0,up.current=null,n===null||n.return===null){tt=1,cl=e,Xe=null;break}e:{var s=t,a=n.return,c=n,h=e;if(e=gt,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,y=c,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var w=y.alternate;w?(y.updateQueue=w.updateQueue,y.memoizedState=w.memoizedState,y.lanes=w.lanes):(y.updateQueue=null,y.memoizedState=null)}var A=sg(a);if(A!==null){A.flags&=-257,og(A,a,c,s,e),A.mode&1&&ig(s,p,e),e=A,h=p;var O=e.updateQueue;if(O===null){var M=new Set;M.add(h),e.updateQueue=M}else O.add(h);break e}else{if(!(e&1)){ig(s,p,e),pp();break e}h=Error(H(426))}}else if(je&&c.mode&1){var L=sg(a);if(L!==null){!(L.flags&65536)&&(L.flags|=256),og(L,a,c,s,e),Kf(Ao(h,c));break e}}s=h=Ao(h,c),tt!==4&&(tt=2),za===null?za=[s]:za.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=I0(s,h,e);Jm(s,k);break e;case 1:c=h;var x=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(ai===null||!ai.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=S0(s,c,e);Jm(s,V);break e}}s=s.return}while(s!==null)}H0(n)}catch(F){e=F,Xe===n&&n!==null&&(Xe=n=n.return);continue}break}while(!0)}function B0(){var t=gc.current;return gc.current=mc,t===null?mc:t}function pp(){(tt===0||tt===3||tt===2)&&(tt=4),lt===null||!(cs&268435455)&&!(Kc&268435455)||Kr(lt,gt)}function _c(t,e){var n=_e;_e|=2;var r=B0();(lt!==t||gt!==e)&&(ar=null,rs(t,e));do try{zT();break}catch(i){z0(t,i)}while(!0);if(Yf(),_e=n,gc.current=r,Xe!==null)throw Error(H(261));return lt=null,gt=0,tt}function zT(){for(;Xe!==null;)$0(Xe)}function BT(){for(;Xe!==null&&!f1();)$0(Xe)}function $0(t){var e=q0(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?H0(t):Xe=e,up.current=null}function H0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=MT(n,e),n!==null){n.flags&=32767,Xe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Xe=null;return}}else if(n=DT(n,e,Xt),n!==null){Xe=n;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);tt===0&&(tt=5)}function Yi(t,e,n){var r=Ce,i=pn.transition;try{pn.transition=null,Ce=1,$T(t,e,n,r)}finally{pn.transition=i,Ce=r}return null}function $T(t,e,n,r){do fo();while(ei!==null);if(_e&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(x1(t,s),t===lt&&(Xe=lt=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xu||(xu=!0,G0(ec,function(){return fo(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pn.transition,pn.transition=null;var a=Ce;Ce=1;var c=_e;_e|=4,up.current=null,VT(t,n),j0(n,t),uT(bd),nc=!!Rd,bd=Rd=null,t.current=n,jT(n),p1(),_e=c,Ce=a,pn.transition=s}else t.current=n;if(xu&&(xu=!1,ei=t,vc=i),s=t.pendingLanes,s===0&&(ai=null),y1(n.stateNode),Kt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yc)throw yc=!1,t=Yd,Yd=null,t;return vc&1&&t.tag!==0&&fo(),s=t.pendingLanes,s&1?t===Xd?Ba++:(Ba=0,Xd=t):Ba=0,wi(),null}function fo(){if(ei!==null){var t=Iv(vc),e=pn.transition,n=Ce;try{if(pn.transition=null,Ce=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,vc=0,_e&6)throw Error(H(331));var i=_e;for(_e|=4,Y=t.current;Y!==null;){var s=Y,a=s.child;if(Y.flags&16){var c=s.deletions;if(c!==null){for(var h=0;h<c.length;h++){var p=c[h];for(Y=p;Y!==null;){var y=Y;switch(y.tag){case 0:case 11:case 15:Ua(8,y,s)}var v=y.child;if(v!==null)v.return=y,Y=v;else for(;Y!==null;){y=Y;var w=y.sibling,A=y.return;if(M0(y),y===p){Y=null;break}if(w!==null){w.return=A,Y=w;break}Y=A}}}var O=s.alternate;if(O!==null){var M=O.child;if(M!==null){O.child=null;do{var L=M.sibling;M.sibling=null,M=L}while(M!==null)}}Y=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Y=a;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ua(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,Y=k;break e}Y=s.return}}var x=t.current;for(Y=x;Y!==null;){a=Y;var P=a.child;if(a.subtreeFlags&2064&&P!==null)P.return=a,Y=P;else e:for(a=x;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Gc(9,c)}}catch(F){He(c,c.return,F)}if(c===a){Y=null;break e}var V=c.sibling;if(V!==null){V.return=c.return,Y=V;break e}Y=c.return}}if(_e=i,wi(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Fc,t)}catch{}r=!0}return r}finally{Ce=n,pn.transition=e}}return!1}function _g(t,e,n){e=Ao(n,e),e=I0(t,e,1),t=oi(t,e,1),e=Mt(),t!==null&&(Tl(t,1,e),Kt(t,e))}function He(t,e,n){if(t.tag===3)_g(t,t,n);else for(;e!==null;){if(e.tag===3){_g(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ai===null||!ai.has(r))){t=Ao(n,t),t=S0(e,t,1),e=oi(e,t,1),t=Mt(),e!==null&&(Tl(e,1,t),Kt(e,t));break}}e=e.return}}function HT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mt(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(gt&n)===n&&(tt===4||tt===3&&(gt&130023424)===gt&&500>Ge()-hp?rs(t,0):cp|=n),Kt(t,e)}function W0(t,e){e===0&&(t.mode&1?(e=fu,fu<<=1,!(fu&130023424)&&(fu=4194304)):e=1);var n=Mt();t=vr(t,e),t!==null&&(Tl(t,e,n),Kt(t,n))}function WT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),W0(t,n)}function qT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),W0(t,n)}var q0;q0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,OT(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,je&&e.flags&1048576&&Yv(e,uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ju(t,e),t=e.pendingProps;var i=To(e,bt.current);ho(e,n),i=ip(null,e,r,t,i,n);var s=sp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(s=!0,ac(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zf(e),i.updater=qc,e.stateNode=i,i._reactInternals=e,Fd(e,r,t,n),e=Bd(null,e,r,!0,s,n)):(e.tag=0,je&&s&&qf(e),Dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ju(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KT(r),t=En(r,t),i){case 0:e=zd(null,e,r,t,n);break e;case 1:e=ug(null,e,r,t,n);break e;case 11:e=ag(null,e,r,t,n);break e;case 14:e=lg(null,e,r,En(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),zd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),ug(t,e,r,i,n);case 3:e:{if(R0(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,n0(t,e),dc(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ao(Error(H(423)),e),e=cg(t,e,r,n,i);break e}else if(r!==i){i=Ao(Error(H(424)),e),e=cg(t,e,r,n,i);break e}else for(Jt=si(e.stateNode.containerInfo.firstChild),Zt=e,je=!0,xn=null,n=e0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),r===i){e=_r(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return r0(e),t===null&&Ld(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Pd(r,i)?a=null:s!==null&&Pd(r,s)&&(e.flags|=32),C0(t,e),Dt(t,e,a,n),e.child;case 6:return t===null&&Ld(e),null;case 13:return b0(t,e,n);case 4:return ep(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Io(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),ag(t,e,r,i,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Oe(cc,r._currentValue),r._currentValue=a,s!==null)if(Cn(s.value,a)){if(s.children===i.children&&!qt.current){e=_r(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var h=c.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=pr(-1,n&-n),h.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var y=p.pending;y===null?h.next=h:(h.next=y.next,y.next=h),p.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),Vd(s.return,n,e),c.lanes|=n;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(H(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Vd(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ho(e,n),i=gn(i),r=r(i),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,i=En(r,e.pendingProps),i=En(r.type,i),lg(t,e,r,i,n);case 15:return A0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:En(r,i),ju(t,e),e.tag=1,Gt(r)?(t=!0,ac(e)):t=!1,ho(e,n),x0(e,r,i),Fd(e,r,i,n),Bd(null,e,r,!0,t,n);case 19:return P0(t,e,n);case 22:return k0(t,e,n)}throw Error(H(156,e.tag))};function G0(t,e){return wv(t,e)}function GT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new GT(t,e,n,r)}function mp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KT(t){if(typeof t=="function")return mp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Df)return 11;if(t===Mf)return 14}return 2}function ui(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zu(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")mp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Qs:return is(n.children,i,s,e);case Of:a=8,i|=8;break;case ud:return t=fn(12,n,e,i|2),t.elementType=ud,t.lanes=s,t;case cd:return t=fn(13,n,e,i),t.elementType=cd,t.lanes=s,t;case hd:return t=fn(19,n,e,i),t.elementType=hd,t.lanes=s,t;case rv:return Qc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tv:a=10;break e;case nv:a=9;break e;case Df:a=11;break e;case Mf:a=14;break e;case Wr:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=fn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function is(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function Qc(t,e,n,r){return t=fn(22,t,r,e),t.elementType=rv,t.lanes=n,t.stateNode={isHidden:!1},t}function Gh(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function Kh(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gp(t,e,n,r,i,s,a,c,h){return t=new QT(t,e,n,c,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(s),t}function YT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K0(t){if(!t)return pi;t=t._reactInternals;e:{if(vs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Gt(n))return Kv(t,n,e)}return e}function Q0(t,e,n,r,i,s,a,c,h){return t=gp(n,r,!0,t,i,s,a,c,h),t.context=K0(null),n=t.current,r=Mt(),i=li(n),s=pr(r,i),s.callback=e??null,oi(n,s,i),t.current.lanes=i,Tl(t,i,r),Kt(t,r),t}function Yc(t,e,n,r){var i=e.current,s=Mt(),a=li(i);return n=K0(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oi(i,e,a),t!==null&&(kn(t,i,a,s),Mu(t,i,a)),a}function wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yp(t,e){wg(t,e),(t=t.alternate)&&wg(t,e)}function XT(){return null}var Y0=typeof reportError=="function"?reportError:function(t){console.error(t)};function vp(t){this._internalRoot=t}Xc.prototype.render=vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Yc(t,e,null,null)};Xc.prototype.unmount=vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Yc(null,t,null,null)}),e[yr]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=kv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&Rv(t)}};function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Eg(){}function JT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=wc(a);s.call(p)}}var a=Q0(e,r,t,0,null,!1,!1,"",Eg);return t._reactRootContainer=a,t[yr]=a.current,nl(t.nodeType===8?t.parentNode:t),hs(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var p=wc(h);c.call(p)}}var h=gp(t,0,!1,null,null,!1,!1,"",Eg);return t._reactRootContainer=h,t[yr]=h.current,nl(t.nodeType===8?t.parentNode:t),hs(function(){Yc(e,h,n,r)}),h}function Zc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var h=wc(a);c.call(h)}}Yc(e,a,t,i)}else a=JT(n,e,t,i,r);return wc(a)}Sv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(jf(e,n|1),Kt(e,Ge()),!(_e&6)&&(ko=Ge()+500,wi()))}break;case 13:hs(function(){var r=vr(t,1);if(r!==null){var i=Mt();kn(r,t,1,i)}}),yp(t,1)}};Ff=function(t){if(t.tag===13){var e=vr(t,134217728);if(e!==null){var n=Mt();kn(e,t,134217728,n)}yp(t,134217728)}};Av=function(t){if(t.tag===13){var e=li(t),n=vr(t,e);if(n!==null){var r=Mt();kn(n,t,e,r)}yp(t,e)}};kv=function(){return Ce};Cv=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Ed=function(t,e,n){switch(e){case"input":if(pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$c(r);if(!i)throw Error(H(90));sv(r),pd(r,i)}}}break;case"textarea":av(t,n);break;case"select":e=n.value,e!=null&&ao(t,!!n.multiple,e,!1)}};pv=dp;mv=hs;var ZT={usingClientEntryPoint:!1,Events:[Il,Zs,$c,dv,fv,dp]},_a={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ex={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vv(t),t===null?null:t.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||XT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{Fc=Iu.inject(ex),$n=Iu}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZT;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(H(200));return YT(t,e,null,n)};nn.createRoot=function(t,e){if(!_p(t))throw Error(H(299));var n=!1,r="",i=Y0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gp(t,1,!1,null,null,n,!1,r,i),t[yr]=e.current,nl(t.nodeType===8?t.parentNode:t),new vp(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=vv(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return hs(t)};nn.hydrate=function(t,e,n){if(!Jc(e))throw Error(H(200));return Zc(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!_p(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Y0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Q0(e,null,t,1,n??null,i,!1,s,a),t[yr]=e.current,nl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xc(e)};nn.render=function(t,e,n){if(!Jc(e))throw Error(H(200));return Zc(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!Jc(t))throw Error(H(40));return t._reactRootContainer?(hs(function(){Zc(null,null,t,!1,function(){t._reactRootContainer=null,t[yr]=null})}),!0):!1};nn.unstable_batchedUpdates=dp;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Zc(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function X0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X0)}catch(t){console.error(t)}}X0(),Xy.exports=nn;var tx=Xy.exports,Tg=tx;ad.createRoot=Tg.createRoot,ad.hydrateRoot=Tg.hydrateRoot;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(t,e)=>{const n=Q.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:c="",children:h,...p},y)=>Q.createElement("svg",{ref:y,...nx,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${rx(t)}`,c].join(" "),...p},[...e.map(([v,w])=>Q.createElement(v,w)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=Pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=Pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=Pe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wp=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=Pe("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Pe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=Pe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=Pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var xg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},xx=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},r_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,h=i+2<t.length,p=h?t[i+2]:0,y=s>>2,v=(s&3)<<4|c>>4;let w=(c&15)<<2|p>>6,A=p&63;h||(A=64,a||(w=64)),r.push(n[y],n[v],n[w],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||p==null||v==null)throw new Ix;const w=s<<2|c>>4;if(r.push(w),p!==64){const A=c<<4&240|p>>2;if(r.push(A),v!==64){const O=p<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ix extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sx=function(t){const e=n_(t);return r_.encodeByteArray(e,!0)},Ec=function(t){return Sx(t).replace(/\./g,"")},i_=function(t){try{return r_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=()=>Ax().__FIREBASE_DEFAULTS__,Cx=()=>{if(typeof process>"u"||typeof xg>"u")return;const t=xg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&i_(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return kx()||Cx()||Rx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s_=t=>{var e,n;return(n=(e=eh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bx=t=>{const e=s_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},o_=()=>{var t;return(t=eh())===null||t===void 0?void 0:t.config},a_=t=>{var e;return(e=eh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ec(JSON.stringify(n)),Ec(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ox(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function Dx(){var t;const e=(t=eh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Lx(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Vx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jx(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Fx(){return!Dx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ux(){try{return typeof indexedDB=="object"}catch{return!1}}function zx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Bx,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?$x(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ar(i,c,r)}}function $x(t,e){return t.replace(Hx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Hx=/\{\$([^}]+)}/g;function Wx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Ig(s)&&Ig(a)){if(!hl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ig(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ca(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ra(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function qx(t,e){const n=new Gx(t,e);return n.subscribe.bind(n)}class Gx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Kx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Qh),i.error===void 0&&(i.error=Qh),i.complete===void 0&&(i.complete=Qh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Px;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Xx(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yx(t){return t===Xi?void 0:t}function Xx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Qx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ye||(ye={}));const Zx={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},eI=ye.INFO,tI={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},nI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=tI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ip{constructor(e){this.name=e,this._logLevel=eI,this._logHandler=nI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}}const rI=(t,e)=>e.some(n=>t instanceof n);let Sg,Ag;function iI(){return Sg||(Sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sI(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l_=new WeakMap,tf=new WeakMap,u_=new WeakMap,Yh=new WeakMap,Sp=new WeakMap;function oI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(ci(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&l_.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function aI(t){if(tf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});tf.set(t,e)}let nf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||u_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lI(t){nf=t(nf)}function uI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Xh(this),e,...n);return u_.set(r,e.sort?e.sort():[e]),ci(r)}:sI().includes(t)?function(...e){return t.apply(Xh(this),e),ci(l_.get(this))}:function(...e){return ci(t.apply(Xh(this),e))}}function cI(t){return typeof t=="function"?uI(t):(t instanceof IDBTransaction&&aI(t),rI(t,iI())?new Proxy(t,nf):t)}function ci(t){if(t instanceof IDBRequest)return oI(t);if(Yh.has(t))return Yh.get(t);const e=cI(t);return e!==t&&(Yh.set(t,e),Sp.set(e,t)),e}const Xh=t=>Sp.get(t);function hI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=ci(a);return r&&a.addEventListener("upgradeneeded",h=>{r(ci(a.result),h.oldVersion,h.newVersion,ci(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const dI=["get","getKey","getAll","getAllKeys","count"],fI=["put","add","delete","clear"],Jh=new Map;function kg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=fI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dI.includes(n)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[n](...c),i&&h.done]))[0]};return Jh.set(e,s),s}lI(t=>({...t,get:(e,n,r)=>kg(e,n)||t.get(e,n,r),has:(e,n)=>!!kg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rf="@firebase/app",Cg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Ip("@firebase/app"),gI="@firebase/app-compat",yI="@firebase/analytics-compat",vI="@firebase/analytics",_I="@firebase/app-check-compat",wI="@firebase/app-check",EI="@firebase/auth",TI="@firebase/auth-compat",xI="@firebase/database",II="@firebase/data-connect",SI="@firebase/database-compat",AI="@firebase/functions",kI="@firebase/functions-compat",CI="@firebase/installations",RI="@firebase/installations-compat",bI="@firebase/messaging",PI="@firebase/messaging-compat",NI="@firebase/performance",OI="@firebase/performance-compat",DI="@firebase/remote-config",MI="@firebase/remote-config-compat",LI="@firebase/storage",VI="@firebase/storage-compat",jI="@firebase/firestore",FI="@firebase/vertexai-preview",UI="@firebase/firestore-compat",zI="firebase",BI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",$I={[rf]:"fire-core",[gI]:"fire-core-compat",[vI]:"fire-analytics",[yI]:"fire-analytics-compat",[wI]:"fire-app-check",[_I]:"fire-app-check-compat",[EI]:"fire-auth",[TI]:"fire-auth-compat",[xI]:"fire-rtdb",[II]:"fire-data-connect",[SI]:"fire-rtdb-compat",[AI]:"fire-fn",[kI]:"fire-fn-compat",[CI]:"fire-iid",[RI]:"fire-iid-compat",[bI]:"fire-fcm",[PI]:"fire-fcm-compat",[NI]:"fire-perf",[OI]:"fire-perf-compat",[DI]:"fire-rc",[MI]:"fire-rc-compat",[LI]:"fire-gcs",[VI]:"fire-gcs-compat",[jI]:"fire-fst",[UI]:"fire-fst-compat",[FI]:"fire-vertex","fire-js":"fire-js",[zI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,HI=new Map,of=new Map;function Rg(t,e){try{t.container.addComponent(e)}catch(n){wr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Co(t){const e=t.name;if(of.has(e))return wr.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,t);for(const n of Tc.values())Rg(n,t);for(const n of HI.values())Rg(n,t);return!0}function Ap(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hi=new Al("app","Firebase",WI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=BI;function c_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hi.create("bad-app-name",{appName:String(i)});if(n||(n=o_()),!n)throw hi.create("no-options");const s=Tc.get(i);if(s){if(hl(n,s.options)&&hl(r,s.config))return s;throw hi.create("duplicate-app",{appName:i})}const a=new Jx(i);for(const h of of.values())a.addComponent(h);const c=new qI(n,r,a);return Tc.set(i,c),c}function h_(t=sf){const e=Tc.get(t);if(!e&&t===sf&&o_())return c_();if(!e)throw hi.create("no-app",{appName:t});return e}function di(t,e,n){var r;let i=(r=$I[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wr.warn(c.join(" "));return}Co(new ds(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="firebase-heartbeat-database",KI=1,dl="firebase-heartbeat-store";let Zh=null;function d_(){return Zh||(Zh=hI(GI,KI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw hi.create("idb-open",{originalErrorMessage:t.message})})),Zh}async function QI(t){try{const n=(await d_()).transaction(dl),r=await n.objectStore(dl).get(f_(t));return await n.done,r}catch(e){if(e instanceof Ar)wr.warn(e.message);else{const n=hi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wr.warn(n.message)}}}async function bg(t,e){try{const r=(await d_()).transaction(dl,"readwrite");await r.objectStore(dl).put(e,f_(t)),await r.done}catch(n){if(n instanceof Ar)wr.warn(n.message);else{const r=hi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wr.warn(r.message)}}}function f_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1024,XI=30*24*60*60*1e3;class JI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=XI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Pg(),{heartbeatsToSend:r,unsentEntries:i}=ZI(this._heartbeatsCache.heartbeats),s=Ec(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wr.warn(n),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function ZI(t,e=YI){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ng(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ng(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ux()?zx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ng(t){return Ec(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){Co(new ds("platform-logger",e=>new pI(e),"PRIVATE")),Co(new ds("heartbeat",e=>new JI(e),"PRIVATE")),di(rf,Cg,t),di(rf,Cg,"esm2017"),di("fire-js","")}tS("");var nS="firebase",rS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */di(nS,rS,"app");function kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function p_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iS=p_,m_=new Al("auth","Firebase",p_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Ip("@firebase/auth");function sS(t,...e){xc.logLevel<=ye.WARN&&xc.warn(`Auth (${Uo}): ${t}`,...e)}function Bu(t,...e){xc.logLevel<=ye.ERROR&&xc.error(`Auth (${Uo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(t,...e){throw Cp(t,...e)}function Wn(t,...e){return Cp(t,...e)}function g_(t,e,n){const r=Object.assign(Object.assign({},iS()),{[e]:n});return new Al("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return g_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m_.create(t,...e)}function oe(t,e,...n){if(!t)throw Cp(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Bu(e),new Error(e)}function Er(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function oS(){return Og()==="http:"||Og()==="https:"}function Og(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oS()||Lx()||"connection"in navigator)?navigator.onLine:!0}function lS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Er(n>e,"Short delay should be less than long delay!"),this.isMobile=Ox()||Vx()}get(){return aS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t,e){Er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=new Cl(3e4,6e4);function Ei(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ti(t,e,n,r,i={}){return v_(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=kl(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:h},s);return Mx()||(p.referrerPolicy="no-referrer"),y_.fetch()(__(t,t.config.apiHost,n,c),p)})}async function v_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},uS),e);try{const i=new dS(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Su(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Su(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Su(t,"user-disabled",a);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw g_(t,y,p);Rn(t,y)}}catch(i){if(i instanceof Ar)throw i;Rn(t,"network-request-failed",{message:String(i)})}}async function Rl(t,e,n,r,i={}){const s=await Ti(t,e,n,r,i);return"mfaPendingCredential"in s&&Rn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function __(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Rp(t.config,i):`${t.config.apiScheme}://${i}`}function hS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wn(this.auth,"network-request-failed")),cS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Su(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Wn(t,e,r);return i.customData._tokenResponse=n,i}function Dg(t){return t!==void 0&&t.enterprise!==void 0}class fS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function pS(t,e){return Ti(t,"GET","/v2/recaptchaConfig",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function w_(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gS(t,e=!1){const n=tn(t),r=await n.getIdToken(e),i=bp(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$a(ed(i.auth_time)),issuedAtTime:$a(ed(i.iat)),expirationTime:$a(ed(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function ed(t){return Number(t)*1e3}function bp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Bu("JWT malformed, contained fewer than 3 sections"),null;try{const i=i_(n);return i?JSON.parse(i):(Bu("Failed to decode base64 JWT payload"),null)}catch(i){return Bu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Mg(t){const e=bp(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&yS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function yS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$a(this.lastLoginAt),this.creationTime=$a(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ic(t){var e;const n=t.auth,r=await t.getIdToken(),i=await fl(t,w_(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?E_(s.providerUserInfo):[],c=wS(t.providerData,a),h=t.isAnonymous,p=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),y=h?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new lf(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(t,v)}async function _S(t){const e=tn(t);await Ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E_(t){return t.map(e=>{var{providerId:n}=e,r=kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(t,e){const n=await v_(t,{},async()=>{const r=kl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=__(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",y_.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TS(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Mg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ES(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new po;return r&&(oe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await fl(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gS(this,e)}reload(){return _S(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ic(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await fl(this,mS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,h,p,y;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,w=(i=n.email)!==null&&i!==void 0?i:void 0,A=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,O=(a=n.photoURL)!==null&&a!==void 0?a:void 0,M=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,k=(p=n.createdAt)!==null&&p!==void 0?p:void 0,x=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:P,emailVerified:V,isAnonymous:F,providerData:B,stsTokenManager:I}=n;oe(P&&I,e,"internal-error");const T=po.fromJSON(this.name,I);oe(typeof P=="string",e,"internal-error"),Br(v,e.name),Br(w,e.name),oe(typeof V=="boolean",e,"internal-error"),oe(typeof F=="boolean",e,"internal-error"),Br(A,e.name),Br(O,e.name),Br(M,e.name),Br(L,e.name),Br(k,e.name),Br(x,e.name);const S=new dr({uid:P,auth:e,email:w,emailVerified:V,displayName:v,isAnonymous:F,photoURL:O,phoneNumber:A,tenantId:M,stsTokenManager:T,createdAt:k,lastLoginAt:x});return B&&Array.isArray(B)&&(S.providerData=B.map(R=>Object.assign({},R))),L&&(S._redirectEventId=L),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new po;i.updateFromServerResponse(n);const s=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ic(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?E_(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new po;c.updateFromIdToken(r);const h=new dr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=new Map;function fr(t){Er(t instanceof Function,"Expected a class definition");let e=Lg.get(t);return e?(Er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}T_.type="NONE";const Vg=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t,e,n){return`firebase:${t}:${e}:${n}`}class mo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$u(this.userKey,i.apiKey,s),this.fullPersistenceKey=$u("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mo(fr(Vg),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let s=i[0]||fr(Vg);const a=$u(r,e.config.apiKey,e.name);let c=null;for(const p of n)try{const y=await p._get(a);if(y){const v=dr._fromJSON(e,y);p!==s&&(c=v),s=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new mo(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async p=>{if(p!==s)try{await p._remove(a)}catch{}})),new mo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(A_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C_(e))return"Blackberry";if(R_(e))return"Webos";if(I_(e))return"Safari";if((e.includes("chrome/")||S_(e))&&!e.includes("edge/"))return"Chrome";if(k_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x_(t=Pt()){return/firefox\//i.test(t)}function I_(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S_(t=Pt()){return/crios\//i.test(t)}function A_(t=Pt()){return/iemobile/i.test(t)}function k_(t=Pt()){return/android/i.test(t)}function C_(t=Pt()){return/blackberry/i.test(t)}function R_(t=Pt()){return/webos/i.test(t)}function Pp(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xS(t=Pt()){var e;return Pp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IS(){return jx()&&document.documentMode===10}function b_(t=Pt()){return Pp(t)||k_(t)||R_(t)||C_(t)||/windows phone/i.test(t)||A_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e=[]){let n;switch(t){case"Browser":n=jg(Pt());break;case"Worker":n=`${jg(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",Ei(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=6;class CS{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:kS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fg(this),this.idTokenSubscription=new Fg(this),this.beforeStateQueue=new SS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await mo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await w_(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(qn(this));const n=e?tn(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AS(this),n=new CS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await mo.create(this,[fr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xi(t){return tn(t)}class Fg{constructor(e){this.auth=e,this.observer=null,this.addObserver=qx(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bS(t){th=t}function N_(t){return th.loadJS(t)}function PS(){return th.recaptchaEnterpriseScript}function NS(){return th.gapiScript}function OS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const DS="recaptcha-enterprise",MS="NO_RECAPTCHA";class LS{constructor(e){this.type=DS,this.auth=xi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,c)=>{pS(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new fS(h);return s.tenantId==null?s._agentRecaptchaConfig=p:s._tenantRecaptchaConfigs[s.tenantId]=p,a(p.siteKey)}}).catch(h=>{c(h)})})}function i(s,a,c){const h=window.grecaptcha;Dg(h)?h.enterprise.ready(()=>{h.enterprise.execute(s,{action:e}).then(p=>{a(p)}).catch(()=>{a(MS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(c=>{if(!n&&Dg(window.grecaptcha))i(c,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=PS();h.length!==0&&(h+=c),N_(h).then(()=>{i(c,s,a)}).catch(p=>{a(p)})}}).catch(c=>{a(c)})})}}async function Ug(t,e,n,r=!1){const i=new LS(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function uf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Ug(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Ug(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e){const n=Ap(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(hl(s,e??{}))return i;Rn(i,"already-initialized")}return n.initialize({options:e})}function jS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FS(t,e,n){const r=xi(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=O_(e),{host:a,port:c}=US(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),zS()}function O_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function US(t){const e=O_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zg(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:zg(a)}}}function zg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function BS(t,e){return Ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e){return Rl(t,"POST","/v1/accounts:signInWithPassword",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}async function WS(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Np{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,n,"signInWithPassword",$S);case"emailLink":return HS(e,{email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uf(e,r,"signUpPassword",BS);case"emailLink":return WS(e,{idToken:n,email:this._email,oobCode:this._password});default:Rn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t,e){return Rl(t,"POST","/v1/accounts:signInWithIdp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS="http://localhost";class fs extends Np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=kp(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new fs(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return go(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,go(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,go(e,n)}buildRequest(){const e={requestUri:qS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=kl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KS(t){const e=Ca(Ra(t)).link,n=e?Ca(Ra(e)).deep_link_id:null,r=Ca(Ra(t)).deep_link_id;return(r?Ca(Ra(r)).link:null)||r||n||e||t}class Op{constructor(e){var n,r,i,s,a,c;const h=Ca(Ra(e)),p=(n=h.apiKey)!==null&&n!==void 0?n:null,y=(r=h.oobCode)!==null&&r!==void 0?r:null,v=GS((i=h.mode)!==null&&i!==void 0?i:null);oe(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(s=h.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=h.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=h.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=KS(e);try{return new Op(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Op.parseLink(n);return oe(r,"argument-error"),pl._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends D_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends bl{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qr.credential(e.oauthAccessToken)}catch{return null}}}Qr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends bl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fs._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yr.credential(n,r)}catch{return null}}}Yr.GOOGLE_SIGN_IN_METHOD="google.com";Yr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends bl{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xr.credential(e.oauthAccessToken)}catch{return null}}}Xr.GITHUB_SIGN_IN_METHOD="github.com";Xr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends bl{constructor(){super("twitter.com")}static credential(e,n){return fs._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Jr.credential(n,r)}catch{return null}}}Jr.TWITTER_SIGN_IN_METHOD="twitter.com";Jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(t,e){return Rl(t,"POST","/v1/accounts:signUp",Ei(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await dr._fromIdTokenResponse(e,r,i),a=Bg(r);return new Tr({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Bg(r);return new Tr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Bg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t){var e;if(In(t.app))return Promise.reject(qn(t));const n=xi(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Tr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await M_(n,{returnSecureToken:!0}),i=await Tr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Ar{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Sc(e,n,r,i)}}function L_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Sc._fromErrorAndOperation(t,s,e,r):s})}async function YS(t,e,n=!1){const r=await fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Tr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t,e,n=!1){const{auth:r}=t;if(In(r.app))return Promise.reject(qn(r));const i="reauthenticate";try{const s=await fl(t,L_(r,i,e,t),n);oe(s.idToken,r,"internal-error");const a=bp(s.idToken);oe(a,r,"internal-error");const{sub:c}=a;return oe(t.uid===c,r,"user-mismatch"),Tr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(t,e,n=!1){if(In(t.app))return Promise.reject(qn(t));const r="signIn",i=await L_(t,r,e),s=await Tr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JS(t,e){return V_(xi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j_(t){const e=xi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZS(t,e,n){if(In(t.app))return Promise.reject(qn(t));const r=xi(t),a=await uf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",M_).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&j_(t),h}),c=await Tr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function e2(t,e,n){return In(t.app)?Promise.reject(qn(t)):JS(tn(t),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&j_(t),r})}function t2(t,e,n,r){return tn(t).onIdTokenChanged(e,n,r)}function n2(t,e,n){return tn(t).beforeAuthStateChanged(e,n)}function r2(t){return tn(t).signOut()}const Ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ac,"1"),this.storage.removeItem(Ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=1e3,s2=10;class U_ extends F_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);IS()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,s2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}U_.type="LOCAL";const o2=U_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_ extends F_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}z_.type="SESSION";const B_=z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async p=>p(n.origin,s)),h=await a2(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const p=Dp("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(w.data.response);break;default:clearTimeout(y),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function u2(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function c2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function d2(){return $_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="firebaseLocalStorageDb",f2=1,kc="firebaseLocalStorage",W_="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(t,e){return t.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function p2(){const t=indexedDB.deleteDatabase(H_);return new Pl(t).toPromise()}function cf(){const t=indexedDB.open(H_,f2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kc,{keyPath:W_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kc)?e(r):(r.close(),await p2(),e(await cf()))})})}async function $g(t,e,n){const r=rh(t,!0).put({[W_]:e,value:n});return new Pl(r).toPromise()}async function m2(t,e){const n=rh(t,!1).get(e),r=await new Pl(n).toPromise();return r===void 0?null:r.value}function Hg(t,e){const n=rh(t,!0).delete(e);return new Pl(n).toPromise()}const g2=800,y2=3;class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>y2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(d2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await c2(),!this.activeServiceWorker)return;this.sender=new l2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||h2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cf();return await $g(e,Ac,"1"),await Hg(e,Ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$g(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>m2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=rh(i,!1).getAll();return new Pl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q_.type="LOCAL";const v2=q_;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t,e){return e?fr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp extends Np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return go(e,this._buildIdpRequest())}_linkToIdToken(e,n){return go(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return go(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w2(t){return V_(t.auth,new Mp(t),t.bypassAuthState)}function E2(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),XS(n,new Mp(t),t.bypassAuthState)}async function T2(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),YS(n,new Mp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w2;case"linkViaPopup":case"linkViaRedirect":return T2;case"reauthViaPopup":case"reauthViaRedirect":return E2;default:Rn(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new Cl(2e3,1e4);class oo extends G_{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oo.currentPopupAction&&oo.currentPopupAction.cancel(),oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=Dp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x2.get())};e()}}oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="pendingRedirect",Hu=new Map;class S2 extends G_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const r=await A2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function A2(t,e){const n=R2(e),r=C2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function k2(t,e){Hu.set(t._key(),e)}function C2(t){return fr(t._redirectPersistence)}function R2(t){return $u(I2,t.config.apiKey,t.name)}async function b2(t,e,n=!1){if(In(t.app))return Promise.reject(qn(t));const r=xi(t),i=_2(r,e),a=await new S2(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=10*60*1e3;class N2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!K_(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wg(e))}saveEventToCache(e){this.cachedEventUids.add(Wg(e)),this.lastProcessedEventTime=Date.now()}}function Wg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function K_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D2(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L2=/^https?/;async function V2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D2(t);for(const n of e)try{if(j2(n))return}catch{}Rn(t,"unauthorized-domain")}function j2(t){const e=af(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!L2.test(n))return!1;if(M2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Cl(3e4,6e4);function qg(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function U2(t){return new Promise((e,n)=>{var r,i,s;function a(){qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qg(),n(Wn(t,"network-request-failed"))},timeout:F2.get()})}if(!((i=(r=Gn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Gn().gapi)===null||s===void 0)&&s.load)a();else{const c=OS("iframefcb");return Gn()[c]=()=>{gapi.load?a():n(Wn(t,"network-request-failed"))},N_(`${NS()}?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw Wu=null,e})}let Wu=null;function z2(t){return Wu=Wu||U2(t),Wu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new Cl(5e3,15e3),$2="__/auth/iframe",H2="emulator/auth/iframe",W2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},q2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G2(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rp(e,H2):`https://${t.config.authDomain}/${$2}`,r={apiKey:e.apiKey,appName:t.name,v:Uo},i=q2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${kl(r).slice(1)}`}async function K2(t){const e=await z2(t),n=Gn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:G2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Wn(t,"network-request-failed"),c=Gn().setTimeout(()=>{s(a)},B2.get());function h(){Gn().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y2=500,X2=600,J2="_blank",Z2="http://localhost";class Gg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eA(t,e,n,r=Y2,i=X2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},Q2),{width:r.toString(),height:i.toString(),top:s,left:a}),p=Pt().toLowerCase();n&&(c=S_(p)?J2:n),x_(p)&&(e=e||Z2,h.scrollbars="yes");const y=Object.entries(h).reduce((w,[A,O])=>`${w}${A}=${O},`,"");if(xS(p)&&c!=="_self")return tA(e||"",c),new Gg(null);const v=window.open(e||"",c,y);oe(v,t,"popup-blocked");try{v.focus()}catch{}return new Gg(v)}function tA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="__/auth/handler",rA="emulator/auth/handler",iA=encodeURIComponent("fac");async function Kg(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Uo,eventId:i};if(e instanceof D_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Wx(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))a[y]=v}if(e instanceof bl){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(a.scopes=y.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await t._getAppCheckToken(),p=h?`#${iA}=${encodeURIComponent(h)}`:"";return`${sA(t)}?${kl(c).slice(1)}${p}`}function sA({config:t}){return t.emulator?Rp(t,rA):`https://${t.authDomain}/${nA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="webStorageSupport";class oA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B_,this._completeRedirectFn=b2,this._overrideRedirectResult=k2}async _openPopup(e,n,r,i){var s;Er((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Kg(e,n,r,af(),i);return eA(e,a,Dp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Kg(e,n,r,af(),i);return u2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Er(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await K2(e),r=new N2(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(td,{type:td},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[td];a!==void 0&&n(!!a),Rn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return b_()||I_()||Pp()}}const aA=oA;var Qg="@firebase/auth",Yg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cA(t){Co(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;oe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P_(t)},p=new RS(r,i,s,h);return jS(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Co(new ds("auth-internal",e=>{const n=xi(e.getProvider("auth").getImmediate());return(r=>new lA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),di(Qg,Yg,uA(t)),di(Qg,Yg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=5*60,dA=a_("authIdTokenMaxAge")||hA;let Xg=null;const fA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dA)return;const i=n==null?void 0:n.token;Xg!==i&&(Xg=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pA(t=h_()){const e=Ap(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VS(t,{popupRedirectResolver:aA,persistence:[v2,o2,B_]}),r=a_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=fA(s.toString());n2(n,a,()=>a(n.currentUser)),t2(n,c=>a(c))}}const i=s_("auth");return i&&FS(n,`http://${i}`),n}function mA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Wn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cA("Browser");var Jg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ss,Q_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,T){function S(){}S.prototype=T.prototype,I.D=T.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(R,N,D){for(var C=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)C[Fe-2]=arguments[Fe];return T.prototype[N].apply(R,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,T,S){S||(S=0);var R=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)R[N]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(N=0;16>N;++N)R[N]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=I.g[0],S=I.g[1],N=I.g[2];var D=I.g[3],C=T+(D^S&(N^D))+R[0]+3614090360&4294967295;T=S+(C<<7&4294967295|C>>>25),C=D+(N^T&(S^N))+R[1]+3905402710&4294967295,D=T+(C<<12&4294967295|C>>>20),C=N+(S^D&(T^S))+R[2]+606105819&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(T^N&(D^T))+R[3]+3250441966&4294967295,S=N+(C<<22&4294967295|C>>>10),C=T+(D^S&(N^D))+R[4]+4118548399&4294967295,T=S+(C<<7&4294967295|C>>>25),C=D+(N^T&(S^N))+R[5]+1200080426&4294967295,D=T+(C<<12&4294967295|C>>>20),C=N+(S^D&(T^S))+R[6]+2821735955&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(T^N&(D^T))+R[7]+4249261313&4294967295,S=N+(C<<22&4294967295|C>>>10),C=T+(D^S&(N^D))+R[8]+1770035416&4294967295,T=S+(C<<7&4294967295|C>>>25),C=D+(N^T&(S^N))+R[9]+2336552879&4294967295,D=T+(C<<12&4294967295|C>>>20),C=N+(S^D&(T^S))+R[10]+4294925233&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(T^N&(D^T))+R[11]+2304563134&4294967295,S=N+(C<<22&4294967295|C>>>10),C=T+(D^S&(N^D))+R[12]+1804603682&4294967295,T=S+(C<<7&4294967295|C>>>25),C=D+(N^T&(S^N))+R[13]+4254626195&4294967295,D=T+(C<<12&4294967295|C>>>20),C=N+(S^D&(T^S))+R[14]+2792965006&4294967295,N=D+(C<<17&4294967295|C>>>15),C=S+(T^N&(D^T))+R[15]+1236535329&4294967295,S=N+(C<<22&4294967295|C>>>10),C=T+(N^D&(S^N))+R[1]+4129170786&4294967295,T=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(T^S))+R[6]+3225465664&4294967295,D=T+(C<<9&4294967295|C>>>23),C=N+(T^S&(D^T))+R[11]+643717713&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^T&(N^D))+R[0]+3921069994&4294967295,S=N+(C<<20&4294967295|C>>>12),C=T+(N^D&(S^N))+R[5]+3593408605&4294967295,T=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(T^S))+R[10]+38016083&4294967295,D=T+(C<<9&4294967295|C>>>23),C=N+(T^S&(D^T))+R[15]+3634488961&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^T&(N^D))+R[4]+3889429448&4294967295,S=N+(C<<20&4294967295|C>>>12),C=T+(N^D&(S^N))+R[9]+568446438&4294967295,T=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(T^S))+R[14]+3275163606&4294967295,D=T+(C<<9&4294967295|C>>>23),C=N+(T^S&(D^T))+R[3]+4107603335&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^T&(N^D))+R[8]+1163531501&4294967295,S=N+(C<<20&4294967295|C>>>12),C=T+(N^D&(S^N))+R[13]+2850285829&4294967295,T=S+(C<<5&4294967295|C>>>27),C=D+(S^N&(T^S))+R[2]+4243563512&4294967295,D=T+(C<<9&4294967295|C>>>23),C=N+(T^S&(D^T))+R[7]+1735328473&4294967295,N=D+(C<<14&4294967295|C>>>18),C=S+(D^T&(N^D))+R[12]+2368359562&4294967295,S=N+(C<<20&4294967295|C>>>12),C=T+(S^N^D)+R[5]+4294588738&4294967295,T=S+(C<<4&4294967295|C>>>28),C=D+(T^S^N)+R[8]+2272392833&4294967295,D=T+(C<<11&4294967295|C>>>21),C=N+(D^T^S)+R[11]+1839030562&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^T)+R[14]+4259657740&4294967295,S=N+(C<<23&4294967295|C>>>9),C=T+(S^N^D)+R[1]+2763975236&4294967295,T=S+(C<<4&4294967295|C>>>28),C=D+(T^S^N)+R[4]+1272893353&4294967295,D=T+(C<<11&4294967295|C>>>21),C=N+(D^T^S)+R[7]+4139469664&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^T)+R[10]+3200236656&4294967295,S=N+(C<<23&4294967295|C>>>9),C=T+(S^N^D)+R[13]+681279174&4294967295,T=S+(C<<4&4294967295|C>>>28),C=D+(T^S^N)+R[0]+3936430074&4294967295,D=T+(C<<11&4294967295|C>>>21),C=N+(D^T^S)+R[3]+3572445317&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^T)+R[6]+76029189&4294967295,S=N+(C<<23&4294967295|C>>>9),C=T+(S^N^D)+R[9]+3654602809&4294967295,T=S+(C<<4&4294967295|C>>>28),C=D+(T^S^N)+R[12]+3873151461&4294967295,D=T+(C<<11&4294967295|C>>>21),C=N+(D^T^S)+R[15]+530742520&4294967295,N=D+(C<<16&4294967295|C>>>16),C=S+(N^D^T)+R[2]+3299628645&4294967295,S=N+(C<<23&4294967295|C>>>9),C=T+(N^(S|~D))+R[0]+4096336452&4294967295,T=S+(C<<6&4294967295|C>>>26),C=D+(S^(T|~N))+R[7]+1126891415&4294967295,D=T+(C<<10&4294967295|C>>>22),C=N+(T^(D|~S))+R[14]+2878612391&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~T))+R[5]+4237533241&4294967295,S=N+(C<<21&4294967295|C>>>11),C=T+(N^(S|~D))+R[12]+1700485571&4294967295,T=S+(C<<6&4294967295|C>>>26),C=D+(S^(T|~N))+R[3]+2399980690&4294967295,D=T+(C<<10&4294967295|C>>>22),C=N+(T^(D|~S))+R[10]+4293915773&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~T))+R[1]+2240044497&4294967295,S=N+(C<<21&4294967295|C>>>11),C=T+(N^(S|~D))+R[8]+1873313359&4294967295,T=S+(C<<6&4294967295|C>>>26),C=D+(S^(T|~N))+R[15]+4264355552&4294967295,D=T+(C<<10&4294967295|C>>>22),C=N+(T^(D|~S))+R[6]+2734768916&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~T))+R[13]+1309151649&4294967295,S=N+(C<<21&4294967295|C>>>11),C=T+(N^(S|~D))+R[4]+4149444226&4294967295,T=S+(C<<6&4294967295|C>>>26),C=D+(S^(T|~N))+R[11]+3174756917&4294967295,D=T+(C<<10&4294967295|C>>>22),C=N+(T^(D|~S))+R[2]+718787259&4294967295,N=D+(C<<15&4294967295|C>>>17),C=S+(D^(N|~T))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,T){T===void 0&&(T=I.length);for(var S=T-this.blockSize,R=this.B,N=this.h,D=0;D<T;){if(N==0)for(;D<=S;)i(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<T;)if(R[N++]=I.charCodeAt(D++),N==this.blockSize){i(this,R),N=0;break}}else for(;D<T;)if(R[N++]=I[D++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=T},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;var S=8*this.o;for(T=I.length-8;T<I.length;++T)I[T]=S&255,S/=256;for(this.u(I),I=Array(16),T=S=0;4>T;++T)for(var R=0;32>R;R+=8)I[S++]=this.g[T]>>>R&255;return I};function s(I,T){var S=c;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=T(I)}function a(I,T){this.h=T;for(var S=[],R=!0,N=I.length-1;0<=N;N--){var D=I[N]|0;R&&D==T||(S[N]=D,R=!1)}this.g=S}var c={};function h(I){return-128<=I&&128>I?s(I,function(T){return new a([T|0],0>T?-1:0)}):new a([I|0],0>I?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return v;if(0>I)return L(p(-I));for(var T=[],S=1,R=0;I>=S;R++)T[R]=I/S|0,S*=4294967296;return new a(T,0)}function y(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return L(y(I.substring(1),T));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=p(Math.pow(T,8)),R=v,N=0;N<I.length;N+=8){var D=Math.min(8,I.length-N),C=parseInt(I.substring(N,N+D),T);8>D?(D=p(Math.pow(T,D)),R=R.j(D).add(p(C))):(R=R.j(S),R=R.add(p(C)))}return R}var v=h(0),w=h(1),A=h(16777216);t=a.prototype,t.m=function(){if(M(this))return-L(this).m();for(var I=0,T=1,S=0;S<this.g.length;S++){var R=this.i(S);I+=(0<=R?R:4294967296+R)*T,T*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(O(this))return"0";if(M(this))return"-"+L(this).toString(I);for(var T=p(Math.pow(I,6)),S=this,R="";;){var N=V(S,T).g;S=k(S,N.j(T));var D=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=N,O(S))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function O(I){if(I.h!=0)return!1;for(var T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function M(I){return I.h==-1}t.l=function(I){return I=k(this,I),M(I)?-1:O(I)?0:1};function L(I){for(var T=I.g.length,S=[],R=0;R<T;R++)S[R]=~I.g[R];return new a(S,~I.h).add(w)}t.abs=function(){return M(this)?L(this):this},t.add=function(I){for(var T=Math.max(this.g.length,I.g.length),S=[],R=0,N=0;N<=T;N++){var D=R+(this.i(N)&65535)+(I.i(N)&65535),C=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);R=C>>>16,D&=65535,C&=65535,S[N]=C<<16|D}return new a(S,S[S.length-1]&-2147483648?-1:0)};function k(I,T){return I.add(L(T))}t.j=function(I){if(O(this)||O(I))return v;if(M(this))return M(I)?L(this).j(L(I)):L(L(this).j(I));if(M(I))return L(this.j(L(I)));if(0>this.l(A)&&0>I.l(A))return p(this.m()*I.m());for(var T=this.g.length+I.g.length,S=[],R=0;R<2*T;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var N=0;N<I.g.length;N++){var D=this.i(R)>>>16,C=this.i(R)&65535,Fe=I.i(N)>>>16,rt=I.i(N)&65535;S[2*R+2*N]+=C*rt,x(S,2*R+2*N),S[2*R+2*N+1]+=D*rt,x(S,2*R+2*N+1),S[2*R+2*N+1]+=C*Fe,x(S,2*R+2*N+1),S[2*R+2*N+2]+=D*Fe,x(S,2*R+2*N+2)}for(R=0;R<T;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=T;R<2*T;R++)S[R]=0;return new a(S,0)};function x(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function P(I,T){this.g=I,this.h=T}function V(I,T){if(O(T))throw Error("division by zero");if(O(I))return new P(v,v);if(M(I))return T=V(L(I),T),new P(L(T.g),L(T.h));if(M(T))return T=V(I,L(T)),new P(L(T.g),T.h);if(30<I.g.length){if(M(I)||M(T))throw Error("slowDivide_ only works with positive integers.");for(var S=w,R=T;0>=R.l(I);)S=F(S),R=F(R);var N=B(S,1),D=B(R,1);for(R=B(R,2),S=B(S,2);!O(R);){var C=D.add(R);0>=C.l(I)&&(N=N.add(S),D=C),R=B(R,1),S=B(S,1)}return T=k(I,N.j(T)),new P(N,T)}for(N=v;0<=I.l(T);){for(S=Math.max(1,Math.floor(I.m()/T.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=p(S),C=D.j(T);M(C)||0<C.l(I);)S-=R,D=p(S),C=D.j(T);O(D)&&(D=w),N=N.add(D),I=k(I,C)}return new P(N,I)}t.A=function(I){return V(this,I).h},t.and=function(I){for(var T=Math.max(this.g.length,I.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)&I.i(R);return new a(S,this.h&I.h)},t.or=function(I){for(var T=Math.max(this.g.length,I.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)|I.i(R);return new a(S,this.h|I.h)},t.xor=function(I){for(var T=Math.max(this.g.length,I.g.length),S=[],R=0;R<T;R++)S[R]=this.i(R)^I.i(R);return new a(S,this.h^I.h)};function F(I){for(var T=I.g.length+1,S=[],R=0;R<T;R++)S[R]=I.i(R)<<1|I.i(R-1)>>>31;return new a(S,I.h)}function B(I,T){var S=T>>5;T%=32;for(var R=I.g.length-S,N=[],D=0;D<R;D++)N[D]=0<T?I.i(D+S)>>>T|I.i(D+S+1)<<32-T:I.i(D+S);return new a(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Q_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=p,a.fromString=y,ss=a}).apply(typeof Jg<"u"?Jg:typeof self<"u"?self:typeof window<"u"?window:{});var Au=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y_,ba,X_,qu,hf,J_,Z_,ew;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Au=="object"&&Au];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var g=o[m];if(!(g in d))break e;d=d[g]}o=o[o.length-1],m=d[o],u=u(m),u!=m&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,m=!1,g={next:function(){if(!m&&d<o.length){var _=d++;return{value:u(_,o[_]),done:!1}}return m=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function p(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function y(o,u,d){return o.call.apply(o.bind,arguments)}function v(o,u,d){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,m),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function w(o,u,d){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,w.apply(null,arguments)}function A(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function O(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(m,g,_){for(var b=Array(arguments.length-2),j=2;j<arguments.length;j++)b[j-2]=arguments[j];return u.prototype[g].apply(m,b)}}function M(o){const u=o.length;if(0<u){const d=Array(u);for(let m=0;m<u;m++)d[m]=o[m];return d}return[]}function L(o,u){for(let d=1;d<arguments.length;d++){const m=arguments[d];if(h(m)){const g=o.length||0,_=m.length||0;o.length=g+_;for(let b=0;b<_;b++)o[g+b]=m[b]}else o.push(m)}}class k{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function x(o){return/^[\s\xa0]*$/.test(o)}function P(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function V(o){return V[" "](o),o}V[" "]=function(){};var F=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function B(o,u,d){for(const m in o)u.call(d,o[m],m,o)}function I(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function T(o){const u={};for(const d in o)u[d]=o[d];return u}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(o,u){let d,m;for(let g=1;g<arguments.length;g++){m=arguments[g];for(d in m)o[d]=m[d];for(let _=0;_<S.length;_++)d=S[_],Object.prototype.hasOwnProperty.call(m,d)&&(o[d]=m[d])}}function N(o){var u=1;o=o.split(":");const d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function D(o){c.setTimeout(()=>{throw o},0)}function C(){var o=X;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class Fe{constructor(){this.h=this.g=null}add(u,d){const m=rt.get();m.set(u,d),this.h?this.h.next=m:this.g=m,this.h=m}}var rt=new k(()=>new wt,o=>o.reset());class wt{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,G=!1,X=new Fe,se=()=>{const o=c.Promise.resolve(void 0);Ke=()=>{o.then(fe)}};var fe=()=>{for(var o;o=C();){try{o.h.call(o.g)}catch(d){D(d)}var u=rt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}G=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var jt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o}();function Nt(o,u){if(Se.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(F){e:{try{V(u.nodeName);var g=!0;break e}catch{}g=!1}g||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ut[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Nt.aa.h.call(this)}}O(Nt,Se);var ut={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ft="closure_listenable_"+(1e6*Math.random()|0),bn=0;function Es(o,u,d,m,g){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!m,this.ha=g,this.key=++bn,this.da=this.fa=!1}function Pn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function sn(o){this.src=o,this.g={},this.h=0}sn.prototype.add=function(o,u,d,m,g){var _=o.toString();o=this.g[_],o||(o=this.g[_]=[],this.h++);var b=J(o,u,m,g);return-1<b?(u=o[b],d||(u.fa=!1)):(u=new Es(u,this.src,_,!!m,g),u.fa=d,o.push(u)),u};function Ii(o,u){var d=u.type;if(d in o.g){var m=o.g[d],g=Array.prototype.indexOf.call(m,u,void 0),_;(_=0<=g)&&Array.prototype.splice.call(m,g,1),_&&(Pn(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function J(o,u,d,m){for(var g=0;g<o.length;++g){var _=o[g];if(!_.da&&_.listener==u&&_.capture==!!d&&_.ha==m)return g}return-1}var Z="closure_lm_"+(1e6*Math.random()|0),ce={};function Te(o,u,d,m,g){if(Array.isArray(u)){for(var _=0;_<u.length;_++)Te(o,u[_],d,m,g);return null}return d=Ai(d),o&&o[Ft]?o.K(u,d,p(m)?!!m.capture:!1,g):he(o,u,d,!1,m,g)}function he(o,u,d,m,g,_){if(!u)throw Error("Invalid event type");var b=p(g)?!!g.capture:!!g,j=Nn(o);if(j||(o[Z]=j=new sn(o)),d=j.add(u,d,m,b,_),d.proxy)return d;if(m=Je(),d.proxy=m,m.src=o,m.listener=d,o.addEventListener)jt||(g=b),g===void 0&&(g=!1),o.addEventListener(u.toString(),m,g);else if(o.attachEvent)o.attachEvent(Ut(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Je(){function o(d){return u.call(o.src,o.listener,d)}const u=Si;return o}function it(o,u,d,m,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)it(o,u[_],d,m,g);else m=p(m)?!!m.capture:!!m,d=Ai(d),o&&o[Ft]?(o=o.i,u=String(u).toString(),u in o.g&&(_=o.g[u],d=J(_,d,m,g),-1<d&&(Pn(_[d]),Array.prototype.splice.call(_,d,1),_.length==0&&(delete o.g[u],o.h--)))):o&&(o=Nn(o))&&(u=o.g[u.toString()],o=-1,u&&(o=J(u,d,m,g)),(d=-1<o?u[o]:null)&&Qe(d))}function Qe(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Ft])Ii(u.i,o);else{var d=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(d,m,o.capture):u.detachEvent?u.detachEvent(Ut(d),m):u.addListener&&u.removeListener&&u.removeListener(m),(d=Nn(u))?(Ii(d,o),d.h==0&&(d.src=null,u[Z]=null)):Pn(o)}}}function Ut(o){return o in ce?ce[o]:ce[o]="on"+o}function Si(o,u){if(o.da)o=!0;else{u=new Nt(u,this);var d=o.listener,m=o.ha||o.src;o.fa&&Qe(o),o=d.call(m,u)}return o}function Nn(o){return o=o[Z],o instanceof sn?o:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ai(o){return typeof o=="function"?o:(o[on]||(o[on]=function(u){return o.handleEvent(u)}),o[on])}function Ve(){me.call(this),this.i=new sn(this),this.M=this,this.F=null}O(Ve,me),Ve.prototype[Ft]=!0,Ve.prototype.removeEventListener=function(o,u,d,m){it(this,o,u,d,m)};function Ae(o,u){var d,m=o.F;if(m)for(d=[];m;m=m.F)d.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new Se(u,o);else if(u instanceof Se)u.target=u.target||o;else{var g=u;u=new Se(m,o),R(u,g)}if(g=!0,d)for(var _=d.length-1;0<=_;_--){var b=u.g=d[_];g=Zn(b,m,!0,u)&&g}if(b=u.g=o,g=Zn(b,m,!0,u)&&g,g=Zn(b,m,!1,u)&&g,d)for(_=0;_<d.length;_++)b=u.g=d[_],g=Zn(b,m,!1,u)&&g}Ve.prototype.N=function(){if(Ve.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],m=0;m<d.length;m++)Pn(d[m]);delete o.g[u],o.h--}}this.F=null},Ve.prototype.K=function(o,u,d,m){return this.i.add(String(o),u,!1,d,m)},Ve.prototype.L=function(o,u,d,m){return this.i.add(String(o),u,!0,d,m)};function Zn(o,u,d,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var g=!0,_=0;_<u.length;++_){var b=u[_];if(b&&!b.da&&b.capture==d){var j=b.listener,z=b.ha||b.src;b.fa&&Ii(o.i,b),g=j.call(z,m)!==!1&&g}}return g&&!m.defaultPrevented}function Ko(o,u,d){if(typeof o=="function")d&&(o=w(o,d));else if(o&&typeof o.handleEvent=="function")o=w(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function jl(o){o.g=Ko(()=>{o.g=null,o.i&&(o.i=!1,jl(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Fl extends me{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:jl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(o){me.call(this),this.h=o,this.g={}}O(kr,me);var Cr=[];function Ts(o){B(o.g,function(u,d){this.g.hasOwnProperty(d)&&Qe(u)},o),o.g={}}kr.prototype.N=function(){kr.aa.N.call(this),Ts(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=c.JSON.stringify,yh=c.JSON.parse,Ul=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function ki(){}ki.prototype.h=null;function On(o){return o.h||(o.h=o.i())}function Rr(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Is(){Se.call(this,"d")}O(Is,Se);function Ci(){Se.call(this,"c")}O(Ci,Se);var Dn={},Mn=null;function Pr(){return Mn=Mn||new Ve}Dn.La="serverreachability";function Qo(o){Se.call(this,Dn.La,o)}O(Qo,Se);function Ln(o){const u=Pr();Ae(u,new Qo(u))}Dn.STAT_EVENT="statevent";function Ri(o,u){Se.call(this,Dn.STAT_EVENT,o),this.stat=u}O(Ri,Se);function ct(o){const u=Pr();Ae(u,new Ri(u,o))}Dn.Ma="timingevent";function er(o,u){Se.call(this,Dn.Ma,o),this.size=u}O(er,Se);function bi(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Ot(){this.g=!0}Ot.prototype.xa=function(){this.g=!1};function tr(o,u,d,m,g,_){o.info(function(){if(o.g)if(_)for(var b="",j=_.split("&"),z=0;z<j.length;z++){var q=j[z].split("=");if(1<q.length){var K=q[0];q=q[1];var W=K.split("_");b=2<=W.length&&W[1]=="type"?b+(K+"="+q+"&"):b+(K+"=redacted&")}}else b=null;else b=_;return"XMLHTTP REQ ("+m+") [attempt "+g+"]: "+u+`
`+d+`
`+b})}function zl(o,u,d,m,g,_,b){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+g+"]: "+u+`
`+d+`
`+_+" "+b})}function be(o,u,d,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Yo(o,d)+(m?" "+m:"")})}function an(o,u){o.info(function(){return"TIMEOUT: "+u})}Ot.prototype.info=function(){};function Yo(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var m=d[o];if(!(2>m.length)){var g=m[1];if(Array.isArray(g)&&!(1>g.length)){var _=g[0];if(_!="noop"&&_!="stop"&&_!="close")for(var b=1;b<g.length;b++)g[b]=""}}}}return xs(d)}catch{return u}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ni;function nr(){}O(nr,ki),nr.prototype.g=function(){return new XMLHttpRequest},nr.prototype.i=function(){return{}},Ni=new nr;function zt(o,u,d,m){this.j=o,this.i=u,this.l=d,this.R=m||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xo}function Xo(){this.i=null,this.g="",this.h=!1}var As={},Oi={};function ks(o,u,d){o.L=1,o.v=Os(ln(u)),o.m=d,o.P=!0,Bt(o,null)}function Bt(o,u){o.F=Date.now(),Nr(o),o.A=ln(o.v);var d=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Kl(d.i,"t",m),o.C=0,d=o.j.J,o.h=new Xo,o.g=su(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Fl(w(o.Y,o,o.g),o.O)),u=o.U,d=o.g,m=o.ca;var g="readystatechange";Array.isArray(g)||(g&&(Cr[0]=g.toString()),g=Cr);for(var _=0;_<g.length;_++){var b=Te(d,g[_],m||u.handleEvent,!1,u.h||u);if(!b)break;u.g[b.key]=b}u=o.H?T(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Ln(),tr(o.i,o.u,o.A,o.l,o.R,o.m)}zt.prototype.ca=function(o){o=o.target;const u=this.M;u&&_n(o)==3?u.j():this.Y(o)},zt.prototype.Y=function(o){try{if(o==this.g)e:{const W=_n(this.g);var u=this.g.Ba();const te=this.g.Z();if(!(3>W)&&(W!=3||this.g&&(this.h.h||this.g.oa()||oa(this.g)))){this.J||W!=4||u==7||(u==8||0>=te?Ln(3):Ln(2)),Rs(this);var d=this.g.Z();this.X=d;t:if(Qt(this)){var m=oa(this.g);o="";var g=m.length,_=_n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){st(this),Vn(this);var b="";break t}this.h.i=new c.TextDecoder}for(u=0;u<g;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(_&&u==g-1)});m.length=0,this.h.g+=o,this.C=0,b=this.h.g}else b=this.g.oa();if(this.o=d==200,zl(this.i,this.u,this.A,this.l,this.R,W,d),this.o){if(this.T&&!this.K){t:{if(this.g){var j,z=this.g;if((j=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(j)){var q=j;break t}}q=null}if(d=q)be(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bs(this,d);else{this.o=!1,this.s=3,ct(12),st(this),Vn(this);break e}}if(this.P){d=!0;let ne;for(;!this.J&&this.C<b.length;)if(ne=Di(this,b),ne==Oi){W==4&&(this.s=4,ct(14),d=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(ne==As){this.s=4,ct(15),be(this.i,this.l,b,"[Invalid Chunk]"),d=!1;break}else be(this.i,this.l,ne,null),bs(this,ne);if(Qt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),W!=4||b.length!=0||this.h.h||(this.s=1,ct(16),d=!1),this.o=this.o&&d,!d)be(this.i,this.l,b,"[Invalid Chunked Response]"),st(this),Vn(this);else if(0<b.length&&!this.W){this.W=!0;var K=this.j;K.g==this&&K.ba&&!K.M&&(K.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Us(K),K.M=!0,ct(11))}}else be(this.i,this.l,b,null),bs(this,b);W==4&&st(this),this.o&&!this.J&&(W==4?Bs(this.j,this):(this.o=!1,Nr(this)))}else js(this.g),d==400&&0<b.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),st(this),Vn(this)}}}catch{}finally{}};function Qt(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Di(o,u){var d=o.C,m=u.indexOf(`
`,d);return m==-1?Oi:(d=Number(u.substring(d,m)),isNaN(d)?As:(m+=1,m+d>u.length?Oi:(u=u.slice(m,m+d),o.C=m+d,u)))}zt.prototype.cancel=function(){this.J=!0,st(this)};function Nr(o){o.S=Date.now()+o.I,Cs(o,o.I)}function Cs(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=bi(w(o.ba,o),u)}function Rs(o){o.B&&(c.clearTimeout(o.B),o.B=null)}zt.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(an(this.i,this.A),this.L!=2&&(Ln(),ct(17)),st(this),this.s=2,Vn(this)):Cs(this,this.S-o)};function Vn(o){o.j.G==0||o.J||Bs(o.j,o)}function st(o){Rs(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Ts(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function bs(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||Ns(d.h,o))){if(!o.K&&Ns(d.h,o)&&d.G==3){try{var m=d.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var g=m;if(g[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)zs(d),$i(d);else break e;ca(d),ct(18)}}else d.za=g[1],0<d.za-d.T&&37500>g[2]&&d.F&&d.v==0&&!d.C&&(d.C=bi(w(d.Za,d),6e3));if(1>=Bl(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else sr(d,11)}else if((o.K||d.g==o)&&zs(d),!x(u))for(g=d.Da.g.parse(u),u=0;u<g.length;u++){let q=g[u];if(d.T=q[0],q=q[1],d.G==2)if(q[0]=="c"){d.K=q[1],d.ia=q[2];const K=q[3];K!=null&&(d.la=K,d.j.info("VER="+d.la));const W=q[4];W!=null&&(d.Aa=W,d.j.info("SVER="+d.Aa));const te=q[5];te!=null&&typeof te=="number"&&0<te&&(m=1.5*te,d.L=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const ne=o.g;if(ne){const xe=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xe){var _=m.h;_.g||xe.indexOf("spdy")==-1&&xe.indexOf("quic")==-1&&xe.indexOf("h2")==-1||(_.j=_.l,_.g=new Set,_.h&&(Li(_,_.h),_.h=null))}if(m.D){const Ie=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(m.ya=Ie,Ne(m.I,m.D,Ie))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),m=d;var b=o;if(m.qa=qi(m,m.J?m.ia:null,m.W),b.K){$l(m.h,b);var j=b,z=m.L;z&&(j.I=z),j.B&&(Rs(j),Nr(j)),m.g=b}else tu(m);0<d.i.length&&Hi(d)}else q[0]!="stop"&&q[0]!="close"||sr(d,7);else d.G==3&&(q[0]=="stop"||q[0]=="close"?q[0]=="stop"?sr(d,7):Fs(d):q[0]!="noop"&&d.l&&d.l.ta(q),d.v=0)}}Ln(4)}catch{}}var Ps=class{constructor(o,u){this.g=o,this.map=u}};function Yt(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Bl(o){return o.h?1:o.g?o.g.size:0}function Ns(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Li(o,u){o.g?o.g.add(u):o.h=u}function $l(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Yt.prototype.cancel=function(){if(this.i=Hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Hl(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.D);return u}return M(o.i)}function Wl(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(h(o)){for(var u=[],d=o.length,m=0;m<d;m++)u.push(o[m]);return u}u=[],d=0;for(m in o)u[d++]=o[m];return u}function ql(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(h(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(const m in o)u[d++]=m;return u}}}function Jo(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(h(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=ql(o),m=Wl(o),g=m.length,_=0;_<g;_++)u.call(void 0,m[_],d&&d[_],o)}var Zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Et(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var m=o[d].indexOf("="),g=null;if(0<=m){var _=o[d].substring(0,m);g=o[d].substring(m+1)}else _=o[d];u(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function jn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof jn){this.h=o.h,rr(this,o.j),this.o=o.o,this.g=o.g,Vi(this,o.s),this.l=o.l;var u=o.i,d=new Fi;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),ea(this,d),this.m=o.m}else o&&(u=String(o).match(Zo))?(this.h=!1,rr(this,u[1]||"",!0),this.o=Or(u[2]||""),this.g=Or(u[3]||"",!0),Vi(this,u[4]),this.l=Or(u[5]||"",!0),ea(this,u[6]||"",!0),this.m=Or(u[7]||"")):(this.h=!1,this.i=new Fi(null,this.h))}jn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Dr(u,ta,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Dr(u,ta,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Dr(d,d.charAt(0)=="/"?ji:Gl,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Dr(d,_h)),o.join("")};function ln(o){return new jn(o)}function rr(o,u,d){o.j=d?Or(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Vi(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function ea(o,u,d){u instanceof Fi?(o.i=u,wh(o.i,o.h)):(d||(u=Dr(u,vh)),o.i=new Fi(u,o.h))}function Ne(o,u,d){o.i.set(u,d)}function Os(o){return Ne(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Or(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Dr(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,Ds),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Ds(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var ta=/[#\/\?@]/g,Gl=/[#\?:]/g,ji=/[#\?]/g,vh=/[#\?@]/g,_h=/#/g;function Fi(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Fn(o){o.g||(o.g=new Map,o.h=0,o.i&&Et(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=Fi.prototype,t.add=function(o,u){Fn(this),this.i=null,o=Lr(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Ms(o,u){Fn(o),u=Lr(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Mr(o,u){return Fn(o),u=Lr(o,u),o.g.has(u)}t.forEach=function(o,u){Fn(this),this.g.forEach(function(d,m){d.forEach(function(g){o.call(u,g,m,this)},this)},this)},t.na=function(){Fn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let m=0;m<u.length;m++){const g=o[m];for(let _=0;_<g.length;_++)d.push(u[m])}return d},t.V=function(o){Fn(this);let u=[];if(typeof o=="string")Mr(this,o)&&(u=u.concat(this.g.get(Lr(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},t.set=function(o,u){return Fn(this),this.i=null,o=Lr(this,o),Mr(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Kl(o,u,d){Ms(o,u),0<d.length&&(o.i=null,o.g.set(Lr(o,u),M(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var m=u[d];const _=encodeURIComponent(String(m)),b=this.V(m);for(m=0;m<b.length;m++){var g=_;b[m]!==""&&(g+="="+encodeURIComponent(String(b[m]))),o.push(g)}}return this.i=o.join("&")};function Lr(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function wh(o,u){u&&!o.j&&(Fn(o),o.i=null,o.g.forEach(function(d,m){var g=m.toLowerCase();m!=g&&(Ms(this,m),Kl(this,g,d))},o)),o.j=u}function Eh(o,u){const d=new Ot;if(c.Image){const m=new Image;m.onload=A(vn,d,"TestLoadImage: loaded",!0,u,m),m.onerror=A(vn,d,"TestLoadImage: error",!1,u,m),m.onabort=A(vn,d,"TestLoadImage: abort",!1,u,m),m.ontimeout=A(vn,d,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function na(o,u){const d=new Ot,m=new AbortController,g=setTimeout(()=>{m.abort(),vn(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(_=>{clearTimeout(g),_.ok?vn(d,"TestPingServer: ok",!0,u):vn(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(g),vn(d,"TestPingServer: error",!1,u)})}function vn(o,u,d,m,g){try{g&&(g.onload=null,g.onerror=null,g.onabort=null,g.ontimeout=null),m(d)}catch{}}function Ql(){this.g=new Ul}function Ui(o,u,d){const m=d||"";try{Jo(o,function(g,_){let b=g;p(g)&&(b=xs(g)),u.push(m+_+"="+encodeURIComponent(b))})}catch(g){throw u.push(m+"type="+encodeURIComponent("_badmap")),g}}function Tt(o){this.l=o.Ub||null,this.j=o.eb||!1}O(Tt,ki),Tt.prototype.g=function(){return new Ls(this.l,this.j)},Tt.prototype.i=function(o){return function(){return o}}({});function Ls(o,u){Ve.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Ls,Ve),t=Ls.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,jr(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yl(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yl(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Vr(this):jr(this),this.readyState==3&&Yl(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Vr(this))},t.Qa=function(o){this.g&&(this.response=o,Vr(this))},t.ga=function(){this.g&&Vr(this)};function Vr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,jr(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function jr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Vs(o){let u="";return B(o,function(d,m){u+=m,u+=":",u+=d,u+=`\r
`}),u}function zi(o,u,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Vs(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Ne(o,u,d))}function ke(o){Ve.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(ke,Ve);var Xl=/^https?$/i,ra=["POST","PUT"];t=ke.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ni.g(),this.v=this.o?On(this.o):On(Ni),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(_){Jl(this,_);return}if(o=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var g in m)d.set(g,m[g]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const _ of m.keys())d.set(_,m.get(_));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(_=>_.toLowerCase()=="content-type"),g=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(ra,u,void 0))||m||g||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_,b]of d)this.g.setRequestHeader(_,b);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(o),this.u=!1}catch(_){Jl(this,_)}};function Jl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,ia(o),Bi(o)}function ia(o){o.A||(o.A=!0,Ae(o,"complete"),Ae(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ae(this,"complete"),Ae(this,"abort"),Bi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ir(this):this.bb())},t.bb=function(){ir(this)};function ir(o){if(o.h&&typeof a<"u"&&(!o.v[1]||_n(o)!=4||o.Z()!=2)){if(o.u&&_n(o)==4)Ko(o.Ea,0,o);else if(Ae(o,"readystatechange"),_n(o)==4){o.h=!1;try{const b=o.Z();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var m;if(m=b===0){var g=String(o.D).match(Zo)[1]||null;!g&&c.self&&c.self.location&&(g=c.self.location.protocol.slice(0,-1)),m=!Xl.test(g?g.toLowerCase():"")}d=m}if(d)Ae(o,"complete"),Ae(o,"success");else{o.m=6;try{var _=2<_n(o)?o.g.statusText:""}catch{_=""}o.l=_+" ["+o.Z()+"]",ia(o)}}finally{Bi(o)}}}}function Bi(o,u){if(o.g){sa(o);const d=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ae(o,"ready");try{d.onreadystatechange=m}catch{}}}function sa(o){o.I&&(c.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function _n(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<_n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),yh(u)}};function oa(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function js(o){const u={};o=(o.g&&2<=_n(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(x(o[m]))continue;var d=N(o[m]);const g=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const _=u[g]||[];u[g]=_,_.push(d)}I(u,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Zl(o){this.Aa=0,this.i=[],this.j=new Ot,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,o),this.cb=Fr("retryDelaySeedMs",1e4,o),this.Wa=Fr("forwardChannelMaxRetries",2,o),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Yt(o&&o.concurrentRequestLimit),this.Da=new Ql,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zl.prototype,t.la=8,t.G=1,t.connect=function(o,u,d,m){ct(0),this.W=o,this.H=u||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.I=qi(this,null,this.W),Hi(this)};function Fs(o){if(aa(o),o.G==3){var u=o.U++,d=ln(o.I);if(Ne(d,"SID",o.K),Ne(d,"RID",u),Ne(d,"TYPE","terminate"),Wi(o,d),u=new zt(o,o.j,u),u.L=2,u.v=Os(ln(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=su(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Nr(u)}iu(o)}function $i(o){o.g&&(Us(o),o.g.cancel(),o.g=null)}function aa(o){$i(o),o.u&&(c.clearTimeout(o.u),o.u=null),zs(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function Hi(o){if(!Mi(o.h)&&!o.s){o.s=!0;var u=o.Ga;Ke||se(),G||(Ke(),G=!0),X.add(u,o),o.B=0}}function la(o,u){return Bl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=bi(w(o.Ga,o,u),ru(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const g=new zt(this,this.j,o);let _=this.o;if(this.S&&(_?(_=T(_),R(_,this.S)):_=this.S),this.m!==null||this.O||(g.H=_,_=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=eu(this,g,u),d=ln(this.I),Ne(d,"RID",o),Ne(d,"CVER",22),this.D&&Ne(d,"X-HTTP-Session-Id",this.D),Wi(this,d),_&&(this.O?u="headers="+encodeURIComponent(String(Vs(_)))+"&"+u:this.m&&zi(d,this.m,_)),Li(this.h,g),this.Ua&&Ne(d,"TYPE","init"),this.P?(Ne(d,"$req",u),Ne(d,"SID","null"),g.T=!0,ks(g,d,null)):ks(g,d,u),this.G=2}}else this.G==3&&(o?ua(this,o):this.i.length==0||Mi(this.h)||ua(this))};function ua(o,u){var d;u?d=u.l:d=o.U++;const m=ln(o.I);Ne(m,"SID",o.K),Ne(m,"RID",d),Ne(m,"AID",o.T),Wi(o,m),o.m&&o.o&&zi(m,o.m,o.o),d=new zt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=eu(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Li(o.h,d),ks(d,m,u)}function Wi(o,u){o.H&&B(o.H,function(d,m){Ne(u,m,d)}),o.l&&Jo({},function(d,m){Ne(u,m,d)})}function eu(o,u,d){d=Math.min(o.i.length,d);var m=o.l?w(o.l.Na,o.l,o):null;e:{var g=o.i;let _=-1;for(;;){const b=["count="+d];_==-1?0<d?(_=g[0].g,b.push("ofs="+_)):_=0:b.push("ofs="+_);let j=!0;for(let z=0;z<d;z++){let q=g[z].g;const K=g[z].map;if(q-=_,0>q)_=Math.max(0,g[z].g-100),j=!1;else try{Ui(K,b,"req"+q+"_")}catch{m&&m(K)}}if(j){m=b.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,m}function tu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Ke||se(),G||(Ke(),G=!0),X.add(u,o),o.v=0}}function ca(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=bi(w(o.Fa,o),ru(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=bi(w(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),$i(this),nu(this))};function Us(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function nu(o){o.g=new zt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=ln(o.qa);Ne(u,"RID","rpc"),Ne(u,"SID",o.K),Ne(u,"AID",o.T),Ne(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ne(u,"TO",o.ja),Ne(u,"TYPE","xmlhttp"),Wi(o,u),o.m&&o.o&&zi(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=Os(ln(u)),d.m=null,d.P=!0,Bt(d,o)}t.Za=function(){this.C!=null&&(this.C=null,$i(this),ca(this),ct(19))};function zs(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Bs(o,u){var d=null;if(o.g==u){zs(o),Us(o),o.g=null;var m=2}else if(Ns(o.h,u))d=u.D,$l(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var g=o.B;m=Pr(),Ae(m,new er(m,d)),Hi(o)}else tu(o);else if(g=u.s,g==3||g==0&&0<u.X||!(m==1&&la(o,u)||m==2&&ca(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),g){case 1:sr(o,5);break;case 4:sr(o,10);break;case 3:sr(o,6);break;default:sr(o,2)}}}function ru(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function sr(o,u){if(o.j.info("Error code "+u),u==2){var d=w(o.fb,o),m=o.Xa;const g=!m;m=new jn(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rr(m,"https"),Os(m),g?Eh(m.toString(),d):na(m.toString(),d)}else ct(2);o.G=0,o.l&&o.l.sa(u),iu(o),aa(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function iu(o){if(o.G=0,o.ka=[],o.l){const u=Hl(o.h);(u.length!=0||o.i.length!=0)&&(L(o.ka,u),L(o.ka,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.ra()}}function qi(o,u,d){var m=d instanceof jn?ln(d):new jn(d);if(m.g!="")u&&(m.g=u+"."+m.g),Vi(m,m.s);else{var g=c.location;m=g.protocol,u=u?u+"."+g.hostname:g.hostname,g=+g.port;var _=new jn(null);m&&rr(_,m),u&&(_.g=u),g&&Vi(_,g),d&&(_.l=d),m=_}return d=o.D,u=o.ya,d&&u&&Ne(m,d,u),Ne(m,"VER",o.la),Wi(o,m),m}function su(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ke(new Tt({eb:d})):new ke(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ou(){}t=ou.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $s(){}$s.prototype.g=function(o,u){return new xt(o,u)};function xt(o,u){Ve.call(this),this.g=new Zl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!x(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!x(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new f(this)}O(xt,Ve),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Fs(this.g)},xt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=xs(o),o=d);u.i.push(new Ps(u.Ya++,o)),u.G==3&&Hi(u)},xt.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,xt.aa.N.call(this)};function ha(o){Is.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}O(ha,Is);function l(){Ci.call(this),this.status=1}O(l,Ci);function f(o){this.g=o}O(f,ou),f.prototype.ua=function(){Ae(this.g,"a")},f.prototype.ta=function(o){Ae(this.g,new ha(o))},f.prototype.sa=function(o){Ae(this.g,new l)},f.prototype.ra=function(){Ae(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,ew=function(){return new $s},Z_=function(){return Pr()},J_=Dn,hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,qu=Ss,Pi.COMPLETE="complete",X_=Pi,Rr.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",Ve.prototype.listen=Ve.prototype.K,ba=Rr,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Y_=ke}).apply(typeof Au<"u"?Au:typeof self<"u"?self:typeof window<"u"?window:{});const Zg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Ip("@firebase/firestore");function wa(){return ps.logLevel}function ee(t,...e){if(ps.logLevel<=ye.DEBUG){const n=e.map(Lp);ps.debug(`Firestore (${Bo}): ${t}`,...n)}}function xr(t,...e){if(ps.logLevel<=ye.ERROR){const n=e.map(Lp);ps.error(`Firestore (${Bo}): ${t}`,...n)}}function Ro(t,...e){if(ps.logLevel<=ye.WARN){const n=e.map(Lp);ps.warn(`Firestore (${Bo}): ${t}`,...n)}}function Lp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+t;throw xr(e),new Error(e)}function Re(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(kt.UNAUTHENTICATED))}shutdown(){}}class yA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vA{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new os;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new os,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new os)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string"),new tw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string"),new kt(e)}}class _A{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _A(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Re(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string"),this.R=n.token,new EA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=xA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function bo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new nt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new nt(0,0))}static max(){return new le(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class We extends ml{construct(e,n,r){return new We(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new We(n)}static emptyPath(){return new We([])}}const IA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends ml{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return IA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(We.fromString(e))}static fromName(e){return new ie(We.fromString(e).popFirst(5))}static empty(){return new ie(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return We.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new We(e.slice()))}}function SA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new nt(n+1,0):new nt(n,r));return new mi(i,ie.empty(),e)}function AA(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(le.min(),ie.empty(),-1)}static max(){return new mi(le.max(),ie.empty(),-1)}}function kA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==CA)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},h=>r(h))}),a=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const p=h;n(e[p]).next(y=>{a[p]=y,++c,c===s&&r(a)},y=>i(y))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function bA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ol(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vp.oe=-1;function ih(t){return t==null}function Cc(t){return t===0&&1/t==-1/0}function PA(t){return typeof t=="number"&&Number.isInteger(t)&&!Cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){this.comparator=e,this.root=n||pt.EMPTY}insert(e,n){return new $e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new $e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??pt.RED,this.left=i??pt.EMPTY,this.right=s??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new pt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.comparator=e,this.data=new $e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ty(this.data.getIterator())}getIteratorFrom(e){return new ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yt(this.comparator);return n.data=e,n}}class ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new Sn([])}unionWith(e){let n=new yt(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iw("Invalid base64 string: "+s):s}}(e);return new _t(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const NA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(Re(!!t),typeof t=="string"){let e=0;const n=NA.exec(t);if(Re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ms(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Fp(t){const e=t.mapValue.fields.__previous_value__;return jp(e)?Fp(e):e}function gl(t){const e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,n,r,i,s,a,c,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p}}class yl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu={mapValue:{}};function gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jp(t)?4:MA(t)?9007199254740991:DA(t)?10:11:ae()}function Xn(t,e){if(t===e)return!0;const n=gs(t);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gl(t).isEqual(gl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=gi(i.timestampValue),c=gi(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ms(i.bytesValue).isEqual(ms(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=qe(i.doubleValue),c=qe(s.doubleValue);return a===c?Cc(a)===Cc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return bo(t.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(ey(a)!==ey(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!Xn(a[h],c[h])))return!1;return!0}(t,e);default:return ae()}}function vl(t,e){return(t.values||[]).find(n=>Xn(n,e))!==void 0}function Po(t,e){if(t===e)return 0;const n=gs(t),r=gs(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,a){const c=qe(s.integerValue||s.doubleValue),h=qe(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(t,e);case 3:return ny(t.timestampValue,e.timestampValue);case 4:return ny(gl(t),gl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,a){const c=ms(s),h=ms(a);return c.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Ee(c[p],h[p]);if(y!==0)return y}return Ee(c.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const c=Ee(qe(s.latitude),qe(a.latitude));return c!==0?c:Ee(qe(s.longitude),qe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ry(t.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,p,y;const v=s.fields||{},w=a.fields||{},A=(c=v.value)===null||c===void 0?void 0:c.arrayValue,O=(h=w.value)===null||h===void 0?void 0:h.arrayValue,M=Ee(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:ry(A,O)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Cu.mapValue&&a===Cu.mapValue)return 0;if(s===Cu.mapValue)return 1;if(a===Cu.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),p=a.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let v=0;v<h.length&&v<y.length;++v){const w=Ee(h[v],y[v]);if(w!==0)return w;const A=Po(c[h[v]],p[y[v]]);if(A!==0)return A}return Ee(h.length,y.length)}(t.mapValue,e.mapValue);default:throw ae()}}function ny(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=gi(t),r=gi(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function ry(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Po(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function No(t){return df(t)}function df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=df(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${df(n.fields[a])}`;return i+"}"}(t.mapValue):ae()}function ff(t){return!!t&&"integerValue"in t}function Up(t){return!!t&&"arrayValue"in t}function iy(t){return!!t&&"nullValue"in t}function sy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gu(t){return!!t&&"mapValue"in t}function DA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function MA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=Ha(a):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$o(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dn(Ha(this.value))}}function sw(t){const e=[];return $o(t.fields,(n,r)=>{const i=new mt([n]);if(Gu(r)){const s=sw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Rt(e,0,le.min(),le.min(),le.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Rt(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Rt(e,2,n,le.min(),le.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Rt(e,3,n,le.min(),le.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.position=e,this.inclusive=n}}function oy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(a.referenceValue),n.key):r=Po(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ay(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n="asc"){this.field=e,this.dir=n}}function LA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{}class et extends ow{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jA(e,n,r):n==="array-contains"?new zA(e,r):n==="in"?new BA(e,r):n==="not-in"?new $A(e,r):n==="array-contains-any"?new HA(e,r):new et(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new FA(e,r):new UA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Po(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(Po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends ow{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jn(e,n)}matches(e){return aw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function aw(t){return t.op==="and"}function lw(t){return VA(t)&&aw(t)}function VA(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function pf(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+No(t.value);if(lw(t))return t.filters.map(e=>pf(e)).join(",");{const e=t.filters.map(n=>pf(n)).join(",");return`${t.op}(${e})`}}function uw(t,e){return t instanceof et?function(r,i){return i instanceof et&&r.op===i.op&&r.field.isEqual(i.field)&&Xn(r.value,i.value)}(t,e):t instanceof Jn?function(r,i){return i instanceof Jn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&uw(a,i.filters[c]),!0):!1}(t,e):void ae()}function cw(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(cw).join(" ,")+"}"}(t):"Filter"}class jA extends et{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class FA extends et{constructor(e,n){super(e,"in",n),this.keys=hw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UA extends et{constructor(e,n){super(e,"not-in",n),this.keys=hw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function hw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class zA extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Up(n)&&vl(n.arrayValue,this.value)}}class BA extends et{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vl(this.value.arrayValue,n)}}class $A extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vl(this.value.arrayValue,n)}}class HA extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function ly(t,e=null,n=[],r=[],i=null,s=null,a=null){return new WA(t,e,n,r,i,s,a)}function zp(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ih(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>No(r)).join(",")),e.ue=n}return e.ue}function Bp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ay(t.startAt,e.startAt)&&ay(t.endAt,e.endAt)}function mf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qA(t,e,n,r,i,s,a,c){return new sh(t,e,n,r,i,s,a,c)}function $p(t){return new sh(t)}function uy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function GA(t){return t.collectionGroup!==null}function Wa(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new yt(mt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(c=c.add(p.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bc(s,r))}),n.has(mt.keyField().canonicalString())||e.ce.push(new bc(mt.keyField(),r))}return e.ce}function Kn(t){const e=ue(t);return e.le||(e.le=KA(e,Wa(t))),e.le}function KA(t,e){if(t.limitType==="F")return ly(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bc(i.field,s)});const n=t.endAt?new Rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Rc(t.startAt.position,t.startAt.inclusive):null;return ly(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gf(t,e,n){return new sh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function oh(t,e){return Bp(Kn(t),Kn(e))&&t.limitType===e.limitType}function dw(t){return`${zp(Kn(t))}|lt:${t.limitType}`}function Ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>cw(i)).join(", ")}]`),ih(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>No(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>No(i)).join(",")),`Target(${r})`}(Kn(t))}; limitType=${t.limitType})`}function ah(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Wa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const p=oy(a,c,h);return a.inclusive?p<=0:p<0}(r.startAt,Wa(r),i)||r.endAt&&!function(a,c,h){const p=oy(a,c,h);return a.inclusive?p>=0:p>0}(r.endAt,Wa(r),i))}(t,e)}function QA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fw(t){return(e,n)=>{let r=!1;for(const i of Wa(t)){const s=YA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YA(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,a,c){const h=a.data.field(s),p=c.data.field(s);return h!==null&&p!==null?Po(h,p):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=new $e(ie.comparator);function Ir(){return XA}const pw=new $e(ie.comparator);function Pa(...t){let e=pw;for(const n of t)e=e.insert(n.key,n);return e}function mw(t){let e=pw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return qa()}function gw(){return qa()}function qa(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const JA=new $e(ie.comparator),ZA=new yt(ie.comparator);function ge(...t){let e=ZA;for(const n of t)e=e.add(n);return e}const ek=new yt(Ee);function tk(){return ek}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function yw(t){return{integerValue:""+t}}function nk(t,e){return PA(e)?yw(e):Hp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function rk(t,e,n){return t instanceof Pc?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jp(s)&&(s=Fp(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Oo?_w(t,e):t instanceof _l?ww(t,e):function(i,s){const a=vw(i,s),c=cy(a)+cy(i.Pe);return ff(a)&&ff(i.Pe)?yw(c):Hp(i.serializer,c)}(t,e)}function ik(t,e,n){return t instanceof Oo?_w(t,e):t instanceof _l?ww(t,e):n}function vw(t,e){return t instanceof Nc?function(r){return ff(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Pc extends lh{}class Oo extends lh{constructor(e){super(),this.elements=e}}function _w(t,e){const n=Ew(e);for(const r of t.elements)n.some(i=>Xn(i,r))||n.push(r);return{arrayValue:{values:n}}}class _l extends lh{constructor(e){super(),this.elements=e}}function ww(t,e){let n=Ew(e);for(const r of t.elements)n=n.filter(i=>!Xn(i,r));return{arrayValue:{values:n}}}class Nc extends lh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function cy(t){return qe(t.integerValue||t.doubleValue)}function Ew(t){return Up(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n){this.field=e,this.transform=n}}function ok(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Oo&&i instanceof Oo||r instanceof _l&&i instanceof _l?bo(r.elements,i.elements,Xn):r instanceof Nc&&i instanceof Nc?Xn(r.Pe,i.Pe):r instanceof Pc&&i instanceof Pc}(t.transform,e.transform)}class ak{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uh{}function Tw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Iw(t.key,mr.none()):new Dl(t.key,t.data,mr.none());{const n=t.data,r=dn.empty();let i=new yt(mt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new _s(t.key,r,new Sn(i.toArray()),mr.none())}}function lk(t,e,n){t instanceof Dl?function(i,s,a){const c=i.value.clone(),h=dy(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _s?function(i,s,a){if(!Ku(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=dy(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(xw(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ga(t,e,n,r){return t instanceof Dl?function(s,a,c,h){if(!Ku(s.precondition,a))return c;const p=s.value.clone(),y=fy(s.fieldTransforms,h,a);return p.setAll(y),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof _s?function(s,a,c,h){if(!Ku(s.precondition,a))return c;const p=fy(s.fieldTransforms,h,a),y=a.data;return y.setAll(xw(s)),y.setAll(p),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(s,a,c){return Ku(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function uk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=vw(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function hy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bo(r,i,(s,a)=>ok(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dl extends uh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _s extends uh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dy(t,e,n){const r=new Map;Re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,ik(a,c,n[i]))}return r}function fy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,rk(s,a,e))}return r}class Iw extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ck extends uh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lk(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ga(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gw();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const h=Tw(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,(n,r)=>hy(n,r))&&bo(this.baseMutations,e.baseMutations,(n,r)=>hy(n,r))}}class Wp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length);let i=function(){return JA}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Wp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,ve;function pk(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function Sw(t){if(t===void 0)return xr("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ye.OK:return $.OK;case Ye.CANCELLED:return $.CANCELLED;case Ye.UNKNOWN:return $.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return $.INTERNAL;case Ye.UNAVAILABLE:return $.UNAVAILABLE;case Ye.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ye.NOT_FOUND:return $.NOT_FOUND;case Ye.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ye.ABORTED:return $.ABORTED;case Ye.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ye.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(ve=Ye||(Ye={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=new ss([4294967295,4294967295],0);function py(t){const e=mk().encode(t),n=new Q_;return n.update(e),new Uint8Array(n.digest())}function my(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ss([n,r],0),new ss([i,s],0)]}class qp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Na(`Invalid padding: ${n}`);if(r<0)throw new Na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Na(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ss.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ss.fromNumber(r)));return i.compare(gk)===1&&(i=new ss([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=py(e),[r,i]=my(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new qp(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=py(e),[r,i]=my(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ch(le.min(),i,new $e(Ee),Ir(),ge())}}class Ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ml(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Aw{constructor(e,n){this.targetId=e,this.me=n}}class kw{constructor(e,n,r=_t.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class gy{constructor(){this.fe=0,this.ge=vy(),this.pe=_t.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Ml(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=vy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ir(),this.qe=yy(),this.Qe=new $e(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(mf(s))if(r===0){const a=new ie(s.path);this.Ue(n,a,Rt.newNoDocument(a,le.min()))}else Re(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(n);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=ms(r).toUint8Array()}catch(h){if(h instanceof iw)return Ro("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new qp(a,i,s)}catch(h){return Ro(h instanceof Na?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&mf(c.target)){const h=new ie(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Rt.newNoDocument(h,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const p=this.Je(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new ch(e,n,this.Qe,this.ke,r);return this.ke=Ir(),this.qe=yy(),this.Qe=new $e(Ee),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yt(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function yy(){return new $e(ie.comparator)}function vy(){return new $e(ie.comparator)}const vk={asc:"ASCENDING",desc:"DESCENDING"},_k={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wk={and:"AND",or:"OR"};class Ek{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yf(t,e){return t.useProto3Json||ih(e)?e:{value:e}}function Oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tk(t,e){return Oc(t,e.toTimestamp())}function Qn(t){return Re(!!t),le.fromTimestamp(function(n){const r=gi(n);return new nt(r.seconds,r.nanos)}(t))}function Gp(t,e){return vf(t,e).canonicalString()}function vf(t,e){const n=function(i){return new We(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Rw(t){const e=We.fromString(t);return Re(Dw(e)),e}function _f(t,e){return Gp(t.databaseId,e.path)}function nd(t,e){const n=Rw(e);if(n.get(1)!==t.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(Pw(n))}function bw(t,e){return Gp(t.databaseId,e)}function xk(t){const e=Rw(t);return e.length===4?We.emptyPath():Pw(e)}function wf(t){return new We(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pw(t){return Re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _y(t,e,n){return{name:_f(t,e),fields:n.value.mapValue.fields}}function Ik(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(p,y){return p.useProto3Json?(Re(y===void 0||typeof y=="string"),_t.fromBase64String(y||"")):(Re(y===void 0||y instanceof Buffer||y instanceof Uint8Array),_t.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(p){const y=p.code===void 0?$.UNKNOWN:Sw(p.code);return new re(y,p.message||"")}(a);n=new kw(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nd(t,r.document.name),s=Qn(r.document.updateTime),a=r.document.createTime?Qn(r.document.createTime):le.min(),c=new dn({mapValue:{fields:r.document.fields}}),h=Rt.newFoundDocument(i,s,a,c),p=r.targetIds||[],y=r.removedTargetIds||[];n=new Qu(p,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nd(t,r.document),s=r.readTime?Qn(r.readTime):le.min(),a=Rt.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Qu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nd(t,r.document),s=r.removedTargetIds||[];n=new Qu([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new fk(i,s),c=r.targetId;n=new Aw(c,a)}}return n}function Sk(t,e){let n;if(e instanceof Dl)n={update:_y(t,e.key,e.value)};else if(e instanceof Iw)n={delete:_f(t,e.key)};else if(e instanceof _s)n={update:_y(t,e.key,e.data),updateMask:Dk(e.fieldMask)};else{if(!(e instanceof ck))return ae();n={verify:_f(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Pc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Oo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _l)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Tk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function Ak(t,e){return t&&t.length>0?(Re(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Qn(i.updateTime):Qn(s);return a.isEqual(le.min())&&(a=Qn(s)),new ak(a,i.transformResults||[])}(n,e))):[]}function kk(t,e){return{documents:[bw(t,e.path)]}}function Ck(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=bw(t,i);const s=function(p){if(p.length!==0)return Ow(Jn.create(p,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(p){if(p.length!==0)return p.map(y=>function(w){return{field:qs(w.field),direction:Pk(w.dir)}}(y))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=yf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:i}}function Rk(t){let e=xk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Re(r===1);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];n.where&&(s=function(v){const w=Nw(v);return w instanceof Jn&&lw(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(w=>function(O){return new bc(Gs(O.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(v){let w;return w=typeof v=="object"?v.value:v,ih(w)?null:w}(n.limit));let h=null;n.startAt&&(h=function(v){const w=!!v.before,A=v.values||[];return new Rc(A,w)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const w=!v.before,A=v.values||[];return new Rc(A,w)}(n.endAt)),qA(e,i,a,s,c,"F",h,p)}function bk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gs(n.unaryFilter.field);return et.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Gs(n.unaryFilter.field);return et.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gs(n.unaryFilter.field);return et.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gs(n.unaryFilter.field);return et.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return et.create(Gs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>Nw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function Pk(t){return vk[t]}function Nk(t){return _k[t]}function Ok(t){return wk[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Gs(t){return mt.fromServerFormat(t.fieldPath)}function Ow(t){return t instanceof et?function(n){if(n.op==="=="){if(sy(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(iy(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sy(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(iy(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:Nk(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const r=n.getFilters().map(i=>Ow(i));return r.length===1?r[0]:{compositeFilter:{op:Ok(n.op),filters:r}}}(t):ae()}function Dk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Dw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r,i,s=le.min(),a=le.min(),c=_t.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.ct=e}}function Lk(t){const e=Rk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.un=new jk}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(mi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class jk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yt(We.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Do(0)}static kn(){return new Do(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ga(r.mutation,i,Sn.empty(),nt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=ts();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Pa();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let s=Ir();const a=qa(),c=function(){return qa()}();return n.forEach((h,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof _s)?s=s.insert(p.key,p):y!==void 0?(a.set(p.key,y.mutation.getFieldMask()),Ga(y.mutation,p,y.mutation.getFieldMask(),nt.now())):a.set(p.key,Sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((p,y)=>a.set(p,y)),n.forEach((p,y)=>{var v;return c.set(p,new Uk(y,(v=a.get(p))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){const r=qa();let i=new $e((a,c)=>a-c),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const p=n.get(h);if(p===null)return;let y=r.get(h)||Sn.empty();y=c.applyToLocalView(p,y),r.set(h,y);const v=(i.get(c.batchId)||ge()).add(h);i=i.insert(c.batchId,v)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,y=h.value,v=gw();y.forEach(w=>{if(!s.has(w)){const A=Tw(n.get(w),r.get(w));A!==null&&v.set(w,A),s=s.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,p,v))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(ts());let c=-1,h=s;return a.next(p=>U.forEach(p,(y,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),s.get(y)?U.resolve():this.remoteDocumentCache.getEntry(e,y).next(w=>{h=h.insert(y,w)}))).next(()=>this.populateOverlays(e,p,s)).next(()=>this.computeViews(e,h,p,ge())).next(y=>({batchId:c,changes:mw(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=Pa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Pa();return this.indexManager.getCollectionParents(e,s).next(c=>U.forEach(c,h=>{const p=function(v,w){return new sh(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(y=>{y.forEach((v,w)=>{a=a.insert(v,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((h,p)=>{const y=p.getKey();a.get(y)===null&&(a=a.insert(y,Rt.newInvalidDocument(y)))});let c=Pa();return a.forEach((h,p)=>{const y=s.get(h);y!==void 0&&Ga(y.mutation,p,Sn.empty(),nt.now()),ah(n,p)&&(c=c.insert(h,p))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Qn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Lk(i.bundledQuery),readTime:Qn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(){this.overlays=new $e(ie.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=ts(),s=n.length+1,a=new ie(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new $e((p,y)=>p-y);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=s.get(p.largestBatchId);y===null&&(y=ts(),s=s.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=ts(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,y)=>c.set(p,y)),!(c.size()>=i)););return U.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new dk(n,r));let s=this.Ir.get(n);s===void 0&&(s=ge(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.Tr=new yt(ot.Er),this.dr=new yt(ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ot(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ot(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new We([])),r=new ot(n,e),i=new ot(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new We([])),r=new ot(n,e),i=new ot(n,e+1);let s=ge();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new ot(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ot{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new yt(ot.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hk(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new ot(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ot(n,0),i=new ot(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yt(Ee);return n.forEach(i=>{const s=new ot(i,0),a=new ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const a=new ot(new ie(s),0);let c=new yt(Ee);return this.br.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.wr)),!0)},a),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,i=>{const s=new ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ot(n,0),i=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.Mr=e,this.docs=function(){return new $e(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(n))}getEntries(e,n){let r=Ir();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ir();const a=n.path,c=new ie(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:y}}=h.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||kA(AA(y),r)<=0||(i.has(y.key)||ah(n,y))&&(s=s.insert(y.key,y.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gk(this)}getSize(e){return U.resolve(this.size)}}class Gk extends Fk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e){this.persistence=e,this.Nr=new Ho(n=>zp(n),Bp),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Kp,this.targetCount=0,this.kr=Do.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Vp(0),this.Kr=!1,this.Kr=!0,this.$r=new Hk,this.referenceDelegate=e(this),this.Ur=new Kk(this),this.indexManager=new Vk,this.remoteDocumentCache=function(i){return new qk(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Mk(n),this.Gr=new Bk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Wk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new Yk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Yk extends RA{constructor(e){super(),this.currentSequenceNumber=e}}class Qp{constructor(e){this.persistence=e,this.Jr=new Kp,this.Yr=null}static Zr(e){return new Qp(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Yp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fx()?8:bA(Pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new Xk;return this.Xi(e,n,a).next(c=>{if(s.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(wa()<=ye.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(wa()<=ye.DEBUG&&ee("QueryEngine","Query:",Ws(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wa()<=ye.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):U.resolve())}Yi(e,n){if(uy(n))return U.resolve(null);let r=Kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gf(n,null,"F"),r=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=ge(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.ts(n,c);return this.ns(n,p,a,h.readTime)?this.Yi(e,gf(n,null,"F")):this.rs(e,p,n,h)}))})))}Zi(e,n,r,i){return uy(n)||i.isEqual(le.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?U.resolve(null):(wa()<=ye.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(n)),this.rs(e,a,n,SA(i,-1)).next(c=>c))})}ts(e,n){let r=new yt(fw(e));return n.forEach((i,s)=>{ah(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return wa()<=ye.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ws(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new $e(Ee),this._s=new Ho(s=>zp(s),Bp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function eC(t,e,n,r){return new Zk(t,e,n,r)}async function Mw(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=ge();for(const p of i){a.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}for(const p of s){c.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}return n.localDocuments.getDocuments(r,h).next(p=>({hs:p,removedBatchIds:a,addedBatchIds:c}))})})}function tC(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const v=p.batch,w=v.keys();let A=U.resolve();return w.forEach(O=>{A=A.next(()=>y.getEntry(h,O)).next(M=>{const L=p.docVersions.get(O);Re(L!==null),M.version.compareTo(L)<0&&(v.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(h,v))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=ge();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Lw(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function nC(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((y,v)=>{const w=i.get(v);if(!w)return;c.push(n.Ur.removeMatchingKeys(s,y.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(s,y.addedDocuments,v)));let A=w.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(_t.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),i=i.insert(v,A),function(M,L,k){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(w,A,y)&&c.push(n.Ur.updateTargetData(s,A))});let h=Ir(),p=ge();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,y))}),c.push(rC(s,a,e.documentUpdates).next(y=>{h=y.Ps,p=y.Is})),!r.isEqual(le.min())){const y=n.Ur.getLastRemoteSnapshotVersion(s).next(v=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(y)}return U.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,p)).next(()=>h)}).then(s=>(n.os=i,s))}function rC(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Ir();return n.forEach((c,h)=>{const p=s.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(le.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function iC(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function sC(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new ti(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ef(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ol(a))throw a;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function wy(t,e,n){const r=ue(t);let i=le.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,p,y){const v=ue(h),w=v._s.get(y);return w!==void 0?U.resolve(v.os.get(w)):v.Ur.getTargetData(p,y)}(r,a,Kn(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:le.min(),n?s:ge())).next(c=>(oC(r,QA(e),c),{documents:c,Ts:s})))}function oC(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Ey{constructor(){this.activeTargetIds=tk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aC{constructor(){this.so=new Ey,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ey,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=null;function rd(){return Ru===null?Ru=function(){return 268435456+Math.round(2147483648*Math.random())}():Ru++,"0x"+Ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At="WebChannelConnection";class hC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const c=rd(),h=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,s,a),this.No(n,h,p,i).then(y=>(ee("RestConnection",`Received RPC '${n}' ${c}: `,y),y),y=>{throw Ro("RestConnection",`RPC '${n}' ${c} failed with error: `,y,"url: ",h,"request:",i),y})}Lo(n,r,i,s,a,c){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=uC[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=rd();return new Promise((a,c)=>{const h=new Y_;h.setWithCredentials(!0),h.listenOnce(X_.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case qu.NO_ERROR:const y=h.getResponseJson();ee(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),a(y);break;case qu.TIMEOUT:ee(At,`RPC '${e}' ${s} timed out`),c(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const v=h.getStatus();if(ee(At,`RPC '${e}' ${s} failed with status:`,v,"response text:",h.getResponseText()),v>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w==null?void 0:w.error;if(A&&A.status&&A.message){const O=function(L){const k=L.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(k)>=0?k:$.UNKNOWN}(A.status);c(new re(O,A.message))}else c(new re($.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new re($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ee(At,`RPC '${e}' ${s} completed.`)}});const p=JSON.stringify(i);ee(At,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",p,r,15)})}Bo(e,n,r){const i=rd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ew(),c=Z_(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const y=s.join("");ee(At,`Creating RPC '${e}' stream ${i}: ${y}`,h);const v=a.createWebChannel(y,h);let w=!1,A=!1;const O=new cC({Io:L=>{A?ee(At,`Not sending because RPC '${e}' stream ${i} is closed:`,L):(w||(ee(At,`Opening RPC '${e}' stream ${i} transport.`),v.open(),w=!0),ee(At,`RPC '${e}' stream ${i} sending:`,L),v.send(L))},To:()=>v.close()}),M=(L,k,x)=>{L.listen(k,P=>{try{x(P)}catch(V){setTimeout(()=>{throw V},0)}})};return M(v,ba.EventType.OPEN,()=>{A||(ee(At,`RPC '${e}' stream ${i} transport opened.`),O.yo())}),M(v,ba.EventType.CLOSE,()=>{A||(A=!0,ee(At,`RPC '${e}' stream ${i} transport closed`),O.So())}),M(v,ba.EventType.ERROR,L=>{A||(A=!0,Ro(At,`RPC '${e}' stream ${i} transport errored:`,L),O.So(new re($.UNAVAILABLE,"The operation could not be completed")))}),M(v,ba.EventType.MESSAGE,L=>{var k;if(!A){const x=L.data[0];Re(!!x);const P=x,V=P.error||((k=P[0])===null||k===void 0?void 0:k.error);if(V){ee(At,`RPC '${e}' stream ${i} received error:`,V);const F=V.status;let B=function(S){const R=Ye[S];if(R!==void 0)return Sw(R)}(F),I=V.message;B===void 0&&(B=$.INTERNAL,I="Unknown error status: "+F+" with message "+V.message),A=!0,O.So(new re(B,I)),v.close()}else ee(At,`RPC '${e}' stream ${i} received:`,x),O.bo(x)}}),M(c,J_.STAT_EVENT,L=>{L.stat===hf.PROXY?ee(At,`RPC '${e}' stream ${i} detected buffering proxy`):L.stat===hf.NOPROXY&&ee(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{O.wo()},0),O}}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){return new Ek(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Vw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dC extends jw{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Ik(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Qn(a.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=wf(this.serializer),n.addTarget=function(s,a){let c;const h=a.target;if(c=mf(h)?{documents:kk(s,h)}:{query:Ck(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Cw(s,a.resumeToken);const p=yf(s,a.expectedCount);p!==null&&(c.expectedCount=p)}else if(a.snapshotVersion.compareTo(le.min())>0){c.readTime=Oc(s,a.snapshotVersion.toTimestamp());const p=yf(s,a.expectedCount);p!==null&&(c.expectedCount=p)}return c}(this.serializer,e);const r=bk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=wf(this.serializer),n.removeTarget=e,this.a_(n)}}class fC extends jw{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Re(!!e.streamToken),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Ak(e.writeResults,e.commitTime),r=Qn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Sk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,vf(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re($.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,vf(n,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re($.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class mC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{ws(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(h){const p=ue(h);p.L_.add(4),await Ll(p),p.q_.set("Unknown"),p.L_.delete(4),await dh(p)}(this))})}),this.q_=new mC(r,i)}}async function dh(t){if(ws(t))for(const e of t.B_)await e(!0)}async function Ll(t){for(const e of t.B_)await e(!1)}function Fw(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),em(n)?Zp(n):Wo(n).r_()&&Jp(n,e))}function Xp(t,e){const n=ue(t),r=Wo(n);n.N_.delete(e),r.r_()&&Uw(n,e),n.N_.size===0&&(r.r_()?r.o_():ws(n)&&n.q_.set("Unknown"))}function Jp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(t).A_(e)}function Uw(t,e){t.Q_.xe(e),Wo(t).R_(e)}function Zp(t){t.Q_=new yk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wo(t).start(),t.q_.v_()}function em(t){return ws(t)&&!Wo(t).n_()&&t.N_.size>0}function ws(t){return ue(t).L_.size===0}function zw(t){t.Q_=void 0}async function yC(t){t.q_.set("Online")}async function vC(t){t.N_.forEach((e,n)=>{Jp(t,e)})}async function _C(t,e){zw(t),em(t)?(t.q_.M_(e),Zp(t)):t.q_.set("Unknown")}async function wC(t,e,n){if(t.q_.set("Online"),e instanceof kw&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dc(t,r)}else if(e instanceof Qu?t.Q_.Ke(e):e instanceof Aw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await Lw(t.localStore);n.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=s.N_.get(p);y&&s.N_.set(p,y.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,p)=>{const y=s.N_.get(h);if(!y)return;s.N_.set(h,y.withResumeToken(_t.EMPTY_BYTE_STRING,y.snapshotVersion)),Uw(s,h);const v=new ti(y.target,h,p,y.sequenceNumber);Jp(s,v)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Dc(t,r)}}async function Dc(t,e,n){if(!Ol(e))throw e;t.L_.add(1),await Ll(t),t.q_.set("Offline"),n||(n=()=>Lw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await dh(t)})}function Bw(t,e){return e().catch(n=>Dc(t,n,e))}async function fh(t){const e=ue(t),n=yi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;EC(e);)try{const i=await iC(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,TC(e,i)}catch(i){await Dc(e,i)}$w(e)&&Hw(e)}function EC(t){return ws(t)&&t.O_.length<10}function TC(t,e){t.O_.push(e);const n=yi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function $w(t){return ws(t)&&!yi(t).n_()&&t.O_.length>0}function Hw(t){yi(t).start()}async function xC(t){yi(t).p_()}async function IC(t){const e=yi(t);for(const n of t.O_)e.m_(n.mutations)}async function SC(t,e,n){const r=t.O_.shift(),i=Wp.from(r,e,n);await Bw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await fh(t)}async function AC(t,e){e&&yi(t).V_&&await async function(r,i){if(function(a){return pk(a)&&a!==$.ABORTED}(i.code)){const s=r.O_.shift();yi(r).s_(),await Bw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await fh(r)}}(t,e),$w(t)&&Hw(t)}async function xy(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ws(n);n.L_.add(3),await Ll(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await dh(n)}async function kC(t,e){const n=ue(t);e?(n.L_.delete(2),await dh(n)):e||(n.L_.add(2),await Ll(n),n.q_.set("Unknown"))}function Wo(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new dC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:yC.bind(null,t),Ro:vC.bind(null,t),mo:_C.bind(null,t),d_:wC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),em(t)?Zp(t):t.q_.set("Unknown")):(await t.K_.stop(),zw(t))})),t.K_}function yi(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new fC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xC.bind(null,t),mo:AC.bind(null,t),f_:IC.bind(null,t),g_:SC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fh(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new tm(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nm(t,e){if(xr("AsyncQueue",`${e}: ${t}`),Ol(t))return new re($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Pa(),this.sortedSet=new $e(this.comparator)}static emptySet(e){return new yo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.W_=new $e(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Mo{constructor(e,n,r,i,s,a,c,h,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Mo(e,n,yo.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class RC{constructor(){this.queries=Sy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=Sy(),s.forEach((a,c)=>{for(const h of c.j_)h.onError(r)})})(this,new re($.ABORTED,"Firestore shutting down"))}}function Sy(){return new Ho(t=>dw(t),oh)}async function bC(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new CC,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=nm(a,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&rm(n)}async function PC(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NC(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&rm(n)}function OC(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function rm(t){t.Y_.forEach(e=>{e.next()})}var Tf,Ay;(Ay=Tf||(Tf={})).ea="default",Ay.Cache="cache";class DC{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class MC{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=fw(e),this.Ra=new yo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Iy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,v)=>{const w=i.get(y),A=ah(this.query,v)?v:null,O=!!w&&this.mutatedKeys.has(w.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;w&&A?w.data.isEqual(A.data)?O!==M&&(r.track({type:3,doc:A}),L=!0):this.ga(w,A)||(r.track({type:2,doc:A}),L=!0,(h&&this.Aa(A,h)>0||p&&this.Aa(A,p)<0)&&(c=!0)):!w&&A?(r.track({type:0,doc:A}),L=!0):w&&!A&&(r.track({type:1,doc:w}),L=!0,(h||p)&&(c=!0)),L&&(A?(a=a.add(A),s=M?s.add(y):s.delete(y)):(a=a.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const y=this.query.limitType==="F"?a.last():a.first();a=a.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((y,v)=>function(A,O){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return M(A)-M(O)}(y.type,v.type)||this.Aa(y.doc,v.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,p=h!==this.Ea;return this.Ea=h,a.length!==0||p?{snapshot:new Mo(this.query,e.Ra,s,a,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Iy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new qw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Ww(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Mo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class LC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VC{constructor(e){this.key=e,this.va=!1}}class jC{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ho(c=>dw(c),oh),this.Ma=new Map,this.xa=new Set,this.Oa=new $e(ie.comparator),this.Na=new Map,this.La=new Kp,this.Ba={},this.ka=new Map,this.qa=Do.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function FC(t,e,n=!0){const r=Jw(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Gw(r,e,n,!0),i}async function UC(t,e){const n=Jw(t);await Gw(n,e,!0,!1)}async function Gw(t,e,n,r){const i=await sC(t.localStore,Kn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await zC(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Fw(t.remoteStore,i),c}async function zC(t,e,n,r,i){t.Ka=(v,w,A)=>async function(M,L,k,x){let P=L.view.ma(k);P.ns&&(P=await wy(M.localStore,L.query,!1).then(({documents:I})=>L.view.ma(I,P)));const V=x&&x.targetChanges.get(L.targetId),F=x&&x.targetMismatches.get(L.targetId)!=null,B=L.view.applyChanges(P,M.isPrimaryClient,V,F);return Cy(M,L.targetId,B.wa),B.snapshot}(t,v,w,A);const s=await wy(t.localStore,e,!0),a=new MC(e,s.Ts),c=a.ma(s.documents),h=Ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=a.applyChanges(c,t.isPrimaryClient,h);Cy(t,n,p.wa);const y=new LC(e,n,a);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function BC(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!oh(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ef(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Xp(r.remoteStore,i.targetId),xf(r,i.targetId)}).catch(Nl)):(xf(r,i.targetId),await Ef(r.localStore,i.targetId,!0))}async function $C(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Xp(n.remoteStore,r.targetId))}async function HC(t,e,n){const r=XC(t);try{const i=await function(a,c){const h=ue(a),p=nt.now(),y=c.reduce((A,O)=>A.add(O.key),ge());let v,w;return h.persistence.runTransaction("Locally write mutations","readwrite",A=>{let O=Ir(),M=ge();return h.cs.getEntries(A,y).next(L=>{O=L,O.forEach((k,x)=>{x.isValidDocument()||(M=M.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(A,O)).next(L=>{v=L;const k=[];for(const x of c){const P=uk(x,v.get(x.key).overlayedDocument);P!=null&&k.push(new _s(x.key,P,sw(P.value.mapValue),mr.exists(!0)))}return h.mutationQueue.addMutationBatch(A,p,k,c)}).next(L=>{w=L;const k=L.applyToLocalDocumentSet(v,M);return h.documentOverlayCache.saveOverlays(A,L.batchId,k)})}).then(()=>({batchId:w.batchId,changes:mw(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let p=a.Ba[a.currentUser.toKey()];p||(p=new $e(Ee)),p=p.insert(c,h),a.Ba[a.currentUser.toKey()]=p}(r,i.batchId,n),await Vl(r,i.changes),await fh(r.remoteStore)}catch(i){const s=nm(i,"Failed to persist write");n.reject(s)}}async function Kw(t,e){const n=ue(t);try{const r=await nC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Re(a.va):i.removedDocuments.size>0&&(Re(a.va),a.va=!1))}),await Vl(n,r,e)}catch(r){await Nl(r)}}function ky(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=ue(a);h.onlineState=c;let p=!1;h.queries.forEach((y,v)=>{for(const w of v.j_)w.Z_(c)&&(p=!0)}),p&&rm(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function WC(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new $e(ie.comparator);a=a.insert(s,Rt.newNoDocument(s,le.min()));const c=ge().add(s),h=new ch(le.min(),new Map,new $e(Ee),a,c);await Kw(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),im(r)}else await Ef(r.localStore,e,!1).then(()=>xf(r,e,n)).catch(Nl)}async function qC(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await tC(n.localStore,e);Yw(n,r,null),Qw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Vl(n,i)}catch(i){await Nl(i)}}async function GC(t,e,n){const r=ue(t);try{const i=await function(a,c){const h=ue(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(v=>(Re(v!==null),y=v.keys(),h.mutationQueue.removeMutationBatch(p,v))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);Yw(r,e,n),Qw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Vl(r,i)}catch(i){await Nl(i)}}function Qw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Yw(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Xw(t,r)})}function Xw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Xp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),im(t))}function Cy(t,e,n){for(const r of n)r instanceof Ww?(t.La.addReference(r.key,e),KC(t,r)):r instanceof qw?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Xw(t,r.key)):ae()}function KC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),im(t))}function im(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(We.fromString(e)),r=t.qa.next();t.Na.set(r,new VC(n)),t.Oa=t.Oa.insert(n,r),Fw(t.remoteStore,new ti(Kn($p(n.path)),r,"TargetPurposeLimboResolution",Vp.oe))}}async function Vl(t,e,n){const r=ue(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,n).then(p=>{var y;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=n==null?void 0:n.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(p){i.push(p);const v=Yp.Wi(h.targetId,p);s.push(v)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,p){const y=ue(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>U.forEach(p,w=>U.forEach(w.$i,A=>y.persistence.referenceDelegate.addReference(v,w.targetId,A)).next(()=>U.forEach(w.Ui,A=>y.persistence.referenceDelegate.removeReference(v,w.targetId,A)))))}catch(v){if(!Ol(v))throw v;ee("LocalStore","Failed to update sequence numbers: "+v)}for(const v of p){const w=v.targetId;if(!v.fromCache){const A=y.os.get(w),O=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(O);y.os=y.os.insert(w,M)}}}(r.localStore,s))}async function QC(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await Mw(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new re($.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Vl(n,r.hs)}}function YC(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const c=n.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function Jw(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WC.bind(null,e),e.Ca.d_=NC.bind(null,e.eventManager),e.Ca.$a=OC.bind(null,e.eventManager),e}function XC(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GC.bind(null,e),e}class Mc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return eC(this.persistence,new Jk,e.initialUser,this.serializer)}Ga(e){return new Qk(Qp.Zr,this.serializer)}Wa(e){return new aC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mc.provider={build:()=>new Mc};class If{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ky(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QC.bind(null,this.syncEngine),await kC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RC}()}createDatastore(e){const n=hh(e.databaseInfo.databaseId),r=function(s){return new hC(s)}(e.databaseInfo);return function(s,a,c,h){return new pC(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,c){return new gC(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>ky(this.syncEngine,n,0),function(){return Ty.D()?new Ty:new lC}())}createSyncEngine(e,n){return function(i,s,a,c,h,p,y){const v=new jC(i,s,a,c,h,p);return y&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ll(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}If.provider={build:()=>new If};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=nw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ee("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ee("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=nm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sd(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Mw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ry(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eR(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xy(e.remoteStore,i)),t._onlineComponents=e}async function eR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await sd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ro("Error using user provided cache. Falling back to memory cache: "+n),await sd(t,new Mc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await sd(t,new Mc);return t._offlineComponents}async function Zw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Ry(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Ry(t,new If))),t._onlineComponents}function tR(t){return Zw(t).then(e=>e.syncEngine)}async function by(t){const e=await Zw(t),n=e.eventManager;return n.onListen=FC.bind(null,e.syncEngine),n.onUnlisten=BC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$C.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t,e,n){if(!n)throw new re($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rR(t,e,n,r){if(e===!0&&r===!0)throw new re($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ny(t){if(!ie.isDocumentKey(t))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function vo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sm(t);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class om{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gA;switch(r.type){case"firstParty":return new wA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Py.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Py.delete(n),r.terminate())}(this),Promise.resolve()}}function iR(t,e,n,r={}){var i;const s=(t=vo(t,om))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=kt.MOCK_USER;else{c=Nx(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new kt(p)}t._authCredentials=new yA(new tw(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ph(this.firestore,e,this._query)}}class mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}}class wl extends ph{constructor(e,n,r){super(e,n,$p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new ie(e))}withConverter(e){return new wl(this.firestore,e,this._path)}}function tE(t,e,...n){if(t=tn(t),arguments.length===1&&(e=nw.newId()),nR("doc","path",e),t instanceof om){const r=We.fromString(e,...n);return Ny(r),new mn(t,null,new ie(r))}{if(!(t instanceof mn||t instanceof wl))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(We.fromString(e,...n));return Ny(r),new mn(t.firestore,t instanceof wl?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Vw(this,"async_queue_retry"),this.Vu=()=>{const r=id();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=id();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new os;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ol(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=tm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function My(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Lc extends om{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Dy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dy(e),this._firestoreClient=void 0,await e}}}function sR(t,e){const n=typeof t=="object"?t:h_(),r=typeof t=="string"?t:"(default)",i=Ap(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bx("firestore");s&&iR(i,...s)}return i}function nE(t){if(t._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||oR(t),t._firestoreClient}function oR(t){var e,n,r;const i=t._freezeSettings(),s=function(c,h,p,y){return new OA(c,h,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,eE(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new ZC(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lo(_t.fromBase64String(e))}catch(n){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lo(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=/^__.*__$/;class lR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dl(e,this.data,n,this.fieldTransforms)}}function rE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class mh{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new mh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(rE(this.Cu)&&aR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class uR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hh(e)}Qu(e,n,r,i=!1){return new mh({Cu:e,methodName:n,qu:r,path:mt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cR(t){const e=t._freezeSettings(),n=hh(t._databaseId);return new uR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hR(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);oE("Data must be an object, but it was:",a,r);const c=iE(r,a);let h,p;if(s.merge)h=new Sn(a.fieldMask),p=a.fieldTransforms;else if(s.mergeFields){const y=[];for(const v of s.mergeFields){const w=fR(e,v,n);if(!a.contains(w))throw new re($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);mR(y,w)||y.push(w)}h=new Sn(y),p=a.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=a.fieldTransforms;return new lR(new dn(c),h,p)}function dR(t,e,n){return new mh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hm extends lm{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=dR(this,e,!0),r=this.Ku.map(s=>dm(s,n)),i=new Oo(r);return new sk(e.path,i)}isEqual(e){return e instanceof hm&&hl(this.Ku,e.Ku)}}function dm(t,e){if(sE(t=tn(t)))return oE("Unsupported field value:",e,t),iE(t,e);if(t instanceof lm)return function(r,i){if(!rE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=dm(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=nt.fromDate(r);return{timestampValue:Oc(i.serializer,s)}}if(r instanceof nt){const s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oc(i.serializer,s)}}if(r instanceof um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lo)return{bytesValue:Cw(i.serializer,r._byteString)};if(r instanceof mn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof cm)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return Hp(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${sm(r)}`)}(t,e)}function iE(t,e){const n={};return rw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,(r,i)=>{const s=dm(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function sE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof um||t instanceof Lo||t instanceof mn||t instanceof lm||t instanceof cm)}function oE(t,e,n){if(!sE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=sm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function fR(t,e,n){if((e=tn(e))instanceof am)return e._internalPath;if(typeof e=="string")return aE(t,e);throw Vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const pR=new RegExp("[~\\*/\\[\\]]");function aE(t,e,n){if(e.search(pR)>=0)throw Vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new am(...e.split("."))._internalPath}catch{throw Vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vc(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new re($.INVALID_ARGUMENT,c+t+h)}function mR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new gR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gR extends lE{data(){return super.data()}}function uE(t,e){return typeof e=="string"?aE(t,e):e instanceof am?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vR{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>qe(a.doubleValue));return new cm(s)}convertGeoPoint(e){return new um(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Fp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){const n=gi(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=We.fromString(e);Re(Dw(r));const i=new yl(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||xr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cE extends lE{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yu extends cE{data(e={}){return super.data(e)}}class wR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yu(this._firestore,this._userDataWriter,r.key,r,new Oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new Yu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Oa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new Yu(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Oa(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),y=a.indexOf(c.doc.key)),{type:ER(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ER(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class hE extends vR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}}function dE(t,e,n){t=vo(t,mn);const r=vo(t.firestore,Lc),i=_R(t.converter,e,n);return xR(r,[hR(cR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,mr.none())])}function TR(t,...e){var n,r,i;t=tn(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||My(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(My(e[a])){const v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[a+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let h,p,y;if(t instanceof mn)p=vo(t.firestore,Lc),y=$p(t._key.path),h={next:v=>{e[a]&&e[a](IR(p,t,v))},error:e[a+1],complete:e[a+2]};else{const v=vo(t,ph);p=vo(v.firestore,Lc),y=v._query;const w=new hE(p);h={next:A=>{e[a]&&e[a](new wR(p,w,v,A))},error:e[a+1],complete:e[a+2]},yR(t._query)}return function(w,A,O,M){const L=new JC(M),k=new DC(A,L,O);return w.asyncQueue.enqueueAndForget(async()=>bC(await by(w),k)),()=>{L.Za(),w.asyncQueue.enqueueAndForget(async()=>PC(await by(w),k))}}(nE(p),y,c,h)}function xR(t,e){return function(r,i){const s=new os;return r.asyncQueue.enqueueAndForget(async()=>HC(await tR(r),i,s)),s.promise}(nE(t),e)}function IR(t,e,n){const r=n.docs.get(e._key),i=new hE(t);return new cE(t,i,e._key,r,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}function SR(...t){return new hm("arrayUnion",t)}(function(e,n=!0){(function(i){Bo=i})(Uo),Co(new ds("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Lc(new vA(r.getProvider("auth-internal")),new TA(r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(p.options.projectId,y)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),di(Zg,"4.7.3",e),di(Zg,"4.7.3","esm2017")})();const AR={apiKey:"AIzaSyBG1uPRdilWM5LuTEe42ElmF9hljJH0Q8U",authDomain:"remi-1e5ca.firebaseapp.com",projectId:"remi-1e5ca",storageBucket:"remi-1e5ca.firebasestorage.app",messagingSenderId:"181320802161",appId:"1:181320802161:web:4a358015b36abf7eaea0d0",measurementId:"G-DM31SX7NHT"},fE=c_(AR),qo=pA(fE),pE=sR(fE),mE="remi-guitar-tutor",Ea=()=>({xp:0,streak:1,completedLessons:[]}),kR=async t=>{try{return await QS(qo)}catch(e){return console.warn("Firebase Auth Failed (Network/Config). Falling back to Offline Mode.",e),{uid:"offline_user",isAnonymous:!0}}},CR=async(t,e)=>{try{return(await ZS(qo,t,e)).user}catch(n){throw console.error("Registration Error",n),n}},RR=async(t,e)=>{try{return(await e2(qo,t,e)).user}catch(n){throw console.error("Login Error",n),n}},bR=async()=>await r2(qo),PR=(t,e)=>{if(t==="offline_user"||!qo.currentUser){console.log("Using Local Storage for Progress (Offline/Guest)");const n=localStorage.getItem(`remi_progress_${t}`),r=n?JSON.parse(n):Ea();return e(r),()=>{}}try{const n=tE(pE,"artifacts",mE,"users",t,"data","progress");return TR(n,r=>{if(r.exists()){const i=r.data();localStorage.setItem(`remi_progress_${t}`,JSON.stringify(i)),e(i)}else dE(n,Ea()),e(Ea())},r=>{console.warn("Firestore access denied. Falling back to Local Storage.",r);const i=localStorage.getItem(`remi_progress_${t}`);e(i?JSON.parse(i):Ea())})}catch(n){console.error("Firestore Error",n);const r=localStorage.getItem(`remi_progress_${t}`);return e(r?JSON.parse(r):Ea()),()=>{}}},NR=async(t,e,n,r)=>{const i={xp:((e==null?void 0:e.xp)||0)+r,completedLessons:[...(e==null?void 0:e.completedLessons)||[],n],streak:(e==null?void 0:e.streak)||1};if(localStorage.setItem(`remi_progress_${t}`,JSON.stringify(i)),t==="offline_user")return i;try{const s=tE(pE,"artifacts",mE,"users",t,"data","progress");await dE(s,{xp:i.xp,completedLessons:SR(n)},{merge:!0})}catch(s){console.warn("Could not sync to cloud (Permissions/Net). Saved locally.",s)}return i},OR=[{id:"m_posture",title:"Module 1: Posture & Form",color:"from-pink-500 to-rose-400"},{id:"m1",title:"Module 2: Tuning & Basics",color:"from-blue-500 to-cyan-400"},{id:"m2",title:"Module 3: Essential Chords",color:"from-indigo-500 to-purple-500"},{id:"m3",title:"Module 4: Rock Riffs",color:"from-rose-500 to-orange-400"},{id:"m4",title:"Module 5: Scales & Soloing",color:"from-emerald-500 to-teal-400"},{id:"m5",title:"Module 6: Fingerstyle",color:"from-amber-500 to-yellow-400"}],ns=[{id:"posture_sitting",moduleId:"m_posture",level:1,title:"Sitting Posture",description:"The foundation of playing.",xp:30,type:"posture",ghost:"default",briefing:"Sit on the edge of your chair. Hold the guitar comfortably.",prompts:["Back straight.","Shoulders relaxed."]},{id:"tech_thumb",moduleId:"m_posture",level:2,title:"Technique: The Claw",description:"Proper left hand form.",xp:50,type:"posture",ghost:"claw",briefing:"Curve your fingers. Use your thumb for support (it's okay if it's hidden behind the neck).",prompts:["Fingers curved.","Knuckles raised."]},{id:"tune_e",moduleId:"m1",level:1,title:"Tune: Low E",description:"The thickest string (6th).",xp:20,type:"note",targetNote:"E",targetOctave:2,string:6,fret:0,ghost:"default",briefing:"Let's tune the 6th string, the thickest one. It should be an E.",prompts:["Pluck the thickest string.","Tune until the needle is green."]},{id:"tune_a",moduleId:"m1",level:2,title:"Tune: A String",description:"The 5th string.",xp:20,type:"note",targetNote:"A",targetOctave:2,string:5,fret:0,ghost:"default",briefing:"Next is the 5th string (A). It's the second thickest.",prompts:["Pluck the 5th string."]},{id:"tune_d",moduleId:"m1",level:3,title:"Tune: D String",description:"The 4th string.",xp:20,type:"note",targetNote:"D",targetOctave:3,string:4,fret:0,briefing:"Moving down, tune the 4th string to D.",prompts:["Pluck the 4th string."]},{id:"tune_g",moduleId:"m1",level:4,title:"Tune: G String",description:"The 3rd string.",xp:20,type:"note",targetNote:"G",targetOctave:3,string:3,fret:0,briefing:"Tune the 3rd string to G.",prompts:["Pluck the 3rd string."]},{id:"tune_b",moduleId:"m1",level:5,title:"Tune: B String",description:"The 2nd string.",xp:20,type:"note",targetNote:"B",targetOctave:3,string:2,fret:0,briefing:"Tune the 2nd string (B). Almost there.",prompts:["Pluck the 2nd string."]},{id:"tune_e_high",moduleId:"m1",level:6,title:"Tune: High E",description:"The thinnest string (1st).",xp:20,type:"note",targetNote:"E",targetOctave:4,string:1,fret:0,briefing:"Finally, the thinnest string (High E).",prompts:["Pluck the 1st string."]},{id:"chord_em",moduleId:"m2",level:1,title:"The E Minor Chord",description:"Dark and moody.",xp:100,type:"strum",requiredNotes:["E","G","B"],ghost:"chord_em",chordData:{name:"Em",fingers:[{string:5,fret:2,finger:2},{string:4,fret:2,finger:3}]},briefing:"Place your middle finger on A2 and ring finger on D2. Strum all 6 strings.",prompts:["Ffingers on A2, D2.","Strum everything."]},{id:"chord_g",moduleId:"m2",level:2,title:"G Major Chord",description:"The big bright chord.",xp:150,type:"strum",requiredNotes:["G","B","D"],ghost:"chord_em",chordData:{name:"G",fingers:[{string:6,fret:3,finger:2},{string:5,fret:2,finger:1},{string:1,fret:3,finger:3}]},briefing:"This one uses the whole neck. Middle on Low E (3rd fret). Index on A (2nd fret). Ring on High E (3rd fret).",prompts:["Stretch your fingers.","Strum all 6."]},{id:"chord_c",moduleId:"m2",level:3,title:"C Major Chord",description:"The people's chord.",xp:150,type:"strum",requiredNotes:["C","E","G"],ghost:"chord_em",chordData:{name:"C",fingers:[{string:5,fret:3,finger:3},{string:4,fret:2,finger:2},{string:2,fret:1,finger:1}]},briefing:"Standard C Major. Ring on A3, Middle on D2, Index on B1. Don't play the Low E.",prompts:["Don't Play Low E","Arch fingers."]},{id:"chord_d",moduleId:"m2",level:4,title:"D Major Chord",description:"Bright and triangle shaped.",xp:150,type:"strum",requiredNotes:["D","F#","A"],ghost:"chord_em",chordData:{name:"D",fingers:[{string:3,fret:2,finger:1},{string:2,fret:3,finger:3},{string:1,fret:2,finger:2}]},briefing:"Make a triangle. Index G2, Ring B3, Middle E2. Strum bottom 4 strings.",prompts:["Strum 4 strings only."]},{id:"chord_am",moduleId:"m2",level:5,title:"A Minor Chord",description:"Sad but hopeful.",xp:150,type:"strum",requiredNotes:["A","C","E"],ghost:"chord_em",chordData:{name:"Am",fingers:[{string:4,fret:2,finger:2},{string:3,fret:2,finger:3},{string:2,fret:1,finger:1}]},briefing:"Like E Major, but moved down. Middle D2, Ring G2, Index B1.",prompts:["Strum from A string."]},{id:"riff_smoke",moduleId:"m3",level:1,title:"Smoke on the Water",description:"The legendary riff.",xp:200,bpm:112,type:"note",targetNote:"G",targetOctave:3,ghost:"default",sequence:[{note:"G",octave:3,string:6,fret:3,disp:"3",duration:1},{note:"A#",octave:3,string:6,fret:6,disp:"6",duration:1},{note:"C",octave:4,string:6,fret:8,disp:"8",duration:1.5},{note:"G",octave:3,string:6,fret:3,disp:"3",duration:1},{note:"A#",octave:3,string:6,fret:6,disp:"6",duration:1},{note:"C#",octave:4,string:6,fret:9,disp:"9",duration:.5},{note:"C",octave:4,string:6,fret:8,disp:"8",duration:2},{note:"G",octave:3,string:6,fret:3,disp:"3",duration:1},{note:"A#",octave:3,string:6,fret:6,disp:"6",duration:1},{note:"C",octave:4,string:6,fret:8,disp:"8",duration:1.5},{note:"A#",octave:3,string:6,fret:6,disp:"6",duration:1},{note:"G",octave:3,string:6,fret:3,disp:"3",duration:2}],briefing:"0-3-5 on Low E. Rhythm: Dun-dun-dun... Dun-dun-DA-dun...",prompts:["Follow the notes."]},{id:"riff_seven",moduleId:"m3",level:2,title:"Seven Nation Army",description:"Powerful bass line.",xp:200,bpm:120,type:"note",targetNote:"E",targetOctave:2,ghost:"default",sequence:[{note:"E",octave:3,string:5,fret:7,disp:"7",duration:1.5},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:.5},{note:"G",octave:3,string:5,fret:10,disp:"10",duration:1},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"5",duration:1},{note:"C",octave:3,string:5,fret:3,disp:"3",duration:2},{note:"B",octave:2,string:5,fret:2,disp:"2",duration:2},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:1.5},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:.5},{note:"G",octave:3,string:5,fret:10,disp:"10",duration:1},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"5",duration:1},{note:"C",octave:3,string:5,fret:3,disp:"3",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"5",duration:1},{note:"C",octave:3,string:5,fret:3,disp:"3",duration:1},{note:"B",octave:2,string:5,fret:2,disp:"2",duration:2}],briefing:"Start on 7th fret. Rhythm: Bum... bum-bum-bum-bum... bum... bum...",prompts:["Use the A string."]},{id:"scale_c_major",moduleId:"m4",level:1,title:"C Major Scale",description:"Do Re Mi... basics of melody.",xp:300,bpm:100,type:"note",targetNote:"C",targetOctave:3,ghost:"default",sequence:[{note:"C",octave:3,string:5,fret:3,disp:"C",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"D",duration:1},{note:"E",octave:3,string:5,fret:7,disp:"E",duration:1},{note:"F",octave:3,string:4,fret:3,disp:"F",duration:1},{note:"G",octave:3,string:4,fret:5,disp:"G",duration:1},{note:"A",octave:3,string:4,fret:7,disp:"A",duration:1},{note:"B",octave:3,string:3,fret:4,disp:"B",duration:1},{note:"C",octave:4,string:3,fret:5,disp:"C",duration:1}],briefing:"Play the C Major scale ascending (C to C).",prompts:["Use A, D, and G strings."]},{id:"scale_g_major",moduleId:"m4",level:2,title:"G Major Scale",description:"The people's key.",xp:300,type:"note",targetNote:"G",targetOctave:2,ghost:"default",sequence:[{note:"G",octave:2,string:6,fret:3,disp:"G",duration:1},{note:"A",octave:2,string:6,fret:5,disp:"A",duration:1},{note:"B",octave:2,string:5,fret:2,disp:"B",duration:1},{note:"C",octave:3,string:5,fret:3,disp:"C",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"D",duration:1},{note:"E",octave:3,string:4,fret:2,disp:"E",duration:1},{note:"F#",octave:3,string:4,fret:4,disp:"F#",duration:1},{note:"G",octave:3,string:4,fret:5,disp:"G",duration:1}],briefing:"G Major Scale, starting on Low E (3rd Fret).",prompts:["Watch the stretch."]},{id:"scale_pentatonic",moduleId:"m4",level:3,title:"Minor Pentatonic",description:"The soloist's secret weapon.",xp:300,type:"note",targetNote:"A",targetOctave:2,ghost:"default",sequence:[{note:"A",octave:2,string:6,fret:5,disp:"5",duration:1},{note:"C",octave:3,string:6,fret:8,disp:"8",duration:1},{note:"D",octave:3,string:5,fret:5,disp:"5",duration:1},{note:"E",octave:3,string:5,fret:7,disp:"7",duration:1},{note:"G",octave:3,string:4,fret:5,disp:"5",duration:1},{note:"A",octave:3,string:4,fret:7,disp:"7",duration:1}],briefing:"A Minor Pentatonic Box 1. Low E to G string.",prompts:["Follow the pentatonic box."]},{id:"finger_pimam",moduleId:"m5",level:1,title:"P-I-M-A Pattern",description:"Thumb, Index, Middle, Ring.",xp:400,type:"posture",ghost:"claw",briefing:"Fingerpicking needs a steady hand. Rest your thumb on the Low E.",prompts:["Thumb on Low E."]}];function gE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function DR(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gE(t))&&(r&&(r+=" "),r+=e);return r}const fm="-",MR=t=>{const e=VR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const c=a.split(fm);return c[0]===""&&c.length!==1&&c.shift(),yE(c,e)||LR(a)},getConflictingClassGroupIds:(a,c)=>{const h=n[a]||[];return c&&r[a]?[...h,...r[a]]:h}}},yE=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?yE(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(fm);return(a=e.validators.find(({validator:c})=>c(s)))==null?void 0:a.classGroupId},Ly=/^\[(.+)\]$/,LR=t=>{if(Ly.test(t)){const e=Ly.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},VR=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return FR(Object.entries(t.classGroups),n).forEach(([s,a])=>{Sf(a,r,s,e)}),r},Sf=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Vy(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(jR(i)){Sf(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{Sf(a,Vy(e,s),n,r)})})},Vy=(t,e)=>{let n=t;return e.split(fm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},jR=t=>t.isThemeGetter,FR=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,c])=>[e+a,c])):s);return[n,i]}):t,UR=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},vE="!",zR=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=c=>{const h=[];let p=0,y=0,v;for(let L=0;L<c.length;L++){let k=c[L];if(p===0){if(k===i&&(r||c.slice(L,L+s)===e)){h.push(c.slice(y,L)),y=L+s;continue}if(k==="/"){v=L;continue}}k==="["?p++:k==="]"&&p--}const w=h.length===0?c:c.substring(y),A=w.startsWith(vE),O=A?w.substring(1):w,M=v&&v>y?v-y:void 0;return{modifiers:h,hasImportantModifier:A,baseClassName:O,maybePostfixModifierPosition:M}};return n?c=>n({className:c,parseClassName:a}):a},BR=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},$R=t=>({cache:UR(t.cacheSize),parseClassName:zR(t),...MR(t)}),HR=/\s+/,WR=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(HR);let c="";for(let h=a.length-1;h>=0;h-=1){const p=a[h],{modifiers:y,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:A}=n(p);let O=!!A,M=r(O?w.substring(0,A):w);if(!M){if(!O){c=p+(c.length>0?" "+c:c);continue}if(M=r(w),!M){c=p+(c.length>0?" "+c:c);continue}O=!1}const L=BR(y).join(":"),k=v?L+vE:L,x=k+M;if(s.includes(x))continue;s.push(x);const P=i(M,O);for(let V=0;V<P.length;++V){const F=P[V];s.push(k+F)}c=p+(c.length>0?" "+c:c)}return c};function qR(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=_E(e))&&(r&&(r+=" "),r+=n);return r}const _E=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=_E(t[r]))&&(n&&(n+=" "),n+=e);return n};function GR(t,...e){let n,r,i,s=a;function a(h){const p=e.reduce((y,v)=>v(y),t());return n=$R(p),r=n.cache.get,i=n.cache.set,s=c,c(h)}function c(h){const p=r(h);if(p)return p;const y=WR(h,n);return i(h,y),y}return function(){return s(qR.apply(null,arguments))}}const De=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},wE=/^\[(?:([a-z-]+):)?(.+)\]$/i,KR=/^\d+\/\d+$/,QR=new Set(["px","full","screen"]),YR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,XR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,JR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ZR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eb=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,or=t=>_o(t)||QR.has(t)||KR.test(t),$r=t=>Go(t,"length",lb),_o=t=>!!t&&!Number.isNaN(Number(t)),od=t=>Go(t,"number",_o),Ta=t=>!!t&&Number.isInteger(Number(t)),tb=t=>t.endsWith("%")&&_o(t.slice(0,-1)),de=t=>wE.test(t),Hr=t=>YR.test(t),nb=new Set(["length","size","percentage"]),rb=t=>Go(t,nb,EE),ib=t=>Go(t,"position",EE),sb=new Set(["image","url"]),ob=t=>Go(t,sb,cb),ab=t=>Go(t,"",ub),xa=()=>!0,Go=(t,e,n)=>{const r=wE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},lb=t=>XR.test(t)&&!JR.test(t),EE=()=>!1,ub=t=>ZR.test(t),cb=t=>eb.test(t),hb=()=>{const t=De("colors"),e=De("spacing"),n=De("blur"),r=De("brightness"),i=De("borderColor"),s=De("borderRadius"),a=De("borderSpacing"),c=De("borderWidth"),h=De("contrast"),p=De("grayscale"),y=De("hueRotate"),v=De("invert"),w=De("gap"),A=De("gradientColorStops"),O=De("gradientColorStopPositions"),M=De("inset"),L=De("margin"),k=De("opacity"),x=De("padding"),P=De("saturate"),V=De("scale"),F=De("sepia"),B=De("skew"),I=De("space"),T=De("translate"),S=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",de,e],D=()=>[de,e],C=()=>["",or,$r],Fe=()=>["auto",_o,de],rt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],wt=()=>["solid","dashed","dotted","double","none"],Ke=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",de],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[_o,de];return{cacheSize:500,separator:":",theme:{colors:[xa],spacing:[or,$r],blur:["none","",Hr,de],brightness:fe(),borderColor:[t],borderRadius:["none","","full",Hr,de],borderSpacing:D(),borderWidth:C(),contrast:fe(),grayscale:X(),hueRotate:fe(),invert:X(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[tb,$r],inset:N(),margin:N(),opacity:fe(),padding:D(),saturate:fe(),scale:fe(),sepia:X(),skew:fe(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[Hr]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...rt(),de]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[M]}],"inset-x":[{"inset-x":[M]}],"inset-y":[{"inset-y":[M]}],start:[{start:[M]}],end:[{end:[M]}],top:[{top:[M]}],right:[{right:[M]}],bottom:[{bottom:[M]}],left:[{left:[M]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ta,de]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",Ta,de]}],"grid-cols":[{"grid-cols":[xa]}],"col-start-end":[{col:["auto",{span:["full",Ta,de]},de]}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":[xa]}],"row-start-end":[{row:["auto",{span:[Ta,de]},de]}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[L]}],mx:[{mx:[L]}],my:[{my:[L]}],ms:[{ms:[L]}],me:[{me:[L]}],mt:[{mt:[L]}],mr:[{mr:[L]}],mb:[{mb:[L]}],ml:[{ml:[L]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[Hr]},Hr]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Hr,$r]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",od]}],"font-family":[{font:[xa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",_o,od]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",or,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...wt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",or,$r]}],"underline-offset":[{"underline-offset":["auto",or,de]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...rt(),ib]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",rb]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ob]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[O]}],"gradient-via-pos":[{via:[O]}],"gradient-to-pos":[{to:[O]}],"gradient-from":[{from:[A]}],"gradient-via":[{via:[A]}],"gradient-to":[{to:[A]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...wt(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:wt()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...wt()]}],"outline-offset":[{"outline-offset":[or,de]}],"outline-w":[{outline:[or,$r]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[or,$r]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Hr,ab]}],"shadow-color":[{shadow:[xa]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...Ke(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ke()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Hr,de]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[v]}],saturate:[{saturate:[P]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[Ta,de]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[B]}],"skew-y":[{"skew-y":[B]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[or,$r,od]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},db=GR(hb);function fb(...t){return db(DR(t))}const Yn=Q.forwardRef(({className:t,variant:e="primary",size:n="default",isLoading:r,children:i,...s},a)=>{const c={primary:"bg-white text-slate-950 hover:bg-slate-200 shadow-[0_0_20px_rgba(255,255,255,0.2)]",secondary:"bg-slate-800 text-white hover:bg-slate-700",outline:"border-2 border-slate-700 text-white hover:border-slate-500 hover:bg-slate-800/50",ghost:"text-slate-400 hover:text-white hover:bg-slate-800/30",danger:"bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20",success:"bg-green-500 text-slate-950 hover:bg-green-400 shadow-[0_0_20px_rgba(74,222,128,0.4)]"},h={default:"h-12 px-6 py-2",sm:"h-9 px-3 text-sm",lg:"h-14 px-8 text-lg",xl:"h-16 px-8 text-xl",icon:"h-10 w-10 flex items-center justify-center p-0"};return E.jsxs("button",{ref:a,className:fb("inline-flex items-center justify-center rounded-xl font-bold transition-all active:scale-95 disabled:pointer-events-none disabled:opacity-50",c[e],h[n],t),disabled:r,...s,children:[r&&E.jsx(Ep,{className:"mr-2 h-4 w-4 animate-spin"}),i]})});Yn.displayName="Button";const pb=({user:t,progress:e,onSelectLesson:n,onOpenTuner:r,onOpenChords:i,onOpenProfile:s,unlockAll:a})=>{const c=(e==null?void 0:e.xp)||0,h=(e==null?void 0:e.completedLessons)||[],p=v=>{if(a)return!1;const w=ns.findIndex(A=>A.id===v.id);return w===0?!1:!h.includes(ns[w-1].id)},y=v=>h.includes(v.id);return E.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 pb-24 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 pointer-events-none"}),E.jsxs("div",{className:"sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5 px-6 py-4 flex justify-between items-center",children:[E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-full flex items-center justify-center border border-slate-800",children:E.jsx(J0,{size:20,className:"text-orange-500 fill-orange-500/20"})}),E.jsxs("div",{children:[E.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Streak"}),E.jsxs("div",{className:"font-bold text-white leading-none",children:[(e==null?void 0:e.streak)||1," Days"]})]})]}),E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsxs("div",{className:"flex items-center bg-slate-900/50 px-4 py-2 rounded-full border border-white/5 backdrop-blur-md",children:[E.jsx(e_,{size:16,className:"text-yellow-400 mr-2"}),E.jsxs("span",{className:"font-mono font-bold text-sm bg-gradient-to-r from-yellow-200 to-yellow-500 bg-clip-text text-transparent",children:[c.toLocaleString()," XP"]})]}),E.jsx("button",{onClick:s,className:"w-10 h-10 rounded-full bg-slate-900/50 border border-white/10 flex items-center justify-center hover:bg-slate-800 transition-colors",children:E.jsx(Tp,{size:20,className:"text-slate-400"})})]})]}),E.jsx("div",{className:"max-w-md mx-auto p-6 space-y-12 relative z-10",children:OR.map(v=>E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:`text-transparent bg-clip-text bg-gradient-to-r ${v.color} font-black text-2xl uppercase tracking-tighter drop-shadow-sm`,children:v.title}),E.jsx("div",{className:"space-y-4",children:ns.filter(w=>w.moduleId===v.id).map(w=>{const A=p(w),O=y(w);return E.jsxs("button",{onClick:()=>!A&&n(w),disabled:A,className:`
                                            relative w-full p-1 rounded-3xl text-left transition-all duration-300 group
                                            ${A?"opacity-60 cursor-not-allowed":"hover:scale-105 hover:shadow-2xl hover:shadow-indigo-500/10"}
                                        `,children:[E.jsx("div",{className:`
                                            absolute inset-0 rounded-3xl bg-gradient-to-r opacity-0 group-hover:opacity-100 transition-opacity duration-500
                                            ${O?"from-green-500/20 to-emerald-500/20":"from-indigo-500/20 to-purple-500/20"}
                                        `}),E.jsxs("div",{className:`
                                            relative bg-slate-900/50 backdrop-blur-md border p-5 rounded-[22px] flex items-center justify-between
                                            ${A?"border-slate-800":O?"border-green-900/50":"border-indigo-500/30"}
                                        `,children:[E.jsxs("div",{className:"flex items-center space-x-5",children:[E.jsx("div",{className:`
                                                    w-14 h-14 rounded-2xl flex items-center justify-center font-bold text-lg shadow-inner transition-transform group-hover:scale-110 duration-300
                                                    ${A?"bg-slate-800 text-slate-600":O?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-900/20":"bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-900/20"}
                                                `,children:A?E.jsx(Z0,{size:20}):O?E.jsx(wp,{size:24}):E.jsx(ef,{size:24,fill:"currentColor"})}),E.jsxs("div",{children:[E.jsx("h3",{className:`font-bold text-lg mb-0.5 ${A?"text-slate-500":"text-white"}`,children:w.title}),E.jsx("p",{className:"text-xs text-slate-400 font-medium",children:w.description})]})]}),!A&&!O&&E.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:E.jsx("div",{className:"bg-indigo-500/20 p-2 rounded-full",children:E.jsx(lx,{className:"text-indigo-400 w-5 h-5"})})})]})]},w.id)})})]},v.id))}),E.jsxs("div",{className:"fixed bottom-0 w-full bg-slate-950/80 backdrop-blur-xl border-t border-white/5 p-2 flex justify-around safe-area-bottom z-50",children:[E.jsxs("button",{className:"flex flex-col items-center justify-center w-16 h-16 text-indigo-400 transition-transform active:scale-90",children:[E.jsx(vx,{size:24,className:"mb-1.5"}),E.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:"Learn"})]}),E.jsxs("button",{onClick:i,className:"flex flex-col items-center justify-center w-16 h-16 text-slate-500 hover:text-white transition-all active:scale-90",children:[E.jsx(ux,{size:24,className:"mb-1.5"}),E.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:"Chords"})]}),E.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center w-16 h-16 text-slate-500 hover:text-white transition-all active:scale-90",children:[E.jsx(wx,{size:24,className:"mb-1.5"}),E.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:"Tuner"})]})]})]})},mb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],jy=[{note:"E",octave:2,freq:82.41},{note:"A",octave:2,freq:110},{note:"D",octave:3,freq:146.83},{note:"G",octave:3,freq:196},{note:"B",octave:3,freq:246.94},{note:"E",octave:4,freq:329.63}];class gb{constructor(){this.ctx=null,this.analyser=null,this.stream=null,this.rafId=null,this.callbacks=new Set,this.config={sampleRate:44100,fftSize:4096}}async init(){if(!this.ctx)try{return this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1}}),this.ctx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.filter=this.ctx.createBiquadFilter(),this.filter.type="lowpass",this.filter.frequency.value=1e3,this.ctx.createMediaStreamSource(this.stream).connect(this.filter),this.filter.connect(this.analyser),this.startLoop(),!0}catch(e){return console.error("Audio Engine Init Failed:",e),!1}}subscribe(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}startLoop(){const e=new Uint8Array(this.analyser.frequencyBinCount),n=new Float32Array(this.analyser.frequencyBinCount),r=()=>{this.analyser.getByteFrequencyData(e),this.analyser.getFloatTimeDomainData(n);const i=this.calculateRMS(n),s=this.autoCorrelate(n,this.ctx.sampleRate),a=this.getChromaVector(e,this.ctx.sampleRate);this.pitchBuffer=this.pitchBuffer||[],s>0&&this.pitchBuffer.push(s),this.pitchBuffer.length>5&&this.pitchBuffer.shift();let c=s;if(this.pitchBuffer.length>0){const v=[...this.pitchBuffer].sort((w,A)=>w-A);c=v[Math.floor(v.length/2)]}const h=this.getNoteFromPitch(c),p=this.guessPosition(c),y={rms:i,pitch:c,note:h.note,cents:h.cents,octave:h.octave,chroma:a,likelyString:p.string,likelyFret:p.fret,likelyStringIdx:p.stringIdx};this.callbacks.forEach(v=>v(y)),this.rafId=requestAnimationFrame(r)};r()}stop(){this.rafId&&cancelAnimationFrame(this.rafId),this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.ctx&&this.ctx.close(),this.ctx=null}calculateRMS(e){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*e[r];return Math.sqrt(n/e.length)}autoCorrelate(e,n){let r=e.length;if(this.calculateRMS(e)<.01)return-1;let s=0,a=r-1,c=.2;for(let x=0;x<r/2;x++)if(Math.abs(e[x])<c){s=x;break}for(let x=1;x<r/2;x++)if(Math.abs(e[r-x])<c){a=r-x;break}e=e.slice(s,a),r=e.length;let h=new Array(r).fill(0);for(let x=0;x<r;x++)for(let P=0;P<r-x;P++)h[x]=h[x]+e[P]*e[P+x];let p=0;for(;h[p]>h[p+1];)p++;let y=-1,v=-1;for(let x=p;x<r;x++)h[x]>y&&(y=h[x],v=x);let w=v,A=h[w-1],O=h[w],M=h[w+1],L=(A+M-2*O)/2,k=(M-A)/2;return L&&(w=w-k/(2*L)),n/w}getNoteFromPitch(e){if(!e||e===-1)return{note:"--",cents:0,octave:0};const n=12*(Math.log(e/440)/Math.log(2)),r=Math.round(n)+69,i=mb[r%12],s=Math.floor(1200*(n-Math.round(n))),a=Math.floor(r/12)-1;return{note:i,cents:s,octave:a}}getChromaVector(e,n){const r=new Array(12).fill(0),i=n/(e.length*2);for(let a=0;a<e.length;a++){const c=a*i;if(c<80||c>1e3)continue;const h=e[a];if(h<20)continue;const p=12*(Math.log(c/440)/Math.log(2)),v=(Math.round(p)+69)%12;v>=0&&(r[v]+=h)}const s=Math.max(...r)||1;return r.map(a=>a/s)}guessPosition(e){if(!e||e===-1)return{string:null,fret:null};let n=[];if(jy.forEach((s,a)=>{const c=12*Math.log2(e/s.freq),h=Math.round(c);if(h>=0&&h<=15){const p=s.freq*Math.pow(2,h/12),y=Math.abs(e-p);Math.abs(12*Math.log2(e/p))<.4&&n.push({stringIndex:a,fret:h,diff:y})}}),n.length===0)return{string:null,fret:null};n.sort((s,a)=>s.fret-a.fret);const r=n[0],i=jy[r.stringIndex];return{string:`${i.note}${i.octave}`,stringIdx:r.stringIndex,fret:r.fret}}}const wo=new gb,yb=async(t,e)=>{const n=e.type==="posture",r="You are a helpful, encouraging guitar instructor. Your goal is to get the student playing quickly.",i=n?`Check comliance with: "${e.briefing}". Key points: ${e.prompts.join(", ")}. Identify the single most critical error.`:e.chordData?`Target Chord: ${e.chordData.name}. Required Fingers: ${e.chordData.fingers.map(a=>`String ${a.string} Fret ${a.fret}`).join(", ")}. Check finger placement. Identify the single most critical error.`:`Check finger placement for ${e.title}. Identify the single most critical error.`,s=`${r} 
    TASK: Verify student technique for lesson: "${e.title}". ${i}.
    
    RESPONSE RULES:
    1. If technique is generally correct (even if not perfect), set "success": true. Do NOT be nitpicky.
    2. Only if there is a MAJOR error, identify it.
    3. Construct "feedback" using strictly this format:
       "[Correction: what is wrong]. [Action: one concrete physical step]. [Brief encouragement: max 4 words]."
       
    EXAMPLE FEEDBACK:
    "Thumb is too high. Drop your wrist to arch fingers. Try again."
    "Index finger is flat. Curl the knuckle to clear strings. Fix that."
    
    Respond STRICTLY JSON: { "success": boolean, "confidence": number, "feedback": "string" }`;try{const a=await fetch("https://toolkit.rork.com/text/llm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:s},{role:"user",content:[{type:"text",text:"Critique this."},{type:"image",image:t}]}]})});if(!a.ok)throw new Error("API Error");let h=(await a.json()).completion||"{}";return h.includes("```")&&(h=h.replace(/```json/g,"").replace(/```/g,"").trim()),JSON.parse(h)}catch(a){return console.error("Vision Analysis Failed",a),null}};var vb={};(function(){var t;function e(l){var f=0;return function(){return f<l.length?{done:!1,value:l[f++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,o){return l==Array.prototype||l==Object.prototype||(l[f]=o.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Th=="object"&&Th];for(var f=0;f<l.length;++f){var o=l[f];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}var i=r(this);function s(l,f){if(f)e:{var o=i;l=l.split(".");for(var u=0;u<l.length-1;u++){var d=l[u];if(!(d in o))break e;o=o[d]}l=l[l.length-1],u=o[l],f=f(u),f!=u&&f!=null&&n(o,l,{configurable:!0,writable:!0,value:f})}}s("Symbol",function(l){function f(m){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new o(u+(m||"")+"_"+d++,m)}function o(m,g){this.h=m,n(this,"description",{configurable:!0,writable:!0,value:g})}if(l)return l;o.prototype.toString=function(){return this.h};var u="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",d=0;return f}),s("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<f.length;o++){var u=i[f[o]];typeof u=="function"&&typeof u.prototype[l]!="function"&&n(u.prototype,l,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return l});function a(l){return l={next:l},l[Symbol.iterator]=function(){return this},l}function c(l){var f=typeof Symbol<"u"&&Symbol.iterator&&l[Symbol.iterator];return f?f.call(l):{next:e(l)}}function h(l){if(!(l instanceof Array)){l=c(l);for(var f,o=[];!(f=l.next()).done;)o.push(f.value);l=o}return l}var p=typeof Object.assign=="function"?Object.assign:function(l,f){for(var o=1;o<arguments.length;o++){var u=arguments[o];if(u)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])}return l};s("Object.assign",function(l){return l||p});var y=typeof Object.create=="function"?Object.create:function(l){function f(){}return f.prototype=l,new f},v;if(typeof Object.setPrototypeOf=="function")v=Object.setPrototypeOf;else{var w;e:{var A={a:!0},O={};try{O.__proto__=A,w=O.a;break e}catch{}w=!1}v=w?function(l,f){if(l.__proto__=f,l.__proto__!==f)throw new TypeError(l+" is not extensible");return l}:null}var M=v;function L(l,f){if(l.prototype=y(f.prototype),l.prototype.constructor=l,M)M(l,f);else for(var o in f)if(o!="prototype")if(Object.defineProperties){var u=Object.getOwnPropertyDescriptor(f,o);u&&Object.defineProperty(l,o,u)}else l[o]=f[o];l.ya=f.prototype}function k(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function x(l){if(l.m)throw new TypeError("Generator is already running");l.m=!0}k.prototype.u=function(l){this.i=l};function P(l,f){l.l={ma:f,na:!0},l.h=l.s||l.v}k.prototype.return=function(l){this.l={return:l},this.h=this.v};function V(l,f,o){return l.h=o,{value:f}}function F(l){this.h=new k,this.i=l}function B(l,f){x(l.h);var o=l.h.j;return o?I(l,"return"in o?o.return:function(u){return{value:u,done:!0}},f,l.h.return):(l.h.return(f),T(l))}function I(l,f,o,u){try{var d=f.call(l.h.j,o);if(!(d instanceof Object))throw new TypeError("Iterator result "+d+" is not an object");if(!d.done)return l.h.m=!1,d;var m=d.value}catch(g){return l.h.j=null,P(l.h,g),T(l)}return l.h.j=null,u.call(l.h,m),T(l)}function T(l){for(;l.h.h;)try{var f=l.i(l.h);if(f)return l.h.m=!1,{value:f.value,done:!1}}catch(o){l.h.i=void 0,P(l.h,o)}if(l.h.m=!1,l.h.l){if(f=l.h.l,l.h.l=null,f.na)throw f.ma;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function S(l){this.next=function(f){return x(l.h),l.h.j?f=I(l,l.h.j.next,f,l.h.u):(l.h.u(f),f=T(l)),f},this.throw=function(f){return x(l.h),l.h.j?f=I(l,l.h.j.throw,f,l.h.u):(P(l.h,f),f=T(l)),f},this.return=function(f){return B(l,f)},this[Symbol.iterator]=function(){return this}}function R(l){function f(u){return l.next(u)}function o(u){return l.throw(u)}return new Promise(function(u,d){function m(g){g.done?u(g.value):Promise.resolve(g.value).then(f,o).then(m,d)}m(l.next())})}function N(l){return R(new S(new F(l)))}s("Promise",function(l){function f(g){this.i=0,this.j=void 0,this.h=[],this.u=!1;var _=this.l();try{g(_.resolve,_.reject)}catch(b){_.reject(b)}}function o(){this.h=null}function u(g){return g instanceof f?g:new f(function(_){_(g)})}if(l)return l;o.prototype.i=function(g){if(this.h==null){this.h=[];var _=this;this.j(function(){_.m()})}this.h.push(g)};var d=i.setTimeout;o.prototype.j=function(g){d(g,0)},o.prototype.m=function(){for(;this.h&&this.h.length;){var g=this.h;this.h=[];for(var _=0;_<g.length;++_){var b=g[_];g[_]=null;try{b()}catch(j){this.l(j)}}}this.h=null},o.prototype.l=function(g){this.j(function(){throw g})},f.prototype.l=function(){function g(j){return function(z){b||(b=!0,j.call(_,z))}}var _=this,b=!1;return{resolve:g(this.I),reject:g(this.m)}},f.prototype.I=function(g){if(g===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof f)this.L(g);else{e:switch(typeof g){case"object":var _=g!=null;break e;case"function":_=!0;break e;default:_=!1}_?this.F(g):this.s(g)}},f.prototype.F=function(g){var _=void 0;try{_=g.then}catch(b){this.m(b);return}typeof _=="function"?this.M(_,g):this.s(g)},f.prototype.m=function(g){this.v(2,g)},f.prototype.s=function(g){this.v(1,g)},f.prototype.v=function(g,_){if(this.i!=0)throw Error("Cannot settle("+g+", "+_+"): Promise already settled in state"+this.i);this.i=g,this.j=_,this.i===2&&this.K(),this.H()},f.prototype.K=function(){var g=this;d(function(){if(g.D()){var _=i.console;typeof _<"u"&&_.error(g.j)}},1)},f.prototype.D=function(){if(this.u)return!1;var g=i.CustomEvent,_=i.Event,b=i.dispatchEvent;return typeof b>"u"?!0:(typeof g=="function"?g=new g("unhandledrejection",{cancelable:!0}):typeof _=="function"?g=new _("unhandledrejection",{cancelable:!0}):(g=i.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g)),g.promise=this,g.reason=this.j,b(g))},f.prototype.H=function(){if(this.h!=null){for(var g=0;g<this.h.length;++g)m.i(this.h[g]);this.h=null}};var m=new o;return f.prototype.L=function(g){var _=this.l();g.T(_.resolve,_.reject)},f.prototype.M=function(g,_){var b=this.l();try{g.call(_,b.resolve,b.reject)}catch(j){b.reject(j)}},f.prototype.then=function(g,_){function b(K,W){return typeof K=="function"?function(te){try{j(K(te))}catch(ne){z(ne)}}:W}var j,z,q=new f(function(K,W){j=K,z=W});return this.T(b(g,j),b(_,z)),q},f.prototype.catch=function(g){return this.then(void 0,g)},f.prototype.T=function(g,_){function b(){switch(j.i){case 1:g(j.j);break;case 2:_(j.j);break;default:throw Error("Unexpected state: "+j.i)}}var j=this;this.h==null?m.i(b):this.h.push(b),this.u=!0},f.resolve=u,f.reject=function(g){return new f(function(_,b){b(g)})},f.race=function(g){return new f(function(_,b){for(var j=c(g),z=j.next();!z.done;z=j.next())u(z.value).T(_,b)})},f.all=function(g){var _=c(g),b=_.next();return b.done?u([]):new f(function(j,z){function q(te){return function(ne){K[te]=ne,W--,W==0&&j(K)}}var K=[],W=0;do K.push(void 0),W++,u(b.value).T(q(K.length-1),z),b=_.next();while(!b.done)})},f});function D(l,f){l instanceof String&&(l+="");var o=0,u=!1,d={next:function(){if(!u&&o<l.length){var m=o++;return{value:f(m,l[m]),done:!1}}return u=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d}s("Array.prototype.keys",function(l){return l||function(){return D(this,function(f){return f})}}),s("Array.prototype.fill",function(l){return l||function(f,o,u){var d=this.length||0;for(0>o&&(o=Math.max(0,d+o)),(u==null||u>d)&&(u=d),u=Number(u),0>u&&(u=Math.max(0,d+u)),o=Number(o||0);o<u;o++)this[o]=f;return this}});function C(l){return l||Array.prototype.fill}s("Int8Array.prototype.fill",C),s("Uint8Array.prototype.fill",C),s("Uint8ClampedArray.prototype.fill",C),s("Int16Array.prototype.fill",C),s("Uint16Array.prototype.fill",C),s("Int32Array.prototype.fill",C),s("Uint32Array.prototype.fill",C),s("Float32Array.prototype.fill",C),s("Float64Array.prototype.fill",C),s("Object.is",function(l){return l||function(f,o){return f===o?f!==0||1/f===1/o:f!==f&&o!==o}}),s("Array.prototype.includes",function(l){return l||function(f,o){var u=this;u instanceof String&&(u=String(u));var d=u.length;for(o=o||0,0>o&&(o=Math.max(o+d,0));o<d;o++){var m=u[o];if(m===f||Object.is(m,f))return!0}return!1}}),s("String.prototype.includes",function(l){return l||function(f,o){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(f,o||0)!==-1}});var Fe=this||self;function rt(l,f){l=l.split(".");var o=Fe;l[0]in o||typeof o.execScript>"u"||o.execScript("var "+l[0]);for(var u;l.length&&(u=l.shift());)l.length||f===void 0?o[u]&&o[u]!==Object.prototype[u]?o=o[u]:o=o[u]={}:o[u]=f}function wt(l){var f;e:{if((f=Fe.navigator)&&(f=f.userAgent))break e;f=""}return f.indexOf(l)!=-1}var Ke=Array.prototype.map?function(l,f){return Array.prototype.map.call(l,f,void 0)}:function(l,f){for(var o=l.length,u=Array(o),d=typeof l=="string"?l.split(""):l,m=0;m<o;m++)m in d&&(u[m]=f.call(void 0,d[m],m,l));return u},G={},X=null;function se(l){var f=l.length,o=3*f/4;o%3?o=Math.floor(o):"=.".indexOf(l[f-1])!=-1&&(o="=.".indexOf(l[f-2])!=-1?o-2:o-1);var u=new Uint8Array(o),d=0;return fe(l,function(m){u[d++]=m}),d!==o?u.subarray(0,d):u}function fe(l,f){function o(b){for(;u<l.length;){var j=l.charAt(u++),z=X[j];if(z!=null)return z;if(!/^[\s\xa0]*$/.test(j))throw Error("Unknown base64 encoding at char: "+j)}return b}me();for(var u=0;;){var d=o(-1),m=o(0),g=o(64),_=o(64);if(_===64&&d===-1)break;f(d<<2|m>>4),g!=64&&(f(m<<4&240|g>>2),_!=64&&f(g<<6&192|_))}}function me(){if(!X){X={};for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],o=0;5>o;o++){var u=l.concat(f[o].split(""));G[o]=u;for(var d=0;d<u.length;d++){var m=u[d];X[m]===void 0&&(X[m]=d)}}}}var Se=typeof Uint8Array<"u",jt=!(wt("Trident")||wt("MSIE"))&&typeof Fe.btoa=="function";function Nt(l){if(!jt){var f;f===void 0&&(f=0),me(),f=G[f];for(var o=Array(Math.floor(l.length/3)),u=f[64]||"",d=0,m=0;d<l.length-2;d+=3){var g=l[d],_=l[d+1],b=l[d+2],j=f[g>>2];g=f[(g&3)<<4|_>>4],_=f[(_&15)<<2|b>>6],b=f[b&63],o[m++]=j+g+_+b}switch(j=0,b=u,l.length-d){case 2:j=l[d+1],b=f[(j&15)<<2]||u;case 1:l=l[d],o[m]=f[l>>2]+f[(l&3)<<4|j>>4]+b+u}return o.join("")}for(f="";10240<l.length;)f+=String.fromCharCode.apply(null,l.subarray(0,10240)),l=l.subarray(10240);return f+=String.fromCharCode.apply(null,l),btoa(f)}var ut=RegExp("[-_.]","g");function Ft(l){switch(l){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function bn(l){if(!jt)return se(l);ut.test(l)&&(l=l.replace(ut,Ft)),l=atob(l);for(var f=new Uint8Array(l.length),o=0;o<l.length;o++)f[o]=l.charCodeAt(o);return f}var Es;function Pn(){return Es||(Es=new Uint8Array(0))}var sn={},Ii=typeof Uint8Array.prototype.slice=="function",J=0,Z=0;function ce(l){var f=0>l;l=Math.abs(l);var o=l>>>0;l=Math.floor((l-o)/4294967296),f&&(o=c(he(o,l)),f=o.next().value,l=o.next().value,o=f),J=o>>>0,Z=l>>>0}var Te=typeof BigInt=="function";function he(l,f){return f=~f,l?l=~l+1:f+=1,[l,f]}function Je(l,f){this.i=l>>>0,this.h=f>>>0}function it(l){if(!l)return Qe||(Qe=new Je(0,0));if(!/^-?\d+$/.test(l))return null;if(16>l.length)ce(Number(l));else if(Te)l=BigInt(l),J=Number(l&BigInt(4294967295))>>>0,Z=Number(l>>BigInt(32)&BigInt(4294967295));else{var f=+(l[0]==="-");Z=J=0;for(var o=l.length,u=f,d=(o-f)%6+f;d<=o;u=d,d+=6)u=Number(l.slice(u,d)),Z*=1e6,J=1e6*J+u,4294967296<=J&&(Z+=J/4294967296|0,J%=4294967296);f&&(f=c(he(J,Z)),l=f.next().value,f=f.next().value,J=l,Z=f)}return new Je(J,Z)}var Qe;function Ut(l,f){return Error("Invalid wire type: "+l+" (at position "+f+")")}function Si(){return Error("Failed to read varint, encoding is invalid.")}function Nn(l,f){return Error("Tried to read past the end of the data "+f+" > "+l)}function on(){throw Error("Invalid UTF8")}function Ai(l,f){return f=String.fromCharCode.apply(null,f),l==null?f:l+f}var Ve=void 0,Ae,Zn=typeof TextDecoder<"u",Ko,jl=typeof TextEncoder<"u",Fl;function kr(l){if(l!==sn)throw Error("illegal external caller")}function Cr(l,f){if(kr(f),this.V=l,l!=null&&l.length===0)throw Error("ByteString should be constructed with non-empty values")}function Ts(){return Fl||(Fl=new Cr(null,sn))}function xs(l){kr(sn);var f=l.V;return f=f==null||Se&&f!=null&&f instanceof Uint8Array?f:typeof f=="string"?bn(f):null,f==null?f:l.V=f}function yh(l){if(typeof l=="string")return{buffer:bn(l),C:!1};if(Array.isArray(l))return{buffer:new Uint8Array(l),C:!1};if(l.constructor===Uint8Array)return{buffer:l,C:!1};if(l.constructor===ArrayBuffer)return{buffer:new Uint8Array(l),C:!1};if(l.constructor===Cr)return{buffer:xs(l)||Pn(),C:!0};if(l instanceof Uint8Array)return{buffer:new Uint8Array(l.buffer,l.byteOffset,l.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Ul(l,f){this.i=null,this.m=!1,this.h=this.j=this.l=0,ki(this,l,f)}function ki(l,f,o){o=o===void 0?{}:o,l.S=o.S===void 0?!1:o.S,f&&(f=yh(f),l.i=f.buffer,l.m=f.C,l.l=0,l.j=l.i.length,l.h=l.l)}Ul.prototype.reset=function(){this.h=this.l};function On(l,f){if(l.h=f,f>l.j)throw Nn(l.j,f)}function Rr(l){var f=l.i,o=l.h,u=f[o++],d=u&127;if(u&128&&(u=f[o++],d|=(u&127)<<7,u&128&&(u=f[o++],d|=(u&127)<<14,u&128&&(u=f[o++],d|=(u&127)<<21,u&128&&(u=f[o++],d|=u<<28,u&128&&f[o++]&128&&f[o++]&128&&f[o++]&128&&f[o++]&128&&f[o++]&128)))))throw Si();return On(l,o),d}function br(l,f){if(0>f)throw Error("Tried to read a negative byte length: "+f);var o=l.h,u=o+f;if(u>l.j)throw Nn(f,l.j-o);return l.h=u,o}var Is=[];function Ci(){this.h=[]}Ci.prototype.length=function(){return this.h.length},Ci.prototype.end=function(){var l=this.h;return this.h=[],l};function Dn(l,f,o){for(;0<o||127<f;)l.h.push(f&127|128),f=(f>>>7|o<<25)>>>0,o>>>=7;l.h.push(f)}function Mn(l,f){for(;127<f;)l.h.push(f&127|128),f>>>=7;l.h.push(f)}function Pr(l,f){if(Is.length){var o=Is.pop();ki(o,l,f),l=o}else l=new Ul(l,f);this.h=l,this.j=this.h.h,this.i=this.l=-1,this.setOptions(f)}Pr.prototype.setOptions=function(l){l=l===void 0?{}:l,this.ca=l.ca===void 0?!1:l.ca},Pr.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function Qo(l){var f=l.h;if(f.h==f.j)return!1;l.j=l.h.h;var o=Rr(l.h)>>>0;if(f=o>>>3,o&=7,!(0<=o&&5>=o))throw Ut(o,l.j);if(1>f)throw Error("Invalid field number: "+f+" (at position "+l.j+")");return l.l=f,l.i=o,!0}function Ln(l){switch(l.i){case 0:if(l.i!=0)Ln(l);else e:{l=l.h;for(var f=l.h,o=f+10,u=l.i;f<o;)if(!(u[f++]&128)){On(l,f);break e}throw Si()}break;case 1:l=l.h,On(l,l.h+8);break;case 2:l.i!=2?Ln(l):(f=Rr(l.h)>>>0,l=l.h,On(l,l.h+f));break;case 5:l=l.h,On(l,l.h+4);break;case 3:f=l.l;do{if(!Qo(l))throw Error("Unmatched start-group tag: stream EOF");if(l.i==4){if(l.l!=f)throw Error("Unmatched end-group tag");break}Ln(l)}while(!0);break;default:throw Ut(l.i,l.j)}}var Ri=[];function ct(){this.j=[],this.i=0,this.h=new Ci}function er(l,f){f.length!==0&&(l.j.push(f),l.i+=f.length)}function bi(l,f){if(f=f.R){er(l,l.h.end());for(var o=0;o<f.length;o++)er(l,xs(f[o])||Pn())}}var Ot=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function tr(l,f){return Ot?l[Ot]|=f:l.A!==void 0?l.A|=f:(Object.defineProperties(l,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}}),f)}function zl(l,f){Ot?l[Ot]&&(l[Ot]&=~f):l.A!==void 0&&(l.A&=~f)}function be(l){var f;return Ot?f=l[Ot]:f=l.A,f??0}function an(l,f){Ot?l[Ot]=f:l.A!==void 0?l.A=f:Object.defineProperties(l,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}})}function Yo(l){return tr(l,1),l}function Ss(l,f){an(f,(l|0)&-51)}function Pi(l,f){an(f,(l|18)&-41)}var Ni={};function nr(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)&&l.constructor===Object}var zt,Xo=[];an(Xo,23),zt=Object.freeze(Xo);function As(l){if(be(l.o)&2)throw Error("Cannot mutate an immutable Message")}function Oi(l){var f=l.length;(f=f?l[f-1]:void 0)&&nr(f)?f.g=1:(f={},l.push((f.g=1,f)))}function ks(l){var f=l.i+l.G;return l.B||(l.B=l.o[f]={})}function Bt(l,f){return f===-1?null:f>=l.i?l.B?l.B[f]:void 0:l.o[f+l.G]}function Qt(l,f,o,u){As(l),Di(l,f,o,u)}function Di(l,f,o,u){l.j&&(l.j=void 0),f>=l.i||u?ks(l)[f]=o:(l.o[f+l.G]=o,(l=l.B)&&f in l&&delete l[f])}function Nr(l,f,o,u){var d=Bt(l,f);Array.isArray(d)||(d=zt);var m=be(d);if(m&1||Yo(d),u)m&2||tr(d,2),o&1||Object.freeze(d);else{u=!(o&2);var g=m&2;o&1||!g?u&&m&16&&!g&&zl(d,16):(d=Yo(Array.prototype.slice.call(d)),Di(l,f,d))}return d}function Cs(l,f){var o=Bt(l,f),u=o==null?o:typeof o=="number"||o==="NaN"||o==="Infinity"||o==="-Infinity"?Number(o):void 0;return u!=null&&u!==o&&Di(l,f,u),u}function Rs(l,f,o,u,d){l.h||(l.h={});var m=l.h[o],g=Nr(l,o,3,d);if(!m){var _=g;m=[];var b=!!(be(l.o)&16);g=!!(be(_)&2);var j=_;!d&&g&&(_=Array.prototype.slice.call(_));for(var z=g,q=0;q<_.length;q++){var K=_[q],W=f,te=!1;if(te=te===void 0?!1:te,K=Array.isArray(K)?new W(K):te?new W:void 0,K!==void 0){W=K.o;var ne=te=be(W);g&&(ne|=2),b&&(ne|=16),ne!=te&&an(W,ne),W=ne,z=z||!!(2&W),m.push(K)}}return l.h[o]=m,b=be(_),f=b|33,f=z?f&-9:f|8,b!=f&&(z=_,Object.isFrozen(z)&&(z=Array.prototype.slice.call(z)),an(z,f),_=z),j!==_&&Di(l,o,_),(d||u&&g)&&tr(m,2),u&&Object.freeze(m),m}return d||(d=Object.isFrozen(m),u&&!d?Object.freeze(m):!u&&d&&(m=Array.prototype.slice.call(m),l.h[o]=m)),m}function Vn(l,f,o){var u=!!(be(l.o)&2);if(f=Rs(l,f,o,u,u),l=Nr(l,o,3,u),!(u||be(l)&8)){for(u=0;u<f.length;u++){if(o=f[u],be(o.o)&2){var d=Zo(o,!1);d.j=o}else d=o;o!==d&&(f[u]=d,l[u]=d.o)}tr(l,8)}return f}function st(l,f,o){if(o!=null&&typeof o!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof o+": "+o);Qt(l,f,o)}function bs(l,f,o,u,d){As(l);var m=Rs(l,o,f,!1,!1);return o=u??new o,l=Nr(l,f,2,!1),d!=null?(m.splice(d,0,o),l.splice(d,0,o.o)):(m.push(o),l.push(o.o)),o.C()&&zl(l,8),o}function Ps(l,f){return l??f}function Yt(l,f,o){return o=o===void 0?0:o,Ps(Cs(l,f),o)}var Mi;function Bl(l){switch(typeof l){case"number":return isFinite(l)?l:String(l);case"object":if(l)if(Array.isArray(l)){if(be(l)&128)return l=Array.prototype.slice.call(l),Oi(l),l}else{if(Se&&l!=null&&l instanceof Uint8Array)return Nt(l);if(l instanceof Cr){var f=l.V;return f==null?"":typeof f=="string"?f:l.V=Nt(f)}}}return l}function Ns(l,f,o,u){if(l!=null){if(Array.isArray(l))l=Li(l,f,o,u!==void 0);else if(nr(l)){var d={},m;for(m in l)d[m]=Ns(l[m],f,o,u);l=d}else l=f(l,u);return l}}function Li(l,f,o,u){var d=be(l);u=u?!!(d&16):void 0,l=Array.prototype.slice.call(l);for(var m=0;m<l.length;m++)l[m]=Ns(l[m],f,o,u);return o(d,l),l}function $l(l){return l.ja===Ni?l.toJSON():Bl(l)}function Hl(l,f){l&128&&Oi(f)}function Wl(l,f,o){if(o=o===void 0?Pi:o,l!=null){if(Se&&l instanceof Uint8Array)return l.length?new Cr(new Uint8Array(l),sn):Ts();if(Array.isArray(l)){var u=be(l);return u&2?l:f&&!(u&32)&&(u&16||u===0)?(an(l,u|2),l):(l=Li(l,Wl,u&4?Pi:o,!0),f=be(l),f&4&&f&2&&Object.freeze(l),l)}return l.ja===Ni?Jo(l):l}}function ql(l,f,o,u,d,m,g){if(l=l.h&&l.h[o]){if(u=be(l),u&2?u=l:(m=Ke(l,Jo),Pi(u,m),Object.freeze(m),u=m),As(f),g=u==null?zt:Yo([]),u!=null){for(m=!!u.length,l=0;l<u.length;l++){var _=u[l];m=m&&!(be(_.o)&2),g[l]=_.o}m=(m?8:0)|1,l=be(g),(l&m)!==m&&(Object.isFrozen(g)&&(g=Array.prototype.slice.call(g)),an(g,l|m)),f.h||(f.h={}),f.h[o]=u}else f.h&&(f.h[o]=void 0);Di(f,o,g,d)}else Qt(f,o,Wl(u,m,g),d)}function Jo(l){return be(l.o)&2||(l=Zo(l,!0),tr(l.o,2)),l}function Zo(l,f){var o=l.o,u=[];tr(u,16);var d=l.constructor.h;if(d&&u.push(d),d=l.B,d){u.length=o.length,u.fill(void 0,u.length,o.length);var m={};u[u.length-1]=m}be(o)&128&&Oi(u),f=f||l.C()?Pi:Ss,m=l.constructor,Mi=u,u=new m(u),Mi=void 0,l.R&&(u.R=l.R.slice()),m=!!(be(o)&16);for(var g=d?o.length-1:o.length,_=0;_<g;_++)ql(l,u,_-l.G,o[_],!1,m,f);if(d)for(var b in d)ql(l,u,+b,d[b],!0,m,f);return u}function Et(l,f,o){l==null&&(l=Mi),Mi=void 0;var u=this.constructor.i||0,d=0<u,m=this.constructor.h,g=!1;if(l==null){l=m?[m]:[];var _=48,b=!0;d&&(u=0,_|=128),an(l,_)}else{if(!Array.isArray(l)||m&&m!==l[0])throw Error();var j=_=tr(l,0);if((b=(16&j)!==0)&&((g=(32&j)!==0)||(j|=32)),d){if(128&j)u=0;else if(0<l.length){var z=l[l.length-1];if(nr(z)&&"g"in z){u=0,j|=128,delete z.g;var q=!0,K;for(K in z){q=!1;break}q&&l.pop()}}}else if(128&j)throw Error();_!==j&&an(l,j)}this.G=(m?0:-1)-u,this.h=void 0,this.o=l;e:{if(m=this.o.length,u=m-1,m&&(m=this.o[u],nr(m))){this.B=m,this.i=u-this.G;break e}f!==void 0&&-1<f?(this.i=Math.max(f,u+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!d&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(o){f=b&&!g&&!0,d=this.i;var W;for(b=0;b<o.length;b++)g=o[b],g<d?(g+=this.G,(u=l[g])?jn(u,f):l[g]=zt):(W||(W=ks(this)),(u=W[g])?jn(u,f):W[g]=zt)}}Et.prototype.toJSON=function(){return Li(this.o,$l,Hl)},Et.prototype.C=function(){return!!(be(this.o)&2)};function jn(l,f){if(Array.isArray(l)){var o=be(l),u=1;!f||o&2||(u|=16),(o&u)!==u&&an(l,o|u)}}Et.prototype.ja=Ni,Et.prototype.toString=function(){return this.o.toString()};function ln(l,f,o){if(o){var u={},d;for(d in o){var m=o[d],g=m.qa;g||(u.J=m.wa||m.oa.W,m.ia?(u.aa=ta(m.ia),g=function(_){return function(b,j,z){return _.J(b,j,z,_.aa)}}(u)):m.ka?(u.Z=Gl(m.da.P,m.ka),g=function(_){return function(b,j,z){return _.J(b,j,z,_.Z)}}(u)):g=u.J,m.qa=g),g(f,l,m.da),u={J:u.J,aa:u.aa,Z:u.Z}}}bi(f,l)}var rr=Symbol();function Vi(l,f,o){return l[rr]||(l[rr]=function(u,d){return f(u,d,o)})}function ea(l){var f=l[rr];if(!f){var o=na(l);f=function(u,d){return vn(u,d,o)},l[rr]=f}return f}function Ne(l){var f=l.ia;if(f)return ea(f);if(f=l.va)return Vi(l.da.P,f,l.ka)}function Os(l){var f=Ne(l),o=l.da,u=l.oa.U;return f?function(d,m){return u(d,m,o,f)}:function(d,m){return u(d,m,o)}}function Or(l,f){var o=l[f];return typeof o=="function"&&o.length===0&&(o=o(),l[f]=o),Array.isArray(o)&&(Mr in o||ji in o||0<o.length&&typeof o[0]=="function")?o:void 0}function Dr(l,f,o,u,d,m){f.P=l[0];var g=1;if(l.length>g&&typeof l[g]!="number"){var _=l[g++];o(f,_)}for(;g<l.length;){o=l[g++];for(var b=g+1;b<l.length&&typeof l[b]!="number";)b++;switch(_=l[g++],b-=g,b){case 0:u(f,o,_);break;case 1:(b=Or(l,g))?(g++,d(f,o,_,b)):u(f,o,_,l[g++]);break;case 2:b=g++,b=Or(l,b),d(f,o,_,b,l[g++]);break;case 3:m(f,o,_,l[g++],l[g++],l[g++]);break;case 4:m(f,o,_,l[g++],l[g++],l[g++],l[g++]);break;default:throw Error("unexpected number of binary field arguments: "+b)}}return f}var Ds=Symbol();function ta(l){var f=l[Ds];if(!f){var o=Ms(l);f=function(u,d){return Ql(u,d,o)},l[Ds]=f}return f}function Gl(l,f){var o=l[Ds];return o||(o=function(u,d){return ln(u,d,f)},l[Ds]=o),o}var ji=Symbol();function vh(l,f){l.push(f)}function _h(l,f,o){l.push(f,o.W)}function Fi(l,f,o,u){var d=ta(u),m=Ms(u).P,g=o.W;l.push(f,function(_,b,j){return g(_,b,j,m,d)})}function Fn(l,f,o,u,d,m){var g=Gl(u,m),_=o.W;l.push(f,function(b,j,z){return _(b,j,z,u,g)})}function Ms(l){var f=l[ji];return f||(f=Dr(l,l[ji]=[],vh,_h,Fi,Fn),Mr in l&&ji in l&&(l.length=0),f)}var Mr=Symbol();function Kl(l,f){l[0]=f}function Lr(l,f,o,u){var d=o.U;l[f]=u?function(m,g,_){return d(m,g,_,u)}:d}function wh(l,f,o,u,d){var m=o.U,g=ea(u),_=na(u).P;l[f]=function(b,j,z){return m(b,j,z,_,g,d)}}function Eh(l,f,o,u,d,m,g){var _=o.U,b=Vi(u,d,m);l[f]=function(j,z,q){return _(j,z,q,u,b,g)}}function na(l){var f=l[Mr];return f||(f=Dr(l,l[Mr]={},Kl,Lr,wh,Eh),Mr in l&&ji in l&&(l.length=0),f)}function vn(l,f,o){for(;Qo(f)&&f.i!=4;){var u=f.l,d=o[u];if(!d){var m=o[0];m&&(m=m[u])&&(d=o[u]=Os(m))}if(!d||!d(f,l,u)){d=f,u=l,m=d.j,Ln(d);var g=d;if(!g.ca){if(d=g.h.h-m,g.h.h=m,g=g.h,d==0)d=Ts();else{if(m=br(g,d),g.S&&g.m)d=g.i.subarray(m,m+d);else{g=g.i;var _=m;d=m+d,d=_===d?Pn():Ii?g.slice(_,d):new Uint8Array(g.subarray(_,d))}d=d.length==0?Ts():new Cr(d,sn)}(m=u.R)?m.push(d):u.R=[d]}}}return l}function Ql(l,f,o){for(var u=o.length,d=u%2==1,m=d?1:0;m<u;m+=2)(0,o[m+1])(f,l,o[m]);ln(l,f,d?o[0]:void 0)}function Ui(l,f){return{U:l,W:f}}var Tt=Ui(function(l,f,o){if(l.i!==5)return!1;l=l.h;var u=l.i,d=l.h,m=u[d],g=u[d+1],_=u[d+2];return u=u[d+3],On(l,l.h+4),g=(m<<0|g<<8|_<<16|u<<24)>>>0,l=2*(g>>31)+1,m=g>>>23&255,g&=8388607,Qt(f,o,m==255?g?NaN:1/0*l:m==0?l*Math.pow(2,-149)*g:l*Math.pow(2,m-150)*(g+Math.pow(2,23))),!0},function(l,f,o){if(f=Cs(f,o),f!=null){Mn(l.h,8*o+5),l=l.h;var u=+f;u===0?0<1/u?J=Z=0:(Z=0,J=2147483648):isNaN(u)?(Z=0,J=2147483647):(u=(o=0>u?-2147483648:0)?-u:u,34028234663852886e22<u?(Z=0,J=(o|2139095040)>>>0):11754943508222875e-54>u?(u=Math.round(u/Math.pow(2,-149)),Z=0,J=(o|u)>>>0):(f=Math.floor(Math.log(u)/Math.LN2),u*=Math.pow(2,-f),u=Math.round(8388608*u),16777216<=u&&++f,Z=0,J=(o|f+127<<23|u&8388607)>>>0)),o=J,l.h.push(o>>>0&255),l.h.push(o>>>8&255),l.h.push(o>>>16&255),l.h.push(o>>>24&255)}}),Ls=Ui(function(l,f,o){if(l.i!==0)return!1;var u=l.h,d=0,m=l=0,g=u.i,_=u.h;do{var b=g[_++];d|=(b&127)<<m,m+=7}while(32>m&&b&128);for(32<m&&(l|=(b&127)>>4),m=3;32>m&&b&128;m+=7)b=g[_++],l|=(b&127)<<m;if(On(u,_),128>b)u=d>>>0,b=l>>>0,(l=b&2147483648)&&(u=~u+1>>>0,b=~b>>>0,u==0&&(b=b+1>>>0)),u=4294967296*b+(u>>>0);else throw Si();return Qt(f,o,l?-u:u),!0},function(l,f,o){f=Bt(f,o),f!=null&&(typeof f=="string"&&it(f),f!=null&&(Mn(l.h,8*o),typeof f=="number"?(l=l.h,ce(f),Dn(l,J,Z)):(o=it(f),Dn(l.h,o.i,o.h))))}),Yl=Ui(function(l,f,o){return l.i!==0?!1:(Qt(f,o,Rr(l.h)),!0)},function(l,f,o){if(f=Bt(f,o),f!=null&&f!=null)if(Mn(l.h,8*o),l=l.h,o=f,0<=o)Mn(l,o);else{for(f=0;9>f;f++)l.h.push(o&127|128),o>>=7;l.h.push(1)}}),Vr=Ui(function(l,f,o){if(l.i!==2)return!1;var u=Rr(l.h)>>>0;l=l.h;var d=br(l,u);if(l=l.i,Zn){var m=l,g;(g=Ae)||(g=Ae=new TextDecoder("utf-8",{fatal:!0})),l=d+u,m=d===0&&l===m.length?m:m.subarray(d,l);try{var _=g.decode(m)}catch(q){if(Ve===void 0){try{g.decode(new Uint8Array([128]))}catch{}try{g.decode(new Uint8Array([97])),Ve=!0}catch{Ve=!1}}throw!Ve&&(Ae=void 0),q}}else{_=d,u=_+u,d=[];for(var b=null,j,z;_<u;)j=l[_++],128>j?d.push(j):224>j?_>=u?on():(z=l[_++],194>j||(z&192)!==128?(_--,on()):d.push((j&31)<<6|z&63)):240>j?_>=u-1?on():(z=l[_++],(z&192)!==128||j===224&&160>z||j===237&&160<=z||((m=l[_++])&192)!==128?(_--,on()):d.push((j&15)<<12|(z&63)<<6|m&63)):244>=j?_>=u-2?on():(z=l[_++],(z&192)!==128||(j<<28)+(z-144)>>30||((m=l[_++])&192)!==128||((g=l[_++])&192)!==128?(_--,on()):(j=(j&7)<<18|(z&63)<<12|(m&63)<<6|g&63,j-=65536,d.push((j>>10&1023)+55296,(j&1023)+56320))):on(),8192<=d.length&&(b=Ai(b,d),d.length=0);_=Ai(b,d)}return Qt(f,o,_),!0},function(l,f,o){if(f=Bt(f,o),f!=null){var u=!1;if(u=u===void 0?!1:u,jl){if(u&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(f))throw Error("Found an unpaired surrogate");f=(Ko||(Ko=new TextEncoder)).encode(f)}else{for(var d=0,m=new Uint8Array(3*f.length),g=0;g<f.length;g++){var _=f.charCodeAt(g);if(128>_)m[d++]=_;else{if(2048>_)m[d++]=_>>6|192;else{if(55296<=_&&57343>=_){if(56319>=_&&g<f.length){var b=f.charCodeAt(++g);if(56320<=b&&57343>=b){_=1024*(_-55296)+b-56320+65536,m[d++]=_>>18|240,m[d++]=_>>12&63|128,m[d++]=_>>6&63|128,m[d++]=_&63|128;continue}else g--}if(u)throw Error("Found an unpaired surrogate");_=65533}m[d++]=_>>12|224,m[d++]=_>>6&63|128}m[d++]=_&63|128}}f=d===m.length?m:m.subarray(0,d)}Mn(l.h,8*o+2),Mn(l.h,f.length),er(l,l.h.end()),er(l,f)}}),jr=Ui(function(l,f,o,u,d){if(l.i!==2)return!1;f=bs(f,o,u),o=l.h.j,u=Rr(l.h)>>>0;var m=l.h.h+u,g=m-o;if(0>=g&&(l.h.j=m,d(f,l,void 0,void 0,void 0),g=m-l.h.h),g)throw Error("Message parsing ended unexpectedly. Expected to read "+(u+" bytes, instead read "+(u-g)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return l.h.h=m,l.h.j=o,!0},function(l,f,o,u,d){if(f=Vn(f,u,o),f!=null)for(u=0;u<f.length;u++){var m=l;Mn(m.h,8*o+2);var g=m.h.end();er(m,g),g.push(m.i),m=g,d(f[u],l),g=l;var _=m.pop();for(_=g.i+g.h.length()-_;127<_;)m.push(_&127|128),_>>>=7,g.i++;m.push(_),g.i++}});function Vs(l){return function(f,o){e:{if(Ri.length){var u=Ri.pop();u.setOptions(o),ki(u.h,f,o),f=u}else f=new Pr(f,o);try{var d=na(l),m=vn(new d.P,f,d);break e}finally{d=f.h,d.i=null,d.m=!1,d.l=0,d.j=0,d.h=0,d.S=!1,f.l=-1,f.i=-1,100>Ri.length&&Ri.push(f)}m=void 0}return m}}function zi(l){return function(){var f=new ct;Ql(this,f,Ms(l)),er(f,f.h.end());for(var o=new Uint8Array(f.i),u=f.j,d=u.length,m=0,g=0;g<d;g++){var _=u[g];o.set(_,m),m+=_.length}return f.j=[o],o}}function ke(l){Et.call(this,l)}L(ke,Et);var Xl=[ke,1,Yl,2,Tt,3,Vr,4,Vr];ke.prototype.l=zi(Xl);function ra(l){Et.call(this,l,-1,Jl)}L(ra,Et),ra.prototype.addClassification=function(l,f){return bs(this,1,ke,l,f),this};var Jl=[1],ia=Vs([ra,1,jr,Xl]);function ir(l){Et.call(this,l)}L(ir,Et);var Bi=[ir,1,Tt,2,Tt,3,Tt,4,Tt,5,Tt];ir.prototype.l=zi(Bi);function sa(l){Et.call(this,l,-1,_n)}L(sa,Et);var _n=[1],oa=Vs([sa,1,jr,Bi]);function js(l){Et.call(this,l)}L(js,Et);var Fr=[js,1,Tt,2,Tt,3,Tt,4,Tt,5,Tt,6,Ls],Zl=Vs(Fr);js.prototype.l=zi(Fr);function Fs(l,f,o){if(o=l.createShader(o===0?l.VERTEX_SHADER:l.FRAGMENT_SHADER),l.shaderSource(o,f),l.compileShader(o),!l.getShaderParameter(o,l.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+l.getShaderInfoLog(o));return o}function $i(l){return Vn(l,ke,1).map(function(f){var o=Bt(f,1);return{index:o??0,score:Yt(f,2),label:Bt(f,3)!=null?Ps(Bt(f,3),""):void 0,displayName:Bt(f,4)!=null?Ps(Bt(f,4),""):void 0}})}function aa(l){return{x:Yt(l,1),y:Yt(l,2),z:Yt(l,3),visibility:Cs(l,4)!=null?Yt(l,4):void 0}}function Hi(l){return l.map(function(f){return Vn(oa(f),ir,1).map(aa)})}function la(l,f){this.i=l,this.h=f,this.m=0}function ua(l,f,o){return Wi(l,f),typeof l.h.canvas.transferToImageBitmap=="function"?Promise.resolve(l.h.canvas.transferToImageBitmap()):o?Promise.resolve(l.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(l.h.canvas):(l.j===void 0&&(l.j=document.createElement("canvas")),new Promise(function(u){l.j.height=l.h.canvas.height,l.j.width=l.h.canvas.width,l.j.getContext("2d",{}).drawImage(l.h.canvas,0,0,l.h.canvas.width,l.h.canvas.height),u(l.j)}))}function Wi(l,f){var o=l.h;if(l.s===void 0){var u=Fs(o,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),d=Fs(o,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),m=o.createProgram();if(o.attachShader(m,u),o.attachShader(m,d),o.linkProgram(m),!o.getProgramParameter(m,o.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+o.getProgramInfoLog(m));u=l.s=m,o.useProgram(u),d=o.getUniformLocation(u,"sampler0"),l.l={O:o.getAttribLocation(u,"aVertex"),N:o.getAttribLocation(u,"aTex"),xa:d},l.v=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,l.v),o.enableVertexAttribArray(l.l.O),o.vertexAttribPointer(l.l.O,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),l.u=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,l.u),o.enableVertexAttribArray(l.l.N),o.vertexAttribPointer(l.l.N,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),o.uniform1i(d,0)}u=l.l,o.useProgram(l.s),o.canvas.width=f.width,o.canvas.height=f.height,o.viewport(0,0,f.width,f.height),o.activeTexture(o.TEXTURE0),l.i.bindTexture2d(f.glName),o.enableVertexAttribArray(u.O),o.bindBuffer(o.ARRAY_BUFFER,l.v),o.vertexAttribPointer(u.O,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(u.N),o.bindBuffer(o.ARRAY_BUFFER,l.u),o.vertexAttribPointer(u.N,2,o.FLOAT,!1,0,0),o.bindFramebuffer(o.DRAW_FRAMEBUFFER?o.DRAW_FRAMEBUFFER:o.FRAMEBUFFER,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.colorMask(!0,!0,!0,!0),o.drawArrays(o.TRIANGLE_FAN,0,4),o.disableVertexAttribArray(u.O),o.disableVertexAttribArray(u.N),o.bindBuffer(o.ARRAY_BUFFER,null),l.i.bindTexture2d(0)}function eu(l){this.h=l}var tu=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ca(l,f){return f+l}function Us(l,f){window[l]=f}function nu(l){var f=document.createElement("script");return f.setAttribute("src",l),f.setAttribute("crossorigin","anonymous"),new Promise(function(o){f.addEventListener("load",function(){o()},!1),f.addEventListener("error",function(){o()},!1),document.body.appendChild(f)})}function zs(){return N(function(l){switch(l.h){case 1:return l.s=2,V(l,WebAssembly.instantiate(tu),4);case 4:l.h=3,l.s=0;break;case 2:return l.s=0,l.l=null,l.return(!1);case 3:return l.return(!0)}})}function Bs(l){if(this.h=l,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=l&&l.locateFile||ca,typeof window=="object")var f=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")f=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=f,l.options){f=c(Object.keys(l.options));for(var o=f.next();!o.done;o=f.next()){o=o.value;var u=l.options[o].default;u!==void 0&&(this.l[o]=typeof u=="function"?u():u)}}}t=Bs.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function ru(l){var f,o,u,d,m,g,_,b,j,z,q;return N(function(K){switch(K.h){case 1:return l.ga?(f=l.h.files===void 0?[]:typeof l.h.files=="function"?l.h.files(l.l):l.h.files,V(K,zs(),2)):K.return();case 2:if(o=K.i,typeof window=="object")return Us("createMediapipeSolutionsWasm",{locateFile:l.locateFile}),Us("createMediapipeSolutionsPackedAssets",{locateFile:l.locateFile}),g=f.filter(function(W){return W.data!==void 0}),_=f.filter(function(W){return W.data===void 0}),b=Promise.all(g.map(function(W){var te=qi(l,W.url);if(W.path!==void 0){var ne=W.path;te=te.then(function(xe){return l.overrideFile(ne,xe),Promise.resolve(xe)})}return te})),j=Promise.all(_.map(function(W){return W.simd===void 0||W.simd&&o||!W.simd&&!o?nu(l.locateFile(W.url,l.ha)):Promise.resolve()})).then(function(){var W,te,ne;return N(function(xe){if(xe.h==1)return W=window.createMediapipeSolutionsWasm,te=window.createMediapipeSolutionsPackedAssets,ne=l,V(xe,W(te),2);ne.i=xe.i,xe.h=0})}),z=function(){return N(function(W){return l.h.graph&&l.h.graph.url?W=V(W,qi(l,l.h.graph.url),0):(W.h=0,W=void 0),W})}(),V(K,Promise.all([j,b,z]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return u=f.filter(function(W){return W.simd===void 0||W.simd&&o||!W.simd&&!o}).map(function(W){return l.locateFile(W.url,l.ha)}),importScripts.apply(null,h(u)),d=l,V(K,createMediapipeSolutionsWasm(Module),6);case 6:d.i=K.i,l.m=new OffscreenCanvas(1,1),l.i.canvas=l.m,m=l.i.GL.createContext(l.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),l.i.GL.makeContextCurrent(m),K.h=4;break;case 7:if(l.m=document.createElement("canvas"),q=l.m.getContext("webgl2",{}),!q&&(q=l.m.getContext("webgl",{}),!q))return alert("Failed to create WebGL canvas context when passing video frame."),K.return();l.K=q,l.i.canvas=l.m,l.i.createContext(l.m,!0,!0,{});case 4:l.j=new l.i.SolutionWasm,l.ga=!1,K.h=0}})}function sr(l){var f,o,u,d,m,g,_,b;return N(function(j){if(j.h==1){if(l.h.graph&&l.h.graph.url&&l.fa===l.h.graph.url)return j.return();if(l.u=!0,!l.h.graph||!l.h.graph.url){j.h=2;return}return l.fa=l.h.graph.url,V(j,qi(l,l.h.graph.url),3)}for(j.h!=2&&(f=j.i,l.j.loadGraph(f)),o=c(Object.keys(l.D)),u=o.next();!u.done;u=o.next())d=u.value,l.j.overrideFile(d,l.D[d]);if(l.D={},l.h.listeners)for(m=c(l.h.listeners),g=m.next();!g.done;g=m.next())_=g.value,$s(l,_);b=l.l,l.l={},l.setOptions(b),j.h=0})}t.reset=function(){var l=this;return N(function(f){l.j&&(l.j.reset(),l.s={},l.v={}),f.h=0})},t.setOptions=function(l,f){var o=this;if(f=f||this.h.options){for(var u=[],d=[],m={},g=c(Object.keys(l)),_=g.next();!_.done;m={X:m.X,Y:m.Y},_=g.next())if(_=_.value,!(_ in this.l&&this.l[_]===l[_])){this.l[_]=l[_];var b=f[_];b!==void 0&&(b.onChange&&(m.X=b.onChange,m.Y=l[_],u.push(function(j){return function(){var z;return N(function(q){if(q.h==1)return V(q,j.X(j.Y),2);z=q.i,z===!0&&(o.u=!0),q.h=0})}}(m))),b.graphOptionXref&&(_=Object.assign({},{calculatorName:"",calculatorIndex:0},b.graphOptionXref,{valueNumber:b.type===1?l[_]:0,valueBoolean:b.type===0?l[_]:!1,valueString:b.type===2?l[_]:""}),d.push(_)))}(u.length!==0||d.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(d),this.F=(this.F===void 0?[]:this.F).concat(u))}};function iu(l){var f,o,u,d,m,g,_;return N(function(b){switch(b.h){case 1:if(!l.u)return b.return();if(!l.F){b.h=2;break}f=c(l.F),o=f.next();case 3:if(o.done){b.h=5;break}return u=o.value,V(b,u(),4);case 4:o=f.next(),b.h=3;break;case 5:l.F=void 0;case 2:if(l.H){for(d=new l.i.GraphOptionChangeRequestList,m=c(l.H),g=m.next();!g.done;g=m.next())_=g.value,d.push_back(_);l.j.changeOptions(d),d.delete(),l.H=void 0}l.u=!1,b.h=0}})}t.initialize=function(){var l=this;return N(function(f){return f.h==1?V(f,ru(l),2):f.h!=3?V(f,sr(l),3):V(f,iu(l),0)})};function qi(l,f){var o,u;return N(function(d){return f in l.L?d.return(l.L[f]):(o=l.locateFile(f,""),u=fetch(o).then(function(m){return m.arrayBuffer()}),l.L[f]=u,d.return(u))})}t.overrideFile=function(l,f){this.j?this.j.overrideFile(l,f):this.D[l]=f},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(l,f){var o=this,u,d,m,g,_,b,j,z,q;return N(function(K){switch(K.h){case 1:return o.h.inputs?(u=1e3*(f??performance.now()),V(K,o.I,2)):K.return();case 2:return V(K,o.initialize(),3);case 3:for(d=new o.i.PacketDataList,m=c(Object.keys(l)),g=m.next();!g.done;g=m.next())if(_=g.value,b=o.h.inputs[_]){e:{var W=l[_];switch(b.type){case"video":var te=o.s[b.stream];if(te||(te=new la(o.i,o.K),o.s[b.stream]=te),te.m===0&&(te.m=te.i.createTexture()),typeof HTMLVideoElement<"u"&&W instanceof HTMLVideoElement)var ne=W.videoWidth,xe=W.videoHeight;else typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement?(ne=W.naturalWidth,xe=W.naturalHeight):(ne=W.width,xe=W.height);xe={glName:te.m,width:ne,height:xe},ne=te.h,ne.canvas.width=xe.width,ne.canvas.height=xe.height,ne.activeTexture(ne.TEXTURE0),te.i.bindTexture2d(te.m),ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,ne.RGBA,ne.UNSIGNED_BYTE,W),te.i.bindTexture2d(0),te=xe;break e;case"detections":for(te=o.s[b.stream],te||(te=new eu(o.i),o.s[b.stream]=te),te.data||(te.data=new te.h.DetectionListData),te.data.reset(W.length),xe=0;xe<W.length;++xe){ne=W[xe];var Ie=te.data,ht=Ie.setBoundingBox,un=xe,$t=ne.la,we=new js;if(st(we,1,$t.ra),st(we,2,$t.sa),st(we,3,$t.height),st(we,4,$t.width),st(we,5,$t.rotation),Qt(we,6,$t.pa),$t=we.l(),ht.call(Ie,un,$t),ne.ea)for(Ie=0;Ie<ne.ea.length;++Ie){we=ne.ea[Ie],ht=te.data,un=ht.addNormalizedLandmark,$t=xe,we=Object.assign({},we,{visibility:we.visibility?we.visibility:0});var dt=new ir;st(dt,1,we.x),st(dt,2,we.y),st(dt,3,we.z),we.visibility&&st(dt,4,we.visibility),we=dt.l(),un.call(ht,$t,we)}if(ne.ba)for(Ie=0;Ie<ne.ba.length;++Ie)ht=te.data,un=ht.addClassification,$t=xe,we=ne.ba[Ie],dt=new ke,st(dt,2,we.score),we.index&&Qt(dt,1,we.index),we.label&&Qt(dt,3,we.label),we.displayName&&Qt(dt,4,we.displayName),we=dt.l(),un.call(ht,$t,we)}te=te.data;break e;default:te={}}}switch(j=te,z=b.stream,b.type){case"video":d.pushTexture2d(Object.assign({},j,{stream:z,timestamp:u}));break;case"detections":q=j,q.stream=z,q.timestamp=u,d.pushDetectionList(q);break;default:throw Error("Unknown input config type: '"+b.type+"'")}}return o.j.send(d),V(K,o.I,4);case 4:d.delete(),K.h=0}})};function su(l,f,o){var u,d,m,g,_,b,j,z,q,K,W,te,ne,xe;return N(function(Ie){switch(Ie.h){case 1:if(!o)return Ie.return(f);for(u={},d=0,m=c(Object.keys(o)),g=m.next();!g.done;g=m.next())_=g.value,b=o[_],typeof b!="string"&&b.type==="texture"&&f[b.stream]!==void 0&&++d;1<d&&(l.M=!1),j=c(Object.keys(o)),g=j.next();case 2:if(g.done){Ie.h=4;break}if(z=g.value,q=o[z],typeof q=="string")return ne=u,xe=z,V(Ie,ou(l,z,f[q]),14);if(K=f[q.stream],q.type==="detection_list"){if(K){for(var ht=K.getRectList(),un=K.getLandmarksList(),$t=K.getClassificationsList(),we=[],dt=0;dt<ht.size();++dt){var Ur=Zl(ht.get(dt)),xE=Yt(Ur,1),IE=Yt(Ur,2),SE=Yt(Ur,3),AE=Yt(Ur,4),kE=Yt(Ur,5,0),au=void 0;au=au===void 0?0:au,Ur={la:{ra:xE,sa:IE,height:SE,width:AE,rotation:kE,pa:Ps(Bt(Ur,6),au)},ea:Vn(oa(un.get(dt)),ir,1).map(aa),ba:$i(ia($t.get(dt)))},we.push(Ur)}ht=we}else ht=[];u[z]=ht,Ie.h=7;break}if(q.type==="proto_list"){if(K){for(ht=Array(K.size()),un=0;un<K.size();un++)ht[un]=K.get(un);K.delete()}else ht=[];u[z]=ht,Ie.h=7;break}if(K===void 0){Ie.h=3;break}if(q.type==="float_list"){u[z]=K,Ie.h=7;break}if(q.type==="proto"){u[z]=K,Ie.h=7;break}if(q.type!=="texture")throw Error("Unknown output config type: '"+q.type+"'");return W=l.v[z],W||(W=new la(l.i,l.K),l.v[z]=W),V(Ie,ua(W,K,l.M),13);case 13:te=Ie.i,u[z]=te;case 7:q.transform&&u[z]&&(u[z]=q.transform(u[z])),Ie.h=3;break;case 14:ne[xe]=Ie.i;case 3:g=j.next(),Ie.h=2;break;case 4:return Ie.return(u)}})}function ou(l,f,o){var u;return N(function(d){return typeof o=="number"||o instanceof Uint8Array||o instanceof l.i.Uint8BlobList?d.return(o):o instanceof l.i.Texture2dDataOut?(u=l.v[f],u||(u=new la(l.i,l.K),l.v[f]=u),d.return(ua(u,o,l.M))):d.return(void 0)})}function $s(l,f){for(var o=f.name||"$",u=[].concat(h(f.wants)),d=new l.i.StringList,m=c(f.wants),g=m.next();!g.done;g=m.next())d.push_back(g.value);m=l.i.PacketListener.implement({onResults:function(_){for(var b={},j=0;j<f.wants.length;++j)b[u[j]]=_.get(j);var z=l.listeners[o];z&&(l.I=su(l,b,f.outs).then(function(q){q=z(q);for(var K=0;K<f.wants.length;++K){var W=b[u[K]];typeof W=="object"&&W.hasOwnProperty&&W.hasOwnProperty("delete")&&W.delete()}q&&(l.I=q)}))}}),l.j.attachMultiListener(d,m),d.delete()}t.onResults=function(l,f){this.listeners[f||"$"]=l},rt("Solution",Bs),rt("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function xt(l){return l===void 0&&(l=0),l===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function ha(l){var f=this;l=l||{},this.h=new Bs({locateFile:l.locateFile,files:function(o){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:xt(o.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Hi},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Hi},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(o){return o.map(function(u){return $i(ia(u))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(o){var u,d,m;return N(function(g){return g.h==1?(u=xt(o),d="third_party/mediapipe/modules/hand_landmark/"+u,V(g,qi(f.h,u),2)):(m=g.i,f.h.overrideFile(d,m),g.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}t=ha.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(l){this.h.onResults(l)},t.initialize=function(){var l=this;return N(function(f){return V(f,l.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(l){var f=this;return N(function(o){return V(o,f.h.send(l),0)})},t.setOptions=function(l){this.h.setOptions(l)},rt("Hands",ha),rt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),rt("VERSION","0.4.1675469240")}).call(Th);let Gi=null;const _b=async(t,e={})=>{const{isLefty:n=!1}=e;return Gi||(Gi=new vb.Hands({locateFile:r=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${r}`}),Gi.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),Gi.onResults(r=>{if(r.multiHandLandmarks&&r.multiHandLandmarks.length>0){const i=wb(r.multiHandLandmarks,n);t({...i,landmarks:r.multiHandLandmarks})}else t({found:!1})}),await Gi.initialize()),{send:async r=>{Gi&&await Gi.send({image:r})}}},wb=(t,e=!1)=>{if(t.length<2)return{found:!1,reason:"Need 2 hands"};const n=t.map(w=>w).sort((w,A)=>w[0].x-A[0].x),r=n[e?1:0],i=n[e?0:1],s=r[0],a=i[0];if(e&&s.x<a.x)return{found:!1,reason:"Crossed Hands"};if(!e&&s.x>a.x)return{found:!1,reason:"Crossed Hands"};const c=a.x-s.x,h=a.y-s.y;if(Math.sqrt(c*c+h*h)<.2)return{found:!1,reason:"Hands too close"};const y=-.15,v={found:!0,start_x:s.x*100,start_y:(s.y+y)*100,end_x:a.x*100,end_y:(a.y+y)*100,start_width:12,end_width:18};return Tb(v)};let Ki=null;const Eb=.15,Tb=t=>{if(!Ki)return Ki=t,t;const e=(r,i)=>i+(r-i)*Eb,n={found:!0,start_x:e(t.start_x,Ki.start_x),start_y:e(t.start_y,Ki.start_y),end_x:e(t.end_x,Ki.end_x),end_y:e(t.end_y,Ki.end_y),start_width:12,end_width:18};return Ki=n,n},xb="/assets/speaking-CMBMMFs_.png",Ib="/assets/thinking-CGJOuKQz.png",Sb="/assets/happy-BLYNdfrN.png",Ab="/assets/sad-DqUDZYNu.png",kb="/assets/happy-BLYNdfrN.png",gh=({activeString:t,highlightFret:e,highlightNotes:n,playedFret:r=null,playedStringIdx:i=null,totalFrets:s=12,variant:a="default"})=>{const c=s,h=[0,1,2,3,4,5];let p=[];if(n)p=n;else if(t){const w={E4:0,B3:1,G3:2,D3:3,A2:4,E2:5};p=[{string:w[t]!==void 0?w[t]+1:6,fret:e,disp:t}]}const y=w=>w-1;if(i!==null&&r!==null&&p.length>0){const w=i+1;if(!p.find(O=>O.string===w&&O.fret===r)){const O=p[0];O.fret,O.string-1}}const v=a==="compact"?"w-full max-w-4xl mx-auto select-none pl-6":"w-full max-w-4xl mx-auto bg-slate-900 border border-slate-700 rounded-xl p-8 shadow-2xl relative select-none";return E.jsx("div",{className:v,children:E.jsxs("div",{className:"relative h-full min-h-[120px] w-full select-none",children:[a!=="compact"&&E.jsx("div",{className:"absolute inset-x-0 -top-6 flex justify-between text-xs text-slate-500 font-mono px-[2%]",children:[...Array(c+1)].map((w,A)=>E.jsx("span",{style:{width:`${100/c}%`,textAlign:"center"},children:A+1},A))}),E.jsx("div",{className:"absolute inset-0 flex border-l-4 border-slate-600",children:[...Array(c)].map((w,A)=>E.jsxs("div",{className:"flex-1 border-r border-slate-700/30 relative",children:[E.jsx("div",{className:`absolute top-0 bottom-0 right-0 w-px bg-gradient-to-b from-slate-600 to-slate-800 shadow-sm ${a==="compact"?"opacity-30":"opacity-100"}`}),[3,5,7,9].includes(A+1)&&E.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-slate-800 shadow-inner"}),A+1===12&&E.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex gap-4",children:[E.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-800 shadow-inner"}),E.jsx("div",{className:"w-4 h-4 rounded-full bg-slate-800 shadow-inner"})]})]},A))}),E.jsx("div",{className:`absolute inset-0 flex flex-col justify-between pointer-events-none ${a==="compact"?"py-2":"py-4"}`,children:h.map((w,A)=>{const O=i!==null&&i===w;return E.jsxs("div",{className:"relative w-full h-px group",children:[E.jsx("div",{className:"absolute inset-x-0 bg-slate-200 shadow-[0_0_4px_rgba(255,255,255,0.2)]",style:{height:`${1+w*.6}px`,top:"50%",transform:"translateY(-50%)",opacity:.6+w/10}}),E.jsx("span",{className:`absolute top-1/2 -translate-y-1/2 text-sm text-slate-500 font-bold w-4 text-center ${a==="compact"?"-left-5 text-[10px]":"-left-8"}`,children:["e","B","G","D","A","E"][w]}),[...Array(c+1)].map((M,L)=>{const k=p.filter(I=>y(I.string)===A&&I.fret===L),x=k.length>0,P=O&&r===L&&!x,V=O&&r===L&&x,F=100/c,B=L===0?"0%":`${(L-.5)*F}%`;return E.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 flex items-center justify-center transition-all duration-300",style:{left:B,width:0,height:0},children:[P&&E.jsx("div",{className:"absolute w-8 h-8 rounded-full bg-indigo-500 border-2 border-indigo-400 shadow-[0_0_20px_rgba(99,102,241,0.6)] z-30 animate-pulse pointer-events-none flex items-center justify-center"}),V&&E.jsx("div",{className:"absolute w-8 h-8 rounded-full bg-indigo-500 border border-indigo-400 shadow-[0_0_15px_rgba(99,102,241,0.8)] z-30 animate-pulse pointer-events-none"}),x&&E.jsx("div",{className:"relative",children:E.jsx("div",{className:`
                                                        absolute -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white/20 flex items-center justify-center z-20 transition-all duration-300
                                                        ${a==="compact"?"w-5 h-5 text-[10px]":"w-8 h-8 text-xs"}
                                                        ${V?"bg-green-500/80 shadow-[0_0_30px_rgba(34,197,94,1)] scale-125 animate-pulse":"bg-green-600 shadow-[0_0_20px_rgba(34,197,94,0.6)]"}
                                                    `,children:E.jsx("span",{className:"text-white font-black",children:k[0].disp||""})})})]},`${w}-${L}`)})]},w)})})]})})},Fy=(t,e)=>{if(!t||!e)return 440;const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"].indexOf(t);if(r===-1)return 440;const i=(e+1)*12+r;return 440*Math.pow(2,(i-69)/12)},Cb=({lesson:t,onReady:e})=>{const r=t.id==="tune_e"?[{string:6,fret:0,disp:"E"}]:t.id==="tune_a"?[{string:5,fret:0,disp:"A"}]:t.id==="tune_d"?[{string:4,fret:0,disp:"D"}]:t.id==="riff_smoke"?[{string:6,fret:0,disp:"0"},{string:6,fret:3,disp:"3"},{string:6,fret:5,disp:"5"}]:t.chordData?t.chordData.fingers.map(i=>({string:i.string,fret:i.fret,disp:i.finger})):[];return E.jsx("div",{className:"absolute inset-0 bg-slate-950 z-50 flex flex-col items-center justify-center p-6 animate-in zoom-in duration-500",children:E.jsxs("div",{className:"max-w-2xl w-full flex flex-col items-center text-center",children:[E.jsx("div",{className:"w-20 h-20 bg-indigo-500/20 rounded-3xl flex items-center justify-center mb-6 shadow-[0_0_40px_rgba(99,102,241,0.3)]",children:E.jsx(dx,{className:"w-10 h-10 text-indigo-400"})}),E.jsx("h2",{className:"text-5xl font-black text-white mb-4 tracking-tight",children:t.title}),E.jsx("div",{className:"text-xl text-slate-400 mb-8 font-light max-w-lg",children:t.briefing}),t.type!=="posture"&&E.jsx("div",{className:"w-full max-w-lg mb-10 transform hover:scale-105 transition-transform duration-500",children:E.jsx("div",{className:"bg-slate-900/50 p-8 rounded-3xl border border-slate-800 backdrop-blur-xl shadow-2xl",children:E.jsx(gh,{highlightNotes:r})})}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg mb-8",children:t.prompts.map((i,s)=>E.jsxs("div",{className:"flex items-center bg-slate-900/40 p-3 rounded-xl border border-slate-800/50",children:[E.jsx(wp,{className:"w-5 h-5 text-green-500 mr-3 shrink-0"}),E.jsx("span",{className:"text-slate-300 text-sm font-medium",children:i})]},s))}),E.jsx(Yn,{onClick:e,size:"xl",className:"w-full max-w-xs shadow-indigo-500/20 shadow-lg text-lg h-14",children:"Let's Play"})]})})},Rb=t=>{const e=t.title,n=[`Hey! Grab your guitar. We're going to tackle ${e} today.`,`Take a deep breath. ${e} is all about rhythm. You ready?`,`I'm really excited for you to learn ${e}. It sounds harder than it is!`,`Don't worry about being perfect. Let's just have fun with ${e}.`,`${e} is a classic. You're going to love playing this one.`];return n[Math.floor(Math.random()*n.length)]},bb=({lesson:t,onFinish:e})=>{const n=Q.useRef(null),r=Q.useRef(null),[i,s]=Q.useState("briefing"),[a,c]=Q.useState(3),[h,p]=Q.useState(null),[y,v]=Q.useState(Rb(t)),[w,A]=Q.useState({}),[O,M]=Q.useState({isLefty:!1,showDebug:!1}),[L,k]=Q.useState(!1),[x,P]=Q.useState(null),V=Q.useRef({x:0,y:0}),F=J=>{const Z=J.touches[0],ce=J.currentTarget.getBoundingClientRect();V.current={x:Z.clientX-ce.left,y:Z.clientY-ce.top}},B=J=>{const Z=J.touches[0];P({x:Z.clientX-V.current.x,y:Z.clientY-V.current.y})},[I,T]=Q.useState(0),S=Q.useRef(0);Q.useRef(null);const R=Q.useRef(!1),[N,D]=Q.useState(!1),[C,Fe]=Q.useState(!1),[rt,wt]=Q.useState(!1),Ke=Q.useRef(null);Q.useEffect(()=>{if(!C||!t.bpm||i!=="playing_sequence"){Ke.current&&clearInterval(Ke.current);return}const J=6e4/t.bpm,Z=new(window.AudioContext||window.webkitAudioContext),ce=(Je=!1)=>{const it=Z.createOscillator(),Qe=Z.createGain();it.connect(Qe),Qe.connect(Z.destination),it.frequency.value=Je?1e3:800,it.type="square",Qe.gain.setValueAtTime(.1,Z.currentTime),Qe.gain.exponentialRampToValueAtTime(.001,Z.currentTime+.05),it.start(Z.currentTime),it.stop(Z.currentTime+.05)};let Te=0;const he=()=>{ce(Te%4===0),wt(!0),setTimeout(()=>wt(!1),100),Te++};return he(),Ke.current=setInterval(he,J),()=>{Ke.current&&clearInterval(Ke.current),Z.close()}},[C,t.bpm,i]);const G=Q.useRef(0),X=Q.useRef(0),se=J=>{},fe=Q.useRef(I);Q.useEffect(()=>{fe.current=I},[I]);const me=t.sequence?t.sequence[I]:t,[Se,jt]=Q.useState(0),Nt=1,ut=Q.useRef({notes:[],volumes:[],chromas:[],strings:[]}),Ft=Q.useRef(0),bn=Q.useRef(!1);Q.useEffect(()=>{T(0),s("briefing"),jt(0),p(null),S.current=0},[t.id]),Q.useEffect(()=>{if(i==="briefing")return;const Z=(async()=>{try{const ce=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"},audio:!1});n.current&&(n.current.srcObject=ce),await wo.init();const Te=wo.subscribe(he=>{if(A({note:he.note,octave:he.octave,vol:he.rms.toFixed(3),chroma:he.chroma,stringIdx:5-he.likelyStringIdx,fret:he.likelyFret}),i==="playing_sequence"){const Je=performance.now(),it=Je-(G.current||Je);if(G.current=Je,R.current)return;bn.current=!0;const Qe=fe.current,Ut=t.sequence?t.sequence[Qe]:t,Si=Ut.note||Ut.targetNote,Nn=(Ut.duration||1)*400;he.note===Si&&he.rms>.02?X.current=Math.min(Nn,(X.current||0)+it):X.current=Math.max(0,(X.current||0)-it*.5);const Ai=Math.min(1,(X.current||0)/Nn);if(A(Ve=>({...Ve,matchProgress:Ai})),X.current>=Nn)if(X.current=0,A(Ae=>({...Ae,matchProgress:0})),D(!0),setTimeout(()=>D(!1),300),t.sequence&&Qe<t.sequence.length-1){if(R.current=!0,T(Ae=>Ae+1),Math.random()>.7){const Ae=["Good!","Nice!","Keep going!","Yes!","Spot on!"],Zn=Ae[Math.floor(Math.random()*Ae.length)];p({success:!0,message:Zn,xpEarned:0}),se(Zn),setTimeout(()=>p(null),1e3)}setTimeout(()=>{R.current=!1},100)}else{s("complete");const Ae="Lesson Complete! Awesome job.";se(Ae),p({success:!0,message:Ae,xpEarned:t.xp})}}else bn.current&&(he.rms>Ft.current&&(Ft.current=he.rms),ut.current.notes.push(he.note),ut.current.chromas.push(he.chroma),ut.current.strings.push(he.likelyString))});return()=>{var he;Te(),(he=n.current)!=null&&he.srcObject&&n.current.srcObject.getTracks().forEach(Je=>Je.stop()),wo.stop()}}catch(ce){console.error("Media Error:",ce)}})();return()=>{Z.then(ce=>ce&&ce())}},[i,t.sequence]),Q.useEffect(()=>{let J=null,Z=null;const ce=async()=>{if(!n.current||i==="briefing")return;J=await _b(he=>{O.showDebug&&he.landmarks&&r.current?Es(r.current,he.landmarks):r.current&&r.current.getContext("2d").clearRect(0,0,r.current.width,r.current.height)},{isLefty:O.isLefty});const Te=async()=>{n.current&&n.current.readyState>=2&&await J.send(n.current),Z=requestAnimationFrame(Te)};Te()};return["instruct","analyzing","countdown","playing_sequence"].includes(i)&&ce(),()=>{Z&&cancelAnimationFrame(Z)}},[i,O]);const Es=(J,Z)=>{const ce=J.getContext("2d");ce.clearRect(0,0,J.width,J.height),Z.forEach(Te=>{ce.fillStyle="#00ffff",Te.forEach(he=>{ce.beginPath(),ce.arc(he.x*J.width,he.y*J.height,3,0,2*Math.PI),ce.fill()})})};Q.useEffect(()=>{if(i!=="demo")return;let J=[];const Z=t.sequence||[];if(Z.length===0){s("playing_sequence");return}v("Okay, watch me play it first. Listen to the groove.");const ce=new(window.AudioContext||window.webkitAudioContext);let Te=0;return Z.forEach((he,Je)=>{const it=(he.duration||1)*600;J.push(setTimeout(()=>{T(Je);const Qe=ce.createOscillator(),Ut=ce.createGain();Qe.connect(Ut),Ut.connect(ce.destination),Qe.frequency.value=Fy(he.note,he.octave),Qe.type="triangle",Qe.start(),Qe.stop(ce.currentTime+it/1e3*.8),Ut.gain.setValueAtTime(.2,ce.currentTime),Ut.gain.exponentialRampToValueAtTime(.001,ce.currentTime+it/1e3*.8)},Te)),Te+=it}),J.push(setTimeout(()=>{v("Your turn! Give it a try. Don't rush."),s("instruct"),T(0)},Te+1e3)),()=>{J.forEach(clearTimeout),ce.close()}},[i,t]);const Pn=()=>{p(null),ut.current={notes:[],volumes:[],chromas:[],strings:[]},s("countdown"),c(3);const J=setInterval(()=>{c(Z=>Z<=1?(clearInterval(J),t.type==="note"||t.sequence?(s("playing_sequence"),v("Feel the beat... jump in when you're ready!")):(s("playing_vision"),v("Show me your hand. Keep it relaxed.")),0):Z-1)},1e3)};Q.useEffect(()=>{if(i!=="playing_vision")return;const J=setInterval(async()=>{if(!n.current)return;const Z=document.createElement("canvas");Z.width=n.current.videoWidth,Z.height=n.current.videoHeight,Z.getContext("2d").drawImage(n.current,0,0);const ce=Z.toDataURL("image/jpeg",.8).split(",")[1];bn.current=!0;const Te=await yb(ce,t);if(bn.current=!1,Te!=null&&Te.success)p({success:!0,message:"Nice! Great form.",xpEarned:t.xp}),clearInterval(J),setTimeout(()=>{s("complete")},1500);else{const he=(Te==null?void 0:Te.feedback)||"Adjust your hand...";p({success:!1,message:he,xpEarned:0})}},3e3);return()=>clearInterval(J)},[i,t]);const sn=()=>{if(i==="playing_sequence"){if(!w.note||w.note==="--"||w.vol<.02)return"Listening...";const J=fe.current,Z=t.sequence?t.sequence[J]:t,ce=Z.targetNote||Z.note;return w.note===ce?"Hold it...":`Hearing: ${w.note}`}return t.briefing};if(i==="briefing")return E.jsx(Cb,{lesson:t,onReady:()=>s(t.sequence?"demo":"instruct")});const Ii=()=>h!=null&&h.success?Sb:h&&!h.success?Ab:i==="analyzing"||i==="demo"?Ib:i==="briefing"||i==="instruct"?xb:kb;return E.jsxs("div",{className:"fixed inset-0 bg-slate-950 z-50 flex flex-col overflow-hidden font-sans",children:[E.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 z-30 flex justify-between items-start pointer-events-none",children:[E.jsxs("div",{className:"pointer-events-auto",children:[E.jsx("h2",{className:"text-3xl font-black text-white drops-shadow-md",children:t.title}),E.jsx("div",{className:"flex items-center gap-2 mt-2",children:E.jsxs("div",{className:"bg-slate-900/80 backdrop-blur px-3 py-1 rounded-full text-indigo-400 font-bold text-sm border border-indigo-500/30",children:["Streak: ",Se," / ",Nt," ",E.jsx(J0,{className:`inline w-4 h-4 ml-1 ${Se>0?"text-orange-500 fill-orange-500":"text-slate-600"}`})]})})]}),E.jsx("button",{onClick:()=>e(null),className:"pointer-events-auto p-3 bg-slate-900/50 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-all border border-slate-700/50 backdrop-blur",children:E.jsx(t_,{size:24})})]}),E.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950",children:[E.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none"}),E.jsxs("div",{className:"relative z-10 p-4 md:p-12 bg-slate-900/30 border border-white/5 rounded-[3rem] backdrop-blur-sm shadow-2xl transition-all duration-500 flex flex-col items-center w-full max-w-5xl",children:[h&&E.jsxs("div",{className:`mb-6 py-4 px-8 rounded-3xl border shadow-[0_0_50px_rgba(0,0,0,0.5)] flex flex-col items-center gap-2 text-center animate-in slide-in-from-top-4 fade-in duration-300 w-full max-w-lg ${h.success?"bg-green-500/20 border-green-500/50 text-green-400":"bg-red-500/20 border-red-500/50 text-red-100"}`,children:[E.jsxs("div",{className:"flex items-center gap-2",children:[h.success?E.jsx(wp,{size:24,className:"fill-green-500 text-slate-900"}):E.jsx(ox,{size:24,className:"fill-red-500 text-slate-900"}),E.jsx("span",{className:"font-bold text-xl",children:h.success?"Nice!":"Oops!"})]}),E.jsx("span",{className:"text-lg font-medium leading-relaxed",children:h.message})]}),i!=="briefing"&&i!=="complete"&&E.jsxs("div",{className:"absolute -top-24 right-0 md:-right-12 md:-top-32 flex flex-col items-center z-50 w-48 md:w-64 pointer-events-none transition-all duration-500",children:[E.jsx("img",{src:Ii(),alt:"Remi",className:"w-24 h-24 md:w-40 md:h-40 object-contain animate-bounce-slow drop-shadow-2xl z-20"}),E.jsx("div",{className:"bg-white/95 backdrop-blur-sm text-slate-900 px-4 py-3 md:px-6 md:py-4 rounded-[2rem] rounded-tr-none shadow-xl animate-in slide-in-from-bottom-2 border-2 border-indigo-500/30 relative -mt-4 mr-8 md:mr-12 w-auto min-w-[140px] text-center transform rotate-[-2deg]",children:E.jsx("div",{className:"text-sm md:text-lg font-bold leading-snug font-hand",children:y})})]}),i==="playing_sequence"&&E.jsxs("div",{className:"mb-6 flex flex-col items-center animate-in fade-in zoom-in w-full",children:[E.jsxs("div",{className:"flex gap-4 mb-4",children:[t.sequence&&(t.id.includes("riff")||t.id.includes("scale"))&&E.jsxs("button",{onClick:()=>{const J=new(window.AudioContext||window.webkitAudioContext);let Z=J.currentTime;t.sequence.forEach(ce=>{const Te=J.createOscillator(),he=J.createGain();Te.connect(he),he.connect(J.destination),Te.frequency.value=Fy(ce.note,ce.octave),Te.type="triangle";const Je=(ce.duration||1)*.4;Te.start(Z),Te.stop(Z+Je*.8),he.gain.setValueAtTime(.1,Z),he.gain.exponentialRampToValueAtTime(.001,Z+Je*.8),Z+=Je})},className:"flex items-center gap-2 bg-indigo-500/20 hover:bg-indigo-500/40 text-indigo-300 px-4 py-2 rounded-full text-sm font-bold transition-all border border-indigo-500/30",children:[E.jsx(ef,{size:16,className:"fill-indigo-300"})," Hear Rhythm"]}),t.bpm&&E.jsxs("button",{onClick:()=>Fe(J=>!J),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-bold transition-all border ${C?"bg-rose-500/20 hover:bg-rose-500/30 text-rose-300 border-rose-500/30":"bg-slate-800 hover:bg-slate-700 text-slate-400 border-slate-700"}`,children:[E.jsx(ix,{size:16,className:C?"animate-pulse":""}),C?`${t.bpm} BPM`:"Metronome"]})]}),E.jsxs("div",{className:"flex items-center gap-8 text-2xl font-black text-white",children:[E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsxs("div",{className:"text-xs text-slate-500 font-bold mb-2 tracking-widest",children:["NOTE ",I+1," / ",t.sequence?t.sequence.length:1]}),E.jsx("span",{className:"text-sm font-medium text-slate-500 uppercase tracking-widest mb-1",children:"Target"}),E.jsx("span",{className:`text-6xl text-indigo-400 drop-shadow-[0_0_20px_rgba(99,102,241,0.5)] ${N?"scale-150 text-green-400 drop-shadow-[0_0_60px_rgba(74,222,128,1)]":""} ${rt?"scale-110 brightness-150":""} transition-all duration-200`,children:t.sequence?t.sequence[I].note:t.targetNote}),t.sequence&&E.jsxs("div",{className:"flex flex-col items-center mt-4 w-24",children:[E.jsxs("span",{className:"text-xs font-bold text-indigo-300 mb-1",children:["Hold: ",t.sequence[I].duration||1," Beats"]}),E.jsx("div",{className:"w-full h-2 bg-slate-800 rounded-full overflow-hidden border border-slate-700",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 transition-all duration-75 ease-linear",style:{width:`${(w.matchProgress||0)*100}%`}})})]})]}),E.jsx("div",{className:"w-px h-16 bg-slate-700"}),E.jsxs("div",{className:"flex flex-col items-center relative",children:[E.jsx("span",{className:"text-sm font-medium text-slate-500 uppercase tracking-widest mb-1",children:"Hearing"}),E.jsx("div",{className:"relative flex items-center justify-center",children:E.jsx("span",{className:`text-6xl drop-shadow-[0_0_20px_rgba(255,255,255,0.2)] z-10 ${w.note===(t.sequence?t.sequence[I].note:t.targetNote)?"text-green-400":"text-slate-200"}`,children:w.note||"--"})})]})]}),E.jsx("div",{className:"mt-6 text-indigo-300 font-medium text-lg",children:sn()})]}),i==="playing_vision"&&E.jsxs("div",{className:"mb-6 flex flex-col items-center animate-in fade-in zoom-in w-full text-center",children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4 text-indigo-400 animate-pulse font-bold tracking-widest uppercase text-sm",children:[E.jsx(hx,{className:"w-4 h-4"})," Watching Hand..."]}),E.jsx("div",{className:"text-4xl font-black text-white drop-shadow-[0_0_20px_rgba(99,102,241,0.5)] mb-2",children:t.title}),E.jsx("div",{className:"text-indigo-200 text-lg font-medium max-w-lg",children:(h==null?void 0:h.message)||"Show me your hand position..."})]}),E.jsx("div",{className:"mb-8 w-full max-w-4xl transform hover:scale-[1.02] transition-transform",children:E.jsx(gh,{activeString:t.id.startsWith("tune")?t.targetNote+t.targetOctave:null,highlightFret:me.fret,highlightNotes:t.ghost==="chord_em"&&t.chordData?t.chordData.fingers.map(J=>({string:J.string,fret:J.fret,disp:J.finger})):t.sequence||t.type==="note"?[{string:me.string,fret:me.fret,disp:me.disp||me.note}]:null,playedFret:w.fret,playedStringIdx:w.stringIdx})}),E.jsxs("div",{className:"text-center space-y-4 max-w-md",children:[i!=="playing_sequence"&&i!=="playing_vision"&&E.jsx("div",{className:"text-slate-400 text-lg font-light leading-relaxed",children:t.briefing}),i==="analyzing"&&E.jsxs("div",{className:"inline-flex items-center gap-2 text-indigo-400 animate-pulse font-bold tracking-widest uppercase text-sm",children:[E.jsx(Ep,{className:"w-4 h-4 animate-spin"})," Analyzing Snapshot..."]})]})]}),E.jsx("div",{className:"absolute bottom-12 left-1/2 transform -translate-x-1/2 z-30 w-full max-w-sm",children:i!=="analyzing"&&i!=="countdown"&&i!=="complete"&&i!=="playing_sequence"&&i!=="playing_vision"&&E.jsx(Yn,{onClick:Pn,size:"xl",className:"w-full text-xl shadow-[0_0_30px_rgba(99,102,241,0.3)] hover:shadow-[0_0_50px_rgba(99,102,241,0.5)] transition-shadow",variant:"primary",children:h&&!h.success?"Try Again":"Ready"})})]}),E.jsxs("div",{onTouchStart:F,onTouchMove:B,style:x?{left:x.x,top:x.y,bottom:"auto",right:"auto"}:{},className:"absolute bottom-4 right-4 md:bottom-8 md:right-8 z-40 w-40 md:w-72 aspect-video bg-black rounded-2xl overflow-hidden border-2 border-slate-700/50 shadow-2xl group transition-transform active:scale-105 hover:border-indigo-500/50 touch-none",children:[E.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-x-[-1]"}),E.jsx("canvas",{ref:r,className:"absolute inset-0 w-full h-full scale-x-[-1] pointer-events-none opacity-60",width:640,height:480}),E.jsxs("div",{className:"absolute bg-gradient-to-t from-black/80 to-transparent bottom-0 left-0 right-0 p-2 flex justify-between items-end",children:[E.jsx("div",{className:"text-[8px] md:text-[10px] uppercase font-bold text-slate-400",children:"Camera"}),E.jsx("button",{onClick:J=>{J.stopPropagation(),M(Z=>({...Z,isLefty:!Z.isLefty}))},className:"text-[8px] md:text-[10px] bg-slate-800/80 px-2 py-1 rounded text-white hover:bg-indigo-600 transition-colors",children:O.isLefty?"Lefty":"Righty"})]}),E.jsx("div",{className:"absolute top-3 left-3 flex gap-1",children:E.jsx("span",{className:`w-2 h-2 rounded-full ${bn.current?"bg-red-500 animate-pulse shadow-[0_0_10px_red]":"bg-slate-500"}`})})]}),i==="countdown"&&E.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-black/20 backdrop-blur-[2px]",children:E.jsx("div",{className:"text-[15rem] font-black text-white drop-shadow-[0_20px_50px_rgba(0,0,0,0.5)] animate-bounce",children:a})}),(i==="complete"||Se>=Nt&&i!=="instruct")&&E.jsx("div",{className:"absolute inset-0 z-[70] flex flex-col items-center justify-center bg-slate-950/90 backdrop-blur-xl animate-in fade-in duration-500 p-6",children:E.jsxs("div",{className:"max-w-md w-full text-center",children:[E.jsx(e_,{className:"w-32 h-32 text-yellow-400 mb-6 drop-shadow-[0_0_50px_rgba(250,204,21,0.5)] animate-bounce mx-auto"}),E.jsx("h2",{className:"text-5xl font-black text-white mb-2 tracking-tight",children:"Level Complete!"}),E.jsxs("p",{className:"text-indigo-300 text-xl mb-12",children:["You nailed it. +",t.xp," XP"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs(Yn,{onClick:()=>e(t.xp,"next"),size:"xl",className:"w-full text-lg shadow-indigo-500/20",children:[E.jsx(ef,{className:"w-5 h-5 mr-2 fill-slate-950"})," Next Lesson"]}),E.jsx(Yn,{onClick:()=>e(t.xp,"menu"),variant:"secondary",size:"xl",className:"w-full text-lg",children:"Back to Menu"})]})]})})]})},Pb=({onClose:t})=>{const[e,n]=Q.useState("--"),[r,i]=Q.useState(0),[s,a]=Q.useState(0),[c,h]=Q.useState(null),p=Q.useRef([]);Q.useEffect(()=>{const M=(async()=>(await wo.init(),wo.subscribe(L=>{if(L.pitch>0){n(L.note),a(Math.round(L.pitch)),h(L.likelyString),p.current.push(L.cents),p.current.length>5&&p.current.shift();const k=p.current.reduce((x,P)=>x+P,0)/p.current.length;i(k)}})))();return()=>{M.then(L=>L&&L()),wo.stop()}},[]);const y=Math.max(-45,Math.min(45,r)),v=Math.abs(r)<5&&s>0;let w="Play a string",A="text-slate-500";return s>0&&(v?(A="text-green-400 drop-shadow-[0_0_10px_rgba(74,222,128,0.5)]",w="Perfect!"):r>0?(A="text-yellow-400",w="Too High (Loosen)"):(A="text-yellow-400",w="Too Low (Tighten)")),E.jsxs("div",{className:"fixed inset-0 bg-slate-950 z-[60] flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-300",children:[E.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-4 bg-slate-800 rounded-full text-white hover:bg-slate-700 transition-colors",children:E.jsx(t_,{})}),E.jsxs("h2",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-12 flex items-center",children:[E.jsx(yx,{className:"w-4 h-4 mr-2"})," Studio Tuner"]}),E.jsxs("div",{className:"relative w-80 h-80",children:[E.jsxs("div",{className:"absolute inset-0 rounded-full border-8 border-slate-800 bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-4 w-1 h-3 bg-green-500/50 z-10"}),[...Array(9)].map((O,M)=>E.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-slate-700/30 transform pointer-events-none",style:{rotate:`${(M-4)*10}deg`}},M)),v&&E.jsx("div",{className:"absolute inset-0 bg-green-500/5 animate-pulse"}),E.jsxs("div",{className:"text-center z-20 relative",children:[E.jsx("div",{className:`text-9xl font-black transition-all duration-200 ${A}`,children:e}),E.jsxs("div",{className:"text-slate-500 font-mono text-xl mt-4 flex flex-col items-center",children:[E.jsx("span",{children:s>0?`${s} Hz`:"--"}),c&&E.jsx("span",{className:"text-xs bg-slate-800 px-2 py-1 rounded mt-2 text-indigo-400 border border-slate-700",children:c})]})]})]}),E.jsx("div",{className:"absolute top-0 left-1/2 w-1 origin-bottom transition-transform duration-100 ease-linear z-30",style:{height:"50%",transform:`translateX(-50%) rotate(${y}deg)`,background:v?"#4ade80":"#ef4444",boxShadow:`0 0 10px ${v?"#4ade80":"#ef4444"}`},children:E.jsx("div",{className:"w-4 h-4 rounded-full bg-white absolute -top-2 -left-1.5 shadow-lg border-2 border-slate-900"})})]}),E.jsx("div",{className:`mt-16 text-3xl font-bold transition-all duration-300 ${A}`,children:w}),E.jsx("div",{className:"absolute bottom-10 text-slate-600 text-sm",children:"440Hz Reference"})]})},Nb=({onClose:t,onAuthSuccess:e})=>{const[n,r]=Q.useState(!0),[i,s]=Q.useState(""),[a,c]=Q.useState(""),[h,p]=Q.useState(null),[y,v]=Q.useState(!1),w=async O=>{O.preventDefault(),p(null),v(!0);try{let M;n?M=await RR(i,a):M=await CR(i,a),M&&e(M)}catch(M){console.error(M),M.code==="auth/invalid-credential"?p("Invalid email or password."):M.code==="auth/email-already-in-use"?p("Email is already registered."):M.code==="auth/weak-password"?p("Password should be at least 6 characters."):p(M.message||"Authentication failed.")}finally{v(!1)}},A=async()=>{v(!0);try{const O=await kR();e(O)}catch{p("Could not sign in as guest.")}finally{v(!1)}};return E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm animate-in fade-in duration-200",children:[E.jsx("div",{className:"absolute inset-0",onClick:t}),E.jsxs("div",{className:"relative w-full max-w-md bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl p-8 overflow-hidden",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-2xl mx-auto mb-4 flex items-center justify-center overflow-hidden border border-slate-700 shadow-lg",children:E.jsx("img",{src:"/icon-white.png",alt:"Remi",className:"w-full h-full object-contain p-2"})}),E.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:n?"Welcome Back":"Join Remi"}),E.jsx("p",{className:"text-slate-400",children:n?"Sign in to continue your progress.":"Create an account to save your stats."})]}),E.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h&&E.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-500 p-3 rounded-lg text-sm flex items-center",children:[E.jsx(sx,{className:"w-4 h-4 mr-2 flex-shrink-0"}),h]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Email"}),E.jsxs("div",{className:"relative",children:[E.jsx(mx,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),E.jsx("input",{type:"email",required:!0,value:i,onChange:O=>s(O.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:"name@example.com"})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Password"}),E.jsxs("div",{className:"relative",children:[E.jsx(Z0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),E.jsx("input",{type:"password",required:!0,value:a,onChange:O=>c(O.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl py-3 pl-10 pr-4 text-white placeholder:text-slate-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all",placeholder:""})]})]}),E.jsx(Yn,{type:"submit",className:"w-full h-12 text-lg mt-6",isLoading:y,children:n?"Sign In":"Create Account"})]}),E.jsxs("div",{className:"relative my-8",children:[E.jsx("div",{className:"absolute inset-0 flex items-center",children:E.jsx("div",{className:"w-full border-t border-slate-800"})}),E.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:E.jsx("span",{className:"bg-slate-900 px-2 text-slate-500",children:"Or"})})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("button",{onClick:A,disabled:y,className:"w-full py-3 rounded-xl border border-slate-700 text-slate-300 hover:bg-slate-800 transition-colors font-medium flex items-center justify-center",children:[E.jsx(Tp,{className:"w-4 h-4 mr-2"}),"Continue as Guest"]}),E.jsxs("div",{className:"text-center text-sm text-slate-400",children:[n?"Don't have an account? ":"Already have an account? ",E.jsx("button",{onClick:()=>r(!n),className:"text-indigo-400 hover:text-indigo-300 font-bold hover:underline",children:n?"Sign Up":"Log In"})]})]}),E.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-slate-500 hover:text-white transition-colors",children:E.jsx(xp,{className:"w-6 h-6"})})]})]})},Ob=({user:t,progress:e,onClose:n,onLogout:r,onLoginClick:i,unlockAll:s,setUnlockAll:a})=>{var w;const c=t==null?void 0:t.isAnonymous,h=(t==null?void 0:t.email)||"Guest User",p=(e==null?void 0:e.streak)||0,y=(e==null?void 0:e.xp)||0,v=(w=t==null?void 0:t.metadata)!=null&&w.creationTime?new Date(t.metadata.creationTime).toLocaleDateString():"Just now";return E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-950/80 backdrop-blur-sm animate-in fade-in duration-200",children:[E.jsx("div",{className:"absolute inset-0",onClick:n}),E.jsxs("div",{className:"relative w-full max-w-md bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col",children:[E.jsxs("div",{className:"h-32 bg-gradient-to-r from-indigo-600 to-purple-600 relative",children:[E.jsx("div",{className:"absolute inset-0 opacity-20 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent"}),E.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 bg-black/20 hover:bg-black/40 rounded-full text-white transition-colors backdrop-blur-sm",children:E.jsx(xp,{size:20})})]}),E.jsxs("div",{className:"px-8 pb-8 -mt-12 relative flex-1 flex flex-col",children:[E.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full border-4 border-slate-900 flex items-center justify-center shadow-xl mb-4 self-center",children:E.jsx(Tp,{size:40,className:"text-slate-400"})}),E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:c?"Guest Musician":"Musician"}),E.jsx("p",{className:"text-slate-400 text-sm font-medium",children:h}),c&&E.jsxs("div",{className:"mt-3 inline-flex items-center px-3 py-1 rounded-full bg-yellow-500/10 border border-yellow-500/20 text-yellow-500 text-xs font-bold uppercase tracking-wide",children:[E.jsx(Ex,{size:12,className:"mr-1.5"}),"Not Saved"]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[E.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50 flex flex-col items-center",children:[E.jsx("span",{className:"text-slate-400 text-xs font-bold uppercase mb-1",children:"Total XP"}),E.jsxs("div",{className:"text-2xl font-black text-white flex items-center",children:[E.jsx(Tx,{size:20,className:"text-yellow-400 mr-2 fill-yellow-400"}),y.toLocaleString()]})]}),E.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700/50 flex flex-col items-center",children:[E.jsx("span",{className:"text-slate-400 text-xs font-bold uppercase mb-1",children:"Streak"}),E.jsxs("div",{className:"text-2xl font-black text-white",children:[p," Days"]})]})]}),E.jsxs("div",{className:"bg-slate-800/30 rounded-xl p-4 mb-8 border border-slate-800",children:[E.jsx("h3",{className:"text-slate-500 text-xs font-bold uppercase mb-3 px-1",children:"Settings"}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex flex-col",children:[E.jsx("span",{className:"text-white font-bold text-sm",children:"Unlock All Lessons"}),E.jsx("span",{className:"text-slate-400 text-xs",children:"Skip progression requirements"})]}),E.jsx("button",{onClick:()=>a(!s),className:`w-12 h-7 rounded-full transition-colors relative ${s?"bg-indigo-500":"bg-slate-700"}`,children:E.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full transition-transform ${s?"left-6":"left-1"}`})})]})]}),E.jsxs("div",{className:"mt-auto space-y-3",children:[c?E.jsxs(Yn,{onClick:i,className:"w-full h-12 text-lg shadow-lg shadow-indigo-500/20",children:[E.jsx(fx,{className:"mr-2",size:20}),"Sign Up to Save Progress"]}):E.jsxs("button",{onClick:r,className:"w-full py-4 rounded-xl border border-slate-700 text-red-400 hover:bg-red-500/10 hover:border-red-500/50 transition-all font-bold flex items-center justify-center",children:[E.jsx(px,{className:"mr-2",size:20}),"Log Out"]}),E.jsx("div",{className:"text-center mt-4",children:E.jsxs("p",{className:"text-xs text-slate-600",children:["Joined ",v]})})]})]})]})]})},Db=async t=>{try{const e=`You are Remi, an expert guitar tutor AI. 
        Your goal is to help users learn guitar, understand chords, tuning, and techniques.
        Keep your answers concise (max 2-3 sentences unless asked for detail).
        Be encouraging and helpful.
        Format constraints:
        - Use "double asterisks" for **bold** text to emphasize key terms (e.g. **Index Finger**).
        - If the user asks for a specific chord diagram (e.g. "show me G major", "how to play Em"), include a special tag at the VERY END of your response EXACTLY like this: [show_chord: chord_id].
        - IDs to use: c_major, a_major, g_major, e_major, d_major, am, em, dm.
        - Example: "Here is the C Major chord." [show_chord: c_major]
        
        User Query: ${t}`,n=await fetch("https://toolkit.rork.com/text/llm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:e},{role:"user",content:[{type:"text",text:t}]}]})});if(!n.ok)throw new Error("Network response was not ok");let i=(await n.json()).completion||"I'm having trouble thinking right now.";return i.includes("```")&&(i=i.replace(/```json/g,"").replace(/```/g,"").trim()),i}catch(e){return console.error("AI Chat Error:",e),"Sorry, I'm having trouble connecting to my brain right now. Please try again later."}},TE=[{id:"c_major",name:"C Major",type:"Open",difficulty:"Easy",description:"One of the first chords you learn. Bright and happy.",fingers:[{string:5,fret:3,finger:3},{string:4,fret:2,finger:2},{string:2,fret:1,finger:1}],muted:[6]},{id:"a_major",name:"A Major",type:"Open",difficulty:"Easy",description:"Three fingers in a row. Very useful for rock and pop.",fingers:[{string:4,fret:2,finger:1},{string:3,fret:2,finger:2},{string:2,fret:2,finger:3}],muted:[6]},{id:"g_major",name:"G Major",type:"Open",difficulty:"Easy",description:"The big chord. Uses all 6 strings.",fingers:[{string:6,fret:3,finger:2},{string:5,fret:2,finger:1},{string:1,fret:3,finger:3}],muted:[]},{id:"e_major",name:"E Major",type:"Open",difficulty:"Easy",description:"Powerful and full sounding.",fingers:[{string:5,fret:2,finger:2},{string:4,fret:2,finger:3},{string:3,fret:1,finger:1}],muted:[]},{id:"d_major",name:"D Major",type:"Open",difficulty:"Medium",description:"Bright and triangle shaped.",fingers:[{string:3,fret:2,finger:1},{string:1,fret:2,finger:2},{string:2,fret:3,finger:3}],muted:[6,5]},{id:"em",name:"E Minor",type:"Open",difficulty:"Easy",description:"Sad and simple. Only two fingers.",fingers:[{string:5,fret:2,finger:2},{string:4,fret:2,finger:3}],muted:[]},{id:"am",name:"A Minor",type:"Open",difficulty:"Easy",description:"Sad version of A Major.",fingers:[{string:4,fret:2,finger:2},{string:3,fret:2,finger:3},{string:2,fret:1,finger:1}],muted:[6]},{id:"f_maj",name:"F Major (Barre)",type:"Barre",difficulty:"Hard",description:"The hurdle. Requires a barre across the 1st fret.",fingers:[{string:6,fret:1,finger:1,barre:!0},{string:5,fret:3,finger:3},{string:4,fret:3,finger:4},{string:3,fret:2,finger:2}],muted:[]}],Mb=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState([{id:"welcome",role:"ai",text:"Hi! I'm Remi's AI assistant. Ask me anything about guitar!"}]),[i,s]=Q.useState(""),[a,c]=Q.useState(!1),h=Q.useRef(null);Q.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[n,t]);const p=async v=>{if(v.preventDefault(),!i.trim()||a)return;const w={id:Date.now(),role:"user",text:i};r(A=>[...A,w]),s(""),c(!0);try{const A=await Db(w.text),O={id:Date.now()+1,role:"ai",text:A};r(M=>[...M,O])}catch{const O={id:Date.now()+1,role:"ai",text:"Sorry, I had trouble connecting. Try again?"};r(M=>[...M,O])}finally{c(!1)}},y=v=>{const w=v.match(/\[show_chord:\s*([a-zA-Z0-9_]+)\]/);let A=null,O=v;if(w){const L=w[1];O=v.replace(w[0],"").trim(),A=TE.find(k=>k.id===L||k.id===L.toLowerCase())}const M=O.split(/(\*\*.*?\*\*)/g);return E.jsxs("div",{className:"space-y-3",children:[E.jsx("p",{className:"leading-relaxed",children:M.map((L,k)=>L.startsWith("**")&&L.endsWith("**")?E.jsx("strong",{className:"text-indigo-200",children:L.slice(2,-2)},k):E.jsx("span",{children:L},k))}),A&&E.jsxs("div",{className:"mt-3 bg-slate-900 rounded-xl p-4 border border-slate-700 w-full min-w-[280px]",children:[E.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase mb-2 tracking-wider flex items-center gap-2",children:[E.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"Chord: ",A.name]}),E.jsx("div",{className:"relative w-full aspect-[2/1] pointer-events-none",children:E.jsx(gh,{totalFrets:5,variant:"compact",highlightNotes:A.fingers.map(L=>({string:L.string,fret:L.fret,disp:L.finger}))})})]})]})};return E.jsxs(E.Fragment,{children:[!t&&E.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-indigo-600 hover:bg-indigo-500 text-white rounded-full shadow-2xl flex items-center justify-center transition-all hover:scale-110 z-[100]",children:E.jsx(gx,{className:"w-6 h-6"})}),t&&E.jsxs("div",{className:"fixed bottom-6 right-6 w-[420px] h-[600px] bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl flex flex-col overflow-hidden z-[100] animate-in slide-in-from-bottom-10 fade-in duration-200",children:[E.jsxs("div",{className:"bg-slate-800 p-4 flex items-center justify-between border-b border-slate-700",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center",children:E.jsx(cx,{className:"w-5 h-5 text-indigo-400"})}),E.jsx("span",{className:"font-bold text-white",children:"Remi Assistant"})]}),E.jsx("button",{onClick:()=>e(!1),className:"text-slate-400 hover:text-white",children:E.jsx(xp,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-950/50",ref:h,children:[n.map(v=>E.jsx("div",{className:`flex ${v.role==="user"?"justify-end":"justify-start"}`,children:E.jsx("div",{className:`max-w-[85%] p-4 rounded-2xl text-sm ${v.role==="user"?"bg-indigo-600/90 text-white rounded-tr-sm backdrop-blur-sm":"bg-slate-800/90 text-slate-200 rounded-tl-sm border border-slate-700 backdrop-blur-sm"}`,children:v.role==="ai"?y(v.text):v.text})},v.id)),a&&E.jsx("div",{className:"flex justify-start",children:E.jsx("div",{className:"bg-slate-800 p-3 rounded-2xl rounded-tl-sm border border-slate-700",children:E.jsxs("div",{className:"flex space-x-1",children:[E.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),E.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),E.jsx("div",{className:"w-2 h-2 bg-slate-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})})]}),E.jsxs("form",{onSubmit:p,className:"p-3 bg-slate-900 border-t border-slate-800 flex gap-2",children:[E.jsx("input",{type:"text",value:i,onChange:v=>s(v.target.value),placeholder:"Ask about chords...",className:"flex-1 bg-slate-800 border border-slate-700 text-white text-sm rounded-xl px-4 focus:outline-none focus:border-indigo-500 transition-colors"}),E.jsx(Yn,{type:"submit",size:"icon",className:"w-10 h-10 shrink-0",disabled:a||!i.trim(),children:E.jsx(_x,{className:"w-4 h-4"})})]})]})]})},Lb=({onClose:t})=>E.jsxs("div",{className:"min-h-screen bg-slate-950 text-white p-4 md:p-8 overflow-y-auto",children:[E.jsx("div",{className:"max-w-7xl mx-auto mb-8 flex items-center justify-between sticky top-0 bg-slate-950/90 backdrop-blur z-40 py-4 border-b border-white/5",children:E.jsxs("div",{className:"flex items-center space-x-4",children:[E.jsx(Yn,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full hover:bg-slate-800",children:E.jsx(ax,{className:"w-6 h-6"})}),E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-black tracking-tight text-white",children:"Chord Library"}),E.jsx("p",{className:"text-slate-400 text-sm",children:"Essential shapes & fingerings"})]})]})}),E.jsx("div",{className:"max-w-7xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 pb-20",children:TE.map(e=>E.jsxs("div",{className:"bg-slate-900/40 rounded-xl p-5 flex flex-col hover:bg-slate-800 hover:scale-[1.02] transition-all group border border-transparent hover:border-indigo-500/30",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsx("h3",{className:"text-2xl font-bold text-white group-hover:text-indigo-300 transition-colors",children:e.name}),E.jsx("div",{className:"flex flex-col items-end",children:E.jsx("span",{className:`text-[10px] uppercase font-bold px-3 py-1 rounded-full tracking-wide ${e.difficulty==="Easy"?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-orange-500/10 text-orange-400 border border-orange-500/20"} `,children:e.difficulty})})]}),E.jsx("div",{className:"flex-1 min-h-[180px] relative pointer-events-none mb-4",children:E.jsx(gh,{totalFrets:5,variant:"compact",highlightNotes:e.fingers.map(n=>({string:n.string,fret:n.fret,disp:n.finger}))})}),E.jsxs("div",{className:"mt-auto",children:[E.jsx("p",{className:"text-xs text-slate-400 leading-relaxed mb-3 line-clamp-2",title:e.description,children:e.description}),E.jsx("div",{className:"flex flex-wrap gap-2",children:E.jsx("span",{className:"text-[10px] font-mono bg-slate-800 px-2 py-1 rounded text-slate-300 border border-slate-700",children:e.type})})]})]},e.id))})]}),Vb=({onStart:t,loading:e})=>E.jsx("div",{className:"min-h-screen bg-black flex flex-col relative overflow-hidden",children:E.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 p-8 text-center animate-in fade-in duration-700",children:[E.jsx("h1",{className:"text-7xl font-black text-white mb-2 tracking-tighter",style:{fontFamily:'"Source Sans Pro", sans-serif'},children:"remi."}),E.jsx("p",{className:"text-2xl mb-6 font-medium tracking-wide",style:{fontFamily:"Comfortaa, cursive",color:"#6200FF"},children:"duolingo. for guitar."}),E.jsx(Yn,{onClick:t,className:"w-auto h-auto transition-colors",style:{backgroundColor:"#6200FF",borderRadius:"10px",padding:"12px 25px",fontSize:"16px",fontWeight:"bold",color:"white",fontFamily:'"Source Sans Pro", sans-serif',boxShadow:"none"},onMouseEnter:n=>n.target.style.backgroundColor="#781EFF",onMouseLeave:n=>n.target.style.backgroundColor="#6200FF",isLoading:e,children:e?"Loading...":"start learning"})]})});function jb(){const[t,e]=Q.useState(null),[n,r]=Q.useState("landing"),[i,s]=Q.useState(null),[a,c]=Q.useState(null),[h,p]=Q.useState(!0),[y,v]=Q.useState(!1),[w,A]=Q.useState(!1),[O,M]=Q.useState(()=>localStorage.getItem("remi_unlockAll")==="true");Q.useEffect(()=>{localStorage.setItem("remi_unlockAll",O)},[O]),Q.useEffect(()=>{(async()=>{})();const B=qo.onAuthStateChanged(I=>{e(I||null),p(!1)});return()=>B()},[]),Q.useEffect(()=>{if(!t)return;const F=PR(t.uid,B=>{c(B)});return()=>F()},[t]);const L=()=>{t?r("dashboard"):v(!0)},k=F=>{e(F),v(!1),r("dashboard")},x=async()=>{await bR(),e(null),c(null),A(!1),r("landing")},P=F=>{s(F),r("practice")},V=async(F,B="menu")=>{if(console.log("handleLessonFinish called:",{xpEarned:F,action:B,selectedLesson:i==null?void 0:i.id}),F>0&&t&&i)try{const I=await NR(t.uid,a,i.id,F);c(I)}catch(I){console.error("Failed to update progress:",I)}if(B==="next"){const I=ns.findIndex(T=>T.id===i.id);if(console.log("Current lesson index:",I,"Total lessons:",ns.length),I>=0&&I<ns.length-1){const T=ns[I+1];console.log("Advancing to next lesson:",T.id),s(T),r("practice")}else console.log("No next lesson found or at end of curriculum."),s(null),r("dashboard")}else s(null),r("dashboard")};return h&&!t?E.jsx("div",{className:"bg-slate-950 min-h-screen text-white flex items-center justify-center",children:E.jsx(Ep,{className:"animate-spin w-8 h-8 text-indigo-500"})}):E.jsxs(E.Fragment,{children:[y&&E.jsx(Nb,{onClose:()=>v(!1),onAuthSuccess:k}),w&&t&&E.jsx(Ob,{user:t,progress:a,onClose:()=>A(!1),onLogout:x,onLoginClick:()=>{A(!1),v(!0)},unlockAll:O,setUnlockAll:M}),n==="landing"&&E.jsx(Vb,{onStart:L,loading:h&&!a&&t}),n==="dashboard"&&E.jsx(pb,{user:t,progress:a,onSelectLesson:P,onOpenTuner:()=>r("tuner"),onOpenChords:()=>r("chords"),onOpenProfile:()=>A(!0),unlockAll:O}),n==="practice"&&i&&E.jsx(bb,{lesson:i,onFinish:V},i.id),n==="tuner"&&E.jsx(Pb,{onClose:()=>r("dashboard")}),n==="chords"&&E.jsx(Lb,{onClose:()=>r("dashboard")}),n!=="landing"&&E.jsx(Mb,{})]})}ad.createRoot(document.getElementById("root")).render(E.jsx(HE.StrictMode,{children:E.jsx(jb,{})}));
