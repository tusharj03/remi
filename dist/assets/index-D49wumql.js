(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ry={exports:{}},Dc={},Cy={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=Symbol.for("react.element"),fE=Symbol.for("react.portal"),pE=Symbol.for("react.fragment"),mE=Symbol.for("react.strict_mode"),gE=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),_E=Symbol.for("react.forward_ref"),wE=Symbol.for("react.suspense"),EE=Symbol.for("react.memo"),TE=Symbol.for("react.lazy"),sm=Symbol.iterator;function IE(t){return t===null||typeof t!="object"?null:(t=sm&&t[sm]||t["@@iterator"],typeof t=="function"?t:null)}var Py={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},by=Object.assign,Ny={};function Io(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||Py}Io.prototype.isReactComponent={};Io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Dy(){}Dy.prototype=Io.prototype;function wf(t,e,n){this.props=t,this.context=e,this.refs=Ny,this.updater=n||Py}var Ef=wf.prototype=new Dy;Ef.constructor=wf;by(Ef,Io.prototype);Ef.isPureReactComponent=!0;var om=Array.isArray,Oy=Object.prototype.hasOwnProperty,Tf={current:null},Vy={key:!0,ref:!0,__self:!0,__source:!0};function Ly(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Oy.call(e,r)&&!Vy.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var h=Array(c),m=0;m<c;m++)h[m]=arguments[m+2];i.children=h}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:ll,type:t,key:s,ref:a,props:i,_owner:Tf.current}}function SE(t,e){return{$$typeof:ll,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function If(t){return typeof t=="object"&&t!==null&&t.$$typeof===ll}function AE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var am=/\/+/g;function gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AE(""+t.key):e.toString(36)}function Iu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ll:case fE:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+gh(a,0):r,om(i)?(n="",t!=null&&(n=t.replace(am,"$&/")+"/"),Iu(i,e,n,"",function(m){return m})):i!=null&&(If(i)&&(i=SE(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(am,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",om(t))for(var c=0;c<t.length;c++){s=t[c];var h=r+gh(s,c);a+=Iu(s,e,n,h,i)}else if(h=IE(t),typeof h=="function")for(t=h.call(t),c=0;!(s=t.next()).done;)s=s.value,h=r+gh(s,c++),a+=Iu(s,e,n,h,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function tu(t,e,n){if(t==null)return t;var r=[],i=0;return Iu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},Su={transition:null},kE={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Su,ReactCurrentOwner:Tf};function My(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:tu,forEach:function(t,e,n){tu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tu(t,function(){e++}),e},toArray:function(t){return tu(t,function(e){return e})||[]},only:function(t){if(!If(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Io;de.Fragment=pE;de.Profiler=gE;de.PureComponent=wf;de.StrictMode=mE;de.Suspense=wE;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kE;de.act=My;de.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=by({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Tf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)Oy.call(e,h)&&!Vy.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&c!==void 0?c[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){c=Array(h);for(var m=0;m<h;m++)c[m]=arguments[m+2];r.children=c}return{$$typeof:ll,type:t.type,key:i,ref:s,props:r,_owner:a}};de.createContext=function(t){return t={$$typeof:vE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yE,_context:t},t.Consumer=t};de.createElement=Ly;de.createFactory=function(t){var e=Ly.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:_E,render:t}};de.isValidElement=If;de.lazy=function(t){return{$$typeof:TE,_payload:{_status:-1,_result:t},_init:xE}};de.memo=function(t,e){return{$$typeof:EE,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Su.transition;Su.transition={};try{t()}finally{Su.transition=e}};de.unstable_act=My;de.useCallback=function(t,e){return Pt.current.useCallback(t,e)};de.useContext=function(t){return Pt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Pt.current.useEffect(t,e)};de.useId=function(){return Pt.current.useId()};de.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};de.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Pt.current.useMemo(t,e)};de.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};de.useRef=function(t){return Pt.current.useRef(t)};de.useState=function(t){return Pt.current.useState(t)};de.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};de.useTransition=function(){return Pt.current.useTransition()};de.version="18.3.1";Cy.exports=de;var pe=Cy.exports;const RE=dE(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE=pe,PE=Symbol.for("react.element"),bE=Symbol.for("react.fragment"),NE=Object.prototype.hasOwnProperty,DE=CE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OE={key:!0,ref:!0,__self:!0,__source:!0};function jy(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)NE.call(e,r)&&!OE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:PE,type:t,key:s,ref:a,props:i,_owner:DE.current}}Dc.Fragment=bE;Dc.jsx=jy;Dc.jsxs=jy;Ry.exports=Dc;var D=Ry.exports,td={},Fy={exports:{}},qt={},Uy={exports:{}},zy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,K){var Z=G.length;G.push(K);e:for(;0<Z;){var se=Z-1>>>1,he=G[se];if(0<i(he,K))G[se]=K,G[Z]=he,Z=se;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var K=G[0],Z=G.pop();if(Z!==K){G[0]=Z;e:for(var se=0,he=G.length,Se=he>>>1;se<Se;){var pt=2*(se+1)-1,Nt=G[pt],mt=pt+1,an=G[mt];if(0>i(Nt,Z))mt<he&&0>i(an,Nt)?(G[se]=an,G[mt]=Z,se=mt):(G[se]=Nt,G[pt]=Z,se=pt);else if(mt<he&&0>i(an,Z))G[se]=an,G[mt]=Z,se=mt;else break e}}return K}function i(G,K){var Z=G.sortIndex-K.sortIndex;return Z!==0?Z:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var h=[],m=[],y=1,_=null,E=3,b=!1,V=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(G){for(var K=n(m);K!==null;){if(K.callback===null)r(m);else if(K.startTime<=G)r(m),K.sortIndex=K.expirationTime,e(h,K);else break;K=n(m)}}function L(G){if(O=!1,P(G),!V)if(n(h)!==null)V=!0,te($);else{var K=n(m);K!==null&&ye(L,K.startTime-G)}}function $(G,K){V=!1,O&&(O=!1,k(w),w=-1),b=!0;var Z=E;try{for(P(K),_=n(h);_!==null&&(!(_.expirationTime>K)||G&&!N());){var se=_.callback;if(typeof se=="function"){_.callback=null,E=_.priorityLevel;var he=se(_.expirationTime<=K);K=t.unstable_now(),typeof he=="function"?_.callback=he:_===n(h)&&r(h),P(K)}else r(h);_=n(h)}if(_!==null)var Se=!0;else{var pt=n(m);pt!==null&&ye(L,pt.startTime-K),Se=!1}return Se}finally{_=null,E=Z,b=!1}}var W=!1,A=null,w=-1,S=5,x=-1;function N(){return!(t.unstable_now()-x<S)}function C(){if(A!==null){var G=t.unstable_now();x=G;var K=!0;try{K=A(!0,G)}finally{K?I():(W=!1,A=null)}}else W=!1}var I;if(typeof T=="function")I=function(){T(C)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,_e=J.port2;J.port1.onmessage=C,I=function(){_e.postMessage(null)}}else I=function(){M(C,0)};function te(G){A=G,W||(W=!0,I())}function ye(G,K){w=M(function(){G(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){V||b||(V=!0,te($))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(G){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var Z=E;E=K;try{return G()}finally{E=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=E;E=G;try{return K()}finally{E=Z}},t.unstable_scheduleCallback=function(G,K,Z){var se=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?se+Z:se):Z=se,G){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Z+he,G={id:y++,callback:K,priorityLevel:G,startTime:Z,expirationTime:he,sortIndex:-1},Z>se?(G.sortIndex=Z,e(m,G),n(h)===null&&G===n(m)&&(O?(k(w),w=-1):O=!0,ye(L,Z-se))):(G.sortIndex=he,e(h,G),V||b||(V=!0,te($))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var K=E;return function(){var Z=E;E=K;try{return G.apply(this,arguments)}finally{E=Z}}}})(zy);Uy.exports=zy;var VE=Uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE=pe,Gt=VE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var By=new Set,La={};function es(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(La[t]=e,t=0;t<e.length;t++)By.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nd=Object.prototype.hasOwnProperty,ME=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lm={},um={};function jE(t){return nd.call(um,t)?!0:nd.call(lm,t)?!1:ME.test(t)?um[t]=!0:(lm[t]=!0,!1)}function FE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UE(t,e,n,r){if(e===null||typeof e>"u"||FE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sf=/[\-:]([a-z])/g;function Af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sf,Af);ht[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sf,Af);ht[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sf,Af);ht[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xf(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UE(e,n,i,r)&&(n=null),r||i===null?jE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fr=LE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nu=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),kf=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),$y=Symbol.for("react.provider"),Hy=Symbol.for("react.context"),Rf=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),sd=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Or=Symbol.for("react.lazy"),Wy=Symbol.for("react.offscreen"),cm=Symbol.iterator;function na(t){return t===null||typeof t!="object"?null:(t=cm&&t[cm]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,yh;function pa(t){if(yh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yh=e&&e[1]||""}return`
`+yh+t}var vh=!1;function _h(t,e){if(!t||vh)return"";vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=c);break}}}finally{vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pa(t):""}function zE(t){switch(t.tag){case 5:return pa(t.type);case 16:return pa("Lazy");case 13:return pa("Suspense");case 19:return pa("SuspenseList");case 0:case 2:case 15:return t=_h(t.type,!1),t;case 11:return t=_h(t.type.render,!1),t;case 1:return t=_h(t.type,!0),t;default:return""}}function od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Os:return"Portal";case rd:return"Profiler";case kf:return"StrictMode";case id:return"Suspense";case sd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hy:return(t.displayName||"Context")+".Consumer";case $y:return(t._context.displayName||"Context")+".Provider";case Rf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:od(t.type)||"Memo";case Or:e=t._payload,t=t._init;try{return od(t(e))}catch{}}return null}function BE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return od(e);case 8:return e===kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ni(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $E(t){var e=Gy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ru(t){t._valueTracker||(t._valueTracker=$E(t))}function qy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Gy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ad(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ni(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ky(t,e){e=e.checked,e!=null&&xf(t,"checked",e,!1)}function ld(t,e){Ky(t,e);var n=ni(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ud(t,e.type,n):e.hasOwnProperty("defaultValue")&&ud(t,e.type,ni(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ud(t,e,n){(e!=="number"||Hu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ma=Array.isArray;function qs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ni(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(ma(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ni(n)}}function Qy(t,e){var n=ni(e.value),r=ni(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var iu,Yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(iu=iu||document.createElement("div"),iu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=iu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HE=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){HE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ta[e]=Ta[t]})});function Jy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+e).trim():e+"px"}function Zy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Jy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var WE=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dd(t,e){if(e){if(WE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function fd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=null;function Pf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var md=null,Ks=null,Qs=null;function mm(t){if(t=hl(t)){if(typeof md!="function")throw Error(B(280));var e=t.stateNode;e&&(e=jc(e),md(t.stateNode,t.type,e))}}function ev(t){Ks?Qs?Qs.push(t):Qs=[t]:Ks=t}function tv(){if(Ks){var t=Ks,e=Qs;if(Qs=Ks=null,mm(t),e)for(t=0;t<e.length;t++)mm(e[t])}}function nv(t,e){return t(e)}function rv(){}var wh=!1;function iv(t,e,n){if(wh)return t(e,n);wh=!0;try{return nv(t,e,n)}finally{wh=!1,(Ks!==null||Qs!==null)&&(rv(),tv())}}function ja(t,e){var n=t.stateNode;if(n===null)return null;var r=jc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var gd=!1;if(rr)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){gd=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{gd=!1}function GE(t,e,n,r,i,s,a,c,h){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(y){this.onError(y)}}var Ia=!1,Wu=null,Gu=!1,yd=null,qE={onError:function(t){Ia=!0,Wu=t}};function KE(t,e,n,r,i,s,a,c,h){Ia=!1,Wu=null,GE.apply(qE,arguments)}function QE(t,e,n,r,i,s,a,c,h){if(KE.apply(this,arguments),Ia){if(Ia){var m=Wu;Ia=!1,Wu=null}else throw Error(B(198));Gu||(Gu=!0,yd=m)}}function ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gm(t){if(ts(t)!==t)throw Error(B(188))}function XE(t){var e=t.alternate;if(!e){if(e=ts(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gm(i),t;if(s===r)return gm(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function ov(t){return t=XE(t),t!==null?av(t):null}function av(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=av(t);if(e!==null)return e;t=t.sibling}return null}var lv=Gt.unstable_scheduleCallback,ym=Gt.unstable_cancelCallback,YE=Gt.unstable_shouldYield,JE=Gt.unstable_requestPaint,He=Gt.unstable_now,ZE=Gt.unstable_getCurrentPriorityLevel,bf=Gt.unstable_ImmediatePriority,uv=Gt.unstable_UserBlockingPriority,qu=Gt.unstable_NormalPriority,eT=Gt.unstable_LowPriority,cv=Gt.unstable_IdlePriority,Oc=null,Nn=null;function tT(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(Oc,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:iT,nT=Math.log,rT=Math.LN2;function iT(t){return t>>>=0,t===0?32:31-(nT(t)/rT|0)|0}var su=64,ou=4194304;function ga(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=ga(c):(s&=a,s!==0&&(r=ga(s)))}else a=n&~i,a!==0?r=ga(a):s!==0&&(r=ga(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function sT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-gn(s),c=1<<a,h=i[a];h===-1?(!(c&n)||c&r)&&(i[a]=sT(c,e)):h<=e&&(t.expiredLanes|=c),s&=~c}}function vd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hv(){var t=su;return su<<=1,!(su&4194240)&&(su=64),t}function Eh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ul(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function aT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Nf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var fv,Df,pv,mv,gv,_d=!1,au=[],Wr=null,Gr=null,qr=null,Fa=new Map,Ua=new Map,Lr=[],lT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vm(t,e){switch(t){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(e.pointerId)}}function ia(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hl(e),e!==null&&Df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uT(t,e,n,r,i){switch(e){case"focusin":return Wr=ia(Wr,t,e,n,r,i),!0;case"dragenter":return Gr=ia(Gr,t,e,n,r,i),!0;case"mouseover":return qr=ia(qr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fa.set(s,ia(Fa.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ua.set(s,ia(Ua.get(s)||null,t,e,n,r,i)),!0}return!1}function yv(t){var e=Vi(t.target);if(e!==null){var n=ts(e);if(n!==null){if(e=n.tag,e===13){if(e=sv(n),e!==null){t.blockedOn=e,gv(t.priority,function(){pv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);pd=r,n.target.dispatchEvent(r),pd=null}else return e=hl(n),e!==null&&Df(e),t.blockedOn=n,!1;e.shift()}return!0}function _m(t,e,n){Au(t)&&n.delete(e)}function cT(){_d=!1,Wr!==null&&Au(Wr)&&(Wr=null),Gr!==null&&Au(Gr)&&(Gr=null),qr!==null&&Au(qr)&&(qr=null),Fa.forEach(_m),Ua.forEach(_m)}function sa(t,e){t.blockedOn===e&&(t.blockedOn=null,_d||(_d=!0,Gt.unstable_scheduleCallback(Gt.unstable_NormalPriority,cT)))}function za(t){function e(i){return sa(i,t)}if(0<au.length){sa(au[0],t);for(var n=1;n<au.length;n++){var r=au[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Wr!==null&&sa(Wr,t),Gr!==null&&sa(Gr,t),qr!==null&&sa(qr,t),Fa.forEach(e),Ua.forEach(e),n=0;n<Lr.length;n++)r=Lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Lr.length&&(n=Lr[0],n.blockedOn===null);)yv(n),n.blockedOn===null&&Lr.shift()}var Xs=fr.ReactCurrentBatchConfig,Qu=!0;function hT(t,e,n,r){var i=xe,s=Xs.transition;Xs.transition=null;try{xe=1,Of(t,e,n,r)}finally{xe=i,Xs.transition=s}}function dT(t,e,n,r){var i=xe,s=Xs.transition;Xs.transition=null;try{xe=4,Of(t,e,n,r)}finally{xe=i,Xs.transition=s}}function Of(t,e,n,r){if(Qu){var i=wd(t,e,n,r);if(i===null)bh(t,e,r,Xu,n),vm(t,r);else if(uT(i,t,e,n,r))r.stopPropagation();else if(vm(t,r),e&4&&-1<lT.indexOf(t)){for(;i!==null;){var s=hl(i);if(s!==null&&fv(s),s=wd(t,e,n,r),s===null&&bh(t,e,r,Xu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bh(t,e,r,null,n)}}var Xu=null;function wd(t,e,n,r){if(Xu=null,t=Pf(r),t=Vi(t),t!==null)if(e=ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xu=t,null}function vv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZE()){case bf:return 1;case uv:return 4;case qu:case eT:return 16;case cv:return 536870912;default:return 16}default:return 16}}var Br=null,Vf=null,xu=null;function _v(){if(xu)return xu;var t,e=Vf,n=e.length,r,i="value"in Br?Br.value:Br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return xu=i.slice(t,1<r?1-r:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function lu(){return!0}function wm(){return!1}function Kt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?lu:wm,this.isPropagationStopped=wm,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),e}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Kt(So),cl=je({},So,{view:0,detail:0}),fT=Kt(cl),Th,Ih,oa,Vc=je({},cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(Th=t.screenX-oa.screenX,Ih=t.screenY-oa.screenY):Ih=Th=0,oa=t),Th)},movementY:function(t){return"movementY"in t?t.movementY:Ih}}),Em=Kt(Vc),pT=je({},Vc,{dataTransfer:0}),mT=Kt(pT),gT=je({},cl,{relatedTarget:0}),Sh=Kt(gT),yT=je({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),vT=Kt(yT),_T=je({},So,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wT=Kt(_T),ET=je({},So,{data:0}),Tm=Kt(ET),TT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ST={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ST[t])?!!e[t]:!1}function Mf(){return AT}var xT=je({},cl,{key:function(t){if(t.key){var e=TT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kT=Kt(xT),RT=je({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Im=Kt(RT),CT=je({},cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),PT=Kt(CT),bT=je({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),NT=Kt(bT),DT=je({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),OT=Kt(DT),VT=[9,13,27,32],jf=rr&&"CompositionEvent"in window,Sa=null;rr&&"documentMode"in document&&(Sa=document.documentMode);var LT=rr&&"TextEvent"in window&&!Sa,wv=rr&&(!jf||Sa&&8<Sa&&11>=Sa),Sm=" ",Am=!1;function Ev(t,e){switch(t){case"keyup":return VT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ls=!1;function MT(t,e){switch(t){case"compositionend":return Tv(e);case"keypress":return e.which!==32?null:(Am=!0,Sm);case"textInput":return t=e.data,t===Sm&&Am?null:t;default:return null}}function jT(t,e){if(Ls)return t==="compositionend"||!jf&&Ev(t,e)?(t=_v(),xu=Vf=Br=null,Ls=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wv&&e.locale!=="ko"?null:e.data;default:return null}}var FT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FT[t.type]:e==="textarea"}function Iv(t,e,n,r){ev(r),e=Yu(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Aa=null,Ba=null;function UT(t){Ov(t,0)}function Lc(t){var e=Fs(t);if(qy(e))return t}function zT(t,e){if(t==="change")return e}var Sv=!1;if(rr){var Ah;if(rr){var xh="oninput"in document;if(!xh){var km=document.createElement("div");km.setAttribute("oninput","return;"),xh=typeof km.oninput=="function"}Ah=xh}else Ah=!1;Sv=Ah&&(!document.documentMode||9<document.documentMode)}function Rm(){Aa&&(Aa.detachEvent("onpropertychange",Av),Ba=Aa=null)}function Av(t){if(t.propertyName==="value"&&Lc(Ba)){var e=[];Iv(e,Ba,t,Pf(t)),iv(UT,e)}}function BT(t,e,n){t==="focusin"?(Rm(),Aa=e,Ba=n,Aa.attachEvent("onpropertychange",Av)):t==="focusout"&&Rm()}function $T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lc(Ba)}function HT(t,e){if(t==="click")return Lc(e)}function WT(t,e){if(t==="input"||t==="change")return Lc(e)}function GT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:GT;function $a(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nd.call(e,i)||!vn(t[i],e[i]))return!1}return!0}function Cm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pm(t,e){var n=Cm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cm(n)}}function xv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kv(){for(var t=window,e=Hu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hu(t.document)}return e}function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function qT(t){var e=kv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xv(n.ownerDocument.documentElement,n)){if(r!==null&&Ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Pm(n,s);var a=Pm(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=rr&&"documentMode"in document&&11>=document.documentMode,Ms=null,Ed=null,xa=null,Td=!1;function bm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Ms==null||Ms!==Hu(r)||(r=Ms,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xa&&$a(xa,r)||(xa=r,r=Yu(Ed,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ms)))}function uu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:uu("Animation","AnimationEnd"),animationiteration:uu("Animation","AnimationIteration"),animationstart:uu("Animation","AnimationStart"),transitionend:uu("Transition","TransitionEnd")},kh={},Rv={};rr&&(Rv=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Mc(t){if(kh[t])return kh[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rv)return kh[t]=e[n];return t}var Cv=Mc("animationend"),Pv=Mc("animationiteration"),bv=Mc("animationstart"),Nv=Mc("transitionend"),Dv=new Map,Nm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(t,e){Dv.set(t,e),es(e,[t])}for(var Rh=0;Rh<Nm.length;Rh++){var Ch=Nm[Rh],QT=Ch.toLowerCase(),XT=Ch[0].toUpperCase()+Ch.slice(1);ai(QT,"on"+XT)}ai(Cv,"onAnimationEnd");ai(Pv,"onAnimationIteration");ai(bv,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(Nv,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));es("onBeforeInput",["compositionend","keypress","textInput","paste"]);es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YT=new Set("cancel close invalid load scroll toggle".split(" ").concat(ya));function Dm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QE(r,e,void 0,t),t.currentTarget=null}function Ov(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],h=c.instance,m=c.currentTarget;if(c=c.listener,h!==s&&i.isPropagationStopped())break e;Dm(i,c,m),s=h}else for(a=0;a<r.length;a++){if(c=r[a],h=c.instance,m=c.currentTarget,c=c.listener,h!==s&&i.isPropagationStopped())break e;Dm(i,c,m),s=h}}}if(Gu)throw t=yd,Gu=!1,yd=null,t}function Ne(t,e){var n=e[kd];n===void 0&&(n=e[kd]=new Set);var r=t+"__bubble";n.has(r)||(Vv(e,t,2,!1),n.add(r))}function Ph(t,e,n){var r=0;e&&(r|=4),Vv(n,t,r,e)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Ha(t){if(!t[cu]){t[cu]=!0,By.forEach(function(n){n!=="selectionchange"&&(YT.has(n)||Ph(n,!1,t),Ph(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cu]||(e[cu]=!0,Ph("selectionchange",!1,e))}}function Vv(t,e,n,r){switch(vv(e)){case 1:var i=hT;break;case 4:i=dT;break;default:i=Of}n=i.bind(null,e,n,t),i=void 0,!gd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Vi(c),a===null)return;if(h=a.tag,h===5||h===6){r=s=a;continue e}c=c.parentNode}}r=r.return}iv(function(){var m=s,y=Pf(n),_=[];e:{var E=Dv.get(t);if(E!==void 0){var b=Lf,V=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":b=kT;break;case"focusin":V="focus",b=Sh;break;case"focusout":V="blur",b=Sh;break;case"beforeblur":case"afterblur":b=Sh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Em;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=mT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=PT;break;case Cv:case Pv:case bv:b=vT;break;case Nv:b=NT;break;case"scroll":b=fT;break;case"wheel":b=OT;break;case"copy":case"cut":case"paste":b=wT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Im}var O=(e&4)!==0,M=!O&&t==="scroll",k=O?E!==null?E+"Capture":null:E;O=[];for(var T=m,P;T!==null;){P=T;var L=P.stateNode;if(P.tag===5&&L!==null&&(P=L,k!==null&&(L=ja(T,k),L!=null&&O.push(Wa(T,L,P)))),M)break;T=T.return}0<O.length&&(E=new b(E,V,null,n,y),_.push({event:E,listeners:O}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",E&&n!==pd&&(V=n.relatedTarget||n.fromElement)&&(Vi(V)||V[ir]))break e;if((b||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,b?(V=n.relatedTarget||n.toElement,b=m,V=V?Vi(V):null,V!==null&&(M=ts(V),V!==M||V.tag!==5&&V.tag!==6)&&(V=null)):(b=null,V=m),b!==V)){if(O=Em,L="onMouseLeave",k="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(O=Im,L="onPointerLeave",k="onPointerEnter",T="pointer"),M=b==null?E:Fs(b),P=V==null?E:Fs(V),E=new O(L,T+"leave",b,n,y),E.target=M,E.relatedTarget=P,L=null,Vi(y)===m&&(O=new O(k,T+"enter",V,n,y),O.target=P,O.relatedTarget=M,L=O),M=L,b&&V)t:{for(O=b,k=V,T=0,P=O;P;P=Ps(P))T++;for(P=0,L=k;L;L=Ps(L))P++;for(;0<T-P;)O=Ps(O),T--;for(;0<P-T;)k=Ps(k),P--;for(;T--;){if(O===k||k!==null&&O===k.alternate)break t;O=Ps(O),k=Ps(k)}O=null}else O=null;b!==null&&Om(_,E,b,O,!1),V!==null&&M!==null&&Om(_,M,V,O,!0)}}e:{if(E=m?Fs(m):window,b=E.nodeName&&E.nodeName.toLowerCase(),b==="select"||b==="input"&&E.type==="file")var $=zT;else if(xm(E))if(Sv)$=WT;else{$=$T;var W=BT}else(b=E.nodeName)&&b.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&($=HT);if($&&($=$(t,m))){Iv(_,$,n,y);break e}W&&W(t,E,m),t==="focusout"&&(W=E._wrapperState)&&W.controlled&&E.type==="number"&&ud(E,"number",E.value)}switch(W=m?Fs(m):window,t){case"focusin":(xm(W)||W.contentEditable==="true")&&(Ms=W,Ed=m,xa=null);break;case"focusout":xa=Ed=Ms=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,bm(_,n,y);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":bm(_,n,y)}var A;if(jf)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ls?Ev(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(wv&&n.locale!=="ko"&&(Ls||w!=="onCompositionStart"?w==="onCompositionEnd"&&Ls&&(A=_v()):(Br=y,Vf="value"in Br?Br.value:Br.textContent,Ls=!0)),W=Yu(m,w),0<W.length&&(w=new Tm(w,t,null,n,y),_.push({event:w,listeners:W}),A?w.data=A:(A=Tv(n),A!==null&&(w.data=A)))),(A=LT?MT(t,n):jT(t,n))&&(m=Yu(m,"onBeforeInput"),0<m.length&&(y=new Tm("onBeforeInput","beforeinput",null,n,y),_.push({event:y,listeners:m}),y.data=A))}Ov(_,e)})}function Wa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ja(t,n),s!=null&&r.unshift(Wa(t,s,i)),s=ja(t,e),s!=null&&r.push(Wa(t,s,i))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Om(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,h=c.alternate,m=c.stateNode;if(h!==null&&h===r)break;c.tag===5&&m!==null&&(c=m,i?(h=ja(n,s),h!=null&&a.unshift(Wa(n,h,c))):i||(h=ja(n,s),h!=null&&a.push(Wa(n,h,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var JT=/\r\n?/g,ZT=/\u0000|\uFFFD/g;function Vm(t){return(typeof t=="string"?t:""+t).replace(JT,`
`).replace(ZT,"")}function hu(t,e,n){if(e=Vm(e),Vm(t)!==e&&n)throw Error(B(425))}function Ju(){}var Id=null,Sd=null;function Ad(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var xd=typeof setTimeout=="function"?setTimeout:void 0,e1=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,t1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(t){return Lm.resolve(null).then(t).catch(n1)}:xd;function n1(t){setTimeout(function(){throw t})}function Nh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);za(e)}function Kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ao=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Ao,Ga="__reactProps$"+Ao,ir="__reactContainer$"+Ao,kd="__reactEvents$"+Ao,r1="__reactListeners$"+Ao,i1="__reactHandles$"+Ao;function Vi(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ir]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mm(t);t!==null;){if(n=t[Pn])return n;t=Mm(t)}return e}t=n,n=t.parentNode}return null}function hl(t){return t=t[Pn]||t[ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function jc(t){return t[Ga]||null}var Rd=[],Us=-1;function li(t){return{current:t}}function De(t){0>Us||(t.current=Rd[Us],Rd[Us]=null,Us--)}function Pe(t,e){Us++,Rd[Us]=t.current,t.current=e}var ri={},At=li(ri),jt=li(!1),Hi=ri;function ao(t,e){var n=t.type.contextTypes;if(!n)return ri;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ft(t){return t=t.childContextTypes,t!=null}function Zu(){De(jt),De(At)}function jm(t,e,n){if(At.current!==ri)throw Error(B(168));Pe(At,e),Pe(jt,n)}function Lv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,BE(t)||"Unknown",i));return je({},n,r)}function ec(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ri,Hi=At.current,Pe(At,t),Pe(jt,jt.current),!0}function Fm(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Lv(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,De(jt),De(At),Pe(At,t)):De(jt),Pe(jt,n)}var Kn=null,Fc=!1,Dh=!1;function Mv(t){Kn===null?Kn=[t]:Kn.push(t)}function s1(t){Fc=!0,Mv(t)}function ui(){if(!Dh&&Kn!==null){Dh=!0;var t=0,e=xe;try{var n=Kn;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,Fc=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),lv(bf,ui),i}finally{xe=e,Dh=!1}}return null}var zs=[],Bs=0,tc=null,nc=0,Jt=[],Zt=0,Wi=null,Qn=1,Xn="";function Ni(t,e){zs[Bs++]=nc,zs[Bs++]=tc,tc=t,nc=e}function jv(t,e,n){Jt[Zt++]=Qn,Jt[Zt++]=Xn,Jt[Zt++]=Wi,Wi=t;var r=Qn;t=Xn;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qn=1<<32-gn(e)+i|n<<i|r,Xn=s+t}else Qn=1<<s|n<<i|r,Xn=t}function Uf(t){t.return!==null&&(Ni(t,1),jv(t,1,0))}function zf(t){for(;t===tc;)tc=zs[--Bs],zs[Bs]=null,nc=zs[--Bs],zs[Bs]=null;for(;t===Wi;)Wi=Jt[--Zt],Jt[Zt]=null,Xn=Jt[--Zt],Jt[Zt]=null,Qn=Jt[--Zt],Jt[Zt]=null}var Wt=null,Ht=null,Oe=!1,pn=null;function Fv(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Um(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=Kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wi!==null?{id:Qn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,Ht=null,!0):!1;default:return!1}}function Cd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pd(t){if(Oe){var e=Ht;if(e){var n=e;if(!Um(t,e)){if(Cd(t))throw Error(B(418));e=Kr(n.nextSibling);var r=Wt;e&&Um(t,e)?Fv(r,n):(t.flags=t.flags&-4097|2,Oe=!1,Wt=t)}}else{if(Cd(t))throw Error(B(418));t.flags=t.flags&-4097|2,Oe=!1,Wt=t}}}function zm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function du(t){if(t!==Wt)return!1;if(!Oe)return zm(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ad(t.type,t.memoizedProps)),e&&(e=Ht)){if(Cd(t))throw Uv(),Error(B(418));for(;e;)Fv(t,e),e=Kr(e.nextSibling)}if(zm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=Wt?Kr(t.stateNode.nextSibling):null;return!0}function Uv(){for(var t=Ht;t;)t=Kr(t.nextSibling)}function lo(){Ht=Wt=null,Oe=!1}function Bf(t){pn===null?pn=[t]:pn.push(t)}var o1=fr.ReactCurrentBatchConfig;function aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function fu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bm(t){var e=t._init;return e(t._payload)}function zv(t){function e(k,T){if(t){var P=k.deletions;P===null?(k.deletions=[T],k.flags|=16):P.push(T)}}function n(k,T){if(!t)return null;for(;T!==null;)e(k,T),T=T.sibling;return null}function r(k,T){for(k=new Map;T!==null;)T.key!==null?k.set(T.key,T):k.set(T.index,T),T=T.sibling;return k}function i(k,T){return k=Jr(k,T),k.index=0,k.sibling=null,k}function s(k,T,P){return k.index=P,t?(P=k.alternate,P!==null?(P=P.index,P<T?(k.flags|=2,T):P):(k.flags|=2,T)):(k.flags|=1048576,T)}function a(k){return t&&k.alternate===null&&(k.flags|=2),k}function c(k,T,P,L){return T===null||T.tag!==6?(T=Uh(P,k.mode,L),T.return=k,T):(T=i(T,P),T.return=k,T)}function h(k,T,P,L){var $=P.type;return $===Vs?y(k,T,P.props.children,L,P.key):T!==null&&(T.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Or&&Bm($)===T.type)?(L=i(T,P.props),L.ref=aa(k,T,P),L.return=k,L):(L=Ou(P.type,P.key,P.props,null,k.mode,L),L.ref=aa(k,T,P),L.return=k,L)}function m(k,T,P,L){return T===null||T.tag!==4||T.stateNode.containerInfo!==P.containerInfo||T.stateNode.implementation!==P.implementation?(T=zh(P,k.mode,L),T.return=k,T):(T=i(T,P.children||[]),T.return=k,T)}function y(k,T,P,L,$){return T===null||T.tag!==7?(T=zi(P,k.mode,L,$),T.return=k,T):(T=i(T,P),T.return=k,T)}function _(k,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Uh(""+T,k.mode,P),T.return=k,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case nu:return P=Ou(T.type,T.key,T.props,null,k.mode,P),P.ref=aa(k,null,T),P.return=k,P;case Os:return T=zh(T,k.mode,P),T.return=k,T;case Or:var L=T._init;return _(k,L(T._payload),P)}if(ma(T)||na(T))return T=zi(T,k.mode,P,null),T.return=k,T;fu(k,T)}return null}function E(k,T,P,L){var $=T!==null?T.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return $!==null?null:c(k,T,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case nu:return P.key===$?h(k,T,P,L):null;case Os:return P.key===$?m(k,T,P,L):null;case Or:return $=P._init,E(k,T,$(P._payload),L)}if(ma(P)||na(P))return $!==null?null:y(k,T,P,L,null);fu(k,P)}return null}function b(k,T,P,L,$){if(typeof L=="string"&&L!==""||typeof L=="number")return k=k.get(P)||null,c(T,k,""+L,$);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case nu:return k=k.get(L.key===null?P:L.key)||null,h(T,k,L,$);case Os:return k=k.get(L.key===null?P:L.key)||null,m(T,k,L,$);case Or:var W=L._init;return b(k,T,P,W(L._payload),$)}if(ma(L)||na(L))return k=k.get(P)||null,y(T,k,L,$,null);fu(T,L)}return null}function V(k,T,P,L){for(var $=null,W=null,A=T,w=T=0,S=null;A!==null&&w<P.length;w++){A.index>w?(S=A,A=null):S=A.sibling;var x=E(k,A,P[w],L);if(x===null){A===null&&(A=S);break}t&&A&&x.alternate===null&&e(k,A),T=s(x,T,w),W===null?$=x:W.sibling=x,W=x,A=S}if(w===P.length)return n(k,A),Oe&&Ni(k,w),$;if(A===null){for(;w<P.length;w++)A=_(k,P[w],L),A!==null&&(T=s(A,T,w),W===null?$=A:W.sibling=A,W=A);return Oe&&Ni(k,w),$}for(A=r(k,A);w<P.length;w++)S=b(A,k,w,P[w],L),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?w:S.key),T=s(S,T,w),W===null?$=S:W.sibling=S,W=S);return t&&A.forEach(function(N){return e(k,N)}),Oe&&Ni(k,w),$}function O(k,T,P,L){var $=na(P);if(typeof $!="function")throw Error(B(150));if(P=$.call(P),P==null)throw Error(B(151));for(var W=$=null,A=T,w=T=0,S=null,x=P.next();A!==null&&!x.done;w++,x=P.next()){A.index>w?(S=A,A=null):S=A.sibling;var N=E(k,A,x.value,L);if(N===null){A===null&&(A=S);break}t&&A&&N.alternate===null&&e(k,A),T=s(N,T,w),W===null?$=N:W.sibling=N,W=N,A=S}if(x.done)return n(k,A),Oe&&Ni(k,w),$;if(A===null){for(;!x.done;w++,x=P.next())x=_(k,x.value,L),x!==null&&(T=s(x,T,w),W===null?$=x:W.sibling=x,W=x);return Oe&&Ni(k,w),$}for(A=r(k,A);!x.done;w++,x=P.next())x=b(A,k,w,x.value,L),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?w:x.key),T=s(x,T,w),W===null?$=x:W.sibling=x,W=x);return t&&A.forEach(function(C){return e(k,C)}),Oe&&Ni(k,w),$}function M(k,T,P,L){if(typeof P=="object"&&P!==null&&P.type===Vs&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case nu:e:{for(var $=P.key,W=T;W!==null;){if(W.key===$){if($=P.type,$===Vs){if(W.tag===7){n(k,W.sibling),T=i(W,P.props.children),T.return=k,k=T;break e}}else if(W.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Or&&Bm($)===W.type){n(k,W.sibling),T=i(W,P.props),T.ref=aa(k,W,P),T.return=k,k=T;break e}n(k,W);break}else e(k,W);W=W.sibling}P.type===Vs?(T=zi(P.props.children,k.mode,L,P.key),T.return=k,k=T):(L=Ou(P.type,P.key,P.props,null,k.mode,L),L.ref=aa(k,T,P),L.return=k,k=L)}return a(k);case Os:e:{for(W=P.key;T!==null;){if(T.key===W)if(T.tag===4&&T.stateNode.containerInfo===P.containerInfo&&T.stateNode.implementation===P.implementation){n(k,T.sibling),T=i(T,P.children||[]),T.return=k,k=T;break e}else{n(k,T);break}else e(k,T);T=T.sibling}T=zh(P,k.mode,L),T.return=k,k=T}return a(k);case Or:return W=P._init,M(k,T,W(P._payload),L)}if(ma(P))return V(k,T,P,L);if(na(P))return O(k,T,P,L);fu(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,T!==null&&T.tag===6?(n(k,T.sibling),T=i(T,P),T.return=k,k=T):(n(k,T),T=Uh(P,k.mode,L),T.return=k,k=T),a(k)):n(k,T)}return M}var uo=zv(!0),Bv=zv(!1),rc=li(null),ic=null,$s=null,$f=null;function Hf(){$f=$s=ic=null}function Wf(t){var e=rc.current;De(rc),t._currentValue=e}function bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ys(t,e){ic=t,$f=$s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mt=!0),t.firstContext=null)}function sn(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},$s===null){if(ic===null)throw Error(B(308));$s=t,ic.dependencies={lanes:0,firstContext:t}}else $s=$s.next=t;return e}var Li=null;function Gf(t){Li===null?Li=[t]:Li.push(t)}function $v(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gf(e)):(n.next=i.next,i.next=n),e.interleaved=n,sr(t,r)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sr(t,n)}return i=r.interleaved,i===null?(e.next=e,Gf(r)):(e.next=i.next,i.next=e),r.interleaved=e,sr(t,n)}function Ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}function $m(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sc(t,e,n,r){var i=t.updateQueue;Vr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var h=c,m=h.next;h.next=null,a===null?s=m:a.next=m,a=h;var y=t.alternate;y!==null&&(y=y.updateQueue,c=y.lastBaseUpdate,c!==a&&(c===null?y.firstBaseUpdate=m:c.next=m,y.lastBaseUpdate=h))}if(s!==null){var _=i.baseState;a=0,y=m=h=null,c=s;do{var E=c.lane,b=c.eventTime;if((r&E)===E){y!==null&&(y=y.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var V=t,O=c;switch(E=e,b=n,O.tag){case 1:if(V=O.payload,typeof V=="function"){_=V.call(b,_,E);break e}_=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=O.payload,E=typeof V=="function"?V.call(b,_,E):V,E==null)break e;_=je({},_,E);break e;case 2:Vr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,E=i.effects,E===null?i.effects=[c]:E.push(c))}else b={eventTime:b,lane:E,tag:c.tag,payload:c.payload,callback:c.callback,next:null},y===null?(m=y=b,h=_):y=y.next=b,a|=E;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;E=c,c=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(!0);if(y===null&&(h=_),i.baseState=h,i.firstBaseUpdate=m,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qi|=a,t.lanes=a,t.memoizedState=_}}function Hm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var dl={},Dn=li(dl),qa=li(dl),Ka=li(dl);function Mi(t){if(t===dl)throw Error(B(174));return t}function Kf(t,e){switch(Pe(Ka,e),Pe(qa,t),Pe(Dn,dl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hd(e,t)}De(Dn),Pe(Dn,e)}function co(){De(Dn),De(qa),De(Ka)}function Wv(t){Mi(Ka.current);var e=Mi(Dn.current),n=hd(e,t.type);e!==n&&(Pe(qa,t),Pe(Dn,n))}function Qf(t){qa.current===t&&(De(Dn),De(qa))}var Le=li(0);function oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oh=[];function Xf(){for(var t=0;t<Oh.length;t++)Oh[t]._workInProgressVersionPrimary=null;Oh.length=0}var Cu=fr.ReactCurrentDispatcher,Vh=fr.ReactCurrentBatchConfig,Gi=0,Me=null,Qe=null,tt=null,ac=!1,ka=!1,Qa=0,a1=0;function _t(){throw Error(B(321))}function Yf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Jf(t,e,n,r,i,s){if(Gi=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cu.current=t===null||t.memoizedState===null?h1:d1,t=n(r,i),ka){s=0;do{if(ka=!1,Qa=0,25<=s)throw Error(B(301));s+=1,tt=Qe=null,e.updateQueue=null,Cu.current=f1,t=n(r,i)}while(ka)}if(Cu.current=lc,e=Qe!==null&&Qe.next!==null,Gi=0,tt=Qe=Me=null,ac=!1,e)throw Error(B(300));return t}function Zf(){var t=Qa!==0;return Qa=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Me.memoizedState=tt=t:tt=tt.next=t,tt}function on(){if(Qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var e=tt===null?Me.memoizedState:tt.next;if(e!==null)tt=e,Qe=t;else{if(t===null)throw Error(B(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Me.memoizedState=tt=t:tt=tt.next=t}return tt}function Xa(t,e){return typeof e=="function"?e(t):e}function Lh(t){var e=on(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Qe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,h=null,m=s;do{var y=m.lane;if((Gi&y)===y)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var _={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(c=h=_,a=r):h=h.next=_,Me.lanes|=y,qi|=y}m=m.next}while(m!==null&&m!==s);h===null?a=r:h.next=c,vn(r,e.memoizedState)||(Mt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,qi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mh(t){var e=on(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);vn(s,e.memoizedState)||(Mt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Gv(){}function qv(t,e){var n=Me,r=on(),i=e(),s=!vn(r.memoizedState,i);if(s&&(r.memoizedState=i,Mt=!0),r=r.queue,ep(Xv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,Ya(9,Qv.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(B(349));Gi&30||Kv(n,e,i)}return i}function Kv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qv(t,e,n,r){e.value=n,e.getSnapshot=r,Yv(e)&&Jv(t)}function Xv(t,e,n){return n(function(){Yv(e)&&Jv(t)})}function Yv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function Jv(t){var e=sr(t,1);e!==null&&yn(e,t,1,-1)}function Wm(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=c1.bind(null,Me,t),[e.memoizedState,t]}function Ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Zv(){return on().memoizedState}function Pu(t,e,n,r){var i=Cn();Me.flags|=t,i.memoizedState=Ya(1|e,n,void 0,r===void 0?null:r)}function Uc(t,e,n,r){var i=on();r=r===void 0?null:r;var s=void 0;if(Qe!==null){var a=Qe.memoizedState;if(s=a.destroy,r!==null&&Yf(r,a.deps)){i.memoizedState=Ya(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Ya(1|e,n,s,r)}function Gm(t,e){return Pu(8390656,8,t,e)}function ep(t,e){return Uc(2048,8,t,e)}function e_(t,e){return Uc(4,2,t,e)}function t_(t,e){return Uc(4,4,t,e)}function n_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function r_(t,e,n){return n=n!=null?n.concat([t]):null,Uc(4,4,n_.bind(null,e,t),n)}function tp(){}function i_(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function s_(t,e){var n=on();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Yf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function o_(t,e,n){return Gi&21?(vn(n,e)||(n=hv(),Me.lanes|=n,qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mt=!0),t.memoizedState=n)}function l1(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Vh.transition;Vh.transition={};try{t(!1),e()}finally{xe=n,Vh.transition=r}}function a_(){return on().memoizedState}function u1(t,e,n){var r=Yr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},l_(t))u_(e,n);else if(n=$v(t,e,n,r),n!==null){var i=Ct();yn(n,t,r,i),c_(n,e,r)}}function c1(t,e,n){var r=Yr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(l_(t))u_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,vn(c,a)){var h=e.interleaved;h===null?(i.next=i,Gf(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=$v(t,e,i,r),n!==null&&(i=Ct(),yn(n,t,r,i),c_(n,e,r))}}function l_(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function u_(t,e){ka=ac=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function c_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Nf(t,n)}}var lc={readContext:sn,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useInsertionEffect:_t,useLayoutEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useMutableSource:_t,useSyncExternalStore:_t,useId:_t,unstable_isNewReconciler:!1},h1={readContext:sn,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:sn,useEffect:Gm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pu(4194308,4,n_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u1.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:Wm,useDebugValue:tp,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=Wm(!1),e=t[0];return t=l1.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=Cn();if(Oe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),nt===null)throw Error(B(349));Gi&30||Kv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Gm(Xv.bind(null,r,s,t),[t]),r.flags|=2048,Ya(9,Qv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Cn(),e=nt.identifierPrefix;if(Oe){var n=Xn,r=Qn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Qa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},d1={readContext:sn,useCallback:i_,useContext:sn,useEffect:ep,useImperativeHandle:r_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:Lh,useRef:Zv,useState:function(){return Lh(Xa)},useDebugValue:tp,useDeferredValue:function(t){var e=on();return o_(e,Qe.memoizedState,t)},useTransition:function(){var t=Lh(Xa)[0],e=on().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:qv,useId:a_,unstable_isNewReconciler:!1},f1={readContext:sn,useCallback:i_,useContext:sn,useEffect:ep,useImperativeHandle:r_,useInsertionEffect:e_,useLayoutEffect:t_,useMemo:s_,useReducer:Mh,useRef:Zv,useState:function(){return Mh(Xa)},useDebugValue:tp,useDeferredValue:function(t){var e=on();return Qe===null?e.memoizedState=t:o_(e,Qe.memoizedState,t)},useTransition:function(){var t=Mh(Xa)[0],e=on().memoizedState;return[t,e]},useMutableSource:Gv,useSyncExternalStore:qv,useId:a_,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zc={isMounted:function(t){return(t=t._reactInternals)?ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Yr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Qr(t,s,i),e!==null&&(yn(e,t,i,r),Ru(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=Yr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Qr(t,s,i),e!==null&&(yn(e,t,i,r),Ru(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Yr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Qr(t,i,r),e!==null&&(yn(e,t,r,n),Ru(e,t,r))}};function qm(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!$a(n,r)||!$a(i,s):!0}function h_(t,e,n){var r=!1,i=ri,s=e.contextType;return typeof s=="object"&&s!==null?s=sn(s):(i=Ft(e)?Hi:At.current,r=e.contextTypes,s=(r=r!=null)?ao(t,i):ri),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Km(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zc.enqueueReplaceState(e,e.state,null)}function Dd(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},qf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=sn(s):(s=Ft(e)?Hi:At.current,i.context=ao(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Nd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zc.enqueueReplaceState(i,i.state,null),sc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ho(t,e){try{var n="",r=e;do n+=zE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function jh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Od(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p1=typeof WeakMap=="function"?WeakMap:Map;function d_(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cc||(cc=!0,Hd=r),Od(t,e)},n}function f_(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Od(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Od(t,e),typeof r!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Qm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p1;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=R1.bind(null,t,e,n),e.then(t,t))}function Xm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ym(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Qr(n,e,1))),n.lanes|=1),t)}var m1=fr.ReactCurrentOwner,Mt=!1;function Rt(t,e,n,r){e.child=t===null?Bv(e,null,n,r):uo(e,t.child,n,r)}function Jm(t,e,n,r,i){n=n.render;var s=e.ref;return Ys(e,i),r=Jf(t,e,n,r,s,i),n=Zf(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Oe&&n&&Uf(e),e.flags|=1,Rt(t,e,r,i),e.child)}function Zm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!up(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,p_(t,e,s,r,i)):(t=Ou(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:$a,n(a,r)&&t.ref===e.ref)return or(t,e,i)}return e.flags|=1,t=Jr(s,r),t.ref=e.ref,t.return=e,e.child=t}function p_(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if($a(s,r)&&t.ref===e.ref)if(Mt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Mt=!0);else return e.lanes=t.lanes,or(t,e,i)}return Vd(t,e,n,r,i)}function m_(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ws,$t),$t|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ws,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(Ws,$t),$t|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(Ws,$t),$t|=r;return Rt(t,e,i,n),e.child}function g_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vd(t,e,n,r,i){var s=Ft(n)?Hi:At.current;return s=ao(e,s),Ys(e,i),n=Jf(t,e,n,r,s,i),r=Zf(),t!==null&&!Mt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Oe&&r&&Uf(e),e.flags|=1,Rt(t,e,n,i),e.child)}function eg(t,e,n,r,i){if(Ft(n)){var s=!0;ec(e)}else s=!1;if(Ys(e,i),e.stateNode===null)bu(t,e),h_(e,n,r),Dd(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var h=a.context,m=n.contextType;typeof m=="object"&&m!==null?m=sn(m):(m=Ft(n)?Hi:At.current,m=ao(e,m));var y=n.getDerivedStateFromProps,_=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||h!==m)&&Km(e,a,r,m),Vr=!1;var E=e.memoizedState;a.state=E,sc(e,r,a,i),h=e.memoizedState,c!==r||E!==h||jt.current||Vr?(typeof y=="function"&&(Nd(e,n,y,r),h=e.memoizedState),(c=Vr||qm(e,n,c,r,E,h,m))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=m,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Hv(t,e),c=e.memoizedProps,m=e.type===e.elementType?c:dn(e.type,c),a.props=m,_=e.pendingProps,E=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=sn(h):(h=Ft(n)?Hi:At.current,h=ao(e,h));var b=n.getDerivedStateFromProps;(y=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==_||E!==h)&&Km(e,a,r,h),Vr=!1,E=e.memoizedState,a.state=E,sc(e,r,a,i);var V=e.memoizedState;c!==_||E!==V||jt.current||Vr?(typeof b=="function"&&(Nd(e,n,b,r),V=e.memoizedState),(m=Vr||qm(e,n,m,r,E,V,h)||!1)?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,V,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,V,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=V),a.props=r,a.state=V,a.context=h,r=m):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return Ld(t,e,n,r,s,i)}function Ld(t,e,n,r,i,s){g_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Fm(e,n,!1),or(t,e,s);r=e.stateNode,m1.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=uo(e,t.child,null,s),e.child=uo(e,null,c,s)):Rt(t,e,c,s),e.memoizedState=r.state,i&&Fm(e,n,!0),e.child}function y_(t){var e=t.stateNode;e.pendingContext?jm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jm(t,e.context,!1),Kf(t,e.containerInfo)}function tg(t,e,n,r,i){return lo(),Bf(i),e.flags|=256,Rt(t,e,n,r),e.child}var Md={dehydrated:null,treeContext:null,retryLane:0};function jd(t){return{baseLanes:t,cachePool:null,transitions:null}}function v_(t,e,n){var r=e.pendingProps,i=Le.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(Le,i&1),t===null)return Pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Hc(a,r,0,null),t=zi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jd(n),e.memoizedState=Md,t):np(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return g1(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=Jr(i,h),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=Jr(c,s):(s=zi(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?jd(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Md,r}return s=t.child,t=s.sibling,r=Jr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function np(t,e){return e=Hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pu(t,e,n,r){return r!==null&&Bf(r),uo(e,t.child,null,n),t=np(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g1(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=jh(Error(B(422))),pu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Hc({mode:"visible",children:r.children},i,0,null),s=zi(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&uo(e,t.child,null,a),e.child.memoizedState=jd(a),e.memoizedState=Md,s);if(!(e.mode&1))return pu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(B(419)),r=jh(s,r,void 0),pu(t,e,a,r)}if(c=(a&t.childLanes)!==0,Mt||c){if(r=nt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sr(t,i),yn(r,t,i,-1))}return lp(),r=jh(Error(B(421))),pu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=C1.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ht=Kr(i.nextSibling),Wt=e,Oe=!0,pn=null,t!==null&&(Jt[Zt++]=Qn,Jt[Zt++]=Xn,Jt[Zt++]=Wi,Qn=t.id,Xn=t.overflow,Wi=e),e=np(e,r.children),e.flags|=4096,e)}function ng(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bd(t.return,e,n)}function Fh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function __(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ng(t,n,e);else if(t.tag===19)ng(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Le,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&oc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&oc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fh(e,!0,n,null,s);break;case"together":Fh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y1(t,e,n){switch(e.tag){case 3:y_(e),lo();break;case 5:Wv(e);break;case 1:Ft(e.type)&&ec(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(rc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?v_(t,e,n):(Pe(Le,Le.current&1),t=or(t,e,n),t!==null?t.sibling:null);Pe(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return __(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,m_(t,e,n)}return or(t,e,n)}var w_,Fd,E_,T_;w_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fd=function(){};E_=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Dn.current);var s=null;switch(n){case"input":i=ad(t,i),r=ad(t,r),s=[];break;case"select":i=je({},i,{value:void 0}),r=je({},r,{value:void 0}),s=[];break;case"textarea":i=cd(t,i),r=cd(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ju)}dd(n,r);var a;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var c=i[m];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(La.hasOwnProperty(m)?s||(s=[]):(s=s||[]).push(m,null));for(m in r){var h=r[m];if(c=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&h!==c&&(h!=null||c!=null))if(m==="style")if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(s||(s=[]),s.push(m,n)),n=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(s=s||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(s=s||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(La.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Ne("scroll",t),s||c===h||(s=[])):(s=s||[]).push(m,h))}n&&(s=s||[]).push("style",n);var m=s;(e.updateQueue=m)&&(e.flags|=4)}};T_=function(t,e,n,r){n!==r&&(e.flags|=4)};function la(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function v1(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(e),null;case 1:return Ft(e.type)&&Zu(),wt(e),null;case 3:return r=e.stateNode,co(),De(jt),De(At),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(du(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(qd(pn),pn=null))),Fd(t,e),wt(e),null;case 5:Qf(e);var i=Mi(Ka.current);if(n=e.type,t!==null&&e.stateNode!=null)E_(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return wt(e),null}if(t=Mi(Dn.current),du(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pn]=e,r[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<ya.length;i++)Ne(ya[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":hm(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":fm(r,s),Ne("invalid",r)}dd(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&hu(r.textContent,c,t),i=["children",""+c]):La.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ne("scroll",r)}switch(n){case"input":ru(r),dm(r,s,!0);break;case"textarea":ru(r),pm(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ju)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Pn]=e,t[Ga]=r,w_(t,e,!1,!1),e.stateNode=t;e:{switch(a=fd(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<ya.length;i++)Ne(ya[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":hm(t,r),i=ad(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=je({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":fm(t,r),i=cd(t,r),Ne("invalid",t);break;default:i=r}dd(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];s==="style"?Zy(t,h):s==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Yy(t,h)):s==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Ma(t,h):typeof h=="number"&&Ma(t,""+h):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(La.hasOwnProperty(s)?h!=null&&s==="onScroll"&&Ne("scroll",t):h!=null&&xf(t,s,h,a))}switch(n){case"input":ru(t),dm(t,r,!1);break;case"textarea":ru(t),pm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ni(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?qs(t,!!r.multiple,s,!1):r.defaultValue!=null&&qs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wt(e),null;case 6:if(t&&e.stateNode!=null)T_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Mi(Ka.current),Mi(Dn.current),du(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(s=r.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:hu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return wt(e),null;case 13:if(De(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Ht!==null&&e.mode&1&&!(e.flags&128))Uv(),lo(),e.flags|=98560,s=!1;else if(s=du(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Pn]=e}else lo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wt(e),s=!1}else pn!==null&&(qd(pn),pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?Ye===0&&(Ye=3):lp())),e.updateQueue!==null&&(e.flags|=4),wt(e),null);case 4:return co(),Fd(t,e),t===null&&Ha(e.stateNode.containerInfo),wt(e),null;case 10:return Wf(e.type._context),wt(e),null;case 17:return Ft(e.type)&&Zu(),wt(e),null;case 19:if(De(Le),s=e.memoizedState,s===null)return wt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)la(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=oc(t),a!==null){for(e.flags|=128,la(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Le,Le.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>fo&&(e.flags|=128,r=!0,la(s,!1),e.lanes=4194304)}else{if(!r)if(t=oc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),la(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Oe)return wt(e),null}else 2*He()-s.renderingStartTime>fo&&n!==1073741824&&(e.flags|=128,r=!0,la(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Le.current,Pe(Le,r?n&1|2:n&1),e):(wt(e),null);case 22:case 23:return ap(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(wt(e),e.subtreeFlags&6&&(e.flags|=8192)):wt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function _1(t,e){switch(zf(e),e.tag){case 1:return Ft(e.type)&&Zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return co(),De(jt),De(At),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qf(e),null;case 13:if(De(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));lo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Le),null;case 4:return co(),null;case 10:return Wf(e.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var mu=!1,It=!1,w1=typeof WeakSet=="function"?WeakSet:Set,X=null;function Hs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(t,e,r)}else n.current=null}function Ud(t,e,n){try{n()}catch(r){Ue(t,e,r)}}var rg=!1;function E1(t,e){if(Id=Qu,t=kv(),Ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,h=-1,m=0,y=0,_=t,E=null;t:for(;;){for(var b;_!==n||i!==0&&_.nodeType!==3||(c=a+i),_!==s||r!==0&&_.nodeType!==3||(h=a+r),_.nodeType===3&&(a+=_.nodeValue.length),(b=_.firstChild)!==null;)E=_,_=b;for(;;){if(_===t)break t;if(E===n&&++m===i&&(c=a),E===s&&++y===r&&(h=a),(b=_.nextSibling)!==null)break;_=E,E=_.parentNode}_=b}n=c===-1||h===-1?null:{start:c,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sd={focusedElem:t,selectionRange:n},Qu=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var O=V.memoizedProps,M=V.memoizedState,k=e.stateNode,T=k.getSnapshotBeforeUpdate(e.elementType===e.type?O:dn(e.type,O),M);k.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(L){Ue(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return V=rg,rg=!1,V}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Ud(e,n,s)}i=i.next}while(i!==r)}}function Bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function I_(t){var e=t.alternate;e!==null&&(t.alternate=null,I_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[Ga],delete e[kd],delete e[r1],delete e[i1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function S_(t){return t.tag===5||t.tag===3||t.tag===4}function ig(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||S_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ju));else if(r!==4&&(t=t.child,t!==null))for(Bd(t,e,n),t=t.sibling;t!==null;)Bd(t,e,n),t=t.sibling}function $d(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}var ot=null,fn=!1;function Pr(t,e,n){for(n=n.child;n!==null;)A_(t,e,n),n=n.sibling}function A_(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(Oc,n)}catch{}switch(n.tag){case 5:It||Hs(n,e);case 6:var r=ot,i=fn;ot=null,Pr(t,e,n),ot=r,fn=i,ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(fn?(t=ot,n=n.stateNode,t.nodeType===8?Nh(t.parentNode,n):t.nodeType===1&&Nh(t,n),za(t)):Nh(ot,n.stateNode));break;case 4:r=ot,i=fn,ot=n.stateNode.containerInfo,fn=!0,Pr(t,e,n),ot=r,fn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Ud(n,e,a),i=i.next}while(i!==r)}Pr(t,e,n);break;case 1:if(!It&&(Hs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ue(n,e,c)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Pr(t,e,n),It=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function sg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w1),e.forEach(function(r){var i=P1.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:ot=c.stateNode,fn=!1;break e;case 3:ot=c.stateNode.containerInfo,fn=!0;break e;case 4:ot=c.stateNode.containerInfo,fn=!0;break e}c=c.return}if(ot===null)throw Error(B(160));A_(s,a,i),ot=null,fn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(m){Ue(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)x_(e,t),e=e.sibling}function x_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),Rn(t),r&4){try{Ra(3,t,t.return),Bc(3,t)}catch(O){Ue(t,t.return,O)}try{Ra(5,t,t.return)}catch(O){Ue(t,t.return,O)}}break;case 1:hn(e,t),Rn(t),r&512&&n!==null&&Hs(n,n.return);break;case 5:if(hn(e,t),Rn(t),r&512&&n!==null&&Hs(n,n.return),t.flags&32){var i=t.stateNode;try{Ma(i,"")}catch(O){Ue(t,t.return,O)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&Ky(i,s),fd(c,a);var m=fd(c,s);for(a=0;a<h.length;a+=2){var y=h[a],_=h[a+1];y==="style"?Zy(i,_):y==="dangerouslySetInnerHTML"?Yy(i,_):y==="children"?Ma(i,_):xf(i,y,_,m)}switch(c){case"input":ld(i,s);break;case"textarea":Qy(i,s);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var b=s.value;b!=null?qs(i,!!s.multiple,b,!1):E!==!!s.multiple&&(s.defaultValue!=null?qs(i,!!s.multiple,s.defaultValue,!0):qs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(O){Ue(t,t.return,O)}}break;case 6:if(hn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(O){Ue(t,t.return,O)}}break;case 3:if(hn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(O){Ue(t,t.return,O)}break;case 4:hn(e,t),Rn(t);break;case 13:hn(e,t),Rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sp=He())),r&4&&sg(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(It=(m=It)||y,hn(e,t),It=m):hn(e,t),Rn(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(X=t,y=t.child;y!==null;){for(_=X=y;X!==null;){switch(E=X,b=E.child,E.tag){case 0:case 11:case 14:case 15:Ra(4,E,E.return);break;case 1:Hs(E,E.return);var V=E.stateNode;if(typeof V.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(O){Ue(r,n,O)}}break;case 5:Hs(E,E.return);break;case 22:if(E.memoizedState!==null){ag(_);continue}}b!==null?(b.return=E,X=b):ag(_)}y=y.sibling}e:for(y=null,_=t;;){if(_.tag===5){if(y===null){y=_;try{i=_.stateNode,m?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=_.stateNode,h=_.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=Jy("display",a))}catch(O){Ue(t,t.return,O)}}}else if(_.tag===6){if(y===null)try{_.stateNode.nodeValue=m?"":_.memoizedProps}catch(O){Ue(t,t.return,O)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;y===_&&(y=null),_=_.return}y===_&&(y=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:hn(e,t),Rn(t),r&4&&sg(t);break;case 21:break;default:hn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(S_(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ma(i,""),r.flags&=-33);var s=ig(t);$d(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=ig(t);Bd(t,c,a);break;default:throw Error(B(161))}}catch(h){Ue(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function T1(t,e,n){X=t,k_(t)}function k_(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||mu;if(!a){var c=i.alternate,h=c!==null&&c.memoizedState!==null||It;c=mu;var m=It;if(mu=a,(It=h)&&!m)for(X=i;X!==null;)a=X,h=a.child,a.tag===22&&a.memoizedState!==null?lg(i):h!==null?(h.return=a,X=h):lg(i);for(;s!==null;)X=s,k_(s),s=s.sibling;X=i,mu=c,It=m}og(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):og(t)}}function og(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||Bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Hm(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hm(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var _=y.dehydrated;_!==null&&za(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}It||e.flags&512&&zd(e)}catch(E){Ue(e,e.return,E)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function ag(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function lg(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bc(4,e)}catch(h){Ue(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){Ue(e,i,h)}}var s=e.return;try{zd(e)}catch(h){Ue(e,s,h)}break;case 5:var a=e.return;try{zd(e)}catch(h){Ue(e,a,h)}}}catch(h){Ue(e,e.return,h)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var I1=Math.ceil,uc=fr.ReactCurrentDispatcher,rp=fr.ReactCurrentOwner,nn=fr.ReactCurrentBatchConfig,ve=0,nt=null,Ge=null,ut=0,$t=0,Ws=li(0),Ye=0,Ja=null,qi=0,$c=0,ip=0,Ca=null,Lt=null,sp=0,fo=1/0,qn=null,cc=!1,Hd=null,Xr=null,gu=!1,$r=null,hc=0,Pa=0,Wd=null,Nu=-1,Du=0;function Ct(){return ve&6?He():Nu!==-1?Nu:Nu=He()}function Yr(t){return t.mode&1?ve&2&&ut!==0?ut&-ut:o1.transition!==null?(Du===0&&(Du=hv()),Du):(t=xe,t!==0||(t=window.event,t=t===void 0?16:vv(t.type)),t):1}function yn(t,e,n,r){if(50<Pa)throw Pa=0,Wd=null,Error(B(185));ul(t,n,r),(!(ve&2)||t!==nt)&&(t===nt&&(!(ve&2)&&($c|=n),Ye===4&&Mr(t,ut)),Ut(t,r),n===1&&ve===0&&!(e.mode&1)&&(fo=He()+500,Fc&&ui()))}function Ut(t,e){var n=t.callbackNode;oT(t,e);var r=Ku(t,t===nt?ut:0);if(r===0)n!==null&&ym(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ym(n),e===1)t.tag===0?s1(ug.bind(null,t)):Mv(ug.bind(null,t)),t1(function(){!(ve&6)&&ui()}),n=null;else{switch(dv(r)){case 1:n=bf;break;case 4:n=uv;break;case 16:n=qu;break;case 536870912:n=cv;break;default:n=qu}n=V_(n,R_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R_(t,e){if(Nu=-1,Du=0,ve&6)throw Error(B(327));var n=t.callbackNode;if(Js()&&t.callbackNode!==n)return null;var r=Ku(t,t===nt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dc(t,r);else{e=r;var i=ve;ve|=2;var s=P_();(nt!==t||ut!==e)&&(qn=null,fo=He()+500,Ui(t,e));do try{x1();break}catch(c){C_(t,c)}while(!0);Hf(),uc.current=s,ve=i,Ge!==null?e=0:(nt=null,ut=0,e=Ye)}if(e!==0){if(e===2&&(i=vd(t),i!==0&&(r=i,e=Gd(t,i))),e===1)throw n=Ja,Ui(t,0),Mr(t,r),Ut(t,He()),n;if(e===6)Mr(t,r);else{if(i=t.current.alternate,!(r&30)&&!S1(i)&&(e=dc(t,r),e===2&&(s=vd(t),s!==0&&(r=s,e=Gd(t,s))),e===1))throw n=Ja,Ui(t,0),Mr(t,r),Ut(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Di(t,Lt,qn);break;case 3:if(Mr(t,r),(r&130023424)===r&&(e=sp+500-He(),10<e)){if(Ku(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=xd(Di.bind(null,t,Lt,qn),e);break}Di(t,Lt,qn);break;case 4:if(Mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-gn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*I1(r/1960))-r,10<r){t.timeoutHandle=xd(Di.bind(null,t,Lt,qn),r);break}Di(t,Lt,qn);break;case 5:Di(t,Lt,qn);break;default:throw Error(B(329))}}}return Ut(t,He()),t.callbackNode===n?R_.bind(null,t):null}function Gd(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=dc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&qd(e)),t}function qd(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function S1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mr(t,e){for(e&=~ip,e&=~$c,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function ug(t){if(ve&6)throw Error(B(327));Js();var e=Ku(t,0);if(!(e&1))return Ut(t,He()),null;var n=dc(t,e);if(t.tag!==0&&n===2){var r=vd(t);r!==0&&(e=r,n=Gd(t,r))}if(n===1)throw n=Ja,Ui(t,0),Mr(t,e),Ut(t,He()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Di(t,Lt,qn),Ut(t,He()),null}function op(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(fo=He()+500,Fc&&ui())}}function Ki(t){$r!==null&&$r.tag===0&&!(ve&6)&&Js();var e=ve;ve|=1;var n=nn.transition,r=xe;try{if(nn.transition=null,xe=1,t)return t()}finally{xe=r,nn.transition=n,ve=e,!(ve&6)&&ui()}}function ap(){$t=Ws.current,De(Ws)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e1(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zu();break;case 3:co(),De(jt),De(At),Xf();break;case 5:Qf(r);break;case 4:co();break;case 13:De(Le);break;case 19:De(Le);break;case 10:Wf(r.type._context);break;case 22:case 23:ap()}n=n.return}if(nt=t,Ge=t=Jr(t.current,null),ut=$t=e,Ye=0,Ja=null,ip=$c=qi=0,Lt=Ca=null,Li!==null){for(e=0;e<Li.length;e++)if(n=Li[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Li=null}return t}function C_(t,e){do{var n=Ge;try{if(Hf(),Cu.current=lc,ac){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ac=!1}if(Gi=0,tt=Qe=Me=null,ka=!1,Qa=0,rp.current=null,n===null||n.return===null){Ye=1,Ja=e,Ge=null;break}e:{var s=t,a=n.return,c=n,h=e;if(e=ut,c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,y=c,_=y.tag;if(!(y.mode&1)&&(_===0||_===11||_===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var b=Xm(a);if(b!==null){b.flags&=-257,Ym(b,a,c,s,e),b.mode&1&&Qm(s,m,e),e=b,h=m;var V=e.updateQueue;if(V===null){var O=new Set;O.add(h),e.updateQueue=O}else V.add(h);break e}else{if(!(e&1)){Qm(s,m,e),lp();break e}h=Error(B(426))}}else if(Oe&&c.mode&1){var M=Xm(a);if(M!==null){!(M.flags&65536)&&(M.flags|=256),Ym(M,a,c,s,e),Bf(ho(h,c));break e}}s=h=ho(h,c),Ye!==4&&(Ye=2),Ca===null?Ca=[s]:Ca.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var k=d_(s,h,e);$m(s,k);break e;case 1:c=h;var T=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Xr===null||!Xr.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var L=f_(s,c,e);$m(s,L);break e}}s=s.return}while(s!==null)}N_(n)}catch($){e=$,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function P_(){var t=uc.current;return uc.current=lc,t===null?lc:t}function lp(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(qi&268435455)&&!($c&268435455)||Mr(nt,ut)}function dc(t,e){var n=ve;ve|=2;var r=P_();(nt!==t||ut!==e)&&(qn=null,Ui(t,e));do try{A1();break}catch(i){C_(t,i)}while(!0);if(Hf(),ve=n,uc.current=r,Ge!==null)throw Error(B(261));return nt=null,ut=0,Ye}function A1(){for(;Ge!==null;)b_(Ge)}function x1(){for(;Ge!==null&&!YE();)b_(Ge)}function b_(t){var e=O_(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?N_(t):Ge=e,rp.current=null}function N_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_1(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,Ge=null;return}}else if(n=v1(n,e,$t),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Ye===0&&(Ye=5)}function Di(t,e,n){var r=xe,i=nn.transition;try{nn.transition=null,xe=1,k1(t,e,n,r)}finally{nn.transition=i,xe=r}return null}function k1(t,e,n,r){do Js();while($r!==null);if(ve&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aT(t,s),t===nt&&(Ge=nt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gu||(gu=!0,V_(qu,function(){return Js(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=nn.transition,nn.transition=null;var a=xe;xe=1;var c=ve;ve|=4,rp.current=null,E1(t,n),x_(n,t),qT(Sd),Qu=!!Id,Sd=Id=null,t.current=n,T1(n),JE(),ve=c,xe=a,nn.transition=s}else t.current=n;if(gu&&(gu=!1,$r=t,hc=i),s=t.pendingLanes,s===0&&(Xr=null),tT(n.stateNode),Ut(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cc)throw cc=!1,t=Hd,Hd=null,t;return hc&1&&t.tag!==0&&Js(),s=t.pendingLanes,s&1?t===Wd?Pa++:(Pa=0,Wd=t):Pa=0,ui(),null}function Js(){if($r!==null){var t=dv(hc),e=nn.transition,n=xe;try{if(nn.transition=null,xe=16>t?16:t,$r===null)var r=!1;else{if(t=$r,$r=null,hc=0,ve&6)throw Error(B(331));var i=ve;for(ve|=4,X=t.current;X!==null;){var s=X,a=s.child;if(X.flags&16){var c=s.deletions;if(c!==null){for(var h=0;h<c.length;h++){var m=c[h];for(X=m;X!==null;){var y=X;switch(y.tag){case 0:case 11:case 15:Ra(8,y,s)}var _=y.child;if(_!==null)_.return=y,X=_;else for(;X!==null;){y=X;var E=y.sibling,b=y.return;if(I_(y),y===m){X=null;break}if(E!==null){E.return=b,X=E;break}X=b}}}var V=s.alternate;if(V!==null){var O=V.child;if(O!==null){V.child=null;do{var M=O.sibling;O.sibling=null,O=M}while(O!==null)}}X=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,X=a;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var k=s.sibling;if(k!==null){k.return=s.return,X=k;break e}X=s.return}}var T=t.current;for(X=T;X!==null;){a=X;var P=a.child;if(a.subtreeFlags&2064&&P!==null)P.return=a,X=P;else e:for(a=T;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Bc(9,c)}}catch($){Ue(c,c.return,$)}if(c===a){X=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,X=L;break e}X=c.return}}if(ve=i,ui(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(Oc,t)}catch{}r=!0}return r}finally{xe=n,nn.transition=e}}return!1}function cg(t,e,n){e=ho(n,e),e=d_(t,e,1),t=Qr(t,e,1),e=Ct(),t!==null&&(ul(t,1,e),Ut(t,e))}function Ue(t,e,n){if(t.tag===3)cg(t,t,n);else for(;e!==null;){if(e.tag===3){cg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xr===null||!Xr.has(r))){t=ho(n,t),t=f_(e,t,1),e=Qr(e,t,1),t=Ct(),e!==null&&(ul(e,1,t),Ut(e,t));break}}e=e.return}}function R1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ut&n)===n&&(Ye===4||Ye===3&&(ut&130023424)===ut&&500>He()-sp?Ui(t,0):ip|=n),Ut(t,e)}function D_(t,e){e===0&&(t.mode&1?(e=ou,ou<<=1,!(ou&130023424)&&(ou=4194304)):e=1);var n=Ct();t=sr(t,e),t!==null&&(ul(t,e,n),Ut(t,n))}function C1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),D_(t,n)}function P1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),D_(t,n)}var O_;O_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Mt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mt=!1,y1(t,e,n);Mt=!!(t.flags&131072)}else Mt=!1,Oe&&e.flags&1048576&&jv(e,nc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bu(t,e),t=e.pendingProps;var i=ao(e,At.current);Ys(e,n),i=Jf(null,e,r,t,i,n);var s=Zf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(s=!0,ec(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,qf(e),i.updater=zc,e.stateNode=i,i._reactInternals=e,Dd(e,r,t,n),e=Ld(null,e,r,!0,s,n)):(e.tag=0,Oe&&s&&Uf(e),Rt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=N1(r),t=dn(r,t),i){case 0:e=Vd(null,e,r,t,n);break e;case 1:e=eg(null,e,r,t,n);break e;case 11:e=Jm(null,e,r,t,n);break e;case 14:e=Zm(null,e,r,dn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Vd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),eg(t,e,r,i,n);case 3:e:{if(y_(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Hv(t,e),sc(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ho(Error(B(423)),e),e=tg(t,e,r,n,i);break e}else if(r!==i){i=ho(Error(B(424)),e),e=tg(t,e,r,n,i);break e}else for(Ht=Kr(e.stateNode.containerInfo.firstChild),Wt=e,Oe=!0,pn=null,n=Bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lo(),r===i){e=or(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Wv(e),t===null&&Pd(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Ad(r,i)?a=null:s!==null&&Ad(r,s)&&(e.flags|=32),g_(t,e),Rt(t,e,a,n),e.child;case 6:return t===null&&Pd(e),null;case 13:return v_(t,e,n);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uo(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Jm(t,e,r,i,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Pe(rc,r._currentValue),r._currentValue=a,s!==null)if(vn(s.value,a)){if(s.children===i.children&&!jt.current){e=or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var h=c.firstContext;h!==null;){if(h.context===r){if(s.tag===1){h=er(-1,n&-n),h.tag=2;var m=s.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?h.next=h:(h.next=y.next,y.next=h),m.pending=h}}s.lanes|=n,h=s.alternate,h!==null&&(h.lanes|=n),bd(s.return,n,e),c.lanes|=n;break}h=h.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(B(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),bd(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Rt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ys(e,n),i=sn(i),r=r(i),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,i=dn(r,e.pendingProps),i=dn(r.type,i),Zm(t,e,r,i,n);case 15:return p_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),bu(t,e),e.tag=1,Ft(r)?(t=!0,ec(e)):t=!1,Ys(e,n),h_(e,r,i),Dd(e,r,i,n),Ld(null,e,r,!0,t,n);case 19:return __(t,e,n);case 22:return m_(t,e,n)}throw Error(B(156,e.tag))};function V_(t,e){return lv(t,e)}function b1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new b1(t,e,n,r)}function up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N1(t){if(typeof t=="function")return up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rf)return 11;if(t===Cf)return 14}return 2}function Jr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")up(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Vs:return zi(n.children,i,s,e);case kf:a=8,i|=8;break;case rd:return t=tn(12,n,e,i|2),t.elementType=rd,t.lanes=s,t;case id:return t=tn(13,n,e,i),t.elementType=id,t.lanes=s,t;case sd:return t=tn(19,n,e,i),t.elementType=sd,t.lanes=s,t;case Wy:return Hc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $y:a=10;break e;case Hy:a=9;break e;case Rf:a=11;break e;case Cf:a=14;break e;case Or:a=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=tn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zi(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function Hc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=Wy,t.lanes=n,t.stateNode={isHidden:!1},t}function Uh(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function zh(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D1(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eh(0),this.expirationTimes=Eh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cp(t,e,n,r,i,s,a,c,h){return t=new D1(t,e,n,c,h),e===1?(e=1,s===!0&&(e|=8)):e=0,s=tn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(s),t}function O1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function L_(t){if(!t)return ri;t=t._reactInternals;e:{if(ts(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Ft(n))return Lv(t,n,e)}return e}function M_(t,e,n,r,i,s,a,c,h){return t=cp(n,r,!0,t,i,s,a,c,h),t.context=L_(null),n=t.current,r=Ct(),i=Yr(n),s=er(r,i),s.callback=e??null,Qr(n,s,i),t.current.lanes=i,ul(t,i,r),Ut(t,r),t}function Wc(t,e,n,r){var i=e.current,s=Ct(),a=Yr(i);return n=L_(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qr(i,e,a),t!==null&&(yn(t,i,a,s),Ru(t,i,a)),a}function fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hp(t,e){hg(t,e),(t=t.alternate)&&hg(t,e)}function V1(){return null}var j_=typeof reportError=="function"?reportError:function(t){console.error(t)};function dp(t){this._internalRoot=t}Gc.prototype.render=dp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Wc(t,e,null,null)};Gc.prototype.unmount=dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ki(function(){Wc(null,t,null,null)}),e[ir]=null}};function Gc(t){this._internalRoot=t}Gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=mv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lr.length&&e!==0&&e<Lr[n].priority;n++);Lr.splice(n,0,t),n===0&&yv(t)}};function fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dg(){}function L1(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var m=fc(a);s.call(m)}}var a=M_(e,r,t,0,null,!1,!1,"",dg);return t._reactRootContainer=a,t[ir]=a.current,Ha(t.nodeType===8?t.parentNode:t),Ki(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var m=fc(h);c.call(m)}}var h=cp(t,0,!1,null,null,!1,!1,"",dg);return t._reactRootContainer=h,t[ir]=h.current,Ha(t.nodeType===8?t.parentNode:t),Ki(function(){Wc(e,h,n,r)}),h}function Kc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var h=fc(a);c.call(h)}}Wc(e,a,t,i)}else a=L1(n,e,t,i,r);return fc(a)}fv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ga(e.pendingLanes);n!==0&&(Nf(e,n|1),Ut(e,He()),!(ve&6)&&(fo=He()+500,ui()))}break;case 13:Ki(function(){var r=sr(t,1);if(r!==null){var i=Ct();yn(r,t,1,i)}}),hp(t,1)}};Df=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Ct();yn(e,t,134217728,n)}hp(t,134217728)}};pv=function(t){if(t.tag===13){var e=Yr(t),n=sr(t,e);if(n!==null){var r=Ct();yn(n,t,e,r)}hp(t,e)}};mv=function(){return xe};gv=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};md=function(t,e,n){switch(e){case"input":if(ld(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=jc(r);if(!i)throw Error(B(90));qy(r),ld(r,i)}}}break;case"textarea":Qy(t,n);break;case"select":e=n.value,e!=null&&qs(t,!!n.multiple,e,!1)}};nv=op;rv=Ki;var M1={usingClientEntryPoint:!1,Events:[hl,Fs,jc,ev,tv,op]},ua={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j1={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ov(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||V1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yu.isDisabled&&yu.supportsFiber)try{Oc=yu.inject(j1),Nn=yu}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M1;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(e))throw Error(B(200));return O1(t,e,null,n)};qt.createRoot=function(t,e){if(!fp(t))throw Error(B(299));var n=!1,r="",i=j_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cp(t,1,!1,null,null,n,!1,r,i),t[ir]=e.current,Ha(t.nodeType===8?t.parentNode:t),new dp(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=ov(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Ki(t)};qt.hydrate=function(t,e,n){if(!qc(e))throw Error(B(200));return Kc(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!fp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=j_;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=M_(e,null,t,1,n??null,i,!1,s,a),t[ir]=e.current,Ha(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gc(e)};qt.render=function(t,e,n){if(!qc(e))throw Error(B(200));return Kc(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!qc(t))throw Error(B(40));return t._reactRootContainer?(Ki(function(){Kc(null,null,t,!1,function(){t._reactRootContainer=null,t[ir]=null})}),!0):!1};qt.unstable_batchedUpdates=op;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Kc(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function F_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F_)}catch(t){console.error(t)}}F_(),Fy.exports=qt;var F1=Fy.exports,fg=F1;td.createRoot=fg.createRoot,td.hydrateRoot=fg.hydrateRoot;/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ft=(t,e)=>{const n=pe.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:c="",children:h,...m},y)=>pe.createElement("svg",{ref:y,...U1,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${z1(t)}`,c].join(" "),...m},[...e.map(([_,E])=>pe.createElement(_,E)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=ft("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ft("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=ft("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=ft("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=ft("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=ft("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ft("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ft("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pp=ft("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=ft("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=ft("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=ft("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=ft("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=ft("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=ft("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ft("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ft("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var pg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Z1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],c=t[n++],h=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},$_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,c=a?t[i+1]:0,h=i+2<t.length,m=h?t[i+2]:0,y=s>>2,_=(s&3)<<4|c>>4;let E=(c&15)<<2|m>>6,b=m&63;h||(b=64,a||(E=64)),r.push(n[y],n[_],n[E],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(B_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const m=i<t.length?n[t.charAt(i)]:64;++i;const _=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||m==null||_==null)throw new eI;const E=s<<2|c>>4;if(r.push(E),m!==64){const b=c<<4&240|m>>2;if(r.push(b),_!==64){const V=m<<6&192|_;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class eI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tI=function(t){const e=B_(t);return $_.encodeByteArray(e,!0)},mc=function(t){return tI(t).replace(/\./g,"")},H_=function(t){try{return $_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=()=>nI().__FIREBASE_DEFAULTS__,iI=()=>{if(typeof process>"u"||typeof pg>"u")return;const t=pg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H_(t[1]);return e&&JSON.parse(e)},Qc=()=>{try{return rI()||iI()||sI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W_=t=>{var e,n;return(n=(e=Qc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},oI=t=>{const e=W_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G_=()=>{var t;return(t=Qc())===null||t===void 0?void 0:t.config},q_=t=>{var e;return(e=Qc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mc(JSON.stringify(n)),mc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function cI(){var t;const e=(t=Qc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pI(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mI(){return!cI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gI(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vI,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fl.prototype.create)}}class fl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?_I(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new pr(i,c,r)}}function _I(t,e){return t.replace(wI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const wI=/\{\$([^}]+)}/g;function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Za(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(mg(s)&&mg(a)){if(!Za(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TI(t,e){const n=new II(t,e);return n.subscribe.bind(n)}class II{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bh),i.error===void 0&&(i.error=Bh),i.complete===void 0&&(i.complete=Bh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t){return t&&t._delegate?t._delegate:t}class Qi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xI(t){return t===Oi?void 0:t}function kI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const CI={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},PI=me.INFO,bI={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},NI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=PI,this._logHandler=NI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const DI=(t,e)=>e.some(n=>t instanceof n);let gg,yg;function OI(){return gg||(gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VI(){return yg||(yg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K_=new WeakMap,Xd=new WeakMap,Q_=new WeakMap,$h=new WeakMap,gp=new WeakMap;function LI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Zr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&K_.set(n,t)}).catch(()=>{}),gp.set(e,t),e}function MI(t){if(Xd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Xd.set(t,e)}let Yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jI(t){Yd=t(Yd)}function FI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hh(this),e,...n);return Q_.set(r,e.sort?e.sort():[e]),Zr(r)}:VI().includes(t)?function(...e){return t.apply(Hh(this),e),Zr(K_.get(this))}:function(...e){return Zr(t.apply(Hh(this),e))}}function UI(t){return typeof t=="function"?FI(t):(t instanceof IDBTransaction&&MI(t),DI(t,OI())?new Proxy(t,Yd):t)}function Zr(t){if(t instanceof IDBRequest)return LI(t);if($h.has(t))return $h.get(t);const e=UI(t);return e!==t&&($h.set(t,e),gp.set(e,t)),e}const Hh=t=>gp.get(t);function zI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),c=Zr(a);return r&&a.addEventListener("upgradeneeded",h=>{r(Zr(a.result),h.oldVersion,h.newVersion,Zr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),c.then(h=>{s&&h.addEventListener("close",()=>s()),i&&h.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),c}const BI=["get","getKey","getAll","getAllKeys","count"],$I=["put","add","delete","clear"],Wh=new Map;function vg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wh.get(e))return Wh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=$I.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BI.includes(n)))return;const s=async function(a,...c){const h=this.transaction(a,i?"readwrite":"readonly");let m=h.store;return r&&(m=m.index(c.shift())),(await Promise.all([m[n](...c),i&&h.done]))[0]};return Wh.set(e,s),s}jI(t=>({...t,get:(e,n,r)=>vg(e,n)||t.get(e,n,r),has:(e,n)=>!!vg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",_g="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new mp("@firebase/app"),GI="@firebase/app-compat",qI="@firebase/analytics-compat",KI="@firebase/analytics",QI="@firebase/app-check-compat",XI="@firebase/app-check",YI="@firebase/auth",JI="@firebase/auth-compat",ZI="@firebase/database",eS="@firebase/data-connect",tS="@firebase/database-compat",nS="@firebase/functions",rS="@firebase/functions-compat",iS="@firebase/installations",sS="@firebase/installations-compat",oS="@firebase/messaging",aS="@firebase/messaging-compat",lS="@firebase/performance",uS="@firebase/performance-compat",cS="@firebase/remote-config",hS="@firebase/remote-config-compat",dS="@firebase/storage",fS="@firebase/storage-compat",pS="@firebase/firestore",mS="@firebase/vertexai-preview",gS="@firebase/firestore-compat",yS="firebase",vS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="[DEFAULT]",_S={[Jd]:"fire-core",[GI]:"fire-core-compat",[KI]:"fire-analytics",[qI]:"fire-analytics-compat",[XI]:"fire-app-check",[QI]:"fire-app-check-compat",[YI]:"fire-auth",[JI]:"fire-auth-compat",[ZI]:"fire-rtdb",[eS]:"fire-data-connect",[tS]:"fire-rtdb-compat",[nS]:"fire-fn",[rS]:"fire-fn-compat",[iS]:"fire-iid",[sS]:"fire-iid-compat",[oS]:"fire-fcm",[aS]:"fire-fcm-compat",[lS]:"fire-perf",[uS]:"fire-perf-compat",[cS]:"fire-rc",[hS]:"fire-rc-compat",[dS]:"fire-gcs",[fS]:"fire-gcs-compat",[pS]:"fire-fst",[gS]:"fire-fst-compat",[mS]:"fire-vertex","fire-js":"fire-js",[yS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=new Map,wS=new Map,ef=new Map;function wg(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function po(t){const e=t.name;if(ef.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;ef.set(e,t);for(const n of gc.values())wg(n,t);for(const n of wS.values())wg(n,t);return!0}function yp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function bn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new fl("app","Firebase",ES);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=vS;function X_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Zd,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ei.create("bad-app-name",{appName:String(i)});if(n||(n=G_()),!n)throw ei.create("no-options");const s=gc.get(i);if(s){if(Za(n,s.options)&&Za(r,s.config))return s;throw ei.create("duplicate-app",{appName:i})}const a=new RI(i);for(const h of ef.values())a.addComponent(h);const c=new TS(n,r,a);return gc.set(i,c),c}function Y_(t=Zd){const e=gc.get(t);if(!e&&t===Zd&&G_())return X_();if(!e)throw ei.create("no-app",{appName:t});return e}function ti(t,e,n){var r;let i=(r=_S[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(c.join(" "));return}po(new Qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="firebase-heartbeat-database",SS=1,el="firebase-heartbeat-store";let Gh=null;function J_(){return Gh||(Gh=zI(IS,SS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(el)}catch(n){console.warn(n)}}}}).catch(t=>{throw ei.create("idb-open",{originalErrorMessage:t.message})})),Gh}async function AS(t){try{const n=(await J_()).transaction(el),r=await n.objectStore(el).get(Z_(t));return await n.done,r}catch(e){if(e instanceof pr)ar.warn(e.message);else{const n=ei.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function Eg(t,e){try{const r=(await J_()).transaction(el,"readwrite");await r.objectStore(el).put(e,Z_(t)),await r.done}catch(n){if(n instanceof pr)ar.warn(n.message);else{const r=ei.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function Z_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=1024,kS=30*24*60*60*1e3;class RS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Tg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=kS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tg(),{heartbeatsToSend:r,unsentEntries:i}=CS(this._heartbeatsCache.heartbeats),s=mc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ar.warn(n),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function CS(t,e=xS){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ig(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ig(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class PS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gI()?yI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await AS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ig(t){return mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){po(new Qi("platform-logger",e=>new HI(e),"PRIVATE")),po(new Qi("heartbeat",e=>new RS(e),"PRIVATE")),ti(Jd,_g,t),ti(Jd,_g,"esm2017"),ti("fire-js","")}bS("");var NS="firebase",DS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti(NS,DS,"app");function vp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function e0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OS=e0,t0=new fl("auth","Firebase",e0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new mp("@firebase/auth");function VS(t,...e){yc.logLevel<=me.WARN&&yc.warn(`Auth (${xo}): ${t}`,...e)}function Vu(t,...e){yc.logLevel<=me.ERROR&&yc.error(`Auth (${xo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,...e){throw _p(t,...e)}function On(t,...e){return _p(t,...e)}function n0(t,e,n){const r=Object.assign(Object.assign({},OS()),{[e]:n});return new fl("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return n0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _p(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return t0.create(t,...e)}function oe(t,e,...n){if(!t)throw _p(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vu(e),new Error(e)}function ur(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LS(){return Sg()==="http:"||Sg()==="https:"}function Sg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LS()||dI()||"connection"in navigator)?navigator.onLine:!0}function jS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=uI()||fI()}get(){return MS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t,e){ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new ml(3e4,6e4);function gl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ko(t,e,n,r,i={}){return i0(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const c=pl(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:h},s);return hI()||(m.referrerPolicy="no-referrer"),r0.fetch()(s0(t,t.config.apiHost,n,c),m)})}async function i0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},FS),e);try{const i=new zS(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw vu(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const c=s.ok?a.errorMessage:a.error.message,[h,m]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw vu(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw vu(t,"user-disabled",a);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw n0(t,y,m);lr(t,y)}}catch(i){if(i instanceof pr)throw i;lr(t,"network-request-failed",{message:String(i)})}}async function Ep(t,e,n,r,i={}){const s=await ko(t,e,n,r,i);return"mfaPendingCredential"in s&&lr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function s0(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?wp(t.config,i):`${t.config.apiScheme}://${i}`}class zS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),US.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=On(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BS(t,e){return ko(t,"POST","/v1/accounts:delete",e)}async function o0(t,e){return ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $S(t,e=!1){const n=_n(t),r=await n.getIdToken(e),i=Tp(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ba(qh(i.auth_time)),issuedAtTime:ba(qh(i.iat)),expirationTime:ba(qh(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qh(t){return Number(t)*1e3}function Tp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vu("JWT malformed, contained fewer than 3 sections"),null;try{const i=H_(n);return i?JSON.parse(i):(Vu("Failed to decode base64 JWT payload"),null)}catch(i){return Vu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ag(t){const e=Tp(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&HS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function HS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ba(this.lastLoginAt),this.creationTime=ba(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await tl(t,o0(n,{idToken:r}));oe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?a0(s.providerUserInfo):[],c=qS(t.providerData,a),h=t.isAnonymous,m=!(t.email&&s.passwordHash)&&!(c!=null&&c.length),y=h?m:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new nf(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(t,_)}async function GS(t){const e=_n(t);await vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function a0(t){return t.map(e=>{var{providerId:n}=e,r=vp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e){const n=await i0(t,{},async()=>{const r=pl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=s0(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",r0.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QS(t,e){return ko(t,"POST","/v2/accounts:revokeToken",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ag(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=Ag(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await KS(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Zs;return r&&(oe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=vp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new WS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await tl(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $S(this,e)}reload(){return GS(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await vc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await tl(this,BS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,c,h,m,y;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(i=n.email)!==null&&i!==void 0?i:void 0,b=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,V=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(c=n.tenantId)!==null&&c!==void 0?c:void 0,M=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,k=(m=n.createdAt)!==null&&m!==void 0?m:void 0,T=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:P,emailVerified:L,isAnonymous:$,providerData:W,stsTokenManager:A}=n;oe(P&&A,e,"internal-error");const w=Zs.fromJSON(this.name,A);oe(typeof P=="string",e,"internal-error"),br(_,e.name),br(E,e.name),oe(typeof L=="boolean",e,"internal-error"),oe(typeof $=="boolean",e,"internal-error"),br(b,e.name),br(V,e.name),br(O,e.name),br(M,e.name),br(k,e.name),br(T,e.name);const S=new Jn({uid:P,auth:e,email:E,emailVerified:L,displayName:_,isAnonymous:$,photoURL:V,phoneNumber:b,tenantId:O,stsTokenManager:w,createdAt:k,lastLoginAt:T});return W&&Array.isArray(W)&&(S.providerData=W.map(x=>Object.assign({},x))),M&&(S._redirectEventId=M),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Zs;i.updateFromServerResponse(n);const s=new Jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await vc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?a0(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Zs;c.updateFromIdToken(r);const h=new Jn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(h,m),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map;function Zn(t){ur(t instanceof Function,"Expected a class definition");let e=xg.get(t);return e?(ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}l0.type="NONE";const kg=l0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class eo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Lu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new eo(Zn(kg),e,r);const i=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let s=i[0]||Zn(kg);const a=Lu(r,e.config.apiKey,e.name);let c=null;for(const m of n)try{const y=await m._get(a);if(y){const _=Jn._fromJSON(e,y);m!==s&&(c=_),s=m;break}}catch{}const h=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!h.length?new eo(s,e,r):(s=h[0],c&&await s._set(a,c.toJSON()),await Promise.all(n.map(async m=>{if(m!==s)try{await m._remove(a)}catch{}})),new eo(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(u0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(p0(e))return"Blackberry";if(m0(e))return"Webos";if(c0(e))return"Safari";if((e.includes("chrome/")||h0(e))&&!e.includes("edge/"))return"Chrome";if(f0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function u0(t=xt()){return/firefox\//i.test(t)}function c0(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h0(t=xt()){return/crios\//i.test(t)}function d0(t=xt()){return/iemobile/i.test(t)}function f0(t=xt()){return/android/i.test(t)}function p0(t=xt()){return/blackberry/i.test(t)}function m0(t=xt()){return/webos/i.test(t)}function Ip(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XS(t=xt()){var e;return Ip(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YS(){return pI()&&document.documentMode===10}function g0(t=xt()){return Ip(t)||f0(t)||m0(t)||p0(t)||/windows phone/i.test(t)||d0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t,e=[]){let n;switch(t){case"Browser":n=Rg(xt());break;case"Worker":n=`${Rg(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,c)=>{try{const h=e(s);a(h)}catch(h){c(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e={}){return ko(t,"GET","/v2/passwordPolicy",gl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=6;class tA{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:eA,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,c;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(s=h.containsUppercaseLetter)!==null&&s!==void 0?s:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(c=h.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cg(this),this.idTokenSubscription=new Cg(this),this.beforeStateQueue=new JS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await o0(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===c)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(tr(this));const n=e?_n(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZS(this),n=new tA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=y0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yl(t){return _n(t)}class Cg{constructor(e){this.auth=e,this.observer=null,this.addObserver=TI(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rA(t){Sp=t}function iA(t){return Sp.loadJS(t)}function sA(){return Sp.gapiScript}function oA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){const n=yp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Za(s,e??{}))return i;lr(i,"already-initialized")}return n.initialize({options:e})}function lA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function uA(t,e,n){const r=yl(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=v0(e),{host:a,port:c}=cA(e),h=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),hA()}function v0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cA(t){const e=v0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Pg(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Pg(a)}}}function Pg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(t,e){return Ep(t,"POST","/v1/accounts:signInWithIdp",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="http://localhost";class Xi extends _0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=vp(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Xi(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,to(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:dA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends w0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends vl{constructor(){super("facebook.com")}static credential(e){return Xi._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jr.credential(e.oauthAccessToken)}catch{return null}}}jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";jr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xi._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fr.credential(n,r)}catch{return null}}}Fr.GOOGLE_SIGN_IN_METHOD="google.com";Fr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends vl{constructor(){super("github.com")}static credential(e){return Xi._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.GITHUB_SIGN_IN_METHOD="github.com";Ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr extends vl{constructor(){super("twitter.com")}static credential(e,n){return Xi._fromParams({providerId:zr.PROVIDER_ID,signInMethod:zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zr.credentialFromTaggedObject(e)}static credentialFromError(e){return zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zr.credential(n,r)}catch{return null}}}zr.TWITTER_SIGN_IN_METHOD="twitter.com";zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return Ep(t,"POST","/v1/accounts:signUp",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Jn._fromIdTokenResponse(e,r,i),a=bg(r);return new cr({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=bg(r);return new cr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function bg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t){var e;if(bn(t.app))return Promise.reject(tr(t));const n=yl(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new cr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await fA(n,{returnSecureToken:!0}),i=await cr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends pr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new _c(e,n,r,i)}}function E0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(t,s,e,r):s})}async function mA(t,e,n=!1){const r=await tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return cr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e,n=!1){const{auth:r}=t;if(bn(r.app))return Promise.reject(tr(r));const i="reauthenticate";try{const s=await tl(t,E0(r,i,e,t),n);oe(s.idToken,r,"internal-error");const a=Tp(s.idToken);oe(a,r,"internal-error");const{sub:c}=a;return oe(t.uid===c,r,"user-mismatch"),cr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&lr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e,n=!1){if(bn(t.app))return Promise.reject(tr(t));const r="signIn",i=await E0(t,r,e),s=await cr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e){return Ep(t,"POST","/v1/accounts:signInWithCustomToken",gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A(t,e){if(bn(t.app))return Promise.reject(tr(t));const n=yl(t),r=await vA(n,{token:e,returnSecureToken:!0}),i=await cr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}function wA(t,e,n,r){return _n(t).onIdTokenChanged(e,n,r)}function EA(t,e,n){return _n(t).beforeAuthStateChanged(e,n)}const wc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wc,"1"),this.storage.removeItem(wc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1e3,IA=10;class I0 extends T0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,h)=>{this.notifyListeners(a,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);YS()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,IA):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},TA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I0.type="LOCAL";const SA=I0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends T0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}S0.type="SESSION";const A0=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async m=>m(n.origin,s)),h=await AA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,h)=>{const m=Ap("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){const E=_;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(E.data.response);break;default:clearTimeout(y),clearTimeout(s),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(){return window}function kA(t){Vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function RA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PA(){return x0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebaseLocalStorageDb",bA=1,Ec="firebaseLocalStorage",R0="fbase_key";class _l{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yc(t,e){return t.transaction([Ec],e?"readwrite":"readonly").objectStore(Ec)}function NA(){const t=indexedDB.deleteDatabase(k0);return new _l(t).toPromise()}function rf(){const t=indexedDB.open(k0,bA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ec,{keyPath:R0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ec)?e(r):(r.close(),await NA(),e(await rf()))})})}async function Ng(t,e,n){const r=Yc(t,!0).put({[R0]:e,value:n});return new _l(r).toPromise()}async function DA(t,e){const n=Yc(t,!1).get(e),r=await new _l(n).toPromise();return r===void 0?null:r.value}function Dg(t,e){const n=Yc(t,!0).delete(e);return new _l(n).toPromise()}const OA=800,VA=3;class C0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>VA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(PA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await RA(),!this.activeServiceWorker)return;this.sender=new xA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rf();return await Ng(e,wc,"1"),await Dg(e,wc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ng(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Yc(i,!1).getAll();return new _l(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C0.type="LOCAL";const LA=C0;new ml(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e){return e?Zn(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends _0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jA(t){return yA(t.auth,new xp(t),t.bypassAuthState)}function FA(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),gA(n,new xp(t),t.bypassAuthState)}async function UA(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),mA(n,new xp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jA;case"linkViaPopup":case"linkViaRedirect":return UA;case"reauthViaPopup":case"reauthViaRedirect":return FA;default:lr(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=new ml(2e3,1e4);class Gs extends P0{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zA.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="pendingRedirect",Mu=new Map;class $A extends P0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Mu.get(this.auth._key());if(!e){try{const r=await HA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Mu.set(this.auth._key(),e)}return this.bypassAuthState||Mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HA(t,e){const n=qA(e),r=GA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function WA(t,e){Mu.set(t._key(),e)}function GA(t){return Zn(t._redirectPersistence)}function qA(t){return Lu(BA,t.config.apiKey,t.name)}async function KA(t,e,n=!1){if(bn(t.app))return Promise.reject(tr(t));const r=yl(t),i=MA(r,e),a=await new $A(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=10*60*1e3;class XA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!b0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(On(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Og(e))}saveEventToCache(e){this.cachedEventUids.add(Og(e)),this.lastProcessedEventTime=Date.now()}}function Og(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e={}){return ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ex=/^https?/;async function tx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JA(t);for(const n of e)try{if(nx(n))return}catch{}lr(t,"unauthorized-domain")}function nx(t){const e=tf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!ex.test(n))return!1;if(ZA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new ml(3e4,6e4);function Vg(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ix(t){return new Promise((e,n)=>{var r,i,s;function a(){Vg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Vg(),n(On(t,"network-request-failed"))},timeout:rx.get()})}if(!((i=(r=Vn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Vn().gapi)===null||s===void 0)&&s.load)a();else{const c=oA("iframefcb");return Vn()[c]=()=>{gapi.load?a():n(On(t,"network-request-failed"))},iA(`${sA()}?onload=${c}`).catch(h=>n(h))}}).catch(e=>{throw ju=null,e})}let ju=null;function sx(t){return ju=ju||ix(t),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new ml(5e3,15e3),ax="__/auth/iframe",lx="emulator/auth/iframe",ux={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hx(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wp(e,lx):`https://${t.config.authDomain}/${ax}`,r={apiKey:e.apiKey,appName:t.name,v:xo},i=cx.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pl(r).slice(1)}`}async function dx(t){const e=await sx(t),n=Vn().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:hx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ux,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=On(t,"network-request-failed"),c=Vn().setTimeout(()=>{s(a)},ox.get());function h(){Vn().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},px=500,mx=600,gx="_blank",yx="http://localhost";class Lg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vx(t,e,n,r=px,i=mx){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h=Object.assign(Object.assign({},fx),{width:r.toString(),height:i.toString(),top:s,left:a}),m=xt().toLowerCase();n&&(c=h0(m)?gx:n),u0(m)&&(e=e||yx,h.scrollbars="yes");const y=Object.entries(h).reduce((E,[b,V])=>`${E}${b}=${V},`,"");if(XS(m)&&c!=="_self")return _x(e||"",c),new Lg(null);const _=window.open(e||"",c,y);oe(_,t,"popup-blocked");try{_.focus()}catch{}return new Lg(_)}function _x(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="__/auth/handler",Ex="emulator/auth/handler",Tx=encodeURIComponent("fac");async function Mg(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xo,eventId:i};if(e instanceof w0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",EI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))a[y]=_}if(e instanceof vl){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(a.scopes=y.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await t._getAppCheckToken(),m=h?`#${Tx}=${encodeURIComponent(h)}`:"";return`${Ix(t)}?${pl(c).slice(1)}${m}`}function Ix({config:t}){return t.emulator?wp(t,Ex):`https://${t.authDomain}/${wx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="webStorageSupport";class Sx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A0,this._completeRedirectFn=KA,this._overrideRedirectResult=WA}async _openPopup(e,n,r,i){var s;ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Mg(e,n,r,tf(),i);return vx(e,a,Ap())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Mg(e,n,r,tf(),i);return kA(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dx(e),r=new XA(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kh,{type:Kh},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kh];a!==void 0&&n(!!a),lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return g0()||c0()||Ip()}}const Ax=Sx;var jg="@firebase/auth",Fg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rx(t){po(new Qi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;oe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y0(t)},m=new nA(r,i,s,h);return lA(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),po(new Qi("auth-internal",e=>{const n=yl(e.getProvider("auth").getImmediate());return(r=>new xx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ti(jg,Fg,kx(t)),ti(jg,Fg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=5*60,Px=q_("authIdTokenMaxAge")||Cx;let Ug=null;const bx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Px)return;const i=n==null?void 0:n.token;Ug!==i&&(Ug=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Nx(t=Y_()){const e=yp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=aA(t,{popupRedirectResolver:Ax,persistence:[LA,SA,A0]}),r=q_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=bx(s.toString());EA(n,a,()=>a(n.currentUser)),wA(n,c=>a(c))}}const i=W_("auth");return i&&uA(n,`http://${i}`),n}function Dx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=On("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Dx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rx("Browser");var zg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bi,N0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function S(){}S.prototype=w.prototype,A.D=w.prototype,A.prototype=new S,A.prototype.constructor=A,A.C=function(x,N,C){for(var I=Array(arguments.length-2),J=2;J<arguments.length;J++)I[J-2]=arguments[J];return w.prototype[N].apply(x,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,w,S){S||(S=0);var x=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)x[N]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(N=0;16>N;++N)x[N]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=A.g[0],S=A.g[1],N=A.g[2];var C=A.g[3],I=w+(C^S&(N^C))+x[0]+3614090360&4294967295;w=S+(I<<7&4294967295|I>>>25),I=C+(N^w&(S^N))+x[1]+3905402710&4294967295,C=w+(I<<12&4294967295|I>>>20),I=N+(S^C&(w^S))+x[2]+606105819&4294967295,N=C+(I<<17&4294967295|I>>>15),I=S+(w^N&(C^w))+x[3]+3250441966&4294967295,S=N+(I<<22&4294967295|I>>>10),I=w+(C^S&(N^C))+x[4]+4118548399&4294967295,w=S+(I<<7&4294967295|I>>>25),I=C+(N^w&(S^N))+x[5]+1200080426&4294967295,C=w+(I<<12&4294967295|I>>>20),I=N+(S^C&(w^S))+x[6]+2821735955&4294967295,N=C+(I<<17&4294967295|I>>>15),I=S+(w^N&(C^w))+x[7]+4249261313&4294967295,S=N+(I<<22&4294967295|I>>>10),I=w+(C^S&(N^C))+x[8]+1770035416&4294967295,w=S+(I<<7&4294967295|I>>>25),I=C+(N^w&(S^N))+x[9]+2336552879&4294967295,C=w+(I<<12&4294967295|I>>>20),I=N+(S^C&(w^S))+x[10]+4294925233&4294967295,N=C+(I<<17&4294967295|I>>>15),I=S+(w^N&(C^w))+x[11]+2304563134&4294967295,S=N+(I<<22&4294967295|I>>>10),I=w+(C^S&(N^C))+x[12]+1804603682&4294967295,w=S+(I<<7&4294967295|I>>>25),I=C+(N^w&(S^N))+x[13]+4254626195&4294967295,C=w+(I<<12&4294967295|I>>>20),I=N+(S^C&(w^S))+x[14]+2792965006&4294967295,N=C+(I<<17&4294967295|I>>>15),I=S+(w^N&(C^w))+x[15]+1236535329&4294967295,S=N+(I<<22&4294967295|I>>>10),I=w+(N^C&(S^N))+x[1]+4129170786&4294967295,w=S+(I<<5&4294967295|I>>>27),I=C+(S^N&(w^S))+x[6]+3225465664&4294967295,C=w+(I<<9&4294967295|I>>>23),I=N+(w^S&(C^w))+x[11]+643717713&4294967295,N=C+(I<<14&4294967295|I>>>18),I=S+(C^w&(N^C))+x[0]+3921069994&4294967295,S=N+(I<<20&4294967295|I>>>12),I=w+(N^C&(S^N))+x[5]+3593408605&4294967295,w=S+(I<<5&4294967295|I>>>27),I=C+(S^N&(w^S))+x[10]+38016083&4294967295,C=w+(I<<9&4294967295|I>>>23),I=N+(w^S&(C^w))+x[15]+3634488961&4294967295,N=C+(I<<14&4294967295|I>>>18),I=S+(C^w&(N^C))+x[4]+3889429448&4294967295,S=N+(I<<20&4294967295|I>>>12),I=w+(N^C&(S^N))+x[9]+568446438&4294967295,w=S+(I<<5&4294967295|I>>>27),I=C+(S^N&(w^S))+x[14]+3275163606&4294967295,C=w+(I<<9&4294967295|I>>>23),I=N+(w^S&(C^w))+x[3]+4107603335&4294967295,N=C+(I<<14&4294967295|I>>>18),I=S+(C^w&(N^C))+x[8]+1163531501&4294967295,S=N+(I<<20&4294967295|I>>>12),I=w+(N^C&(S^N))+x[13]+2850285829&4294967295,w=S+(I<<5&4294967295|I>>>27),I=C+(S^N&(w^S))+x[2]+4243563512&4294967295,C=w+(I<<9&4294967295|I>>>23),I=N+(w^S&(C^w))+x[7]+1735328473&4294967295,N=C+(I<<14&4294967295|I>>>18),I=S+(C^w&(N^C))+x[12]+2368359562&4294967295,S=N+(I<<20&4294967295|I>>>12),I=w+(S^N^C)+x[5]+4294588738&4294967295,w=S+(I<<4&4294967295|I>>>28),I=C+(w^S^N)+x[8]+2272392833&4294967295,C=w+(I<<11&4294967295|I>>>21),I=N+(C^w^S)+x[11]+1839030562&4294967295,N=C+(I<<16&4294967295|I>>>16),I=S+(N^C^w)+x[14]+4259657740&4294967295,S=N+(I<<23&4294967295|I>>>9),I=w+(S^N^C)+x[1]+2763975236&4294967295,w=S+(I<<4&4294967295|I>>>28),I=C+(w^S^N)+x[4]+1272893353&4294967295,C=w+(I<<11&4294967295|I>>>21),I=N+(C^w^S)+x[7]+4139469664&4294967295,N=C+(I<<16&4294967295|I>>>16),I=S+(N^C^w)+x[10]+3200236656&4294967295,S=N+(I<<23&4294967295|I>>>9),I=w+(S^N^C)+x[13]+681279174&4294967295,w=S+(I<<4&4294967295|I>>>28),I=C+(w^S^N)+x[0]+3936430074&4294967295,C=w+(I<<11&4294967295|I>>>21),I=N+(C^w^S)+x[3]+3572445317&4294967295,N=C+(I<<16&4294967295|I>>>16),I=S+(N^C^w)+x[6]+76029189&4294967295,S=N+(I<<23&4294967295|I>>>9),I=w+(S^N^C)+x[9]+3654602809&4294967295,w=S+(I<<4&4294967295|I>>>28),I=C+(w^S^N)+x[12]+3873151461&4294967295,C=w+(I<<11&4294967295|I>>>21),I=N+(C^w^S)+x[15]+530742520&4294967295,N=C+(I<<16&4294967295|I>>>16),I=S+(N^C^w)+x[2]+3299628645&4294967295,S=N+(I<<23&4294967295|I>>>9),I=w+(N^(S|~C))+x[0]+4096336452&4294967295,w=S+(I<<6&4294967295|I>>>26),I=C+(S^(w|~N))+x[7]+1126891415&4294967295,C=w+(I<<10&4294967295|I>>>22),I=N+(w^(C|~S))+x[14]+2878612391&4294967295,N=C+(I<<15&4294967295|I>>>17),I=S+(C^(N|~w))+x[5]+4237533241&4294967295,S=N+(I<<21&4294967295|I>>>11),I=w+(N^(S|~C))+x[12]+1700485571&4294967295,w=S+(I<<6&4294967295|I>>>26),I=C+(S^(w|~N))+x[3]+2399980690&4294967295,C=w+(I<<10&4294967295|I>>>22),I=N+(w^(C|~S))+x[10]+4293915773&4294967295,N=C+(I<<15&4294967295|I>>>17),I=S+(C^(N|~w))+x[1]+2240044497&4294967295,S=N+(I<<21&4294967295|I>>>11),I=w+(N^(S|~C))+x[8]+1873313359&4294967295,w=S+(I<<6&4294967295|I>>>26),I=C+(S^(w|~N))+x[15]+4264355552&4294967295,C=w+(I<<10&4294967295|I>>>22),I=N+(w^(C|~S))+x[6]+2734768916&4294967295,N=C+(I<<15&4294967295|I>>>17),I=S+(C^(N|~w))+x[13]+1309151649&4294967295,S=N+(I<<21&4294967295|I>>>11),I=w+(N^(S|~C))+x[4]+4149444226&4294967295,w=S+(I<<6&4294967295|I>>>26),I=C+(S^(w|~N))+x[11]+3174756917&4294967295,C=w+(I<<10&4294967295|I>>>22),I=N+(w^(C|~S))+x[2]+718787259&4294967295,N=C+(I<<15&4294967295|I>>>17),I=S+(C^(N|~w))+x[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+C&4294967295}r.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var S=w-this.blockSize,x=this.B,N=this.h,C=0;C<w;){if(N==0)for(;C<=S;)i(this,A,C),C+=this.blockSize;if(typeof A=="string"){for(;C<w;)if(x[N++]=A.charCodeAt(C++),N==this.blockSize){i(this,x),N=0;break}}else for(;C<w;)if(x[N++]=A[C++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var S=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=S&255,S/=256;for(this.u(A),A=Array(16),w=S=0;4>w;++w)for(var x=0;32>x;x+=8)A[S++]=this.g[w]>>>x&255;return A};function s(A,w){var S=c;return Object.prototype.hasOwnProperty.call(S,A)?S[A]:S[A]=w(A)}function a(A,w){this.h=w;for(var S=[],x=!0,N=A.length-1;0<=N;N--){var C=A[N]|0;x&&C==w||(S[N]=C,x=!1)}this.g=S}var c={};function h(A){return-128<=A&&128>A?s(A,function(w){return new a([w|0],0>w?-1:0)}):new a([A|0],0>A?-1:0)}function m(A){if(isNaN(A)||!isFinite(A))return _;if(0>A)return M(m(-A));for(var w=[],S=1,x=0;A>=S;x++)w[x]=A/S|0,S*=4294967296;return new a(w,0)}function y(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return M(y(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=m(Math.pow(w,8)),x=_,N=0;N<A.length;N+=8){var C=Math.min(8,A.length-N),I=parseInt(A.substring(N,N+C),w);8>C?(C=m(Math.pow(w,C)),x=x.j(C).add(m(I))):(x=x.j(S),x=x.add(m(I)))}return x}var _=h(0),E=h(1),b=h(16777216);t=a.prototype,t.m=function(){if(O(this))return-M(this).m();for(var A=0,w=1,S=0;S<this.g.length;S++){var x=this.i(S);A+=(0<=x?x:4294967296+x)*w,w*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(V(this))return"0";if(O(this))return"-"+M(this).toString(A);for(var w=m(Math.pow(A,6)),S=this,x="";;){var N=L(S,w).g;S=k(S,N.j(w));var C=((0<S.g.length?S.g[0]:S.h)>>>0).toString(A);if(S=N,V(S))return C+x;for(;6>C.length;)C="0"+C;x=C+x}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function V(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function O(A){return A.h==-1}t.l=function(A){return A=k(this,A),O(A)?-1:V(A)?0:1};function M(A){for(var w=A.g.length,S=[],x=0;x<w;x++)S[x]=~A.g[x];return new a(S,~A.h).add(E)}t.abs=function(){return O(this)?M(this):this},t.add=function(A){for(var w=Math.max(this.g.length,A.g.length),S=[],x=0,N=0;N<=w;N++){var C=x+(this.i(N)&65535)+(A.i(N)&65535),I=(C>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);x=I>>>16,C&=65535,I&=65535,S[N]=I<<16|C}return new a(S,S[S.length-1]&-2147483648?-1:0)};function k(A,w){return A.add(M(w))}t.j=function(A){if(V(this)||V(A))return _;if(O(this))return O(A)?M(this).j(M(A)):M(M(this).j(A));if(O(A))return M(this.j(M(A)));if(0>this.l(b)&&0>A.l(b))return m(this.m()*A.m());for(var w=this.g.length+A.g.length,S=[],x=0;x<2*w;x++)S[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<A.g.length;N++){var C=this.i(x)>>>16,I=this.i(x)&65535,J=A.i(N)>>>16,_e=A.i(N)&65535;S[2*x+2*N]+=I*_e,T(S,2*x+2*N),S[2*x+2*N+1]+=C*_e,T(S,2*x+2*N+1),S[2*x+2*N+1]+=I*J,T(S,2*x+2*N+1),S[2*x+2*N+2]+=C*J,T(S,2*x+2*N+2)}for(x=0;x<w;x++)S[x]=S[2*x+1]<<16|S[2*x];for(x=w;x<2*w;x++)S[x]=0;return new a(S,0)};function T(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function P(A,w){this.g=A,this.h=w}function L(A,w){if(V(w))throw Error("division by zero");if(V(A))return new P(_,_);if(O(A))return w=L(M(A),w),new P(M(w.g),M(w.h));if(O(w))return w=L(A,M(w)),new P(M(w.g),w.h);if(30<A.g.length){if(O(A)||O(w))throw Error("slowDivide_ only works with positive integers.");for(var S=E,x=w;0>=x.l(A);)S=$(S),x=$(x);var N=W(S,1),C=W(x,1);for(x=W(x,2),S=W(S,2);!V(x);){var I=C.add(x);0>=I.l(A)&&(N=N.add(S),C=I),x=W(x,1),S=W(S,1)}return w=k(A,N.j(w)),new P(N,w)}for(N=_;0<=A.l(w);){for(S=Math.max(1,Math.floor(A.m()/w.m())),x=Math.ceil(Math.log(S)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),C=m(S),I=C.j(w);O(I)||0<I.l(A);)S-=x,C=m(S),I=C.j(w);V(C)&&(C=E),N=N.add(C),A=k(A,I)}return new P(N,A)}t.A=function(A){return L(this,A).h},t.and=function(A){for(var w=Math.max(this.g.length,A.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)&A.i(x);return new a(S,this.h&A.h)},t.or=function(A){for(var w=Math.max(this.g.length,A.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)|A.i(x);return new a(S,this.h|A.h)},t.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),S=[],x=0;x<w;x++)S[x]=this.i(x)^A.i(x);return new a(S,this.h^A.h)};function $(A){for(var w=A.g.length+1,S=[],x=0;x<w;x++)S[x]=A.i(x)<<1|A.i(x-1)>>>31;return new a(S,A.h)}function W(A,w){var S=w>>5;w%=32;for(var x=A.g.length-S,N=[],C=0;C<x;C++)N[C]=0<w?A.i(C+S)>>>w|A.i(C+S+1)<<32-w:A.i(C+S);return new a(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,N0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=y,Bi=a}).apply(typeof zg<"u"?zg:typeof self<"u"?self:typeof window<"u"?window:{});var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D0,va,O0,Fu,sf,V0,L0,M0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof _u=="object"&&_u];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var g=o[p];if(!(g in d))break e;d=d[g]}o=o[o.length-1],p=d[o],u=u(p),u!=p&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,p=!1,g={next:function(){if(!p&&d<o.length){var v=d++;return{value:u(v,o[v]),done:!1}}return p=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function h(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function m(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function y(o,u,d){return o.call.apply(o.bind,arguments)}function _(o,u,d){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,p),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function E(o,u,d){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,E.apply(null,arguments)}function b(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var p=d.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function V(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(p,g,v){for(var R=Array(arguments.length-2),j=2;j<arguments.length;j++)R[j-2]=arguments[j];return u.prototype[g].apply(p,R)}}function O(o){const u=o.length;if(0<u){const d=Array(u);for(let p=0;p<u;p++)d[p]=o[p];return d}return[]}function M(o,u){for(let d=1;d<arguments.length;d++){const p=arguments[d];if(h(p)){const g=o.length||0,v=p.length||0;o.length=g+v;for(let R=0;R<v;R++)o[g+R]=p[R]}else o.push(p)}}class k{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function T(o){return/^[\s\xa0]*$/.test(o)}function P(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var $=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function W(o,u,d){for(const p in o)u.call(d,o[p],p,o)}function A(o,u){for(const d in o)u.call(void 0,o[d],d,o)}function w(o){const u={};for(const d in o)u[d]=o[d];return u}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(o,u){let d,p;for(let g=1;g<arguments.length;g++){p=arguments[g];for(d in p)o[d]=p[d];for(let v=0;v<S.length;v++)d=S[v],Object.prototype.hasOwnProperty.call(p,d)&&(o[d]=p[d])}}function N(o){var u=1;o=o.split(":");const d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function C(o){c.setTimeout(()=>{throw o},0)}function I(){var o=K;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class J{constructor(){this.h=this.g=null}add(u,d){const p=_e.get();p.set(u,d),this.h?this.h.next=p:this.g=p,this.h=p}}var _e=new k(()=>new te,o=>o.reset());class te{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,G=!1,K=new J,Z=()=>{const o=c.Promise.resolve(void 0);ye=()=>{o.then(se)}};var se=()=>{for(var o;o=I();){try{o.h.call(o.g)}catch(d){C(d)}var u=_e;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}G=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var pt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const d=()=>{};c.addEventListener("test",d,u),c.removeEventListener("test",d,u)}catch{}return o}();function Nt(o,u){if(Se.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if($){e:{try{L(u.nodeName);var g=!0;break e}catch{}g=!1}g||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:mt[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Nt.aa.h.call(this)}}V(Nt,Se);var mt={2:"touch",3:"pen",4:"mouse"};Nt.prototype.h=function(){Nt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var an="closure_listenable_"+(1e6*Math.random()|0),xl=0;function kl(o,u,d,p,g){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!p,this.ha=g,this.key=++xl,this.da=this.fa=!1}function mr(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function wn(o){this.src=o,this.g={},this.h=0}wn.prototype.add=function(o,u,d,p,g){var v=o.toString();o=this.g[v],o||(o=this.g[v]=[],this.h++);var R=Ve(o,u,p,g);return-1<R?(u=o[R],d||(u.fa=!1)):(u=new kl(u,this.src,v,!!p,g),u.fa=d,o.push(u)),u};function Do(o,u){var d=u.type;if(d in o.g){var p=o.g[d],g=Array.prototype.indexOf.call(p,u,void 0),v;(v=0<=g)&&Array.prototype.splice.call(p,g,1),v&&(mr(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function Ve(o,u,d,p){for(var g=0;g<o.length;++g){var v=o[g];if(!v.da&&v.listener==u&&v.capture==!!d&&v.ha==p)return g}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),is={};function Rl(o,u,d,p,g){if(Array.isArray(u)){for(var v=0;v<u.length;v++)Rl(o,u[v],d,p,g);return null}return d=Mo(d),o&&o[an]?o.K(u,d,m(p)?!!p.capture:!1,g):Cl(o,u,d,!1,p,g)}function Cl(o,u,d,p,g,v){if(!u)throw Error("Invalid event type");var R=m(g)?!!g.capture:!!g,j=os(o);if(j||(o[qe]=j=new wn(o)),d=j.add(u,d,p,R,v),d.proxy)return d;if(p=Pl(),d.proxy=p,p.src=o,p.listener=d,o.addEventListener)pt||(g=R),g===void 0&&(g=!1),o.addEventListener(u.toString(),p,g);else if(o.attachEvent)o.attachEvent(Vo(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Pl(){function o(d){return u.call(o.src,o.listener,d)}const u=Lo;return o}function Oo(o,u,d,p,g){if(Array.isArray(u))for(var v=0;v<u.length;v++)Oo(o,u[v],d,p,g);else p=m(p)?!!p.capture:!!p,d=Mo(d),o&&o[an]?(o=o.i,u=String(u).toString(),u in o.g&&(v=o.g[u],d=Ve(v,d,p,g),-1<d&&(mr(v[d]),Array.prototype.splice.call(v,d,1),v.length==0&&(delete o.g[u],o.h--)))):o&&(o=os(o))&&(u=o.g[u.toString()],o=-1,u&&(o=Ve(u,d,p,g)),(d=-1<o?u[o]:null)&&ss(d))}function ss(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[an])Do(u.i,o);else{var d=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(d,p,o.capture):u.detachEvent?u.detachEvent(Vo(d),p):u.addListener&&u.removeListener&&u.removeListener(p),(d=os(u))?(Do(d,o),d.h==0&&(d.src=null,u[qe]=null)):mr(o)}}}function Vo(o){return o in is?is[o]:is[o]="on"+o}function Lo(o,u){if(o.da)o=!0;else{u=new Nt(u,this);var d=o.listener,p=o.ha||o.src;o.fa&&ss(o),o=d.call(p,u)}return o}function os(o){return o=o[qe],o instanceof wn?o:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mo(o){return typeof o=="function"?o:(o[ln]||(o[ln]=function(u){return o.handleEvent(u)}),o[ln])}function Be(){he.call(this),this.i=new wn(this),this.M=this,this.F=null}V(Be,he),Be.prototype[an]=!0,Be.prototype.removeEventListener=function(o,u,d,p){Oo(this,o,u,d,p)};function Ke(o,u){var d,p=o.F;if(p)for(d=[];p;p=p.F)d.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Se(u,o);else if(u instanceof Se)u.target=u.target||o;else{var g=u;u=new Se(p,o),x(u,g)}if(g=!0,d)for(var v=d.length-1;0<=v;v--){var R=u.g=d[v];g=as(R,p,!0,u)&&g}if(R=u.g=o,g=as(R,p,!0,u)&&g,g=as(R,p,!1,u)&&g,d)for(v=0;v<d.length;v++)R=u.g=d[v],g=as(R,p,!1,u)&&g}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],p=0;p<d.length;p++)mr(d[p]);delete o.g[u],o.h--}}this.F=null},Be.prototype.K=function(o,u,d,p){return this.i.add(String(o),u,!1,d,p)},Be.prototype.L=function(o,u,d,p){return this.i.add(String(o),u,!0,d,p)};function as(o,u,d,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var g=!0,v=0;v<u.length;++v){var R=u[v];if(R&&!R.da&&R.capture==d){var j=R.listener,U=R.ha||R.src;R.fa&&Do(o.i,R),g=j.call(U,p)!==!1&&g}}return g&&!p.defaultPrevented}function jo(o,u,d){if(typeof o=="function")d&&(o=E(o,d));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function bl(o){o.g=jo(()=>{o.g=null,o.i&&(o.i=!1,bl(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Nl extends he{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:bl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(o){he.call(this),this.h=o,this.g={}}V(gr,he);var yr=[];function ls(o){W(o.g,function(u,d){this.g.hasOwnProperty(d)&&ss(u)},o),o.g={}}gr.prototype.N=function(){gr.aa.N.call(this),ls(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var us=c.JSON.stringify,ch=c.JSON.parse,Dl=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function ci(){}ci.prototype.h=null;function En(o){return o.h||(o.h=o.i())}function vr(){}var _r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cs(){Se.call(this,"d")}V(cs,Se);function hi(){Se.call(this,"c")}V(hi,Se);var Tn={},In=null;function wr(){return In=In||new Be}Tn.La="serverreachability";function Fo(o){Se.call(this,Tn.La,o)}V(Fo,Se);function Sn(o){const u=wr();Ke(u,new Fo(u))}Tn.STAT_EVENT="statevent";function di(o,u){Se.call(this,Tn.STAT_EVENT,o),this.stat=u}V(di,Se);function rt(o){const u=wr();Ke(u,new di(u,o))}Tn.Ma="timingevent";function Un(o,u){Se.call(this,Tn.Ma,o),this.size=u}V(Un,Se);function fi(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function kt(){this.g=!0}kt.prototype.xa=function(){this.g=!1};function zn(o,u,d,p,g,v){o.info(function(){if(o.g)if(v)for(var R="",j=v.split("&"),U=0;U<j.length;U++){var q=j[U].split("=");if(1<q.length){var Q=q[0];q=q[1];var H=Q.split("_");R=2<=H.length&&H[1]=="type"?R+(Q+"="+q+"&"):R+(Q+"=redacted&")}}else R=null;else R=v;return"XMLHTTP REQ ("+p+") [attempt "+g+"]: "+u+`
`+d+`
`+R})}function Ol(o,u,d,p,g,v,R){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+g+"]: "+u+`
`+d+`
`+v+" "+R})}function Re(o,u,d,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Uo(o,d)+(p?" "+p:"")})}function Qt(o,u){o.info(function(){return"TIMEOUT: "+u})}kt.prototype.info=function(){};function Uo(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var p=d[o];if(!(2>p.length)){var g=p[1];if(Array.isArray(g)&&!(1>g.length)){var v=g[0];if(v!="noop"&&v!="stop"&&v!="close")for(var R=1;R<g.length;R++)g[R]=""}}}}return us(d)}catch{return u}}var hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mi;function Bn(){}V(Bn,ci),Bn.prototype.g=function(){return new XMLHttpRequest},Bn.prototype.i=function(){return{}},mi=new Bn;function Dt(o,u,d,p){this.j=o,this.i=u,this.l=d,this.R=p||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zo}function zo(){this.i=null,this.g="",this.h=!1}var ds={},gi={};function fs(o,u,d){o.L=1,o.v=_s(Xt(u)),o.m=d,o.P=!0,Ot(o,null)}function Ot(o,u){o.F=Date.now(),Er(o),o.A=Xt(o.v);var d=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),zl(d.i,"t",p),o.C=0,d=o.j.J,o.h=new zo,o.g=Jl(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Nl(E(o.Y,o,o.g),o.O)),u=o.U,d=o.g,p=o.ca;var g="readystatechange";Array.isArray(g)||(g&&(yr[0]=g.toString()),g=yr);for(var v=0;v<g.length;v++){var R=Rl(d,g[v],p||u.handleEvent,!1,u.h||u);if(!R)break;u.g[R.key]=R}u=o.H?w(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Sn(),zn(o.i,o.u,o.A,o.l,o.R,o.m)}Dt.prototype.ca=function(o){o=o.target;const u=this.M;u&&cn(o)==3?u.j():this.Y(o)},Dt.prototype.Y=function(o){try{if(o==this.g)e:{const H=cn(this.g);var u=this.g.Ba();const ee=this.g.Z();if(!(3>H)&&(H!=3||this.g&&(this.h.h||this.g.oa()||Xo(this.g)))){this.J||H!=4||u==7||(u==8||0>=ee?Sn(3):Sn(2)),ms(this);var d=this.g.Z();this.X=d;t:if(zt(this)){var p=Xo(this.g);o="";var g=p.length,v=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ze(this),An(this);var R="";break t}this.h.i=new c.TextDecoder}for(u=0;u<g;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(v&&u==g-1)});p.length=0,this.h.g+=o,this.C=0,R=this.h.g}else R=this.g.oa();if(this.o=d==200,Ol(this.i,this.u,this.A,this.l,this.R,H,d),this.o){if(this.T&&!this.K){t:{if(this.g){var j,U=this.g;if((j=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(j)){var q=j;break t}}q=null}if(d=q)Re(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,d);else{this.o=!1,this.s=3,rt(12),Ze(this),An(this);break e}}if(this.P){d=!0;let ne;for(;!this.J&&this.C<R.length;)if(ne=yi(this,R),ne==gi){H==4&&(this.s=4,rt(14),d=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(ne==ds){this.s=4,rt(15),Re(this.i,this.l,R,"[Invalid Chunk]"),d=!1;break}else Re(this.i,this.l,ne,null),gs(this,ne);if(zt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),H!=4||R.length!=0||this.h.h||(this.s=1,rt(16),d=!1),this.o=this.o&&d,!d)Re(this.i,this.l,R,"[Invalid Chunked Response]"),Ze(this),An(this);else if(0<R.length&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.ba&&!Q.M&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),xs(Q),Q.M=!0,rt(11))}}else Re(this.i,this.l,R,null),gs(this,R);H==4&&Ze(this),this.o&&!this.J&&(H==4?Rs(this.j,this):(this.o=!1,Er(this)))}else Ss(this.g),d==400&&0<R.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),Ze(this),An(this)}}}catch{}finally{}};function zt(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function yi(o,u){var d=o.C,p=u.indexOf(`
`,d);return p==-1?gi:(d=Number(u.substring(d,p)),isNaN(d)?ds:(p+=1,p+d>u.length?gi:(u=u.slice(p,p+d),o.C=p+d,u)))}Dt.prototype.cancel=function(){this.J=!0,Ze(this)};function Er(o){o.S=Date.now()+o.I,ps(o,o.I)}function ps(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=fi(E(o.ba,o),u)}function ms(o){o.B&&(c.clearTimeout(o.B),o.B=null)}Dt.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Qt(this.i,this.A),this.L!=2&&(Sn(),rt(17)),Ze(this),this.s=2,An(this)):ps(this,this.S-o)};function An(o){o.j.G==0||o.J||Rs(o.j,o)}function Ze(o){ms(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,ls(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function gs(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||vs(d.h,o))){if(!o.K&&vs(d.h,o)&&d.G==3){try{var p=d.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var g=p;if(g[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)ks(d),xi(d);else break e;ea(d),rt(18)}}else d.za=g[1],0<d.za-d.T&&37500>g[2]&&d.F&&d.v==0&&!d.C&&(d.C=fi(E(d.Za,d),6e3));if(1>=Vl(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Wn(d,11)}else if((o.K||d.g==o)&&ks(d),!T(u))for(g=d.Da.g.parse(u),u=0;u<g.length;u++){let q=g[u];if(d.T=q[0],q=q[1],d.G==2)if(q[0]=="c"){d.K=q[1],d.ia=q[2];const Q=q[3];Q!=null&&(d.la=Q,d.j.info("VER="+d.la));const H=q[4];H!=null&&(d.Aa=H,d.j.info("SVER="+d.Aa));const ee=q[5];ee!=null&&typeof ee=="number"&&0<ee&&(p=1.5*ee,d.L=p,d.j.info("backChannelRequestTimeoutMs_="+p)),p=d;const ne=o.g;if(ne){const Te=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Te){var v=p.h;v.g||Te.indexOf("spdy")==-1&&Te.indexOf("quic")==-1&&Te.indexOf("h2")==-1||(v.j=v.l,v.g=new Set,v.h&&(_i(v,v.h),v.h=null))}if(p.D){const Ie=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Ie&&(p.ya=Ie,Ce(p.I,p.D,Ie))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),p=d;var R=o;if(p.qa=Ci(p,p.J?p.ia:null,p.W),R.K){Ll(p.h,R);var j=R,U=p.L;U&&(j.I=U),j.B&&(ms(j),Er(j)),p.g=R}else Kl(p);0<d.i.length&&ki(d)}else q[0]!="stop"&&q[0]!="close"||Wn(d,7);else d.G==3&&(q[0]=="stop"||q[0]=="close"?q[0]=="stop"?Wn(d,7):As(d):q[0]!="noop"&&d.l&&d.l.ta(q),d.v=0)}}Sn(4)}catch{}}var ys=class{constructor(o,u){this.g=o,this.map=u}};function Bt(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vi(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vl(o){return o.h?1:o.g?o.g.size:0}function vs(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function _i(o,u){o.g?o.g.add(u):o.h=u}function Ll(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Bt.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ml(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const d of o.g.values())u=u.concat(d.D);return u}return O(o.i)}function jl(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(h(o)){for(var u=[],d=o.length,p=0;p<d;p++)u.push(o[p]);return u}u=[],d=0;for(p in o)u[d++]=o[p];return u}function Fl(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(h(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(const p in o)u[d++]=p;return u}}}function Bo(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(h(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Fl(o),p=jl(o),g=p.length,v=0;v<g;v++)u.call(void 0,p[v],d&&d[v],o)}var $o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gt(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var p=o[d].indexOf("="),g=null;if(0<=p){var v=o[d].substring(0,p);g=o[d].substring(p+1)}else v=o[d];u(v,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function xn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof xn){this.h=o.h,$n(this,o.j),this.o=o.o,this.g=o.g,wi(this,o.s),this.l=o.l;var u=o.i,d=new Ti;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),Ho(this,d),this.m=o.m}else o&&(u=String(o).match($o))?(this.h=!1,$n(this,u[1]||"",!0),this.o=Tr(u[2]||""),this.g=Tr(u[3]||"",!0),wi(this,u[4]),this.l=Tr(u[5]||"",!0),Ho(this,u[6]||"",!0),this.m=Tr(u[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}xn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ir(u,Wo,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ir(u,Wo,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(Ir(d,d.charAt(0)=="/"?Ei:Ul,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",Ir(d,dh)),o.join("")};function Xt(o){return new xn(o)}function $n(o,u,d){o.j=d?Tr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function wi(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Ho(o,u,d){u instanceof Ti?(o.i=u,fh(o.i,o.h)):(d||(u=Ir(u,hh)),o.i=new Ti(u,o.h))}function Ce(o,u,d){o.i.set(u,d)}function _s(o){return Ce(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Tr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ir(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,ws),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function ws(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Wo=/[#\/\?@]/g,Ul=/[#\?:]/g,Ei=/[#\?]/g,hh=/[#\?@]/g,dh=/#/g;function Ti(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function kn(o){o.g||(o.g=new Map,o.h=0,o.i&&gt(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}t=Ti.prototype,t.add=function(o,u){kn(this),this.i=null,o=Ar(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Es(o,u){kn(o),u=Ar(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Sr(o,u){return kn(o),u=Ar(o,u),o.g.has(u)}t.forEach=function(o,u){kn(this),this.g.forEach(function(d,p){d.forEach(function(g){o.call(u,g,p,this)},this)},this)},t.na=function(){kn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let p=0;p<u.length;p++){const g=o[p];for(let v=0;v<g.length;v++)d.push(u[p])}return d},t.V=function(o){kn(this);let u=[];if(typeof o=="string")Sr(this,o)&&(u=u.concat(this.g.get(Ar(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},t.set=function(o,u){return kn(this),this.i=null,o=Ar(this,o),Sr(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},t.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function zl(o,u,d){Es(o,u),0<d.length&&(o.i=null,o.g.set(Ar(o,u),O(d)),o.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var p=u[d];const v=encodeURIComponent(String(p)),R=this.V(p);for(p=0;p<R.length;p++){var g=v;R[p]!==""&&(g+="="+encodeURIComponent(String(R[p]))),o.push(g)}}return this.i=o.join("&")};function Ar(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function fh(o,u){u&&!o.j&&(kn(o),o.i=null,o.g.forEach(function(d,p){var g=p.toLowerCase();p!=g&&(Es(this,p),zl(this,g,d))},o)),o.j=u}function ph(o,u){const d=new kt;if(c.Image){const p=new Image;p.onload=b(un,d,"TestLoadImage: loaded",!0,u,p),p.onerror=b(un,d,"TestLoadImage: error",!1,u,p),p.onabort=b(un,d,"TestLoadImage: abort",!1,u,p),p.ontimeout=b(un,d,"TestLoadImage: timeout",!1,u,p),c.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function Go(o,u){const d=new kt,p=new AbortController,g=setTimeout(()=>{p.abort(),un(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(v=>{clearTimeout(g),v.ok?un(d,"TestPingServer: ok",!0,u):un(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(g),un(d,"TestPingServer: error",!1,u)})}function un(o,u,d,p,g){try{g&&(g.onload=null,g.onerror=null,g.onabort=null,g.ontimeout=null),p(d)}catch{}}function Bl(){this.g=new Dl}function Ii(o,u,d){const p=d||"";try{Bo(o,function(g,v){let R=g;m(g)&&(R=us(g)),u.push(p+v+"="+encodeURIComponent(R))})}catch(g){throw u.push(p+"type="+encodeURIComponent("_badmap")),g}}function yt(o){this.l=o.Ub||null,this.j=o.eb||!1}V(yt,ci),yt.prototype.g=function(){return new Ts(this.l,this.j)},yt.prototype.i=function(o){return function(){return o}}({});function Ts(o,u){Be.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ts,Be),t=Ts.prototype,t.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,kr(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,kr(this)),this.g&&(this.readyState=3,kr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$l(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function $l(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?xr(this):kr(this),this.readyState==3&&$l(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,xr(this))},t.Qa=function(o){this.g&&(this.response=o,xr(this))},t.ga=function(){this.g&&xr(this)};function xr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,kr(o)}t.setRequestHeader=function(o,u){this.u.append(o,u)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function kr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ts.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Is(o){let u="";return W(o,function(d,p){u+=p,u+=":",u+=d,u+=`\r
`}),u}function Si(o,u,d){e:{for(p in d){var p=!1;break e}p=!0}p||(d=Is(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):Ce(o,u,d))}function Ae(o){Be.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ae,Be);var Hl=/^https?$/i,qo=["POST","PUT"];t=Ae.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,u,d,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mi.g(),this.v=this.o?En(this.o):En(mi),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(v){Wl(this,v);return}if(o=d||"",d=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var g in p)d.set(g,p[g]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const v of p.keys())d.set(v,p.get(v));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(d.keys()).find(v=>v.toLowerCase()=="content-type"),g=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(qo,u,void 0))||p||g||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[v,R]of d)this.g.setRequestHeader(v,R);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qo(this),this.u=!0,this.g.send(o),this.u=!1}catch(v){Wl(this,v)}};function Wl(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Ko(o),Ai(o)}function Ko(o){o.A||(o.A=!0,Ke(o,"complete"),Ke(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ke(this,"complete"),Ke(this,"abort"),Ai(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hn(this):this.bb())},t.bb=function(){Hn(this)};function Hn(o){if(o.h&&typeof a<"u"&&(!o.v[1]||cn(o)!=4||o.Z()!=2)){if(o.u&&cn(o)==4)jo(o.Ea,0,o);else if(Ke(o,"readystatechange"),cn(o)==4){o.h=!1;try{const R=o.Z();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var p;if(p=R===0){var g=String(o.D).match($o)[1]||null;!g&&c.self&&c.self.location&&(g=c.self.location.protocol.slice(0,-1)),p=!Hl.test(g?g.toLowerCase():"")}d=p}if(d)Ke(o,"complete"),Ke(o,"success");else{o.m=6;try{var v=2<cn(o)?o.g.statusText:""}catch{v=""}o.l=v+" ["+o.Z()+"]",Ko(o)}}finally{Ai(o)}}}}function Ai(o,u){if(o.g){Qo(o);const d=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ke(o,"ready");try{d.onreadystatechange=p}catch{}}}function Qo(o){o.I&&(c.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function cn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),ch(u)}};function Xo(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Ss(o){const u={};o=(o.g&&2<=cn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(T(o[p]))continue;var d=N(o[p]);const g=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const v=u[g]||[];u[g]=v,v.push(d)}A(u,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function Gl(o){this.Aa=0,this.i=[],this.j=new kt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rr("baseRetryDelayMs",5e3,o),this.cb=Rr("retryDelaySeedMs",1e4,o),this.Wa=Rr("forwardChannelMaxRetries",2,o),this.wa=Rr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Bt(o&&o.concurrentRequestLimit),this.Da=new Bl,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gl.prototype,t.la=8,t.G=1,t.connect=function(o,u,d,p){rt(0),this.W=o,this.H=u||{},d&&p!==void 0&&(this.H.OSID=d,this.H.OAID=p),this.F=this.X,this.I=Ci(this,null,this.W),ki(this)};function As(o){if(Yo(o),o.G==3){var u=o.U++,d=Xt(o.I);if(Ce(d,"SID",o.K),Ce(d,"RID",u),Ce(d,"TYPE","terminate"),Ri(o,d),u=new Dt(o,o.j,u),u.L=2,u.v=_s(Xt(d)),d=!1,c.navigator&&c.navigator.sendBeacon)try{d=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&c.Image&&(new Image().src=u.v,d=!0),d||(u.g=Jl(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Er(u)}Yl(o)}function xi(o){o.g&&(xs(o),o.g.cancel(),o.g=null)}function Yo(o){xi(o),o.u&&(c.clearTimeout(o.u),o.u=null),ks(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function ki(o){if(!vi(o.h)&&!o.s){o.s=!0;var u=o.Ga;ye||Z(),G||(ye(),G=!0),K.add(u,o),o.B=0}}function Jo(o,u){return Vl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=fi(E(o.Ga,o,u),Xl(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const g=new Dt(this,this.j,o);let v=this.o;if(this.S&&(v?(v=w(v),x(v,this.S)):v=this.S),this.m!==null||this.O||(g.H=v,v=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var p=this.i[d];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=ql(this,g,u),d=Xt(this.I),Ce(d,"RID",o),Ce(d,"CVER",22),this.D&&Ce(d,"X-HTTP-Session-Id",this.D),Ri(this,d),v&&(this.O?u="headers="+encodeURIComponent(String(Is(v)))+"&"+u:this.m&&Si(d,this.m,v)),_i(this.h,g),this.Ua&&Ce(d,"TYPE","init"),this.P?(Ce(d,"$req",u),Ce(d,"SID","null"),g.T=!0,fs(g,d,null)):fs(g,d,u),this.G=2}}else this.G==3&&(o?Zo(this,o):this.i.length==0||vi(this.h)||Zo(this))};function Zo(o,u){var d;u?d=u.l:d=o.U++;const p=Xt(o.I);Ce(p,"SID",o.K),Ce(p,"RID",d),Ce(p,"AID",o.T),Ri(o,p),o.m&&o.o&&Si(p,o.m,o.o),d=new Dt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=ql(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),_i(o.h,d),fs(d,p,u)}function Ri(o,u){o.H&&W(o.H,function(d,p){Ce(u,p,d)}),o.l&&Bo({},function(d,p){Ce(u,p,d)})}function ql(o,u,d){d=Math.min(o.i.length,d);var p=o.l?E(o.l.Na,o.l,o):null;e:{var g=o.i;let v=-1;for(;;){const R=["count="+d];v==-1?0<d?(v=g[0].g,R.push("ofs="+v)):v=0:R.push("ofs="+v);let j=!0;for(let U=0;U<d;U++){let q=g[U].g;const Q=g[U].map;if(q-=v,0>q)v=Math.max(0,g[U].g-100),j=!1;else try{Ii(Q,R,"req"+q+"_")}catch{p&&p(Q)}}if(j){p=R.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,p}function Kl(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ye||Z(),G||(ye(),G=!0),K.add(u,o),o.v=0}}function ea(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=fi(E(o.Fa,o),Xl(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=fi(E(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),xi(this),Ql(this))};function xs(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Ql(o){o.g=new Dt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Xt(o.qa);Ce(u,"RID","rpc"),Ce(u,"SID",o.K),Ce(u,"AID",o.T),Ce(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ce(u,"TO",o.ja),Ce(u,"TYPE","xmlhttp"),Ri(o,u),o.m&&o.o&&Si(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=_s(Xt(u)),d.m=null,d.P=!0,Ot(d,o)}t.Za=function(){this.C!=null&&(this.C=null,xi(this),ea(this),rt(19))};function ks(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Rs(o,u){var d=null;if(o.g==u){ks(o),xs(o),o.g=null;var p=2}else if(vs(o.h,u))d=u.D,Ll(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var g=o.B;p=wr(),Ke(p,new Un(p,d)),ki(o)}else Kl(o);else if(g=u.s,g==3||g==0&&0<u.X||!(p==1&&Jo(o,u)||p==2&&ea(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),g){case 1:Wn(o,5);break;case 4:Wn(o,10);break;case 3:Wn(o,6);break;default:Wn(o,2)}}}function Xl(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Wn(o,u){if(o.j.info("Error code "+u),u==2){var d=E(o.fb,o),p=o.Xa;const g=!p;p=new xn(p||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$n(p,"https"),_s(p),g?ph(p.toString(),d):Go(p.toString(),d)}else rt(2);o.G=0,o.l&&o.l.sa(u),Yl(o),Yo(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Yl(o){if(o.G=0,o.ka=[],o.l){const u=Ml(o.h);(u.length!=0||o.i.length!=0)&&(M(o.ka,u),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function Ci(o,u,d){var p=d instanceof xn?Xt(d):new xn(d);if(p.g!="")u&&(p.g=u+"."+p.g),wi(p,p.s);else{var g=c.location;p=g.protocol,u=u?u+"."+g.hostname:g.hostname,g=+g.port;var v=new xn(null);p&&$n(v,p),u&&(v.g=u),g&&wi(v,g),d&&(v.l=d),p=v}return d=o.D,u=o.ya,d&&u&&Ce(p,d,u),Ce(p,"VER",o.la),Ri(o,p),p}function Jl(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Ae(new yt({eb:d})):new Ae(o.pa),u.Ha(o.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zl(){}t=Zl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cs(){}Cs.prototype.g=function(o,u){return new vt(o,u)};function vt(o,u){Be.call(this),this.g=new Gl(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!T(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!T(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new f(this)}V(vt,Be),vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){As(this.g)},vt.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=us(o),o=d);u.i.push(new ys(u.Ya++,o)),u.G==3&&ki(u)},vt.prototype.N=function(){this.g.l=null,delete this.j,As(this.g),delete this.g,vt.aa.N.call(this)};function ta(o){cs.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(const d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(ta,cs);function l(){hi.call(this),this.status=1}V(l,hi);function f(o){this.g=o}V(f,Zl),f.prototype.ua=function(){Ke(this.g,"a")},f.prototype.ta=function(o){Ke(this.g,new ta(o))},f.prototype.sa=function(o){Ke(this.g,new l)},f.prototype.ra=function(){Ke(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,M0=function(){return new Cs},L0=function(){return wr()},V0=Tn,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Fu=hs,pi.COMPLETE="complete",O0=pi,vr.EventType=_r,_r.OPEN="a",_r.CLOSE="b",_r.ERROR="c",_r.MESSAGE="d",Be.prototype.listen=Be.prototype.K,va=vr,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,D0=Ae}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});const Bg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new mp("@firebase/firestore");function ca(){return Yi.logLevel}function Y(t,...e){if(Yi.logLevel<=me.DEBUG){const n=e.map(kp);Yi.debug(`Firestore (${Ro}): ${t}`,...n)}}function hr(t,...e){if(Yi.logLevel<=me.ERROR){const n=e.map(kp);Yi.error(`Firestore (${Ro}): ${t}`,...n)}}function mo(t,...e){if(Yi.logLevel<=me.WARN){const n=e.map(kp);Yi.warn(`Firestore (${Ro}): ${t}`,...n)}}function kp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function ke(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ox{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class Vx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Lx{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ke(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let s=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $i,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=s;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},c=h=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>c(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $i)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new j0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new Tt(e)}}class Mx{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jx{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Mx(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ux{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ke(this.o===void 0);const r=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new Fx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zx(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.timestamp=e}static fromTimestamp(e){return new le(e)}static min(){return new le(new Je(0,0))}static max(){return new le(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ze extends nl{construct(e,n,r){return new ze(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ze(n)}static emptyPath(){return new ze([])}}const Bx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends nl{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return Bx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new re(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new re(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new re(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ze.fromString(e))}static fromName(e){return new ie(ze.fromString(e).popFirst(5))}static empty(){return new ie(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ze(e.slice()))}}function $x(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new ii(i,ie.empty(),e)}function Hx(t){return new ii(t.readTime,t.key,-1)}class ii{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ii(le.min(),ie.empty(),-1)}static max(){return new ii(le.max(),ie.empty(),-1)}}function Wx(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==Gx)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&n()},h=>r(h))}),a=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,a=new Array(s);let c=0;for(let h=0;h<s;h++){const m=h;n(e[m]).next(y=>{a[m]=y,++c,c===s&&r(a)},y=>i(y))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Kx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function El(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Rp.oe=-1;function Jc(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function Qx(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function U0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=s??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new at(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,i,s){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hg(this.data.getIterator())}getIteratorFrom(e){return new Hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Hg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new mn([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new mn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z0("Invalid base64 string: "+s):s}}(e);return new dt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new dt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const Xx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function si(t){if(ke(!!t),typeof t=="string"){let e=0;const n=Xx.exec(t);if(ke(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ji(t){return typeof t=="string"?dt.fromBase64String(t):dt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pp(t){const e=t.mapValue.fields.__previous_value__;return Cp(e)?Pp(e):e}function rl(t){const e=si(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i,s,a,c,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=m}}class il{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cp(t)?4:Zx(t)?9007199254740991:Jx(t)?10:11:ae()}function jn(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=si(i.timestampValue),c=si(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ji(i.bytesValue).isEqual(Ji(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=$e(i.doubleValue),c=$e(s.doubleValue);return a===c?Tc(a)===Tc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return go(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},c=s.mapValue.fields||{};if($g(a)!==$g(c))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(c[h]===void 0||!jn(a[h],c[h])))return!1;return!0}(t,e);default:return ae()}}function sl(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function yo(t,e){if(t===e)return 0;const n=Zi(t),r=Zi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(s,a){const c=$e(s.integerValue||s.doubleValue),h=$e(a.integerValue||a.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(t,e);case 3:return Wg(t.timestampValue,e.timestampValue);case 4:return Wg(rl(t),rl(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(s,a){const c=Ji(s),h=Ji(a);return c.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const c=s.split("/"),h=a.split("/");for(let m=0;m<c.length&&m<h.length;m++){const y=Ee(c[m],h[m]);if(y!==0)return y}return Ee(c.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const c=Ee($e(s.latitude),$e(a.latitude));return c!==0?c:Ee($e(s.longitude),$e(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Gg(t.arrayValue,e.arrayValue);case 10:return function(s,a){var c,h,m,y;const _=s.fields||{},E=a.fields||{},b=(c=_.value)===null||c===void 0?void 0:c.arrayValue,V=(h=E.value)===null||h===void 0?void 0:h.arrayValue,O=Ee(((m=b==null?void 0:b.values)===null||m===void 0?void 0:m.length)||0,((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0);return O!==0?O:Gg(b,V)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Eu.mapValue&&a===Eu.mapValue)return 0;if(s===Eu.mapValue)return 1;if(a===Eu.mapValue)return-1;const c=s.fields||{},h=Object.keys(c),m=a.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let _=0;_<h.length&&_<y.length;++_){const E=Ee(h[_],y[_]);if(E!==0)return E;const b=yo(c[h[_]],m[y[_]]);if(b!==0)return b}return Ee(h.length,y.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Wg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=si(t),r=si(e),i=Ee(n.seconds,r.seconds);return i!==0?i:Ee(n.nanos,r.nanos)}function Gg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=yo(n[i],r[i]);if(s)return s}return Ee(n.length,r.length)}function vo(t){return of(t)}function of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=si(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=of(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${of(n.fields[a])}`;return i+"}"}(t.mapValue):ae()}function af(t){return!!t&&"integerValue"in t}function bp(t){return!!t&&"arrayValue"in t}function qg(t){return!!t&&"nullValue"in t}function Kg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Uu(t){return!!t&&"mapValue"in t}function Jx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Zx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Uu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Na(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=c.popLast()}a?r[c.lastSegment()]=Na(a):i.push(c.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Uu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Uu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new en(Na(this.value))}}function B0(t){const e=[];return Co(t.fields,(n,r)=>{const i=new lt([n]);if(Uu(r)){const s=B0(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,i,s,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new St(e,0,le.min(),le.min(),le.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new St(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new St(e,2,n,le.min(),le.min(),en.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,le.min(),le.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.position=e,this.inclusive=n}}function Qg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ie.comparator(ie.fromName(a.referenceValue),n.key):r=yo(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function e2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{}class Xe extends $0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new n2(e,n,r):n==="array-contains"?new s2(e,r):n==="in"?new o2(e,r):n==="not-in"?new a2(e,r):n==="array-contains-any"?new l2(e,r):new Xe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new r2(e,r):new i2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yo(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends $0{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return H0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function H0(t){return t.op==="and"}function W0(t){return t2(t)&&H0(t)}function t2(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function lf(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(W0(t))return t.filters.map(e=>lf(e)).join(",");{const e=t.filters.map(n=>lf(n)).join(",");return`${t.op}(${e})`}}function G0(t,e){return t instanceof Xe?function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)}(t,e):t instanceof Fn?function(r,i){return i instanceof Fn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&G0(a,i.filters[c]),!0):!1}(t,e):void ae()}function q0(t){return t instanceof Xe?function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(q0).join(" ,")+"}"}(t):"Filter"}class n2 extends Xe{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class r2 extends Xe{constructor(e,n){super(e,"in",n),this.keys=K0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class i2 extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=K0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function K0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class s2 extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bp(n)&&sl(n.arrayValue,this.value)}}class o2 extends Xe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class a2 extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sl(this.value.arrayValue,n)}}class l2 extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}}function Yg(t,e=null,n=[],r=[],i=null,s=null,a=null){return new u2(t,e,n,r,i,s,a)}function Np(t){const e=ue(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vo(r)).join(",")),e.ue=n}return e.ue}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!e2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!G0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xg(t.startAt,e.startAt)&&Xg(t.endAt,e.endAt)}function uf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n=null,r=[],i=[],s=null,a="F",c=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function c2(t,e,n,r,i,s,a,c){return new Zc(t,e,n,r,i,s,a,c)}function Op(t){return new Zc(t)}function Jg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function h2(t){return t.collectionGroup!==null}function Da(t){const e=ue(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new ct(lt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(m=>{m.isInequality()&&(c=c.add(m.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Sc(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Sc(lt.keyField(),r))}return e.ce}function Ln(t){const e=ue(t);return e.le||(e.le=d2(e,Da(t))),e.le}function d2(t,e){if(t.limitType==="F")return Yg(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Sc(i.field,s)});const n=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return Yg(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function cf(t,e,n){return new Zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eh(t,e){return Dp(Ln(t),Ln(e))&&t.limitType===e.limitType}function Q0(t){return`${Np(Ln(t))}|lt:${t.limitType}`}function bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>q0(i)).join(", ")}]`),Jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vo(i)).join(",")),`Target(${r})`}(Ln(t))}; limitType=${t.limitType})`}function th(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ie.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Da(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,h){const m=Qg(a,c,h);return a.inclusive?m<=0:m<0}(r.startAt,Da(r),i)||r.endAt&&!function(a,c,h){const m=Qg(a,c,h);return a.inclusive?m>=0:m>0}(r.endAt,Da(r),i))}(t,e)}function f2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function X0(t){return(e,n)=>{let r=!1;for(const i of Da(t)){const s=p2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function p2(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(s,a,c){const h=a.data.field(s),m=c.data.field(s);return h!==null&&m!==null?yo(h,m):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return U0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new Fe(ie.comparator);function dr(){return m2}const Y0=new Fe(ie.comparator);function _a(...t){let e=Y0;for(const n of t)e=e.insert(n.key,n);return e}function J0(t){let e=Y0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ji(){return Oa()}function Z0(){return Oa()}function Oa(){return new Po(t=>t.toString(),(t,e)=>t.isEqual(e))}const g2=new Fe(ie.comparator),y2=new ct(ie.comparator);function fe(...t){let e=y2;for(const n of t)e=e.add(n);return e}const v2=new ct(Ee);function _2(){return v2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function ew(t){return{integerValue:""+t}}function w2(t,e){return Qx(e)?ew(e):Vp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this._=void 0}}function E2(t,e,n){return t instanceof Ac?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Cp(s)&&(s=Pp(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof _o?nw(t,e):t instanceof ol?rw(t,e):function(i,s){const a=tw(i,s),c=Zg(a)+Zg(i.Pe);return af(a)&&af(i.Pe)?ew(c):Vp(i.serializer,c)}(t,e)}function T2(t,e,n){return t instanceof _o?nw(t,e):t instanceof ol?rw(t,e):n}function tw(t,e){return t instanceof xc?function(r){return af(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ac extends nh{}class _o extends nh{constructor(e){super(),this.elements=e}}function nw(t,e){const n=iw(e);for(const r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ol extends nh{constructor(e){super(),this.elements=e}}function rw(t,e){let n=iw(e);for(const r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}class xc extends nh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Zg(t){return $e(t.integerValue||t.doubleValue)}function iw(t){return bp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.field=e,this.transform=n}}function S2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _o&&i instanceof _o||r instanceof ol&&i instanceof ol?go(r.elements,i.elements,jn):r instanceof xc&&i instanceof xc?jn(r.Pe,i.Pe):r instanceof Ac&&i instanceof Ac}(t.transform,e.transform)}class A2{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rh{}function sw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aw(t.key,nr.none()):new Tl(t.key,t.data,nr.none());{const n=t.data,r=en.empty();let i=new ct(lt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ns(t.key,r,new mn(i.toArray()),nr.none())}}function x2(t,e,n){t instanceof Tl?function(i,s,a){const c=i.value.clone(),h=ty(i.fieldTransforms,s,a.transformResults);c.setAll(h),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(i,s,a){if(!zu(i.precondition,s))return void s.convertToUnknownDocument(a.version);const c=ty(i.fieldTransforms,s,a.transformResults),h=s.data;h.setAll(ow(i)),h.setAll(c),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Tl?function(s,a,c,h){if(!zu(s.precondition,a))return c;const m=s.value.clone(),y=ny(s.fieldTransforms,h,a);return m.setAll(y),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(s,a,c,h){if(!zu(s.precondition,a))return c;const m=ny(s.fieldTransforms,h,a),y=a.data;return y.setAll(ow(s)),y.setAll(m),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(t,e,n,r):function(s,a,c){return zu(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function k2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=tw(r.transform,i||null);s!=null&&(n===null&&(n=en.empty()),n.set(r.field,s))}return n||null}function ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&go(r,i,(s,a)=>S2(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends rh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ns extends rh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ow(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ty(t,e,n){const r=new Map;ke(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,T2(a,c,n[i]))}return r}function ny(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,E2(s,a,e))}return r}class aw extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class R2 extends rh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&x2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Z0();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let c=this.applyToLocalView(a,s.mutatedFields);c=n.has(i.key)?null:c;const h=sw(a,c);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(n,r)=>ey(n,r))&&go(this.baseMutations,e.baseMutations,(n,r)=>ey(n,r))}}class Lp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length);let i=function(){return g2}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new Lp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,ge;function N2(t){switch(t){default:return ae();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function lw(t){if(t===void 0)return hr("GRPC error has no .code"),z.UNKNOWN;switch(t){case We.OK:return z.OK;case We.CANCELLED:return z.CANCELLED;case We.UNKNOWN:return z.UNKNOWN;case We.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case We.INTERNAL:return z.INTERNAL;case We.UNAVAILABLE:return z.UNAVAILABLE;case We.UNAUTHENTICATED:return z.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case We.NOT_FOUND:return z.NOT_FOUND;case We.ALREADY_EXISTS:return z.ALREADY_EXISTS;case We.PERMISSION_DENIED:return z.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case We.ABORTED:return z.ABORTED;case We.OUT_OF_RANGE:return z.OUT_OF_RANGE;case We.UNIMPLEMENTED:return z.UNIMPLEMENTED;case We.DATA_LOSS:return z.DATA_LOSS;default:return ae()}}(ge=We||(We={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Bi([4294967295,4294967295],0);function ry(t){const e=D2().encode(t),n=new N0;return n.update(e),new Uint8Array(n.digest())}function iy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bi([n,r],0),new Bi([i,s],0)]}class Mp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wa(`Invalid padding: ${n}`);if(r<0)throw new wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Bi.fromNumber(r)));return i.compare(O2)===1&&(i=new Bi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ry(e),[r,i]=iy(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Mp(s,i,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=ry(e),[r,i]=iy(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ih(le.min(),i,new Fe(Ee),dr(),fe())}}class Il{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Il(r,n,fe(),fe(),fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uw{constructor(e,n){this.targetId=e,this.me=n}}class cw{constructor(e,n,r=dt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class sy{constructor(){this.fe=0,this.ge=ay(),this.pe=dt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new Il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ay()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class V2{constructor(e){this.Le=e,this.Be=new Map,this.ke=dr(),this.qe=oy(),this.Qe=new Fe(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(uf(s))if(r===0){const a=new ie(s.path);this.Ue(n,a,St.newNoDocument(a,le.min()))}else ke(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),h=c?this.Xe(c,e,a):1;if(h!==0){this.je(n);const m=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,c;try{a=Ji(r).toUint8Array()}catch(h){if(h instanceof z0)return mo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new Mp(a,i,s)}catch(h){return mo(h instanceof wa?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const c=this.Je(a);if(c){if(s.current&&uf(c.target)){const h=new ie(c.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,St.newNoDocument(h,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=fe();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(h=>{const m=this.Je(h);return!m||m.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new ih(e,n,this.Qe,this.ke,r);return this.ke=dr(),this.qe=oy(),this.Qe=new Fe(Ee),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function oy(){return new Fe(ie.comparator)}function ay(){return new Fe(ie.comparator)}const L2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j2={and:"AND",or:"OR"};class F2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hf(t,e){return t.useProto3Json||Jc(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U2(t,e){return kc(t,e.toTimestamp())}function Mn(t){return ke(!!t),le.fromTimestamp(function(n){const r=si(n);return new Je(r.seconds,r.nanos)}(t))}function jp(t,e){return df(t,e).canonicalString()}function df(t,e){const n=function(i){return new ze(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function dw(t){const e=ze.fromString(t);return ke(yw(e)),e}function ff(t,e){return jp(t.databaseId,e.path)}function Qh(t,e){const n=dw(e);if(n.get(1)!==t.databaseId.projectId)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(pw(n))}function fw(t,e){return jp(t.databaseId,e)}function z2(t){const e=dw(t);return e.length===4?ze.emptyPath():pw(e)}function pf(t){return new ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pw(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ly(t,e,n){return{name:ff(t,e),fields:n.value.mapValue.fields}}function B2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(m,y){return m.useProto3Json?(ke(y===void 0||typeof y=="string"),dt.fromBase64String(y||"")):(ke(y===void 0||y instanceof Buffer||y instanceof Uint8Array),dt.fromUint8Array(y||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(m){const y=m.code===void 0?z.UNKNOWN:lw(m.code);return new re(y,m.message||"")}(a);n=new cw(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qh(t,r.document.name),s=Mn(r.document.updateTime),a=r.document.createTime?Mn(r.document.createTime):le.min(),c=new en({mapValue:{fields:r.document.fields}}),h=St.newFoundDocument(i,s,a,c),m=r.targetIds||[],y=r.removedTargetIds||[];n=new Bu(m,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qh(t,r.document),s=r.readTime?Mn(r.readTime):le.min(),a=St.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Bu([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qh(t,r.document),s=r.removedTargetIds||[];n=new Bu([],s,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new b2(i,s),c=r.targetId;n=new uw(c,a)}}return n}function $2(t,e){let n;if(e instanceof Tl)n={update:ly(t,e.key,e.value)};else if(e instanceof aw)n={delete:ff(t,e.key)};else if(e instanceof ns)n={update:ly(t,e.key,e.data),updateMask:J2(e.fieldMask)};else{if(!(e instanceof R2))return ae();n={verify:ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const c=a.transform;if(c instanceof Ac)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _o)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ol)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:U2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae()}(t,e.precondition)),n}function H2(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Mn(i.updateTime):Mn(s);return a.isEqual(le.min())&&(a=Mn(s)),new A2(a,i.transformResults||[])}(n,e))):[]}function W2(t,e){return{documents:[fw(t,e.path)]}}function G2(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fw(t,i);const s=function(m){if(m.length!==0)return gw(Fn.create(m,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(m){if(m.length!==0)return m.map(y=>function(E){return{field:Ns(E.field),direction:Q2(E.dir)}}(y))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=hf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:i}}function q2(t){let e=z2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1);const y=n.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];n.where&&(s=function(_){const E=mw(_);return E instanceof Fn&&W0(E)?E.getFilters():[E]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(E=>function(V){return new Sc(Ds(V.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(E))}(n.orderBy));let c=null;n.limit&&(c=function(_){let E;return E=typeof _=="object"?_.value:_,Jc(E)?null:E}(n.limit));let h=null;n.startAt&&(h=function(_){const E=!!_.before,b=_.values||[];return new Ic(b,E)}(n.startAt));let m=null;return n.endAt&&(m=function(_){const E=!_.before,b=_.values||[];return new Ic(b,E)}(n.endAt)),c2(e,i,a,s,c,"F",h,m)}function K2(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ds(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ds(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ds(n.unaryFilter.field);return Xe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ds(n.unaryFilter.field);return Xe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Xe.create(Ds(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>mw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function Q2(t){return L2[t]}function X2(t){return M2[t]}function Y2(t){return j2[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function Ds(t){return lt.fromServerFormat(t.fieldPath)}function gw(t){return t instanceof Xe?function(n){if(n.op==="=="){if(Kg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(qg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Kg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(qg(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:X2(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(i=>gw(i));return r.length===1?r[0]:{compositeFilter:{op:Y2(n.op),filters:r}}}(t):ae()}function J2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,r,i,s=le.min(),a=le.min(),c=dt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.ct=e}}function ek(t){const e=q2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.un=new nk}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ii.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ii.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class nk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ct(ze.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ct(ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wo(0)}static kn(){return new wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.changes=new Po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,mn.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const i=ji();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=_a();return s.forEach((c,h)=>{a=a.insert(c,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ji();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,i){let s=dr();const a=Oa(),c=function(){return Oa()}();return n.forEach((h,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof ns)?s=s.insert(m.key,m):y!==void 0?(a.set(m.key,y.mutation.getFieldMask()),Va(y.mutation,m,y.mutation.getFieldMask(),Je.now())):a.set(m.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((m,y)=>a.set(m,y)),n.forEach((m,y)=>{var _;return c.set(m,new ik(y,(_=a.get(m))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Oa();let i=new Fe((a,c)=>a-c),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(h=>{const m=n.get(h);if(m===null)return;let y=r.get(h)||mn.empty();y=c.applyToLocalView(m,y),r.set(h,y);const _=(i.get(c.batchId)||fe()).add(h);i=i.insert(c.batchId,_)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),m=h.key,y=h.value,_=Z0();y.forEach(E=>{if(!s.has(E)){const b=sw(n.get(E),r.get(E));b!==null&&_.set(E,b),s=s.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,_))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):h2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(ji());let c=-1,h=s;return a.next(m=>F.forEach(m,(y,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(y)?F.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{h=h.insert(y,E)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,h,m,fe())).next(y=>({batchId:c,changes:J0(y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=_a();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=_a();return this.indexManager.getCollectionParents(e,s).next(c=>F.forEach(c,h=>{const m=function(_,E){return new Zc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,h.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(y=>{y.forEach((_,E)=>{a=a.insert(_,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((h,m)=>{const y=m.getKey();a.get(y)===null&&(a=a.insert(y,St.newInvalidDocument(y)))});let c=_a();return a.forEach((h,m)=>{const y=s.get(h);y!==void 0&&Va(y.mutation,m,mn.empty(),Je.now()),th(n,m)&&(c=c.insert(h,m))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Mn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:ek(i.bundledQuery),readTime:Mn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.overlays=new Fe(ie.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ji();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=ji(),s=n.length+1,a=new ie(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const h=c.getNext().value,m=h.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fe((m,y)=>m-y);const a=this.overlays.getIterator();for(;a.hasNext();){const m=a.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let y=s.get(m.largestBatchId);y===null&&(y=ji(),s=s.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const c=ji(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,y)=>c.set(m,y)),!(c.size()>=i)););return F.resolve(c)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new P2(n,r));let s=this.Ir.get(n);s===void 0&&(s=fe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.Tr=new ct(et.Er),this.dr=new ct(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new et(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new et(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new ze([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new ze([])),r=new et(n,e),i=new et(n,e+1);let s=fe();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new et(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(et.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new C2(s,n,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new et(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);s.push(c)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(Ee);return n.forEach(i=>{const s=new et(i,0),a=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ie.isDocumentKey(s)||(s=s.child(""));const a=new et(new ie(s),0);let c=new ct(Ee);return this.br.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(c=c.add(h.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new et(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.Mr=e,this.docs=function(){return new Fe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=dr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=dr();const a=n.path,c=new ie(a.child("")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:m,value:{document:y}}=h.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||Wx(Hx(y),r)<=0||(i.has(y.key)||th(n,y))&&(s=s.insert(y.key,y.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new hk(this)}getSize(e){return F.resolve(this.size)}}class hk extends rk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.persistence=e,this.Nr=new Po(n=>Np(n),Dp),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Fp,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Rp(0),this.Kr=!1,this.Kr=!0,this.$r=new lk,this.referenceDelegate=e(this),this.Ur=new dk(this),this.indexManager=new tk,this.remoteDocumentCache=function(i){return new ck(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Z2(n),this.Gr=new ok(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ak,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new uk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Y("MemoryPersistence","Starting transaction:",e);const i=new pk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class pk extends qx{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Jr=new Fp,this.Yr=null}static Zr(e){return new Up(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=ie.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=fe(),i=fe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new zp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mI()?8:Kx(xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new mk;return this.Xi(e,n,a).next(c=>{if(s.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ca()<=me.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(ca()<=me.DEBUG&&Y("QueryEngine","Query:",bs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ca()<=me.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):F.resolve())}Yi(e,n){if(Jg(n))return F.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cf(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=fe(...s);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.ts(n,c);return this.ns(n,m,a,h.readTime)?this.Yi(e,cf(n,null,"F")):this.rs(e,m,n,h)}))})))}Zi(e,n,r,i){return Jg(n)||i.isEqual(le.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?F.resolve(null):(ca()<=me.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bs(n)),this.rs(e,a,n,$x(i,-1)).next(c=>c))})}ts(e,n){let r=new ct(X0(e));return n.forEach((i,s)=>{th(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ca()<=me.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",bs(n)),this.Ji.getDocumentsMatchingQuery(e,n,ii.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fe(Ee),this._s=new Po(s=>Np(s),Dp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function vk(t,e,n,r){return new yk(t,e,n,r)}async function vw(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],c=[];let h=fe();for(const m of i){a.push(m.batchId);for(const y of m.mutations)h=h.add(y.key)}for(const m of s){c.push(m.batchId);for(const y of m.mutations)h=h.add(y.key)}return n.localDocuments.getDocuments(r,h).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:c}))})})}function _k(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,h,m,y){const _=m.batch,E=_.keys();let b=F.resolve();return E.forEach(V=>{b=b.next(()=>y.getEntry(h,V)).next(O=>{const M=m.docVersions.get(V);ke(M!==null),O.version.compareTo(M)<0&&(_.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),y.addEntry(O)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(h,_))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=fe();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(h=h.add(c.batch.mutations[m].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _w(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function wk(t,e){const n=ue(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const c=[];e.targetChanges.forEach((y,_)=>{const E=i.get(_);if(!E)return;c.push(n.Ur.removeMatchingKeys(s,y.removedDocuments,_).next(()=>n.Ur.addMatchingKeys(s,y.addedDocuments,_)));let b=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?b=b.withResumeToken(dt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),i=i.insert(_,b),function(O,M,k){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(E,b,y)&&c.push(n.Ur.updateTargetData(s,b))});let h=dr(),m=fe();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,y))}),c.push(Ek(s,a,e.documentUpdates).next(y=>{h=y.Ps,m=y.Is})),!r.isEqual(le.min())){const y=n.Ur.getLastRemoteSnapshotVersion(s).next(_=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(y)}return F.waitFor(c).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,m)).next(()=>h)}).then(s=>(n.os=i,s))}function Ek(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=dr();return n.forEach((c,h)=>{const m=s.get(c);h.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(le.min())?(e.removeEntry(c,h.readTime),a=a.insert(c,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||h.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(c,h)):Y("LocalStore","Ignoring outdated watch update for ",c,". Current version:",m.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function Tk(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ik(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Hr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function mf(t,e,n){const r=ue(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!El(a))throw a;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function uy(t,e,n){const r=ue(t);let i=le.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,m,y){const _=ue(h),E=_._s.get(y);return E!==void 0?F.resolve(_.os.get(E)):_.Ur.getTargetData(m,y)}(r,a,Ln(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(h=>{s=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:le.min(),n?s:fe())).next(c=>(Sk(r,f2(e),c),{documents:c,Ts:s})))}function Sk(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class cy{constructor(){this.activeTargetIds=_2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ak{constructor(){this.so=new cy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new cy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function Xh(){return Tu===null?Tu=function(){return 268435456+Math.round(2147483648*Math.random())}():Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class Ck extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const c=Xh(),h=this.xo(n,r.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${c}:`,h,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,s,a),this.No(n,h,m,i).then(y=>(Y("RestConnection",`Received RPC '${n}' ${c}: `,y),y),y=>{throw mo("RestConnection",`RPC '${n}' ${c} failed with error: `,y,"url: ",h,"request:",i),y})}Lo(n,r,i,s,a,c){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=kk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Xh();return new Promise((a,c)=>{const h=new D0;h.setWithCredentials(!0),h.listenOnce(O0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Fu.NO_ERROR:const y=h.getResponseJson();Y(Et,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),a(y);break;case Fu.TIMEOUT:Y(Et,`RPC '${e}' ${s} timed out`),c(new re(z.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:const _=h.getStatus();if(Y(Et,`RPC '${e}' ${s} failed with status:`,_,"response text:",h.getResponseText()),_>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const V=function(M){const k=M.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(k)>=0?k:z.UNKNOWN}(b.status);c(new re(V,b.message))}else c(new re(z.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new re(z.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{Y(Et,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(i);Y(Et,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",m,r,15)})}Bo(e,n,r){const i=Xh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=M0(),c=L0(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(h.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const y=s.join("");Y(Et,`Creating RPC '${e}' stream ${i}: ${y}`,h);const _=a.createWebChannel(y,h);let E=!1,b=!1;const V=new Rk({Io:M=>{b?Y(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(E||(Y(Et,`Opening RPC '${e}' stream ${i} transport.`),_.open(),E=!0),Y(Et,`RPC '${e}' stream ${i} sending:`,M),_.send(M))},To:()=>_.close()}),O=(M,k,T)=>{M.listen(k,P=>{try{T(P)}catch(L){setTimeout(()=>{throw L},0)}})};return O(_,va.EventType.OPEN,()=>{b||(Y(Et,`RPC '${e}' stream ${i} transport opened.`),V.yo())}),O(_,va.EventType.CLOSE,()=>{b||(b=!0,Y(Et,`RPC '${e}' stream ${i} transport closed`),V.So())}),O(_,va.EventType.ERROR,M=>{b||(b=!0,mo(Et,`RPC '${e}' stream ${i} transport errored:`,M),V.So(new re(z.UNAVAILABLE,"The operation could not be completed")))}),O(_,va.EventType.MESSAGE,M=>{var k;if(!b){const T=M.data[0];ke(!!T);const P=T,L=P.error||((k=P[0])===null||k===void 0?void 0:k.error);if(L){Y(Et,`RPC '${e}' stream ${i} received error:`,L);const $=L.status;let W=function(S){const x=We[S];if(x!==void 0)return lw(x)}($),A=L.message;W===void 0&&(W=z.INTERNAL,A="Unknown error status: "+$+" with message "+L.message),b=!0,V.So(new re(W,A)),_.close()}else Y(Et,`RPC '${e}' stream ${i} received:`,T),V.bo(T)}}),O(c,V0.STAT_EVENT,M=>{M.stat===sf.PROXY?Y(Et,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===sf.NOPROXY&&Y(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.wo()},0),V}}function Yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(t){return new F2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Y("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,i,s,a,c,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ww(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new re(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pk extends Ew{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=B2(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?le.min():a.readTime?Mn(a.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=pf(this.serializer),n.addTarget=function(s,a){let c;const h=a.target;if(c=uf(h)?{documents:W2(s,h)}:{query:G2(s,h)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=hw(s,a.resumeToken);const m=hf(s,a.expectedCount);m!==null&&(c.expectedCount=m)}else if(a.snapshotVersion.compareTo(le.min())>0){c.readTime=kc(s,a.snapshotVersion.toTimestamp());const m=hf(s,a.expectedCount);m!==null&&(c.expectedCount=m)}return c}(this.serializer,e);const r=K2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=pf(this.serializer),n.removeTarget=e,this.a_(n)}}class bk extends Ew{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=H2(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,df(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,df(n,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new re(z.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Dk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hr(n),this.D_=!1):Y("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{rs(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),await async function(h){const m=ue(h);m.L_.add(4),await Sl(m),m.q_.set("Unknown"),m.L_.delete(4),await oh(m)}(this))})}),this.q_=new Dk(r,i)}}async function oh(t){if(rs(t))for(const e of t.B_)await e(!0)}async function Sl(t){for(const e of t.B_)await e(!1)}function Tw(t,e){const n=ue(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wp(n)?Hp(n):bo(n).r_()&&$p(n,e))}function Bp(t,e){const n=ue(t),r=bo(n);n.N_.delete(e),r.r_()&&Iw(n,e),n.N_.size===0&&(r.r_()?r.o_():rs(n)&&n.q_.set("Unknown"))}function $p(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).A_(e)}function Iw(t,e){t.Q_.xe(e),bo(t).R_(e)}function Hp(t){t.Q_=new V2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.q_.v_()}function Wp(t){return rs(t)&&!bo(t).n_()&&t.N_.size>0}function rs(t){return ue(t).L_.size===0}function Sw(t){t.Q_=void 0}async function Vk(t){t.q_.set("Online")}async function Lk(t){t.N_.forEach((e,n)=>{$p(t,e)})}async function Mk(t,e){Sw(t),Wp(t)?(t.q_.M_(e),Hp(t)):t.q_.set("Unknown")}async function jk(t,e,n){if(t.q_.set("Online"),e instanceof cw&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const c of s.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rc(t,r)}else if(e instanceof Bu?t.Q_.Ke(e):e instanceof uw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{const r=await _w(t.localStore);n.compareTo(r)>=0&&await function(s,a){const c=s.Q_.rt(a);return c.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=s.N_.get(m);y&&s.N_.set(m,y.withResumeToken(h.resumeToken,a))}}),c.targetMismatches.forEach((h,m)=>{const y=s.N_.get(h);if(!y)return;s.N_.set(h,y.withResumeToken(dt.EMPTY_BYTE_STRING,y.snapshotVersion)),Iw(s,h);const _=new Hr(y.target,h,m,y.sequenceNumber);$p(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Y("RemoteStore","Failed to raise snapshot:",r),await Rc(t,r)}}async function Rc(t,e,n){if(!El(e))throw e;t.L_.add(1),await Sl(t),t.q_.set("Offline"),n||(n=()=>_w(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await oh(t)})}function Aw(t,e){return e().catch(n=>Rc(t,n,e))}async function ah(t){const e=ue(t),n=oi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fk(e);)try{const i=await Tk(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Uk(e,i)}catch(i){await Rc(e,i)}xw(e)&&kw(e)}function Fk(t){return rs(t)&&t.O_.length<10}function Uk(t,e){t.O_.push(e);const n=oi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xw(t){return rs(t)&&!oi(t).n_()&&t.O_.length>0}function kw(t){oi(t).start()}async function zk(t){oi(t).p_()}async function Bk(t){const e=oi(t);for(const n of t.O_)e.m_(n.mutations)}async function $k(t,e,n){const r=t.O_.shift(),i=Lp.from(r,e,n);await Aw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ah(t)}async function Hk(t,e){e&&oi(t).V_&&await async function(r,i){if(function(a){return N2(a)&&a!==z.ABORTED}(i.code)){const s=r.O_.shift();oi(r).s_(),await Aw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ah(r)}}(t,e),xw(t)&&kw(t)}async function dy(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");const r=rs(n);n.L_.add(3),await Sl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await oh(n)}async function Wk(t,e){const n=ue(t);e?(n.L_.delete(2),await oh(n)):e||(n.L_.add(2),await Sl(n),n.q_.set("Unknown"))}function bo(t){return t.K_||(t.K_=function(n,r,i){const s=ue(n);return s.w_(),new Pk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Vk.bind(null,t),Ro:Lk.bind(null,t),mo:Mk.bind(null,t),d_:jk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wp(t)?Hp(t):t.q_.set("Unknown")):(await t.K_.stop(),Sw(t))})),t.K_}function oi(t){return t.U_||(t.U_=function(n,r,i){const s=ue(n);return s.w_(),new bk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zk.bind(null,t),mo:Hk.bind(null,t),f_:Bk.bind(null,t),g_:$k.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ah(t)):(await t.U_.stop(),t.O_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,c=new Gp(e,n,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qp(t,e){if(hr("AsyncQueue",`${e}: ${t}`),El(t))return new re(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=_a(),this.sortedSet=new Fe(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new no;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.W_=new Fe(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,i,s,a,c,h,m){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=m}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Eo(e,n,no.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qk{constructor(){this.queries=py(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ue(n),s=i.queries;i.queries=py(),s.forEach((a,c)=>{for(const h of c.j_)h.onError(r)})})(this,new re(z.ABORTED,"Firestore shutting down"))}}function py(){return new Po(t=>Q0(t),eh)}async function Kk(t,e){const n=ue(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Gk,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const c=qp(a,`Initialization of query '${bs(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Kp(n)}async function Qk(t,e){const n=ue(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Xk(t,e){const n=ue(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Kp(n)}function Yk(t,e,n){const r=ue(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Kp(t){t.Y_.forEach(e=>{e.next()})}var gf,my;(my=gf||(gf={})).ea="default",my.Cache="cache";class Jk{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class Zk{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=X0(e),this.Ra=new no(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new fy,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,_)=>{const E=i.get(y),b=th(this.query,_)?_:null,V=!!E&&this.mutatedKeys.has(E.key),O=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;E&&b?E.data.isEqual(b.data)?V!==O&&(r.track({type:3,doc:b}),M=!0):this.ga(E,b)||(r.track({type:2,doc:b}),M=!0,(h&&this.Aa(b,h)>0||m&&this.Aa(b,m)<0)&&(c=!0)):!E&&b?(r.track({type:0,doc:b}),M=!0):E&&!b&&(r.track({type:1,doc:E}),M=!0,(h||m)&&(c=!0)),M&&(b?(a=a.add(b),s=O?s.add(y):s.delete(y)):(a=a.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const y=this.query.limitType==="F"?a.last():a.first();a=a.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{Ra:a,fa:r,ns:c,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((y,_)=>function(b,V){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return O(b)-O(V)}(y.type,_.type)||this.Aa(y.doc,_.doc)),this.pa(r),i=i!=null&&i;const c=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,m=h!==this.Ea;return this.Ea=h,a.length!==0||m?{snapshot:new Eo(this.query,e.Ra,s,a,e.mutatedKeys,h===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Cw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Rw(r))}),n}ba(e){this.Ta=e.Ts,this.da=fe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class eR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tR{constructor(e){this.key=e,this.va=!1}}class nR{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Po(c=>Q0(c),eh),this.Ma=new Map,this.xa=new Set,this.Oa=new Fe(ie.comparator),this.Na=new Map,this.La=new Fp,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function rR(t,e,n=!0){const r=Vw(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Pw(r,e,n,!0),i}async function iR(t,e){const n=Vw(t);await Pw(n,e,!0,!1)}async function Pw(t,e,n,r){const i=await Ik(t.localStore,Ln(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await sR(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Tw(t.remoteStore,i),c}async function sR(t,e,n,r,i){t.Ka=(_,E,b)=>async function(O,M,k,T){let P=M.view.ma(k);P.ns&&(P=await uy(O.localStore,M.query,!1).then(({documents:A})=>M.view.ma(A,P)));const L=T&&T.targetChanges.get(M.targetId),$=T&&T.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(P,O.isPrimaryClient,L,$);return yy(O,M.targetId,W.wa),W.snapshot}(t,_,E,b);const s=await uy(t.localStore,e,!0),a=new Zk(e,s.Ts),c=a.ma(s.documents),h=Il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),m=a.applyChanges(c,t.isPrimaryClient,h);yy(t,n,m.wa);const y=new eR(e,n,a);return t.Fa.set(e,y),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function oR(t,e,n){const r=ue(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!eh(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bp(r.remoteStore,i.targetId),yf(r,i.targetId)}).catch(wl)):(yf(r,i.targetId),await mf(r.localStore,i.targetId,!0))}async function aR(t,e){const n=ue(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bp(n.remoteStore,r.targetId))}async function lR(t,e,n){const r=mR(t);try{const i=await function(a,c){const h=ue(a),m=Je.now(),y=c.reduce((b,V)=>b.add(V.key),fe());let _,E;return h.persistence.runTransaction("Locally write mutations","readwrite",b=>{let V=dr(),O=fe();return h.cs.getEntries(b,y).next(M=>{V=M,V.forEach((k,T)=>{T.isValidDocument()||(O=O.add(k))})}).next(()=>h.localDocuments.getOverlayedDocuments(b,V)).next(M=>{_=M;const k=[];for(const T of c){const P=k2(T,_.get(T.key).overlayedDocument);P!=null&&k.push(new ns(T.key,P,B0(P.value.mapValue),nr.exists(!0)))}return h.mutationQueue.addMutationBatch(b,m,k,c)}).next(M=>{E=M;const k=M.applyToLocalDocumentSet(_,O);return h.documentOverlayCache.saveOverlays(b,M.batchId,k)})}).then(()=>({batchId:E.batchId,changes:J0(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,h){let m=a.Ba[a.currentUser.toKey()];m||(m=new Fe(Ee)),m=m.insert(c,h),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,n),await Al(r,i.changes),await ah(r.remoteStore)}catch(i){const s=qp(i,"Failed to persist write");n.reject(s)}}async function bw(t,e){const n=ue(t);try{const r=await wk(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?ke(a.va):i.removedDocuments.size>0&&(ke(a.va),a.va=!1))}),await Al(n,r,e)}catch(r){await wl(r)}}function gy(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const h=ue(a);h.onlineState=c;let m=!1;h.queries.forEach((y,_)=>{for(const E of _.j_)E.Z_(c)&&(m=!0)}),m&&Kp(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uR(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Fe(ie.comparator);a=a.insert(s,St.newNoDocument(s,le.min()));const c=fe().add(s),h=new ih(le.min(),new Map,new Fe(Ee),a,c);await bw(r,h),r.Oa=r.Oa.remove(s),r.Na.delete(e),Qp(r)}else await mf(r.localStore,e,!1).then(()=>yf(r,e,n)).catch(wl)}async function cR(t,e){const n=ue(t),r=e.batch.batchId;try{const i=await _k(n.localStore,e);Dw(n,r,null),Nw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Al(n,i)}catch(i){await wl(i)}}async function hR(t,e,n){const r=ue(t);try{const i=await function(a,c){const h=ue(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,c).next(_=>(ke(_!==null),y=_.keys(),h.mutationQueue.removeMutationBatch(m,_))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);Dw(r,e,n),Nw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Al(r,i)}catch(i){await wl(i)}}function Nw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Dw(t,e,n){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function yf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ow(t,r)})}function Ow(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Bp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Qp(t))}function yy(t,e,n){for(const r of n)r instanceof Rw?(t.La.addReference(r.key,e),dR(t,r)):r instanceof Cw?(Y("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ow(t,r.key)):ae()}function dR(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Y("SyncEngine","New document in limbo: "+n),t.xa.add(r),Qp(t))}function Qp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(ze.fromString(e)),r=t.qa.next();t.Na.set(r,new tR(n)),t.Oa=t.Oa.insert(n,r),Tw(t.remoteStore,new Hr(Ln(Op(n.path)),r,"TargetPurposeLimboResolution",Rp.oe))}}async function Al(t,e,n){const r=ue(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,h)=>{a.push(r.Ka(h,e,n).then(m=>{var y;if((m||n)&&r.isPrimaryClient){const _=m?!m.fromCache:(y=n==null?void 0:n.targetChanges.get(h.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(m){i.push(m);const _=zp.Wi(h.targetId,m);s.push(_)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,m){const y=ue(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>F.forEach(m,E=>F.forEach(E.$i,b=>y.persistence.referenceDelegate.addReference(_,E.targetId,b)).next(()=>F.forEach(E.Ui,b=>y.persistence.referenceDelegate.removeReference(_,E.targetId,b)))))}catch(_){if(!El(_))throw _;Y("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of m){const E=_.targetId;if(!_.fromCache){const b=y.os.get(E),V=b.snapshotVersion,O=b.withLastLimboFreeSnapshotVersion(V);y.os=y.os.insert(E,O)}}}(r.localStore,s))}async function fR(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());const r=await vw(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(c=>{c.forEach(h=>{h.reject(new re(z.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Al(n,r.hs)}}function pR(t,e){const n=ue(t),r=n.Na.get(e);if(r&&r.va)return fe().add(r.key);{let i=fe();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const c=n.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function Vw(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uR.bind(null,e),e.Ca.d_=Xk.bind(null,e.eventManager),e.Ca.$a=Yk.bind(null,e.eventManager),e}function mR(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hR.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vk(this.persistence,new gk,e.initialUser,this.serializer)}Ga(e){return new fk(Up.Zr,this.serializer)}Wa(e){return new Ak}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class vf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fR.bind(null,this.syncEngine),await Wk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qk}()}createDatastore(e){const n=sh(e.databaseInfo.databaseId),r=function(s){return new Ck(s)}(e.databaseInfo);return function(s,a,c,h){return new Nk(s,a,c,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,c){return new Ok(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>gy(this.syncEngine,n,0),function(){return hy.D()?new hy:new xk}())}createSyncEngine(e,n){return function(i,s,a,c,h,m,y){const _=new nR(i,s,a,c,h,m);return y&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ue(i);Y("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Sl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=F0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Y("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Y("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jh(t,e){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function vy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vR(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>dy(e.remoteStore,i)),t._onlineComponents=e}async function vR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await Jh(t,new Cc)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),await Jh(t,new Cc);return t._offlineComponents}async function Lw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),await vy(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),await vy(t,new vf))),t._onlineComponents}function _R(t){return Lw(t).then(e=>e.syncEngine)}async function _y(t){const e=await Lw(t),n=e.eventManager;return n.onListen=rR.bind(null,e.syncEngine),n.onUnlisten=oR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aR.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t,e,n){if(!n)throw new re(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ER(t,e,n,r){if(e===!0&&r===!0)throw new re(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ey(t){if(!ie.isDocumentKey(t))throw new re(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ro(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xp(t);throw new re(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ER("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new re(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ox;switch(r.type){case"firstParty":return new jx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wy.get(n);r&&(Y("ComponentProvider","Removing Datastore"),wy.delete(n),r.terminate())}(this),Promise.resolve()}}function TR(t,e,n,r={}){var i;const s=(t=ro(t,Yp))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Tt.MOCK_USER;else{c=lI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new re(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Tt(m)}t._authCredentials=new Vx(new j0(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lh(this.firestore,e,this._query)}}class rn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}}class al extends lh{constructor(e,n,r){super(e,n,Op(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ie(e))}withConverter(e){return new al(this.firestore,e,this._path)}}function jw(t,e,...n){if(t=_n(t),arguments.length===1&&(e=F0.newId()),wR("doc","path",e),t instanceof Yp){const r=ze.fromString(e,...n);return Ey(r),new rn(t,null,new ie(r))}{if(!(t instanceof rn||t instanceof al))throw new re(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ze.fromString(e,...n));return Ey(r),new rn(t.firestore,t instanceof al?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ww(this,"async_queue_retry"),this.Vu=()=>{const r=Yh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Yh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Yh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new $i;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!El(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Gp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ae()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Sy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Pc extends Yp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Iy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iy(e),this._firestoreClient=void 0,await e}}}function IR(t,e){const n=typeof t=="object"?t:Y_(),r=typeof t=="string"?t:"(default)",i=yp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=oI("firestore");s&&TR(i,...s)}return i}function Fw(t){if(t._terminated)throw new re(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SR(t),t._firestoreClient}function SR(t){var e,n,r;const i=t._freezeSettings(),s=function(c,h,m,y){return new Yx(c,h,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Mw(y.experimentalLongPollingOptions),y.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new yR(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(dt.fromBase64String(e))}catch(n){throw new re(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=/^__.*__$/;class xR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}function Uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class uh{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new uh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Uw(this.Cu)&&AR.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sh(e)}Qu(e,n,r,i=!1){return new uh({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RR(t){const e=t._freezeSettings(),n=sh(t._databaseId);return new kR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CR(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);$w("Data must be an object, but it was:",a,r);const c=zw(r,a);let h,m;if(s.merge)h=new mn(a.fieldMask),m=a.fieldTransforms;else if(s.mergeFields){const y=[];for(const _ of s.mergeFields){const E=bR(e,_,n);if(!a.contains(E))throw new re(z.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);DR(y,E)||y.push(E)}h=new mn(y),m=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,m=a.fieldTransforms;return new xR(new en(c),h,m)}function PR(t,e,n){return new uh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class nm extends Zp{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=PR(this,e,!0),r=this.Ku.map(s=>rm(s,n)),i=new _o(r);return new I2(e.path,i)}isEqual(e){return e instanceof nm&&Za(this.Ku,e.Ku)}}function rm(t,e){if(Bw(t=_n(t)))return $w("Unsupported field value:",e,t),zw(t,e);if(t instanceof Zp)return function(r,i){if(!Uw(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const c of r){let h=rm(c,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),s.push(h),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=_n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Je.fromDate(r);return{timestampValue:kc(i.serializer,s)}}if(r instanceof Je){const s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kc(i.serializer,s)}}if(r instanceof em)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:hw(i.serializer,r._byteString)};if(r instanceof rn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:jp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof tm)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw c.Bu("VectorValues must only contain numeric values.");return Vp(c.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Xp(r)}`)}(t,e)}function zw(t,e){const n={};return U0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,i)=>{const s=rm(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Bw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof em||t instanceof To||t instanceof rn||t instanceof Zp||t instanceof tm)}function $w(t,e,n){if(!Bw(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function bR(t,e,n){if((e=_n(e))instanceof Jp)return e._internalPath;if(typeof e=="string")return Hw(t,e);throw bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const NR=new RegExp("[~\\*/\\[\\]]");function Hw(t,e,n){if(e.search(NR)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jp(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bc(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(s||a)&&(h+=" (found",s&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new re(z.INVALID_ARGUMENT,c+t+h)}function DR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OR extends Ww{data(){return super.data()}}function Gw(t,e){return typeof e=="string"?Hw(t,e):e instanceof Jp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LR{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>$e(a.doubleValue));return new tm(s)}convertGeoPoint(e){return new em($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Pp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=si(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ze.fromString(e);ke(yw(r));const i=new il(r.get(1),r.get(3)),s=new ie(r.popFirst(5));return i.isEqual(n)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qw extends Ww{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $u extends qw{data(e={}){return super.data(e)}}class jR{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ea(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new $u(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const h=new $u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ea(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const h=new $u(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ea(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return c.type!==0&&(m=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),y=a.indexOf(c.doc.key)),{type:FR(c.type),doc:h,oldIndex:m,newIndex:y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}class Kw extends LR{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Qw(t,e,n){t=ro(t,rn);const r=ro(t.firestore,Pc),i=MR(t.converter,e,n);return zR(r,[CR(RR(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nr.none())])}function UR(t,...e){var n,r,i;t=_n(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Sy(e[a])||(s=e[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Sy(e[a])){const _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[a+2]=(i=_.complete)===null||i===void 0?void 0:i.bind(_)}let h,m,y;if(t instanceof rn)m=ro(t.firestore,Pc),y=Op(t._key.path),h={next:_=>{e[a]&&e[a](BR(m,t,_))},error:e[a+1],complete:e[a+2]};else{const _=ro(t,lh);m=ro(_.firestore,Pc),y=_._query;const E=new Kw(m);h={next:b=>{e[a]&&e[a](new jR(m,E,_,b))},error:e[a+1],complete:e[a+2]},VR(t._query)}return function(E,b,V,O){const M=new gR(O),k=new Jk(b,M,V);return E.asyncQueue.enqueueAndForget(async()=>Kk(await _y(E),k)),()=>{M.Za(),E.asyncQueue.enqueueAndForget(async()=>Qk(await _y(E),k))}}(Fw(m),y,c,h)}function zR(t,e){return function(r,i){const s=new $i;return r.asyncQueue.enqueueAndForget(async()=>lR(await _R(r),i,s)),s.promise}(Fw(t),e)}function BR(t,e,n){const r=n.docs.get(e._key),i=new Kw(t);return new qw(t,i,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}function $R(...t){return new nm("arrayUnion",t)}(function(e,n=!0){(function(i){Ro=i})(xo),po(new Qi("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),c=new Pc(new Lx(r.getProvider("auth-internal")),new Ux(r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new re(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(m.options.projectId,y)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),ti(Bg,"4.7.3",e),ti(Bg,"4.7.3","esm2017")})();const HR={apiKey:"AIzaSyBG1uPRdilWM5LuTEe42ElmF9hljJH0Q8U",authDomain:"remi-1e5ca.firebaseapp.com",projectId:"remi-1e5ca",storageBucket:"remi-1e5ca.firebasestorage.app",messagingSenderId:"181320802161",appId:"1:181320802161:web:4a358015b36abf7eaea0d0",measurementId:"G-DM31SX7NHT"},Xw=X_(HR),Nc=Nx(Xw),Yw=IR(Xw),Jw="remi-guitar-tutor",ha=()=>({xp:0,streak:1,completedLessons:[]}),Ay=async t=>{try{return t?await _A(Nc,t):await pA(Nc)}catch(e){return console.warn("Firebase Auth Failed (Network/Config). Falling back to Offline Mode.",e),{uid:"offline_user",isAnonymous:!0}}},WR=(t,e)=>{if(t==="offline_user"||!Nc.currentUser){console.log("Using Local Storage for Progress");const n=localStorage.getItem("remi_progress"),r=n?JSON.parse(n):ha();return e(r),()=>{}}try{const n=jw(Yw,"artifacts",Jw,"users",t,"data","progress");return UR(n,r=>{r.exists()?e(r.data()):(Qw(n,ha()),e(ha()))},r=>{console.warn("Firestore access denied. Falling back to Local Storage.",r);const i=localStorage.getItem("remi_progress");e(i?JSON.parse(i):ha())})}catch(n){console.error("Firestore Error",n);const r=localStorage.getItem("remi_progress");return e(r?JSON.parse(r):ha()),()=>{}}},GR=async(t,e,n,r)=>{const i={xp:((e==null?void 0:e.xp)||0)+r,completedLessons:[...(e==null?void 0:e.completedLessons)||[],n],streak:(e==null?void 0:e.streak)||1};if(localStorage.setItem("remi_progress",JSON.stringify(i)),t!=="offline_user"){try{const s=jw(Yw,"artifacts",Jw,"users",t,"data","progress");await Qw(s,{xp:i.xp,completedLessons:$R(n)},{merge:!0})}catch(s){console.warn("Could not sync to cloud (Permissions/Net). Saved locally.",s)}return i}},qR=[{id:"m1",title:"Module 1: Tuning & Basics",color:"from-blue-500 to-cyan-400"},{id:"m2",title:"Module 2: Essential Chords",color:"from-indigo-500 to-purple-500"},{id:"m3",title:"Module 3: Rock Riffs",color:"from-rose-500 to-orange-400"}],Zh=[{id:"tune_e",moduleId:"m1",level:1,title:"Tune: Low E",description:"The thickest string (6th).",xp:20,type:"note",targetNote:"E",targetOctave:2,ghost:"default",briefing:"Let's tune the 6th string, the thickest one. It should be an E.",prompts:["Pluck the thickest string.","Tune until the needle is green."]},{id:"tune_a",moduleId:"m1",level:2,title:"Tune: A String",description:"The 5th string.",xp:20,type:"note",targetNote:"A",targetOctave:2,ghost:"default",briefing:"Next is the 5th string (A). It's the second thickest.",prompts:["Pluck the 5th string."]},{id:"tune_d",moduleId:"m1",level:3,title:"Tune: D String",description:"The 4th string.",xp:20,type:"note",targetNote:"D",targetOctave:3,ghost:"default",briefing:"Moving down, tune the 4th string to D.",prompts:["Pluck the 4th string."]},{id:"tech_thumb",moduleId:"m1",level:4,title:"Technique: The Claw",description:"Proper left hand form.",xp:50,type:"posture",ghost:"claw",briefing:"Good technique prevents pain. Keep your thumb behind the neck, like a claw.",prompts:["Thumb behind the neck.","Fingers arched."]},{id:"chord_em",moduleId:"m2",level:5,title:"The E Minor Chord",description:"Dark and moody.",xp:100,type:"strum",requiredNotes:["E","G","B"],ghost:"chord_em",chordData:{name:"Em",fingers:[{string:5,fret:2,finger:2},{string:4,fret:2,finger:3}]},briefing:"Place your middle finger on A2 and ring finger on D2. Strum all 6 strings.",prompts:["Ffingers on A2, D2.","Strum everything."]},{id:"chord_g",moduleId:"m2",level:6,title:"G Major Chord",description:"The big bright chord.",xp:150,type:"strum",requiredNotes:["G","B","D"],ghost:"chord_em",chordData:{name:"G",fingers:[{string:6,fret:3,finger:2},{string:5,fret:2,finger:1},{string:1,fret:3,finger:3}]},briefing:"This one uses the whole neck. Middle on Low E (3rd fret). Index on A (2nd fret). Ring on High E (3rd fret).",prompts:["Stretch your fingers.","Strum all 6."]},{id:"riff_smoke",moduleId:"m3",level:7,title:"Smoke on the Water",description:"The legendary riff.",xp:200,type:"note",targetNote:"G",targetOctave:3,ghost:"default",briefing:"0-3-5! Play the open G string, then 3rd fret, then 5th fret. Let's verify you can hit that G note on the 3rd fret Low E.",prompts:["Play Low E, 3rd Fret (G)."]}];function Zw(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Zw(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function KR(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Zw(t))&&(r&&(r+=" "),r+=e);return r}const im="-",QR=t=>{const e=YR(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const c=a.split(im);return c[0]===""&&c.length!==1&&c.shift(),eE(c,e)||XR(a)},getConflictingClassGroupIds:(a,c)=>{const h=n[a]||[];return c&&r[a]?[...h,...r[a]]:h}}},eE=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?eE(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(im);return(a=e.validators.find(({validator:c})=>c(s)))==null?void 0:a.classGroupId},xy=/^\[(.+)\]$/,XR=t=>{if(xy.test(t)){const e=xy.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},YR=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ZR(Object.entries(t.classGroups),n).forEach(([s,a])=>{_f(a,r,s,e)}),r},_f=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:ky(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(JR(i)){_f(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,a])=>{_f(a,ky(e,s),n,r)})})},ky=(t,e)=>{let n=t;return e.split(im).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},JR=t=>t.isThemeGetter,ZR=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([a,c])=>[e+a,c])):s);return[n,i]}):t,eC=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,a)=>{n.set(s,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let a=n.get(s);if(a!==void 0)return a;if((a=r.get(s))!==void 0)return i(s,a),a},set(s,a){n.has(s)?n.set(s,a):i(s,a)}}},tE="!",tC=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,a=c=>{const h=[];let m=0,y=0,_;for(let M=0;M<c.length;M++){let k=c[M];if(m===0){if(k===i&&(r||c.slice(M,M+s)===e)){h.push(c.slice(y,M)),y=M+s;continue}if(k==="/"){_=M;continue}}k==="["?m++:k==="]"&&m--}const E=h.length===0?c:c.substring(y),b=E.startsWith(tE),V=b?E.substring(1):E,O=_&&_>y?_-y:void 0;return{modifiers:h,hasImportantModifier:b,baseClassName:V,maybePostfixModifierPosition:O}};return n?c=>n({className:c,parseClassName:a}):a},nC=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},rC=t=>({cache:eC(t.cacheSize),parseClassName:tC(t),...QR(t)}),iC=/\s+/,sC=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],a=t.trim().split(iC);let c="";for(let h=a.length-1;h>=0;h-=1){const m=a[h],{modifiers:y,hasImportantModifier:_,baseClassName:E,maybePostfixModifierPosition:b}=n(m);let V=!!b,O=r(V?E.substring(0,b):E);if(!O){if(!V){c=m+(c.length>0?" "+c:c);continue}if(O=r(E),!O){c=m+(c.length>0?" "+c:c);continue}V=!1}const M=nC(y).join(":"),k=_?M+tE:M,T=k+O;if(s.includes(T))continue;s.push(T);const P=i(O,V);for(let L=0;L<P.length;++L){const $=P[L];s.push(k+$)}c=m+(c.length>0?" "+c:c)}return c};function oC(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=nE(e))&&(r&&(r+=" "),r+=n);return r}const nE=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=nE(t[r]))&&(n&&(n+=" "),n+=e);return n};function aC(t,...e){let n,r,i,s=a;function a(h){const m=e.reduce((y,_)=>_(y),t());return n=rC(m),r=n.cache.get,i=n.cache.set,s=c,c(h)}function c(h){const m=r(h);if(m)return m;const y=sC(h,n);return i(h,y),y}return function(){return s(oC.apply(null,arguments))}}const be=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},rE=/^\[(?:([a-z-]+):)?(.+)\]$/i,lC=/^\d+\/\d+$/,uC=new Set(["px","full","screen"]),cC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,fC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gn=t=>io(t)||uC.has(t)||lC.test(t),Nr=t=>No(t,"length",TC),io=t=>!!t&&!Number.isNaN(Number(t)),ed=t=>No(t,"number",io),da=t=>!!t&&Number.isInteger(Number(t)),mC=t=>t.endsWith("%")&&io(t.slice(0,-1)),ce=t=>rE.test(t),Dr=t=>cC.test(t),gC=new Set(["length","size","percentage"]),yC=t=>No(t,gC,iE),vC=t=>No(t,"position",iE),_C=new Set(["image","url"]),wC=t=>No(t,_C,SC),EC=t=>No(t,"",IC),fa=()=>!0,No=(t,e,n)=>{const r=rE.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},TC=t=>hC.test(t)&&!dC.test(t),iE=()=>!1,IC=t=>fC.test(t),SC=t=>pC.test(t),AC=()=>{const t=be("colors"),e=be("spacing"),n=be("blur"),r=be("brightness"),i=be("borderColor"),s=be("borderRadius"),a=be("borderSpacing"),c=be("borderWidth"),h=be("contrast"),m=be("grayscale"),y=be("hueRotate"),_=be("invert"),E=be("gap"),b=be("gradientColorStops"),V=be("gradientColorStopPositions"),O=be("inset"),M=be("margin"),k=be("opacity"),T=be("padding"),P=be("saturate"),L=be("scale"),$=be("sepia"),W=be("skew"),A=be("space"),w=be("translate"),S=()=>["auto","contain","none"],x=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",ce,e],C=()=>[ce,e],I=()=>["",Gn,Nr],J=()=>["auto",io,ce],_e=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],te=()=>["solid","dashed","dotted","double","none"],ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",ce],Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],se=()=>[io,ce];return{cacheSize:500,separator:":",theme:{colors:[fa],spacing:[Gn,Nr],blur:["none","",Dr,ce],brightness:se(),borderColor:[t],borderRadius:["none","","full",Dr,ce],borderSpacing:C(),borderWidth:I(),contrast:se(),grayscale:K(),hueRotate:se(),invert:K(),gap:C(),gradientColorStops:[t],gradientColorStopPositions:[mC,Nr],inset:N(),margin:N(),opacity:se(),padding:C(),saturate:se(),scale:se(),sepia:K(),skew:se(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",ce]}],container:["container"],columns:[{columns:[Dr]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._e(),ce]}],overflow:[{overflow:x()}],"overflow-x":[{"overflow-x":x()}],"overflow-y":[{"overflow-y":x()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[O]}],"inset-x":[{"inset-x":[O]}],"inset-y":[{"inset-y":[O]}],start:[{start:[O]}],end:[{end:[O]}],top:[{top:[O]}],right:[{right:[O]}],bottom:[{bottom:[O]}],left:[{left:[O]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",da,ce]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ce]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",da,ce]}],"grid-cols":[{"grid-cols":[fa]}],"col-start-end":[{col:["auto",{span:["full",da,ce]},ce]}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":[fa]}],"row-start-end":[{row:["auto",{span:[da,ce]},ce]}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ce]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ce]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[M]}],mx:[{mx:[M]}],my:[{my:[M]}],ms:[{ms:[M]}],me:[{me:[M]}],mt:[{mt:[M]}],mr:[{mr:[M]}],mb:[{mb:[M]}],ml:[{ml:[M]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ce,e]}],"min-w":[{"min-w":[ce,e,"min","max","fit"]}],"max-w":[{"max-w":[ce,e,"none","full","min","max","fit","prose",{screen:[Dr]},Dr]}],h:[{h:[ce,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ce,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ce,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ce,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Dr,Nr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ed]}],"font-family":[{font:[fa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ce]}],"line-clamp":[{"line-clamp":["none",io,ed]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gn,ce]}],"list-image":[{"list-image":["none",ce]}],"list-style-type":[{list:["none","disc","decimal",ce]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...te(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gn,Nr]}],"underline-offset":[{"underline-offset":["auto",Gn,ce]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ce]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ce]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._e(),vC]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",yC]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wC]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[V]}],"gradient-via-pos":[{via:[V]}],"gradient-to-pos":[{to:[V]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...te(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:te()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...te()]}],"outline-offset":[{"outline-offset":[Gn,ce]}],"outline-w":[{outline:[Gn,Nr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Gn,Nr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Dr,EC]}],"shadow-color":[{shadow:[fa]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...ye(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",Dr,ce]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[_]}],saturate:[{saturate:[P]}],sepia:[{sepia:[$]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[_]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[$]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ce]}],duration:[{duration:se()}],ease:[{ease:["linear","in","out","in-out",ce]}],delay:[{delay:se()}],animate:[{animate:["none","spin","ping","pulse","bounce",ce]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[L]}],"scale-x":[{"scale-x":[L]}],"scale-y":[{"scale-y":[L]}],rotate:[{rotate:[da,ce]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[W]}],"skew-y":[{"skew-y":[W]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ce]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ce]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ce]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gn,Nr,ed]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xC=aC(AC);function kC(...t){return xC(KR(t))}const Fi=pe.forwardRef(({className:t,variant:e="primary",size:n="default",isLoading:r,children:i,...s},a)=>{const c={primary:"bg-white text-slate-950 hover:bg-slate-200 shadow-[0_0_20px_rgba(255,255,255,0.2)]",secondary:"bg-slate-800 text-white hover:bg-slate-700",outline:"border-2 border-slate-700 text-white hover:border-slate-500 hover:bg-slate-800/50",ghost:"text-slate-400 hover:text-white hover:bg-slate-800/30",danger:"bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/20",success:"bg-green-500 text-slate-950 hover:bg-green-400 shadow-[0_0_20px_rgba(74,222,128,0.4)]"},h={default:"h-12 px-6 py-2",sm:"h-9 px-3 text-sm",lg:"h-14 px-8 text-lg",icon:"h-10 w-10 flex items-center justify-center p-0"};return D.jsxs("button",{ref:a,className:kC("inline-flex items-center justify-center rounded-xl font-bold transition-all active:scale-95 disabled:pointer-events-none disabled:opacity-50",c[e],h[n],t),disabled:r,...s,children:[r&&D.jsx(pp,{className:"mr-2 h-4 w-4 animate-spin"}),i]})});Fi.displayName="Button";const RC=({user:t,progress:e,onSelectLesson:n,onOpenTuner:r})=>{const i=(e==null?void 0:e.xp)||0,s=(e==null?void 0:e.completedLessons)||[],a=h=>{const m=Zh.findIndex(y=>y.id===h.id);return m===0?!1:!s.includes(Zh[m-1].id)},c=h=>s.includes(h.id);return D.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 pb-24 relative overflow-hidden",children:[D.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/20 via-slate-950 to-slate-950 pointer-events-none"}),D.jsxs("div",{className:"sticky top-0 z-40 bg-slate-950/80 backdrop-blur-xl border-b border-white/5 px-6 py-4 flex justify-between items-center",children:[D.jsxs("div",{className:"flex items-center space-x-4",children:[D.jsx("div",{className:"w-10 h-10 bg-slate-900 rounded-full flex items-center justify-center border border-slate-800",children:D.jsx(G1,{size:20,className:"text-orange-500 fill-orange-500/20"})}),D.jsxs("div",{children:[D.jsx("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest",children:"Streak"}),D.jsxs("div",{className:"font-bold text-white leading-none",children:[(e==null?void 0:e.streak)||1," Days"]})]})]}),D.jsxs("div",{className:"flex items-center bg-slate-900/50 px-4 py-2 rounded-full border border-white/5 backdrop-blur-md",children:[D.jsx(Y1,{size:16,className:"text-yellow-400 mr-2"}),D.jsxs("span",{className:"font-mono font-bold text-sm bg-gradient-to-r from-yellow-200 to-yellow-500 bg-clip-text text-transparent",children:[i.toLocaleString()," XP"]})]})]}),D.jsx("div",{className:"max-w-md mx-auto p-6 space-y-12 relative z-10",children:qR.map(h=>D.jsxs("div",{className:"space-y-6",children:[D.jsx("div",{className:`text-transparent bg-clip-text bg-gradient-to-r ${h.color} font-black text-2xl uppercase tracking-tighter drop-shadow-sm`,children:h.title}),D.jsx("div",{className:"space-y-4",children:Zh.filter(m=>m.moduleId===h.id).map(m=>{const y=a(m),_=c(m);return D.jsxs("button",{onClick:()=>!y&&n(m),disabled:y,className:`
                                            relative w-full p-1 rounded-3xl text-left transition-all duration-300 group
                                            ${y?"opacity-60 cursor-not-allowed":"hover:scale-105 hover:shadow-2xl hover:shadow-indigo-500/10"}
                                        `,children:[D.jsx("div",{className:`
                                            absolute inset-0 rounded-3xl bg-gradient-to-r opacity-0 group-hover:opacity-100 transition-opacity duration-500
                                            ${_?"from-green-500/20 to-emerald-500/20":"from-indigo-500/20 to-purple-500/20"}
                                        `}),D.jsxs("div",{className:`
                                            relative bg-slate-900/50 backdrop-blur-md border p-5 rounded-[22px] flex items-center justify-between
                                            ${y?"border-slate-800":_?"border-green-900/50":"border-indigo-500/30"}
                                        `,children:[D.jsxs("div",{className:"flex items-center space-x-5",children:[D.jsx("div",{className:`
                                                    w-14 h-14 rounded-2xl flex items-center justify-center font-bold text-lg shadow-inner transition-transform group-hover:scale-110 duration-300
                                                    ${y?"bg-slate-800 text-slate-600":_?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-900/20":"bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-900/20"}
                                                `,children:y?D.jsx(Q1,{size:20}):_?D.jsx(pc,{size:24}):D.jsx(z_,{size:24,fill:"currentColor"})}),D.jsxs("div",{children:[D.jsx("h3",{className:`font-bold text-lg mb-0.5 ${y?"text-slate-500":"text-white"}`,children:m.title}),D.jsx("p",{className:"text-xs text-slate-400 font-medium",children:m.description})]})]}),!y&&!_&&D.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:D.jsx("div",{className:"bg-indigo-500/20 p-2 rounded-full",children:D.jsx(H1,{className:"text-indigo-400 w-5 h-5"})})})]})]},m.id)})})]},h.id))}),D.jsxs("div",{className:"fixed bottom-0 w-full bg-slate-950/80 backdrop-blur-xl border-t border-white/5 p-2 flex justify-around safe-area-bottom z-50",children:[D.jsxs("button",{className:"flex flex-col items-center justify-center w-16 h-16 text-indigo-400 transition-transform active:scale-90",children:[D.jsx(U_,{size:24,className:"mb-1.5"}),D.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:"Learn"})]}),D.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center w-16 h-16 text-slate-500 hover:text-white transition-all active:scale-90",children:[D.jsx(Kd,{size:24,className:"mb-1.5"}),D.jsx("span",{className:"text-[10px] font-bold tracking-wide",children:"Tuner"})]})]})]})},CC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],PC=[{note:"E",octave:2,freq:82.41},{note:"A",octave:2,freq:110},{note:"D",octave:3,freq:146.83},{note:"G",octave:3,freq:196},{note:"B",octave:3,freq:246.94},{note:"E",octave:4,freq:329.63}];class bC{constructor(){this.ctx=null,this.analyser=null,this.stream=null,this.rafId=null,this.callbacks=new Set,this.config={sampleRate:44100,fftSize:4096}}async init(){if(!this.ctx)try{return this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1}}),this.ctx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=this.config.fftSize,this.filter=this.ctx.createBiquadFilter(),this.filter.type="lowpass",this.filter.frequency.value=1e3,this.ctx.createMediaStreamSource(this.stream).connect(this.filter),this.filter.connect(this.analyser),this.startLoop(),!0}catch(e){return console.error("Audio Engine Init Failed:",e),!1}}subscribe(e){return this.callbacks.add(e),()=>this.callbacks.delete(e)}startLoop(){const e=new Uint8Array(this.analyser.frequencyBinCount),n=new Float32Array(this.analyser.frequencyBinCount),r=()=>{this.analyser.getByteFrequencyData(e),this.analyser.getFloatTimeDomainData(n);const i=this.calculateRMS(n),s=this.autoCorrelate(n,this.ctx.sampleRate),a=this.getChromaVector(e,this.ctx.sampleRate);this.pitchBuffer=this.pitchBuffer||[],s>0&&this.pitchBuffer.push(s),this.pitchBuffer.length>5&&this.pitchBuffer.shift();let c=s;if(this.pitchBuffer.length>0){const _=[...this.pitchBuffer].sort((E,b)=>E-b);c=_[Math.floor(_.length/2)]}const h=this.getNoteFromPitch(c),m=this.guessString(c),y={rms:i,pitch:c,note:h.note,cents:h.cents,octave:h.octave,chroma:a,likelyString:m};this.callbacks.forEach(_=>_(y)),this.rafId=requestAnimationFrame(r)};r()}stop(){this.rafId&&cancelAnimationFrame(this.rafId),this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.ctx&&this.ctx.close(),this.ctx=null}calculateRMS(e){let n=0;for(let r=0;r<e.length;r++)n+=e[r]*e[r];return Math.sqrt(n/e.length)}autoCorrelate(e,n){let r=e.length;if(this.calculateRMS(e)<.01)return-1;let s=0,a=r-1,c=.2;for(let T=0;T<r/2;T++)if(Math.abs(e[T])<c){s=T;break}for(let T=1;T<r/2;T++)if(Math.abs(e[r-T])<c){a=r-T;break}e=e.slice(s,a),r=e.length;let h=new Array(r).fill(0);for(let T=0;T<r;T++)for(let P=0;P<r-T;P++)h[T]=h[T]+e[P]*e[P+T];let m=0;for(;h[m]>h[m+1];)m++;let y=-1,_=-1;for(let T=m;T<r;T++)h[T]>y&&(y=h[T],_=T);let E=_,b=h[E-1],V=h[E],O=h[E+1],M=(b+O-2*V)/2,k=(O-b)/2;return M&&(E=E-k/(2*M)),n/E}getNoteFromPitch(e){if(!e||e===-1)return{note:"--",cents:0,octave:0};const n=12*(Math.log(e/440)/Math.log(2)),r=Math.round(n)+69,i=CC[r%12],s=Math.floor(1200*(n-Math.round(n))),a=Math.floor(r/12)-1;return{note:i,cents:s,octave:a}}getChromaVector(e,n){const r=new Array(12).fill(0),i=n/(e.length*2);for(let a=0;a<e.length;a++){const c=a*i;if(c<80||c>1e3)continue;const h=e[a];if(h<20)continue;const m=12*(Math.log(c/440)/Math.log(2)),_=(Math.round(m)+69)%12;_>=0&&(r[_]+=h)}const s=Math.max(...r)||1;return r.map(a=>a/s)}guessString(e){if(!e||e===-1)return null;let n=null,r=1/0;for(let i of PC){const s=Math.abs(e-i.freq);s<r&&(r=s,n=i)}return r<20?`${n.note}${n.octave}`:null}}const so=new bC,NC=async(t,e)=>{const n=e.type==="posture",r=n?"You are Remi, a supportive guitar coach.":"You are Remi, a strict guitar examiner.",i=n?"Check hand shape. Thumb should be behind the neck. Fingers should be arched. If mostly correct, MARK SUCCESS.":`Check finger placement for ${e.title}. Are they on the correct strings? If clearly wrong, FAIL. If plausible, PASS.`,s=`${r} TASK: Verify student technique for lesson: "${e.title}". ${i}. Respond STRICTLY JSON: { "success": boolean, "confidence": number, "feedback": "string" }`;try{const a=await fetch("https://toolkit.rork.com/text/llm/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:s},{role:"user",content:[{type:"text",text:"Verify this."},{type:"image",image:t}]}]})});if(!a.ok)throw new Error("API Error");let h=(await a.json()).completion||"{}";return h.includes("```")&&(h=h.replace(/```json/g,"").replace(/```/g,"").trim()),JSON.parse(h)}catch(a){return console.error("Vision Analysis Failed",a),null}};var DC={};(function(){var t;function e(l){var f=0;return function(){return f<l.length?{done:!1,value:l[f++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,o){return l==Array.prototype||l==Object.prototype||(l[f]=o.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var f=0;f<l.length;++f){var o=l[f];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}var i=r(this);function s(l,f){if(f)e:{var o=i;l=l.split(".");for(var u=0;u<l.length-1;u++){var d=l[u];if(!(d in o))break e;o=o[d]}l=l[l.length-1],u=o[l],f=f(u),f!=u&&f!=null&&n(o,l,{configurable:!0,writable:!0,value:f})}}s("Symbol",function(l){function f(p){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new o(u+(p||"")+"_"+d++,p)}function o(p,g){this.h=p,n(this,"description",{configurable:!0,writable:!0,value:g})}if(l)return l;o.prototype.toString=function(){return this.h};var u="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",d=0;return f}),s("Symbol.iterator",function(l){if(l)return l;l=Symbol("Symbol.iterator");for(var f="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<f.length;o++){var u=i[f[o]];typeof u=="function"&&typeof u.prototype[l]!="function"&&n(u.prototype,l,{configurable:!0,writable:!0,value:function(){return a(e(this))}})}return l});function a(l){return l={next:l},l[Symbol.iterator]=function(){return this},l}function c(l){var f=typeof Symbol<"u"&&Symbol.iterator&&l[Symbol.iterator];return f?f.call(l):{next:e(l)}}function h(l){if(!(l instanceof Array)){l=c(l);for(var f,o=[];!(f=l.next()).done;)o.push(f.value);l=o}return l}var m=typeof Object.assign=="function"?Object.assign:function(l,f){for(var o=1;o<arguments.length;o++){var u=arguments[o];if(u)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])}return l};s("Object.assign",function(l){return l||m});var y=typeof Object.create=="function"?Object.create:function(l){function f(){}return f.prototype=l,new f},_;if(typeof Object.setPrototypeOf=="function")_=Object.setPrototypeOf;else{var E;e:{var b={a:!0},V={};try{V.__proto__=b,E=V.a;break e}catch{}E=!1}_=E?function(l,f){if(l.__proto__=f,l.__proto__!==f)throw new TypeError(l+" is not extensible");return l}:null}var O=_;function M(l,f){if(l.prototype=y(f.prototype),l.prototype.constructor=l,O)O(l,f);else for(var o in f)if(o!="prototype")if(Object.defineProperties){var u=Object.getOwnPropertyDescriptor(f,o);u&&Object.defineProperty(l,o,u)}else l[o]=f[o];l.ya=f.prototype}function k(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function T(l){if(l.m)throw new TypeError("Generator is already running");l.m=!0}k.prototype.u=function(l){this.i=l};function P(l,f){l.l={ma:f,na:!0},l.h=l.s||l.v}k.prototype.return=function(l){this.l={return:l},this.h=this.v};function L(l,f,o){return l.h=o,{value:f}}function $(l){this.h=new k,this.i=l}function W(l,f){T(l.h);var o=l.h.j;return o?A(l,"return"in o?o.return:function(u){return{value:u,done:!0}},f,l.h.return):(l.h.return(f),w(l))}function A(l,f,o,u){try{var d=f.call(l.h.j,o);if(!(d instanceof Object))throw new TypeError("Iterator result "+d+" is not an object");if(!d.done)return l.h.m=!1,d;var p=d.value}catch(g){return l.h.j=null,P(l.h,g),w(l)}return l.h.j=null,u.call(l.h,p),w(l)}function w(l){for(;l.h.h;)try{var f=l.i(l.h);if(f)return l.h.m=!1,{value:f.value,done:!1}}catch(o){l.h.i=void 0,P(l.h,o)}if(l.h.m=!1,l.h.l){if(f=l.h.l,l.h.l=null,f.na)throw f.ma;return{value:f.return,done:!0}}return{value:void 0,done:!0}}function S(l){this.next=function(f){return T(l.h),l.h.j?f=A(l,l.h.j.next,f,l.h.u):(l.h.u(f),f=w(l)),f},this.throw=function(f){return T(l.h),l.h.j?f=A(l,l.h.j.throw,f,l.h.u):(P(l.h,f),f=w(l)),f},this.return=function(f){return W(l,f)},this[Symbol.iterator]=function(){return this}}function x(l){function f(u){return l.next(u)}function o(u){return l.throw(u)}return new Promise(function(u,d){function p(g){g.done?u(g.value):Promise.resolve(g.value).then(f,o).then(p,d)}p(l.next())})}function N(l){return x(new S(new $(l)))}s("Promise",function(l){function f(g){this.i=0,this.j=void 0,this.h=[],this.u=!1;var v=this.l();try{g(v.resolve,v.reject)}catch(R){v.reject(R)}}function o(){this.h=null}function u(g){return g instanceof f?g:new f(function(v){v(g)})}if(l)return l;o.prototype.i=function(g){if(this.h==null){this.h=[];var v=this;this.j(function(){v.m()})}this.h.push(g)};var d=i.setTimeout;o.prototype.j=function(g){d(g,0)},o.prototype.m=function(){for(;this.h&&this.h.length;){var g=this.h;this.h=[];for(var v=0;v<g.length;++v){var R=g[v];g[v]=null;try{R()}catch(j){this.l(j)}}}this.h=null},o.prototype.l=function(g){this.j(function(){throw g})},f.prototype.l=function(){function g(j){return function(U){R||(R=!0,j.call(v,U))}}var v=this,R=!1;return{resolve:g(this.I),reject:g(this.m)}},f.prototype.I=function(g){if(g===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof f)this.L(g);else{e:switch(typeof g){case"object":var v=g!=null;break e;case"function":v=!0;break e;default:v=!1}v?this.F(g):this.s(g)}},f.prototype.F=function(g){var v=void 0;try{v=g.then}catch(R){this.m(R);return}typeof v=="function"?this.M(v,g):this.s(g)},f.prototype.m=function(g){this.v(2,g)},f.prototype.s=function(g){this.v(1,g)},f.prototype.v=function(g,v){if(this.i!=0)throw Error("Cannot settle("+g+", "+v+"): Promise already settled in state"+this.i);this.i=g,this.j=v,this.i===2&&this.K(),this.H()},f.prototype.K=function(){var g=this;d(function(){if(g.D()){var v=i.console;typeof v<"u"&&v.error(g.j)}},1)},f.prototype.D=function(){if(this.u)return!1;var g=i.CustomEvent,v=i.Event,R=i.dispatchEvent;return typeof R>"u"?!0:(typeof g=="function"?g=new g("unhandledrejection",{cancelable:!0}):typeof v=="function"?g=new v("unhandledrejection",{cancelable:!0}):(g=i.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g)),g.promise=this,g.reason=this.j,R(g))},f.prototype.H=function(){if(this.h!=null){for(var g=0;g<this.h.length;++g)p.i(this.h[g]);this.h=null}};var p=new o;return f.prototype.L=function(g){var v=this.l();g.T(v.resolve,v.reject)},f.prototype.M=function(g,v){var R=this.l();try{g.call(v,R.resolve,R.reject)}catch(j){R.reject(j)}},f.prototype.then=function(g,v){function R(Q,H){return typeof Q=="function"?function(ee){try{j(Q(ee))}catch(ne){U(ne)}}:H}var j,U,q=new f(function(Q,H){j=Q,U=H});return this.T(R(g,j),R(v,U)),q},f.prototype.catch=function(g){return this.then(void 0,g)},f.prototype.T=function(g,v){function R(){switch(j.i){case 1:g(j.j);break;case 2:v(j.j);break;default:throw Error("Unexpected state: "+j.i)}}var j=this;this.h==null?p.i(R):this.h.push(R),this.u=!0},f.resolve=u,f.reject=function(g){return new f(function(v,R){R(g)})},f.race=function(g){return new f(function(v,R){for(var j=c(g),U=j.next();!U.done;U=j.next())u(U.value).T(v,R)})},f.all=function(g){var v=c(g),R=v.next();return R.done?u([]):new f(function(j,U){function q(ee){return function(ne){Q[ee]=ne,H--,H==0&&j(Q)}}var Q=[],H=0;do Q.push(void 0),H++,u(R.value).T(q(Q.length-1),U),R=v.next();while(!R.done)})},f});function C(l,f){l instanceof String&&(l+="");var o=0,u=!1,d={next:function(){if(!u&&o<l.length){var p=o++;return{value:f(p,l[p]),done:!1}}return u=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d}s("Array.prototype.keys",function(l){return l||function(){return C(this,function(f){return f})}}),s("Array.prototype.fill",function(l){return l||function(f,o,u){var d=this.length||0;for(0>o&&(o=Math.max(0,d+o)),(u==null||u>d)&&(u=d),u=Number(u),0>u&&(u=Math.max(0,d+u)),o=Number(o||0);o<u;o++)this[o]=f;return this}});function I(l){return l||Array.prototype.fill}s("Int8Array.prototype.fill",I),s("Uint8Array.prototype.fill",I),s("Uint8ClampedArray.prototype.fill",I),s("Int16Array.prototype.fill",I),s("Uint16Array.prototype.fill",I),s("Int32Array.prototype.fill",I),s("Uint32Array.prototype.fill",I),s("Float32Array.prototype.fill",I),s("Float64Array.prototype.fill",I),s("Object.is",function(l){return l||function(f,o){return f===o?f!==0||1/f===1/o:f!==f&&o!==o}}),s("Array.prototype.includes",function(l){return l||function(f,o){var u=this;u instanceof String&&(u=String(u));var d=u.length;for(o=o||0,0>o&&(o=Math.max(o+d,0));o<d;o++){var p=u[o];if(p===f||Object.is(p,f))return!0}return!1}}),s("String.prototype.includes",function(l){return l||function(f,o){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(f,o||0)!==-1}});var J=this||self;function _e(l,f){l=l.split(".");var o=J;l[0]in o||typeof o.execScript>"u"||o.execScript("var "+l[0]);for(var u;l.length&&(u=l.shift());)l.length||f===void 0?o[u]&&o[u]!==Object.prototype[u]?o=o[u]:o=o[u]={}:o[u]=f}function te(l){var f;e:{if((f=J.navigator)&&(f=f.userAgent))break e;f=""}return f.indexOf(l)!=-1}var ye=Array.prototype.map?function(l,f){return Array.prototype.map.call(l,f,void 0)}:function(l,f){for(var o=l.length,u=Array(o),d=typeof l=="string"?l.split(""):l,p=0;p<o;p++)p in d&&(u[p]=f.call(void 0,d[p],p,l));return u},G={},K=null;function Z(l){var f=l.length,o=3*f/4;o%3?o=Math.floor(o):"=.".indexOf(l[f-1])!=-1&&(o="=.".indexOf(l[f-2])!=-1?o-2:o-1);var u=new Uint8Array(o),d=0;return se(l,function(p){u[d++]=p}),d!==o?u.subarray(0,d):u}function se(l,f){function o(R){for(;u<l.length;){var j=l.charAt(u++),U=K[j];if(U!=null)return U;if(!/^[\s\xa0]*$/.test(j))throw Error("Unknown base64 encoding at char: "+j)}return R}he();for(var u=0;;){var d=o(-1),p=o(0),g=o(64),v=o(64);if(v===64&&d===-1)break;f(d<<2|p>>4),g!=64&&(f(p<<4&240|g>>2),v!=64&&f(g<<6&192|v))}}function he(){if(!K){K={};for(var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),f=["+/=","+/","-_=","-_.","-_"],o=0;5>o;o++){var u=l.concat(f[o].split(""));G[o]=u;for(var d=0;d<u.length;d++){var p=u[d];K[p]===void 0&&(K[p]=d)}}}}var Se=typeof Uint8Array<"u",pt=!(te("Trident")||te("MSIE"))&&typeof J.btoa=="function";function Nt(l){if(!pt){var f;f===void 0&&(f=0),he(),f=G[f];for(var o=Array(Math.floor(l.length/3)),u=f[64]||"",d=0,p=0;d<l.length-2;d+=3){var g=l[d],v=l[d+1],R=l[d+2],j=f[g>>2];g=f[(g&3)<<4|v>>4],v=f[(v&15)<<2|R>>6],R=f[R&63],o[p++]=j+g+v+R}switch(j=0,R=u,l.length-d){case 2:j=l[d+1],R=f[(j&15)<<2]||u;case 1:l=l[d],o[p]=f[l>>2]+f[(l&3)<<4|j>>4]+R+u}return o.join("")}for(f="";10240<l.length;)f+=String.fromCharCode.apply(null,l.subarray(0,10240)),l=l.subarray(10240);return f+=String.fromCharCode.apply(null,l),btoa(f)}var mt=RegExp("[-_.]","g");function an(l){switch(l){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function xl(l){if(!pt)return Z(l);mt.test(l)&&(l=l.replace(mt,an)),l=atob(l);for(var f=new Uint8Array(l.length),o=0;o<l.length;o++)f[o]=l.charCodeAt(o);return f}var kl;function mr(){return kl||(kl=new Uint8Array(0))}var wn={},Do=typeof Uint8Array.prototype.slice=="function",Ve=0,qe=0;function is(l){var f=0>l;l=Math.abs(l);var o=l>>>0;l=Math.floor((l-o)/4294967296),f&&(o=c(Cl(o,l)),f=o.next().value,l=o.next().value,o=f),Ve=o>>>0,qe=l>>>0}var Rl=typeof BigInt=="function";function Cl(l,f){return f=~f,l?l=~l+1:f+=1,[l,f]}function Pl(l,f){this.i=l>>>0,this.h=f>>>0}function Oo(l){if(!l)return ss||(ss=new Pl(0,0));if(!/^-?\d+$/.test(l))return null;if(16>l.length)is(Number(l));else if(Rl)l=BigInt(l),Ve=Number(l&BigInt(4294967295))>>>0,qe=Number(l>>BigInt(32)&BigInt(4294967295));else{var f=+(l[0]==="-");qe=Ve=0;for(var o=l.length,u=f,d=(o-f)%6+f;d<=o;u=d,d+=6)u=Number(l.slice(u,d)),qe*=1e6,Ve=1e6*Ve+u,4294967296<=Ve&&(qe+=Ve/4294967296|0,Ve%=4294967296);f&&(f=c(Cl(Ve,qe)),l=f.next().value,f=f.next().value,Ve=l,qe=f)}return new Pl(Ve,qe)}var ss;function Vo(l,f){return Error("Invalid wire type: "+l+" (at position "+f+")")}function Lo(){return Error("Failed to read varint, encoding is invalid.")}function os(l,f){return Error("Tried to read past the end of the data "+f+" > "+l)}function ln(){throw Error("Invalid UTF8")}function Mo(l,f){return f=String.fromCharCode.apply(null,f),l==null?f:l+f}var Be=void 0,Ke,as=typeof TextDecoder<"u",jo,bl=typeof TextEncoder<"u",Nl;function gr(l){if(l!==wn)throw Error("illegal external caller")}function yr(l,f){if(gr(f),this.V=l,l!=null&&l.length===0)throw Error("ByteString should be constructed with non-empty values")}function ls(){return Nl||(Nl=new yr(null,wn))}function us(l){gr(wn);var f=l.V;return f=f==null||Se&&f!=null&&f instanceof Uint8Array?f:typeof f=="string"?xl(f):null,f==null?f:l.V=f}function ch(l){if(typeof l=="string")return{buffer:xl(l),C:!1};if(Array.isArray(l))return{buffer:new Uint8Array(l),C:!1};if(l.constructor===Uint8Array)return{buffer:l,C:!1};if(l.constructor===ArrayBuffer)return{buffer:new Uint8Array(l),C:!1};if(l.constructor===yr)return{buffer:us(l)||mr(),C:!0};if(l instanceof Uint8Array)return{buffer:new Uint8Array(l.buffer,l.byteOffset,l.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Dl(l,f){this.i=null,this.m=!1,this.h=this.j=this.l=0,ci(this,l,f)}function ci(l,f,o){o=o===void 0?{}:o,l.S=o.S===void 0?!1:o.S,f&&(f=ch(f),l.i=f.buffer,l.m=f.C,l.l=0,l.j=l.i.length,l.h=l.l)}Dl.prototype.reset=function(){this.h=this.l};function En(l,f){if(l.h=f,f>l.j)throw os(l.j,f)}function vr(l){var f=l.i,o=l.h,u=f[o++],d=u&127;if(u&128&&(u=f[o++],d|=(u&127)<<7,u&128&&(u=f[o++],d|=(u&127)<<14,u&128&&(u=f[o++],d|=(u&127)<<21,u&128&&(u=f[o++],d|=u<<28,u&128&&f[o++]&128&&f[o++]&128&&f[o++]&128&&f[o++]&128&&f[o++]&128)))))throw Lo();return En(l,o),d}function _r(l,f){if(0>f)throw Error("Tried to read a negative byte length: "+f);var o=l.h,u=o+f;if(u>l.j)throw os(f,l.j-o);return l.h=u,o}var cs=[];function hi(){this.h=[]}hi.prototype.length=function(){return this.h.length},hi.prototype.end=function(){var l=this.h;return this.h=[],l};function Tn(l,f,o){for(;0<o||127<f;)l.h.push(f&127|128),f=(f>>>7|o<<25)>>>0,o>>>=7;l.h.push(f)}function In(l,f){for(;127<f;)l.h.push(f&127|128),f>>>=7;l.h.push(f)}function wr(l,f){if(cs.length){var o=cs.pop();ci(o,l,f),l=o}else l=new Dl(l,f);this.h=l,this.j=this.h.h,this.i=this.l=-1,this.setOptions(f)}wr.prototype.setOptions=function(l){l=l===void 0?{}:l,this.ca=l.ca===void 0?!1:l.ca},wr.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function Fo(l){var f=l.h;if(f.h==f.j)return!1;l.j=l.h.h;var o=vr(l.h)>>>0;if(f=o>>>3,o&=7,!(0<=o&&5>=o))throw Vo(o,l.j);if(1>f)throw Error("Invalid field number: "+f+" (at position "+l.j+")");return l.l=f,l.i=o,!0}function Sn(l){switch(l.i){case 0:if(l.i!=0)Sn(l);else e:{l=l.h;for(var f=l.h,o=f+10,u=l.i;f<o;)if(!(u[f++]&128)){En(l,f);break e}throw Lo()}break;case 1:l=l.h,En(l,l.h+8);break;case 2:l.i!=2?Sn(l):(f=vr(l.h)>>>0,l=l.h,En(l,l.h+f));break;case 5:l=l.h,En(l,l.h+4);break;case 3:f=l.l;do{if(!Fo(l))throw Error("Unmatched start-group tag: stream EOF");if(l.i==4){if(l.l!=f)throw Error("Unmatched end-group tag");break}Sn(l)}while(!0);break;default:throw Vo(l.i,l.j)}}var di=[];function rt(){this.j=[],this.i=0,this.h=new hi}function Un(l,f){f.length!==0&&(l.j.push(f),l.i+=f.length)}function fi(l,f){if(f=f.R){Un(l,l.h.end());for(var o=0;o<f.length;o++)Un(l,us(f[o])||mr())}}var kt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function zn(l,f){return kt?l[kt]|=f:l.A!==void 0?l.A|=f:(Object.defineProperties(l,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}}),f)}function Ol(l,f){kt?l[kt]&&(l[kt]&=~f):l.A!==void 0&&(l.A&=~f)}function Re(l){var f;return kt?f=l[kt]:f=l.A,f??0}function Qt(l,f){kt?l[kt]=f:l.A!==void 0?l.A=f:Object.defineProperties(l,{A:{value:f,configurable:!0,writable:!0,enumerable:!1}})}function Uo(l){return zn(l,1),l}function hs(l,f){Qt(f,(l|0)&-51)}function pi(l,f){Qt(f,(l|18)&-41)}var mi={};function Bn(l){return l!==null&&typeof l=="object"&&!Array.isArray(l)&&l.constructor===Object}var Dt,zo=[];Qt(zo,23),Dt=Object.freeze(zo);function ds(l){if(Re(l.o)&2)throw Error("Cannot mutate an immutable Message")}function gi(l){var f=l.length;(f=f?l[f-1]:void 0)&&Bn(f)?f.g=1:(f={},l.push((f.g=1,f)))}function fs(l){var f=l.i+l.G;return l.B||(l.B=l.o[f]={})}function Ot(l,f){return f===-1?null:f>=l.i?l.B?l.B[f]:void 0:l.o[f+l.G]}function zt(l,f,o,u){ds(l),yi(l,f,o,u)}function yi(l,f,o,u){l.j&&(l.j=void 0),f>=l.i||u?fs(l)[f]=o:(l.o[f+l.G]=o,(l=l.B)&&f in l&&delete l[f])}function Er(l,f,o,u){var d=Ot(l,f);Array.isArray(d)||(d=Dt);var p=Re(d);if(p&1||Uo(d),u)p&2||zn(d,2),o&1||Object.freeze(d);else{u=!(o&2);var g=p&2;o&1||!g?u&&p&16&&!g&&Ol(d,16):(d=Uo(Array.prototype.slice.call(d)),yi(l,f,d))}return d}function ps(l,f){var o=Ot(l,f),u=o==null?o:typeof o=="number"||o==="NaN"||o==="Infinity"||o==="-Infinity"?Number(o):void 0;return u!=null&&u!==o&&yi(l,f,u),u}function ms(l,f,o,u,d){l.h||(l.h={});var p=l.h[o],g=Er(l,o,3,d);if(!p){var v=g;p=[];var R=!!(Re(l.o)&16);g=!!(Re(v)&2);var j=v;!d&&g&&(v=Array.prototype.slice.call(v));for(var U=g,q=0;q<v.length;q++){var Q=v[q],H=f,ee=!1;if(ee=ee===void 0?!1:ee,Q=Array.isArray(Q)?new H(Q):ee?new H:void 0,Q!==void 0){H=Q.o;var ne=ee=Re(H);g&&(ne|=2),R&&(ne|=16),ne!=ee&&Qt(H,ne),H=ne,U=U||!!(2&H),p.push(Q)}}return l.h[o]=p,R=Re(v),f=R|33,f=U?f&-9:f|8,R!=f&&(U=v,Object.isFrozen(U)&&(U=Array.prototype.slice.call(U)),Qt(U,f),v=U),j!==v&&yi(l,o,v),(d||u&&g)&&zn(p,2),u&&Object.freeze(p),p}return d||(d=Object.isFrozen(p),u&&!d?Object.freeze(p):!u&&d&&(p=Array.prototype.slice.call(p),l.h[o]=p)),p}function An(l,f,o){var u=!!(Re(l.o)&2);if(f=ms(l,f,o,u,u),l=Er(l,o,3,u),!(u||Re(l)&8)){for(u=0;u<f.length;u++){if(o=f[u],Re(o.o)&2){var d=$o(o,!1);d.j=o}else d=o;o!==d&&(f[u]=d,l[u]=d.o)}zn(l,8)}return f}function Ze(l,f,o){if(o!=null&&typeof o!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof o+": "+o);zt(l,f,o)}function gs(l,f,o,u,d){ds(l);var p=ms(l,o,f,!1,!1);return o=u??new o,l=Er(l,f,2,!1),d!=null?(p.splice(d,0,o),l.splice(d,0,o.o)):(p.push(o),l.push(o.o)),o.C()&&Ol(l,8),o}function ys(l,f){return l??f}function Bt(l,f,o){return o=o===void 0?0:o,ys(ps(l,f),o)}var vi;function Vl(l){switch(typeof l){case"number":return isFinite(l)?l:String(l);case"object":if(l)if(Array.isArray(l)){if(Re(l)&128)return l=Array.prototype.slice.call(l),gi(l),l}else{if(Se&&l!=null&&l instanceof Uint8Array)return Nt(l);if(l instanceof yr){var f=l.V;return f==null?"":typeof f=="string"?f:l.V=Nt(f)}}}return l}function vs(l,f,o,u){if(l!=null){if(Array.isArray(l))l=_i(l,f,o,u!==void 0);else if(Bn(l)){var d={},p;for(p in l)d[p]=vs(l[p],f,o,u);l=d}else l=f(l,u);return l}}function _i(l,f,o,u){var d=Re(l);u=u?!!(d&16):void 0,l=Array.prototype.slice.call(l);for(var p=0;p<l.length;p++)l[p]=vs(l[p],f,o,u);return o(d,l),l}function Ll(l){return l.ja===mi?l.toJSON():Vl(l)}function Ml(l,f){l&128&&gi(f)}function jl(l,f,o){if(o=o===void 0?pi:o,l!=null){if(Se&&l instanceof Uint8Array)return l.length?new yr(new Uint8Array(l),wn):ls();if(Array.isArray(l)){var u=Re(l);return u&2?l:f&&!(u&32)&&(u&16||u===0)?(Qt(l,u|2),l):(l=_i(l,jl,u&4?pi:o,!0),f=Re(l),f&4&&f&2&&Object.freeze(l),l)}return l.ja===mi?Bo(l):l}}function Fl(l,f,o,u,d,p,g){if(l=l.h&&l.h[o]){if(u=Re(l),u&2?u=l:(p=ye(l,Bo),pi(u,p),Object.freeze(p),u=p),ds(f),g=u==null?Dt:Uo([]),u!=null){for(p=!!u.length,l=0;l<u.length;l++){var v=u[l];p=p&&!(Re(v.o)&2),g[l]=v.o}p=(p?8:0)|1,l=Re(g),(l&p)!==p&&(Object.isFrozen(g)&&(g=Array.prototype.slice.call(g)),Qt(g,l|p)),f.h||(f.h={}),f.h[o]=u}else f.h&&(f.h[o]=void 0);yi(f,o,g,d)}else zt(f,o,jl(u,p,g),d)}function Bo(l){return Re(l.o)&2||(l=$o(l,!0),zn(l.o,2)),l}function $o(l,f){var o=l.o,u=[];zn(u,16);var d=l.constructor.h;if(d&&u.push(d),d=l.B,d){u.length=o.length,u.fill(void 0,u.length,o.length);var p={};u[u.length-1]=p}Re(o)&128&&gi(u),f=f||l.C()?pi:hs,p=l.constructor,vi=u,u=new p(u),vi=void 0,l.R&&(u.R=l.R.slice()),p=!!(Re(o)&16);for(var g=d?o.length-1:o.length,v=0;v<g;v++)Fl(l,u,v-l.G,o[v],!1,p,f);if(d)for(var R in d)Fl(l,u,+R,d[R],!0,p,f);return u}function gt(l,f,o){l==null&&(l=vi),vi=void 0;var u=this.constructor.i||0,d=0<u,p=this.constructor.h,g=!1;if(l==null){l=p?[p]:[];var v=48,R=!0;d&&(u=0,v|=128),Qt(l,v)}else{if(!Array.isArray(l)||p&&p!==l[0])throw Error();var j=v=zn(l,0);if((R=(16&j)!==0)&&((g=(32&j)!==0)||(j|=32)),d){if(128&j)u=0;else if(0<l.length){var U=l[l.length-1];if(Bn(U)&&"g"in U){u=0,j|=128,delete U.g;var q=!0,Q;for(Q in U){q=!1;break}q&&l.pop()}}}else if(128&j)throw Error();v!==j&&Qt(l,j)}this.G=(p?0:-1)-u,this.h=void 0,this.o=l;e:{if(p=this.o.length,u=p-1,p&&(p=this.o[u],Bn(p))){this.B=p,this.i=u-this.G;break e}f!==void 0&&-1<f?(this.i=Math.max(f,u+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!d&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(o){f=R&&!g&&!0,d=this.i;var H;for(R=0;R<o.length;R++)g=o[R],g<d?(g+=this.G,(u=l[g])?xn(u,f):l[g]=Dt):(H||(H=fs(this)),(u=H[g])?xn(u,f):H[g]=Dt)}}gt.prototype.toJSON=function(){return _i(this.o,Ll,Ml)},gt.prototype.C=function(){return!!(Re(this.o)&2)};function xn(l,f){if(Array.isArray(l)){var o=Re(l),u=1;!f||o&2||(u|=16),(o&u)!==u&&Qt(l,o|u)}}gt.prototype.ja=mi,gt.prototype.toString=function(){return this.o.toString()};function Xt(l,f,o){if(o){var u={},d;for(d in o){var p=o[d],g=p.qa;g||(u.J=p.wa||p.oa.W,p.ia?(u.aa=Wo(p.ia),g=function(v){return function(R,j,U){return v.J(R,j,U,v.aa)}}(u)):p.ka?(u.Z=Ul(p.da.P,p.ka),g=function(v){return function(R,j,U){return v.J(R,j,U,v.Z)}}(u)):g=u.J,p.qa=g),g(f,l,p.da),u={J:u.J,aa:u.aa,Z:u.Z}}}fi(f,l)}var $n=Symbol();function wi(l,f,o){return l[$n]||(l[$n]=function(u,d){return f(u,d,o)})}function Ho(l){var f=l[$n];if(!f){var o=Go(l);f=function(u,d){return un(u,d,o)},l[$n]=f}return f}function Ce(l){var f=l.ia;if(f)return Ho(f);if(f=l.va)return wi(l.da.P,f,l.ka)}function _s(l){var f=Ce(l),o=l.da,u=l.oa.U;return f?function(d,p){return u(d,p,o,f)}:function(d,p){return u(d,p,o)}}function Tr(l,f){var o=l[f];return typeof o=="function"&&o.length===0&&(o=o(),l[f]=o),Array.isArray(o)&&(Sr in o||Ei in o||0<o.length&&typeof o[0]=="function")?o:void 0}function Ir(l,f,o,u,d,p){f.P=l[0];var g=1;if(l.length>g&&typeof l[g]!="number"){var v=l[g++];o(f,v)}for(;g<l.length;){o=l[g++];for(var R=g+1;R<l.length&&typeof l[R]!="number";)R++;switch(v=l[g++],R-=g,R){case 0:u(f,o,v);break;case 1:(R=Tr(l,g))?(g++,d(f,o,v,R)):u(f,o,v,l[g++]);break;case 2:R=g++,R=Tr(l,R),d(f,o,v,R,l[g++]);break;case 3:p(f,o,v,l[g++],l[g++],l[g++]);break;case 4:p(f,o,v,l[g++],l[g++],l[g++],l[g++]);break;default:throw Error("unexpected number of binary field arguments: "+R)}}return f}var ws=Symbol();function Wo(l){var f=l[ws];if(!f){var o=Es(l);f=function(u,d){return Bl(u,d,o)},l[ws]=f}return f}function Ul(l,f){var o=l[ws];return o||(o=function(u,d){return Xt(u,d,f)},l[ws]=o),o}var Ei=Symbol();function hh(l,f){l.push(f)}function dh(l,f,o){l.push(f,o.W)}function Ti(l,f,o,u){var d=Wo(u),p=Es(u).P,g=o.W;l.push(f,function(v,R,j){return g(v,R,j,p,d)})}function kn(l,f,o,u,d,p){var g=Ul(u,p),v=o.W;l.push(f,function(R,j,U){return v(R,j,U,u,g)})}function Es(l){var f=l[Ei];return f||(f=Ir(l,l[Ei]=[],hh,dh,Ti,kn),Sr in l&&Ei in l&&(l.length=0),f)}var Sr=Symbol();function zl(l,f){l[0]=f}function Ar(l,f,o,u){var d=o.U;l[f]=u?function(p,g,v){return d(p,g,v,u)}:d}function fh(l,f,o,u,d){var p=o.U,g=Ho(u),v=Go(u).P;l[f]=function(R,j,U){return p(R,j,U,v,g,d)}}function ph(l,f,o,u,d,p,g){var v=o.U,R=wi(u,d,p);l[f]=function(j,U,q){return v(j,U,q,u,R,g)}}function Go(l){var f=l[Sr];return f||(f=Ir(l,l[Sr]={},zl,Ar,fh,ph),Sr in l&&Ei in l&&(l.length=0),f)}function un(l,f,o){for(;Fo(f)&&f.i!=4;){var u=f.l,d=o[u];if(!d){var p=o[0];p&&(p=p[u])&&(d=o[u]=_s(p))}if(!d||!d(f,l,u)){d=f,u=l,p=d.j,Sn(d);var g=d;if(!g.ca){if(d=g.h.h-p,g.h.h=p,g=g.h,d==0)d=ls();else{if(p=_r(g,d),g.S&&g.m)d=g.i.subarray(p,p+d);else{g=g.i;var v=p;d=p+d,d=v===d?mr():Do?g.slice(v,d):new Uint8Array(g.subarray(v,d))}d=d.length==0?ls():new yr(d,wn)}(p=u.R)?p.push(d):u.R=[d]}}}return l}function Bl(l,f,o){for(var u=o.length,d=u%2==1,p=d?1:0;p<u;p+=2)(0,o[p+1])(f,l,o[p]);Xt(l,f,d?o[0]:void 0)}function Ii(l,f){return{U:l,W:f}}var yt=Ii(function(l,f,o){if(l.i!==5)return!1;l=l.h;var u=l.i,d=l.h,p=u[d],g=u[d+1],v=u[d+2];return u=u[d+3],En(l,l.h+4),g=(p<<0|g<<8|v<<16|u<<24)>>>0,l=2*(g>>31)+1,p=g>>>23&255,g&=8388607,zt(f,o,p==255?g?NaN:1/0*l:p==0?l*Math.pow(2,-149)*g:l*Math.pow(2,p-150)*(g+Math.pow(2,23))),!0},function(l,f,o){if(f=ps(f,o),f!=null){In(l.h,8*o+5),l=l.h;var u=+f;u===0?0<1/u?Ve=qe=0:(qe=0,Ve=2147483648):isNaN(u)?(qe=0,Ve=2147483647):(u=(o=0>u?-2147483648:0)?-u:u,34028234663852886e22<u?(qe=0,Ve=(o|2139095040)>>>0):11754943508222875e-54>u?(u=Math.round(u/Math.pow(2,-149)),qe=0,Ve=(o|u)>>>0):(f=Math.floor(Math.log(u)/Math.LN2),u*=Math.pow(2,-f),u=Math.round(8388608*u),16777216<=u&&++f,qe=0,Ve=(o|f+127<<23|u&8388607)>>>0)),o=Ve,l.h.push(o>>>0&255),l.h.push(o>>>8&255),l.h.push(o>>>16&255),l.h.push(o>>>24&255)}}),Ts=Ii(function(l,f,o){if(l.i!==0)return!1;var u=l.h,d=0,p=l=0,g=u.i,v=u.h;do{var R=g[v++];d|=(R&127)<<p,p+=7}while(32>p&&R&128);for(32<p&&(l|=(R&127)>>4),p=3;32>p&&R&128;p+=7)R=g[v++],l|=(R&127)<<p;if(En(u,v),128>R)u=d>>>0,R=l>>>0,(l=R&2147483648)&&(u=~u+1>>>0,R=~R>>>0,u==0&&(R=R+1>>>0)),u=4294967296*R+(u>>>0);else throw Lo();return zt(f,o,l?-u:u),!0},function(l,f,o){f=Ot(f,o),f!=null&&(typeof f=="string"&&Oo(f),f!=null&&(In(l.h,8*o),typeof f=="number"?(l=l.h,is(f),Tn(l,Ve,qe)):(o=Oo(f),Tn(l.h,o.i,o.h))))}),$l=Ii(function(l,f,o){return l.i!==0?!1:(zt(f,o,vr(l.h)),!0)},function(l,f,o){if(f=Ot(f,o),f!=null&&f!=null)if(In(l.h,8*o),l=l.h,o=f,0<=o)In(l,o);else{for(f=0;9>f;f++)l.h.push(o&127|128),o>>=7;l.h.push(1)}}),xr=Ii(function(l,f,o){if(l.i!==2)return!1;var u=vr(l.h)>>>0;l=l.h;var d=_r(l,u);if(l=l.i,as){var p=l,g;(g=Ke)||(g=Ke=new TextDecoder("utf-8",{fatal:!0})),l=d+u,p=d===0&&l===p.length?p:p.subarray(d,l);try{var v=g.decode(p)}catch(q){if(Be===void 0){try{g.decode(new Uint8Array([128]))}catch{}try{g.decode(new Uint8Array([97])),Be=!0}catch{Be=!1}}throw!Be&&(Ke=void 0),q}}else{v=d,u=v+u,d=[];for(var R=null,j,U;v<u;)j=l[v++],128>j?d.push(j):224>j?v>=u?ln():(U=l[v++],194>j||(U&192)!==128?(v--,ln()):d.push((j&31)<<6|U&63)):240>j?v>=u-1?ln():(U=l[v++],(U&192)!==128||j===224&&160>U||j===237&&160<=U||((p=l[v++])&192)!==128?(v--,ln()):d.push((j&15)<<12|(U&63)<<6|p&63)):244>=j?v>=u-2?ln():(U=l[v++],(U&192)!==128||(j<<28)+(U-144)>>30||((p=l[v++])&192)!==128||((g=l[v++])&192)!==128?(v--,ln()):(j=(j&7)<<18|(U&63)<<12|(p&63)<<6|g&63,j-=65536,d.push((j>>10&1023)+55296,(j&1023)+56320))):ln(),8192<=d.length&&(R=Mo(R,d),d.length=0);v=Mo(R,d)}return zt(f,o,v),!0},function(l,f,o){if(f=Ot(f,o),f!=null){var u=!1;if(u=u===void 0?!1:u,bl){if(u&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(f))throw Error("Found an unpaired surrogate");f=(jo||(jo=new TextEncoder)).encode(f)}else{for(var d=0,p=new Uint8Array(3*f.length),g=0;g<f.length;g++){var v=f.charCodeAt(g);if(128>v)p[d++]=v;else{if(2048>v)p[d++]=v>>6|192;else{if(55296<=v&&57343>=v){if(56319>=v&&g<f.length){var R=f.charCodeAt(++g);if(56320<=R&&57343>=R){v=1024*(v-55296)+R-56320+65536,p[d++]=v>>18|240,p[d++]=v>>12&63|128,p[d++]=v>>6&63|128,p[d++]=v&63|128;continue}else g--}if(u)throw Error("Found an unpaired surrogate");v=65533}p[d++]=v>>12|224,p[d++]=v>>6&63|128}p[d++]=v&63|128}}f=d===p.length?p:p.subarray(0,d)}In(l.h,8*o+2),In(l.h,f.length),Un(l,l.h.end()),Un(l,f)}}),kr=Ii(function(l,f,o,u,d){if(l.i!==2)return!1;f=gs(f,o,u),o=l.h.j,u=vr(l.h)>>>0;var p=l.h.h+u,g=p-o;if(0>=g&&(l.h.j=p,d(f,l,void 0,void 0,void 0),g=p-l.h.h),g)throw Error("Message parsing ended unexpectedly. Expected to read "+(u+" bytes, instead read "+(u-g)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return l.h.h=p,l.h.j=o,!0},function(l,f,o,u,d){if(f=An(f,u,o),f!=null)for(u=0;u<f.length;u++){var p=l;In(p.h,8*o+2);var g=p.h.end();Un(p,g),g.push(p.i),p=g,d(f[u],l),g=l;var v=p.pop();for(v=g.i+g.h.length()-v;127<v;)p.push(v&127|128),v>>>=7,g.i++;p.push(v),g.i++}});function Is(l){return function(f,o){e:{if(di.length){var u=di.pop();u.setOptions(o),ci(u.h,f,o),f=u}else f=new wr(f,o);try{var d=Go(l),p=un(new d.P,f,d);break e}finally{d=f.h,d.i=null,d.m=!1,d.l=0,d.j=0,d.h=0,d.S=!1,f.l=-1,f.i=-1,100>di.length&&di.push(f)}p=void 0}return p}}function Si(l){return function(){var f=new rt;Bl(this,f,Es(l)),Un(f,f.h.end());for(var o=new Uint8Array(f.i),u=f.j,d=u.length,p=0,g=0;g<d;g++){var v=u[g];o.set(v,p),p+=v.length}return f.j=[o],o}}function Ae(l){gt.call(this,l)}M(Ae,gt);var Hl=[Ae,1,$l,2,yt,3,xr,4,xr];Ae.prototype.l=Si(Hl);function qo(l){gt.call(this,l,-1,Wl)}M(qo,gt),qo.prototype.addClassification=function(l,f){return gs(this,1,Ae,l,f),this};var Wl=[1],Ko=Is([qo,1,kr,Hl]);function Hn(l){gt.call(this,l)}M(Hn,gt);var Ai=[Hn,1,yt,2,yt,3,yt,4,yt,5,yt];Hn.prototype.l=Si(Ai);function Qo(l){gt.call(this,l,-1,cn)}M(Qo,gt);var cn=[1],Xo=Is([Qo,1,kr,Ai]);function Ss(l){gt.call(this,l)}M(Ss,gt);var Rr=[Ss,1,yt,2,yt,3,yt,4,yt,5,yt,6,Ts],Gl=Is(Rr);Ss.prototype.l=Si(Rr);function As(l,f,o){if(o=l.createShader(o===0?l.VERTEX_SHADER:l.FRAGMENT_SHADER),l.shaderSource(o,f),l.compileShader(o),!l.getShaderParameter(o,l.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+l.getShaderInfoLog(o));return o}function xi(l){return An(l,Ae,1).map(function(f){var o=Ot(f,1);return{index:o??0,score:Bt(f,2),label:Ot(f,3)!=null?ys(Ot(f,3),""):void 0,displayName:Ot(f,4)!=null?ys(Ot(f,4),""):void 0}})}function Yo(l){return{x:Bt(l,1),y:Bt(l,2),z:Bt(l,3),visibility:ps(l,4)!=null?Bt(l,4):void 0}}function ki(l){return l.map(function(f){return An(Xo(f),Hn,1).map(Yo)})}function Jo(l,f){this.i=l,this.h=f,this.m=0}function Zo(l,f,o){return Ri(l,f),typeof l.h.canvas.transferToImageBitmap=="function"?Promise.resolve(l.h.canvas.transferToImageBitmap()):o?Promise.resolve(l.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(l.h.canvas):(l.j===void 0&&(l.j=document.createElement("canvas")),new Promise(function(u){l.j.height=l.h.canvas.height,l.j.width=l.h.canvas.width,l.j.getContext("2d",{}).drawImage(l.h.canvas,0,0,l.h.canvas.width,l.h.canvas.height),u(l.j)}))}function Ri(l,f){var o=l.h;if(l.s===void 0){var u=As(o,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),d=As(o,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),p=o.createProgram();if(o.attachShader(p,u),o.attachShader(p,d),o.linkProgram(p),!o.getProgramParameter(p,o.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+o.getProgramInfoLog(p));u=l.s=p,o.useProgram(u),d=o.getUniformLocation(u,"sampler0"),l.l={O:o.getAttribLocation(u,"aVertex"),N:o.getAttribLocation(u,"aTex"),xa:d},l.v=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,l.v),o.enableVertexAttribArray(l.l.O),o.vertexAttribPointer(l.l.O,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),l.u=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,l.u),o.enableVertexAttribArray(l.l.N),o.vertexAttribPointer(l.l.N,2,o.FLOAT,!1,0,0),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,null),o.uniform1i(d,0)}u=l.l,o.useProgram(l.s),o.canvas.width=f.width,o.canvas.height=f.height,o.viewport(0,0,f.width,f.height),o.activeTexture(o.TEXTURE0),l.i.bindTexture2d(f.glName),o.enableVertexAttribArray(u.O),o.bindBuffer(o.ARRAY_BUFFER,l.v),o.vertexAttribPointer(u.O,2,o.FLOAT,!1,0,0),o.enableVertexAttribArray(u.N),o.bindBuffer(o.ARRAY_BUFFER,l.u),o.vertexAttribPointer(u.N,2,o.FLOAT,!1,0,0),o.bindFramebuffer(o.DRAW_FRAMEBUFFER?o.DRAW_FRAMEBUFFER:o.FRAMEBUFFER,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.colorMask(!0,!0,!0,!0),o.drawArrays(o.TRIANGLE_FAN,0,4),o.disableVertexAttribArray(u.O),o.disableVertexAttribArray(u.N),o.bindBuffer(o.ARRAY_BUFFER,null),l.i.bindTexture2d(0)}function ql(l){this.h=l}var Kl=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ea(l,f){return f+l}function xs(l,f){window[l]=f}function Ql(l){var f=document.createElement("script");return f.setAttribute("src",l),f.setAttribute("crossorigin","anonymous"),new Promise(function(o){f.addEventListener("load",function(){o()},!1),f.addEventListener("error",function(){o()},!1),document.body.appendChild(f)})}function ks(){return N(function(l){switch(l.h){case 1:return l.s=2,L(l,WebAssembly.instantiate(Kl),4);case 4:l.h=3,l.s=0;break;case 2:return l.s=0,l.l=null,l.return(!1);case 3:return l.return(!0)}})}function Rs(l){if(this.h=l,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=l&&l.locateFile||ea,typeof window=="object")var f=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")f=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=f,l.options){f=c(Object.keys(l.options));for(var o=f.next();!o.done;o=f.next()){o=o.value;var u=l.options[o].default;u!==void 0&&(this.l[o]=typeof u=="function"?u():u)}}}t=Rs.prototype,t.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function Xl(l){var f,o,u,d,p,g,v,R,j,U,q;return N(function(Q){switch(Q.h){case 1:return l.ga?(f=l.h.files===void 0?[]:typeof l.h.files=="function"?l.h.files(l.l):l.h.files,L(Q,ks(),2)):Q.return();case 2:if(o=Q.i,typeof window=="object")return xs("createMediapipeSolutionsWasm",{locateFile:l.locateFile}),xs("createMediapipeSolutionsPackedAssets",{locateFile:l.locateFile}),g=f.filter(function(H){return H.data!==void 0}),v=f.filter(function(H){return H.data===void 0}),R=Promise.all(g.map(function(H){var ee=Ci(l,H.url);if(H.path!==void 0){var ne=H.path;ee=ee.then(function(Te){return l.overrideFile(ne,Te),Promise.resolve(Te)})}return ee})),j=Promise.all(v.map(function(H){return H.simd===void 0||H.simd&&o||!H.simd&&!o?Ql(l.locateFile(H.url,l.ha)):Promise.resolve()})).then(function(){var H,ee,ne;return N(function(Te){if(Te.h==1)return H=window.createMediapipeSolutionsWasm,ee=window.createMediapipeSolutionsPackedAssets,ne=l,L(Te,H(ee),2);ne.i=Te.i,Te.h=0})}),U=function(){return N(function(H){return l.h.graph&&l.h.graph.url?H=L(H,Ci(l,l.h.graph.url),0):(H.h=0,H=void 0),H})}(),L(Q,Promise.all([j,R,U]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return u=f.filter(function(H){return H.simd===void 0||H.simd&&o||!H.simd&&!o}).map(function(H){return l.locateFile(H.url,l.ha)}),importScripts.apply(null,h(u)),d=l,L(Q,createMediapipeSolutionsWasm(Module),6);case 6:d.i=Q.i,l.m=new OffscreenCanvas(1,1),l.i.canvas=l.m,p=l.i.GL.createContext(l.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),l.i.GL.makeContextCurrent(p),Q.h=4;break;case 7:if(l.m=document.createElement("canvas"),q=l.m.getContext("webgl2",{}),!q&&(q=l.m.getContext("webgl",{}),!q))return alert("Failed to create WebGL canvas context when passing video frame."),Q.return();l.K=q,l.i.canvas=l.m,l.i.createContext(l.m,!0,!0,{});case 4:l.j=new l.i.SolutionWasm,l.ga=!1,Q.h=0}})}function Wn(l){var f,o,u,d,p,g,v,R;return N(function(j){if(j.h==1){if(l.h.graph&&l.h.graph.url&&l.fa===l.h.graph.url)return j.return();if(l.u=!0,!l.h.graph||!l.h.graph.url){j.h=2;return}return l.fa=l.h.graph.url,L(j,Ci(l,l.h.graph.url),3)}for(j.h!=2&&(f=j.i,l.j.loadGraph(f)),o=c(Object.keys(l.D)),u=o.next();!u.done;u=o.next())d=u.value,l.j.overrideFile(d,l.D[d]);if(l.D={},l.h.listeners)for(p=c(l.h.listeners),g=p.next();!g.done;g=p.next())v=g.value,Cs(l,v);R=l.l,l.l={},l.setOptions(R),j.h=0})}t.reset=function(){var l=this;return N(function(f){l.j&&(l.j.reset(),l.s={},l.v={}),f.h=0})},t.setOptions=function(l,f){var o=this;if(f=f||this.h.options){for(var u=[],d=[],p={},g=c(Object.keys(l)),v=g.next();!v.done;p={X:p.X,Y:p.Y},v=g.next())if(v=v.value,!(v in this.l&&this.l[v]===l[v])){this.l[v]=l[v];var R=f[v];R!==void 0&&(R.onChange&&(p.X=R.onChange,p.Y=l[v],u.push(function(j){return function(){var U;return N(function(q){if(q.h==1)return L(q,j.X(j.Y),2);U=q.i,U===!0&&(o.u=!0),q.h=0})}}(p))),R.graphOptionXref&&(v=Object.assign({},{calculatorName:"",calculatorIndex:0},R.graphOptionXref,{valueNumber:R.type===1?l[v]:0,valueBoolean:R.type===0?l[v]:!1,valueString:R.type===2?l[v]:""}),d.push(v)))}(u.length!==0||d.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(d),this.F=(this.F===void 0?[]:this.F).concat(u))}};function Yl(l){var f,o,u,d,p,g,v;return N(function(R){switch(R.h){case 1:if(!l.u)return R.return();if(!l.F){R.h=2;break}f=c(l.F),o=f.next();case 3:if(o.done){R.h=5;break}return u=o.value,L(R,u(),4);case 4:o=f.next(),R.h=3;break;case 5:l.F=void 0;case 2:if(l.H){for(d=new l.i.GraphOptionChangeRequestList,p=c(l.H),g=p.next();!g.done;g=p.next())v=g.value,d.push_back(v);l.j.changeOptions(d),d.delete(),l.H=void 0}l.u=!1,R.h=0}})}t.initialize=function(){var l=this;return N(function(f){return f.h==1?L(f,Xl(l),2):f.h!=3?L(f,Wn(l),3):L(f,Yl(l),0)})};function Ci(l,f){var o,u;return N(function(d){return f in l.L?d.return(l.L[f]):(o=l.locateFile(f,""),u=fetch(o).then(function(p){return p.arrayBuffer()}),l.L[f]=u,d.return(u))})}t.overrideFile=function(l,f){this.j?this.j.overrideFile(l,f):this.D[l]=f},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(l,f){var o=this,u,d,p,g,v,R,j,U,q;return N(function(Q){switch(Q.h){case 1:return o.h.inputs?(u=1e3*(f??performance.now()),L(Q,o.I,2)):Q.return();case 2:return L(Q,o.initialize(),3);case 3:for(d=new o.i.PacketDataList,p=c(Object.keys(l)),g=p.next();!g.done;g=p.next())if(v=g.value,R=o.h.inputs[v]){e:{var H=l[v];switch(R.type){case"video":var ee=o.s[R.stream];if(ee||(ee=new Jo(o.i,o.K),o.s[R.stream]=ee),ee.m===0&&(ee.m=ee.i.createTexture()),typeof HTMLVideoElement<"u"&&H instanceof HTMLVideoElement)var ne=H.videoWidth,Te=H.videoHeight;else typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(ne=H.naturalWidth,Te=H.naturalHeight):(ne=H.width,Te=H.height);Te={glName:ee.m,width:ne,height:Te},ne=ee.h,ne.canvas.width=Te.width,ne.canvas.height=Te.height,ne.activeTexture(ne.TEXTURE0),ee.i.bindTexture2d(ee.m),ne.texImage2D(ne.TEXTURE_2D,0,ne.RGBA,ne.RGBA,ne.UNSIGNED_BYTE,H),ee.i.bindTexture2d(0),ee=Te;break e;case"detections":for(ee=o.s[R.stream],ee||(ee=new ql(o.i),o.s[R.stream]=ee),ee.data||(ee.data=new ee.h.DetectionListData),ee.data.reset(H.length),Te=0;Te<H.length;++Te){ne=H[Te];var Ie=ee.data,it=Ie.setBoundingBox,Yt=Te,Vt=ne.la,we=new Ss;if(Ze(we,1,Vt.ra),Ze(we,2,Vt.sa),Ze(we,3,Vt.height),Ze(we,4,Vt.width),Ze(we,5,Vt.rotation),zt(we,6,Vt.pa),Vt=we.l(),it.call(Ie,Yt,Vt),ne.ea)for(Ie=0;Ie<ne.ea.length;++Ie){we=ne.ea[Ie],it=ee.data,Yt=it.addNormalizedLandmark,Vt=Te,we=Object.assign({},we,{visibility:we.visibility?we.visibility:0});var st=new Hn;Ze(st,1,we.x),Ze(st,2,we.y),Ze(st,3,we.z),we.visibility&&Ze(st,4,we.visibility),we=st.l(),Yt.call(it,Vt,we)}if(ne.ba)for(Ie=0;Ie<ne.ba.length;++Ie)it=ee.data,Yt=it.addClassification,Vt=Te,we=ne.ba[Ie],st=new Ae,Ze(st,2,we.score),we.index&&zt(st,1,we.index),we.label&&zt(st,3,we.label),we.displayName&&zt(st,4,we.displayName),we=st.l(),Yt.call(it,Vt,we)}ee=ee.data;break e;default:ee={}}}switch(j=ee,U=R.stream,R.type){case"video":d.pushTexture2d(Object.assign({},j,{stream:U,timestamp:u}));break;case"detections":q=j,q.stream=U,q.timestamp=u,d.pushDetectionList(q);break;default:throw Error("Unknown input config type: '"+R.type+"'")}}return o.j.send(d),L(Q,o.I,4);case 4:d.delete(),Q.h=0}})};function Jl(l,f,o){var u,d,p,g,v,R,j,U,q,Q,H,ee,ne,Te;return N(function(Ie){switch(Ie.h){case 1:if(!o)return Ie.return(f);for(u={},d=0,p=c(Object.keys(o)),g=p.next();!g.done;g=p.next())v=g.value,R=o[v],typeof R!="string"&&R.type==="texture"&&f[R.stream]!==void 0&&++d;1<d&&(l.M=!1),j=c(Object.keys(o)),g=j.next();case 2:if(g.done){Ie.h=4;break}if(U=g.value,q=o[U],typeof q=="string")return ne=u,Te=U,L(Ie,Zl(l,U,f[q]),14);if(Q=f[q.stream],q.type==="detection_list"){if(Q){for(var it=Q.getRectList(),Yt=Q.getLandmarksList(),Vt=Q.getClassificationsList(),we=[],st=0;st<it.size();++st){var Cr=Gl(it.get(st)),aE=Bt(Cr,1),lE=Bt(Cr,2),uE=Bt(Cr,3),cE=Bt(Cr,4),hE=Bt(Cr,5,0),eu=void 0;eu=eu===void 0?0:eu,Cr={la:{ra:aE,sa:lE,height:uE,width:cE,rotation:hE,pa:ys(Ot(Cr,6),eu)},ea:An(Xo(Yt.get(st)),Hn,1).map(Yo),ba:xi(Ko(Vt.get(st)))},we.push(Cr)}it=we}else it=[];u[U]=it,Ie.h=7;break}if(q.type==="proto_list"){if(Q){for(it=Array(Q.size()),Yt=0;Yt<Q.size();Yt++)it[Yt]=Q.get(Yt);Q.delete()}else it=[];u[U]=it,Ie.h=7;break}if(Q===void 0){Ie.h=3;break}if(q.type==="float_list"){u[U]=Q,Ie.h=7;break}if(q.type==="proto"){u[U]=Q,Ie.h=7;break}if(q.type!=="texture")throw Error("Unknown output config type: '"+q.type+"'");return H=l.v[U],H||(H=new Jo(l.i,l.K),l.v[U]=H),L(Ie,Zo(H,Q,l.M),13);case 13:ee=Ie.i,u[U]=ee;case 7:q.transform&&u[U]&&(u[U]=q.transform(u[U])),Ie.h=3;break;case 14:ne[Te]=Ie.i;case 3:g=j.next(),Ie.h=2;break;case 4:return Ie.return(u)}})}function Zl(l,f,o){var u;return N(function(d){return typeof o=="number"||o instanceof Uint8Array||o instanceof l.i.Uint8BlobList?d.return(o):o instanceof l.i.Texture2dDataOut?(u=l.v[f],u||(u=new Jo(l.i,l.K),l.v[f]=u),d.return(Zo(u,o,l.M))):d.return(void 0)})}function Cs(l,f){for(var o=f.name||"$",u=[].concat(h(f.wants)),d=new l.i.StringList,p=c(f.wants),g=p.next();!g.done;g=p.next())d.push_back(g.value);p=l.i.PacketListener.implement({onResults:function(v){for(var R={},j=0;j<f.wants.length;++j)R[u[j]]=v.get(j);var U=l.listeners[o];U&&(l.I=Jl(l,R,f.outs).then(function(q){q=U(q);for(var Q=0;Q<f.wants.length;++Q){var H=R[u[Q]];typeof H=="object"&&H.hasOwnProperty&&H.hasOwnProperty("delete")&&H.delete()}q&&(l.I=q)}))}}),l.j.attachMultiListener(d,p),d.delete()}t.onResults=function(l,f){this.listeners[f||"$"]=l},_e("Solution",Rs),_e("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function vt(l){return l===void 0&&(l=0),l===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function ta(l){var f=this;l=l||{},this.h=new Rs({locateFile:l.locateFile,files:function(o){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:vt(o.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:ki},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:ki},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(o){return o.map(function(u){return xi(Ko(u))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(o){var u,d,p;return N(function(g){return g.h==1?(u=vt(o),d="third_party/mediapipe/modules/hand_landmark/"+u,L(g,Ci(f.h,u),2)):(p=g.i,f.h.overrideFile(d,p),g.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}t=ta.prototype,t.close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(l){this.h.onResults(l)},t.initialize=function(){var l=this;return N(function(f){return L(f,l.h.initialize(),0)})},t.reset=function(){this.h.reset()},t.send=function(l){var f=this;return N(function(o){return L(o,f.h.send(l),0)})},t.setOptions=function(l){this.h.setOptions(l)},_e("Hands",ta),_e("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),_e("VERSION","0.4.1675469240")}).call(mh);let Pi=null;const OC=async(t,e={})=>{const{isLefty:n=!1}=e;return Pi||(Pi=new DC.Hands({locateFile:r=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${r}`}),Pi.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),Pi.onResults(r=>{if(r.multiHandLandmarks&&r.multiHandLandmarks.length>0){const i=VC(r.multiHandLandmarks,n);t({...i,landmarks:r.multiHandLandmarks})}else t({found:!1})}),await Pi.initialize()),{send:async r=>{Pi&&await Pi.send({image:r})}}},VC=(t,e=!1)=>{if(t.length<2)return{found:!1,reason:"Need 2 hands"};const n=t.map(E=>E).sort((E,b)=>E[0].x-b[0].x),r=n[e?1:0],i=n[e?0:1],s=r[0],a=i[0];if(e&&s.x<a.x)return{found:!1,reason:"Crossed Hands"};if(!e&&s.x>a.x)return{found:!1,reason:"Crossed Hands"};const c=a.x-s.x,h=a.y-s.y;if(Math.sqrt(c*c+h*h)<.2)return{found:!1,reason:"Hands too close"};const y=-.15,_={found:!0,start_x:s.x*100,start_y:(s.y+y)*100,end_x:a.x*100,end_y:(a.y+y)*100,start_width:12,end_width:18};return MC(_)};let bi=null;const LC=.15,MC=t=>{if(!bi)return bi=t,t;const e=(r,i)=>i+(r-i)*LC,n={found:!0,start_x:e(t.start_x,bi.start_x),start_y:e(t.start_y,bi.start_y),end_x:e(t.end_x,bi.end_x),end_y:e(t.end_y,bi.end_y),start_width:12,end_width:18};return bi=n,n},jC=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],sE=[4,11,7,2,9,4],FC=(t,e)=>{const r=(sE[t]+e)%12;return jC[r]},UC=(t,e)=>{const n=sE[t];let i=[4,3,3,3,2,2][t],s=n;for(let a=1;a<=e;a++)s++,s===12&&(s=0,i++);return i},oE=({activeString:t,highlightFret:e,playedNote:n=null,playedOctave:r=null})=>{const s={E4:0,B3:1,G3:2,D3:3,A2:4,E2:5}[t],a=5,c=[0,1,2,3,4,5];return D.jsx("div",{className:"w-full max-w-sm mx-auto bg-slate-900 border border-slate-700 rounded-lg p-4 shadow-xl",children:D.jsxs("div",{className:"relative h-40 w-full select-none",children:[D.jsx("div",{className:"absolute inset-0 flex",children:[...Array(a+1)].map((h,m)=>D.jsx("div",{className:"flex-1 border-r border-slate-600 relative",children:D.jsx("span",{className:"absolute -bottom-6 left-1/2 -translate-x-1/2 text-xs text-slate-500 font-mono",children:m===0?"Nut":m})},m))}),D.jsx("div",{className:"absolute inset-0 flex flex-col justify-between py-2 pointer-events-none",children:c.map((h,m)=>D.jsxs("div",{className:"relative w-full h-px",children:[D.jsx("div",{className:"absolute inset-x-0 h-full bg-slate-400",style:{height:`${Math.max(1,(6-h)/2)}px`,opacity:.5+(6-h)/12}}),D.jsx("span",{className:"absolute -left-6 -top-2 text-xs text-slate-500 font-bold w-4 text-right",children:["e","B","G","D","A","E"][h]}),[...Array(a+1)].map((y,_)=>{const E=m===s&&_===e,b=FC(h,_),V=_===0?"0%":`${(_-.5)/a*100}%`;return D.jsxs("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 flex items-center justify-center",style:{top:"50%",left:V},children:[E&&D.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 rounded-full bg-green-500 shadow-[0_0_15px_rgba(34,197,94,0.6)] flex items-center justify-center animate-bounce z-20",children:D.jsx("span",{className:"text-slate-950 font-bold text-xs",children:t})}),n&&n===b&&(!r||r===UC(h,_))&&!E&&D.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 rounded-full bg-blue-500/50 border border-blue-400 shadow-[0_0_15px_rgba(59,130,246,0.6)] flex items-center justify-center animate-pulse z-10 transition-all"})]},`${h}-${_}`)})]},h))})]})})},zC=({lesson:t,onReady:e})=>{const r=t.id==="tune_e"?[{string:6,fret:0,disp:"E"}]:t.id==="tune_a"?[{string:5,fret:0,disp:"A"}]:t.id==="tune_d"?[{string:4,fret:0,disp:"D"}]:t.id==="riff_smoke"?[{string:6,fret:0,disp:"0"},{string:6,fret:3,disp:"3"},{string:6,fret:5,disp:"5"}]:t.chordData?t.chordData.fingers.map(i=>({string:i.string,fret:i.fret,disp:i.finger})):[];return D.jsx("div",{className:"absolute inset-0 bg-slate-950 z-50 flex flex-col p-6 animate-in slide-in-from-bottom",children:D.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center max-w-md mx-auto w-full",children:[D.jsx("div",{className:"w-16 h-16 bg-indigo-900/30 rounded-full flex items-center justify-center mb-4",children:D.jsx(K1,{className:"w-8 h-8 text-indigo-400"})}),D.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:t.title}),D.jsx("div",{className:"h-1 w-20 bg-indigo-500 rounded-full mb-6"}),D.jsx("p",{className:"text-slate-300 text-lg leading-relaxed mb-8",children:t.briefing}),t.type!=="posture"&&D.jsx("div",{className:"w-full mb-8 transform scale-90",children:D.jsx(oE,{highlightNotes:r})}),D.jsxs("div",{className:"bg-slate-900 p-6 rounded-2xl border border-slate-800 w-full mb-8 text-left",children:[D.jsx("h3",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-4",children:"Objective"}),D.jsx("ul",{className:"space-y-3",children:t.prompts.map((i,s)=>D.jsxs("li",{className:"flex items-center text-white",children:[D.jsx(pc,{className:"w-5 h-5 text-green-500 mr-3"}),i]},s))})]}),D.jsx(Fi,{onClick:e,className:"w-full",size:"lg",children:"I'm Ready"})]})})},BC=({lesson:t,onFinish:e})=>{const n=pe.useRef(null),r=pe.useRef(null),i=pe.useRef(null),[s,a]=pe.useState("briefing"),[c,h]=pe.useState(3),[m,y]=pe.useState(null),[_,E]=pe.useState({}),[b,V]=pe.useState(null),[O,M]=pe.useState({isLefty:!0,showDebug:!1}),[k,T]=pe.useState(!1),P=pe.useRef({notes:[],volumes:[],chromas:[],strings:[]}),L=pe.useRef(0),$=pe.useRef(!1),W=C=>{const I=r.current;if(!I)return;const J=I.getContext("2d");J.clearRect(0,0,I.width,I.height);const _e=Math.min(C*10*I.height,I.height),te=$.current;J.fillStyle="#1e293b",J.fillRect(0,I.height/2-1,I.width,2),J.fillStyle=te?C>.03?"#4ade80":"#fbbf24":"#6366f1";const ye=I.width/2-50,G=(I.height-_e)/2;J.beginPath(),J.roundRect(ye,G,100,Math.max(4,_e),4),J.fill()};pe.useEffect(()=>{if(m&&m.success){const C=setTimeout(()=>{e(m.xpEarned)},1500);return()=>clearTimeout(C)}},[m,e]),pe.useEffect(()=>{if(s==="briefing")return;const I=(async()=>{try{const J=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480},audio:!1});n.current&&(n.current.srcObject=J),await so.init();const _e=so.subscribe(te=>{W(te.rms),E({note:te.note,octave:te.octave,vol:te.rms.toFixed(3)}),$.current&&(te.rms>L.current&&(L.current=te.rms),P.current.notes.push(te.note),P.current.chromas.push(te.chroma),P.current.strings.push(te.likelyString))});return()=>{_e(),n.current&&n.current.srcObject&&n.current.srcObject.getTracks().forEach(te=>te.stop()),so.stop()}}catch(J){console.error("Media Init Error:",J)}})();return()=>{I.then(J=>J&&J())}},[s]),pe.useEffect(()=>{let C=null,I=null;const J=async()=>{if(!["instruct","analyzing"].includes(s)||!n.current)return;C=await OC(te=>{te.found?V(te):V(ye=>ye?{...ye,found:!1,reason:te.reason}:{found:!1,reason:te.reason}),O.showDebug&&te.landmarks&&i.current?A(i.current,te.landmarks):!O.showDebug&&i.current&&i.current.getContext("2d").clearRect(0,0,i.current.width,i.current.height)},{isLefty:O.isLefty});const _e=async()=>{!n.current||!C||(n.current.readyState>=2&&await C.send(n.current),I=requestAnimationFrame(_e))};return _e(),()=>{I&&cancelAnimationFrame(I)}};return["instruct","analyzing"].includes(s)&&setTimeout(J,500),()=>{I&&cancelAnimationFrame(I)}},[s,O.isLefty,O.showDebug]);const A=(C,I)=>{const J=C.getContext("2d");J.clearRect(0,0,C.width,C.height),I.forEach(_e=>{J.fillStyle="#00ffff",J.strokeStyle="#00ffff",J.lineWidth=2;for(let te=0;te<_e.length;te++){const ye=_e[te].x*C.width,G=_e[te].y*C.height;J.beginPath(),J.arc(ye,G,4,0,2*Math.PI),J.fill()}})},w=()=>a("instruct"),S=()=>{P.current={notes:[],volumes:[],chromas:[],strings:[]},a("countdown"),h(3);const C=setInterval(()=>{h(I=>I<=1?(clearInterval(C),x(),0):I-1)},1e3)},x=()=>{a("analyzing"),L.current=0,$.current=!0;let C=null;if(n.current){const J=document.createElement("canvas");J.width=n.current.videoWidth,J.height=n.current.videoHeight,J.getContext("2d").drawImage(n.current,0,0),C=J.toDataURL("image/jpeg",.8).split(",")[1]}const I=C&&["posture","strum"].includes(t.type)?NC(C,t):Promise.resolve(null);setTimeout(async()=>{$.current=!1;const J=await I;N(J)},2500)},N=C=>{var G;const I=L.current,J=new Array(12).fill(0),_e=P.current.chromas.length;if(_e>0){for(let K=0;K<_e;K++)for(let Z=0;Z<12;Z++)J[Z]+=P.current.chromas[K][Z];for(let K=0;K<12;K++)J[K]/=_e}let te=!1,ye="Try again.";if(t.type==="note"){const K={};P.current.notes.forEach(se=>{se!=="--"&&(K[se]=(K[se]||0)+1)});const Z=Object.keys(K).reduce((se,he)=>K[se]>K[he]?se:he,null);if(Z===t.targetNote){const se=(G=t.id.split("_")[1])==null?void 0:G.toUpperCase(),he=P.current.strings.filter(pt=>pt),Se=he.sort((pt,Nt)=>he.filter(mt=>mt===pt).length-he.filter(mt=>mt===Nt).length).pop();t.id.startsWith("tune_")&&Se&&!Se.startsWith(se)?(te=!1,ye=`Pitch is ${Z}, but are you on the right string? I think I heard ${Se}.`):(te=!0,ye="Perfect pitch!")}else te=!1,ye=`I heard ${Z||"noise"}. Tune to ${t.targetNote}.`}else if(C){if(te=C.success,ye=C.feedback||"Feedback unavailable",t.type==="strum"&&te){if(I<.03)te=!1,ye="Good hand shape, but too quiet! Strum harder.";else if(t.requiredNotes){const K=[],Z=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];t.requiredNotes.forEach(se=>{const he=Z.indexOf(se);J[he]<.15&&K.push(se)}),K.length>0?(te=!1,ye=`Looks good, but I can't hear the ${K.join(", ")} strings clearly.`):(te=!0,ye="Perfect! Clear and resonant.")}}}else I>.05?(te=!0,ye="Good volume!"):ye="Too quiet.";y({success:te,message:ye,xpEarned:te?t.xp:0}),a("result")};return s==="briefing"?D.jsx(zC,{lesson:t,onReady:w}):D.jsxs("div",{className:"fixed inset-0 bg-slate-900 z-50 flex flex-col",children:[D.jsx("div",{className:"absolute top-0 left-0 right-0 p-4 z-20 flex justify-end items-center bg-gradient-to-b from-slate-900 via-slate-900/80 to-transparent",children:D.jsx("button",{onClick:()=>e(null),className:"p-2 bg-slate-800 rounded-full text-white hover:bg-slate-700 transition-colors",children:D.jsx(Qd,{size:24})})}),D.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[D.jsxs("div",{className:"flex-1 bg-slate-900 border-r border-slate-800 flex flex-col relative",children:[D.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-950/50",children:[D.jsxs("div",{children:[D.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[t.title,D.jsxs("span",{className:"text-sm font-normal text-slate-400 bg-slate-800 px-2 py-1 rounded ml-2",children:["XP: ",t.xp]})]}),D.jsx("p",{className:"text-slate-400 mt-1",children:t.description})]}),s==="analyzing"&&D.jsxs("div",{className:"flex items-center gap-3",children:[D.jsxs("div",{className:"text-right",children:[D.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider",children:"Now Playing"}),D.jsx("div",{className:`text-2xl font-mono font-bold ${_.note&&_.note===t.targetNote?"text-green-400":"text-white"}`,children:_.note||"--"})]}),D.jsx("div",{className:`w-3 h-3 rounded-full ${_.note?"bg-indigo-500 animate-pulse":"bg-slate-700"}`})]})]}),D.jsxs("div",{className:"flex-1 flex items-center justify-center p-8 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-slate-800/50 to-slate-900",children:[D.jsx("div",{className:"w-full max-w-4xl transform transition-all duration-500 hover:scale-[1.01]",children:D.jsx(oE,{activeString:t.activeString,highlightFret:t.fret,playedNote:_.note,playedOctave:_.octave})}),m&&m.success&&D.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-green-500/10 z-20 animate-in fade-in zoom-in duration-300",children:D.jsxs("div",{className:"bg-slate-950 p-8 rounded-3xl border border-green-500/50 shadow-[0_0_50px_rgba(34,197,94,0.3)] text-center",children:[D.jsx(pc,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),D.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:"Perfect!"}),D.jsx("p",{className:"text-green-400",children:"+10 XP"})]})})]})]}),D.jsxs("div",{className:"flex-1 bg-black flex flex-col border-l border-slate-800 relative group",children:[D.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[D.jsx("video",{ref:n,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover scale-x-[-1] opacity-60 group-hover:opacity-100 transition-opacity"}),D.jsx("canvas",{ref:i,width:"640",height:"480",className:`absolute inset-0 w-full h-full object-cover scale-x-[-1] pointer-events-none ${O.showDebug?"opacity-100":"opacity-0"}`}),D.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-center",children:b&&b.found?D.jsx("div",{className:"inline-block bg-green-500/20 backdrop-blur border border-green-500/50 text-green-400 text-xs px-2 py-1 rounded-full font-bold uppercase tracking-wider",children:"Hands Detected"}):D.jsx("div",{className:"inline-block bg-red-500/20 backdrop-blur border border-red-500/50 text-red-400 text-xs px-2 py-1 rounded-full font-bold uppercase tracking-wider animate-pulse",children:"No Hands"})})]}),D.jsxs("div",{className:"h-auto bg-slate-950 p-4 border-t border-slate-900 space-y-3",children:[D.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Controls"}),D.jsx(Fi,{onClick:S,variant:s==="instruct"?"primary":"secondary",className:"w-full text-sm",children:s==="analyzing"?"Listening...":"Start Practicing"}),D.jsxs(Fi,{onClick:()=>T(!0),variant:"ghost",className:"w-full text-slate-400 text-xs hover:text-white",children:[D.jsx(Kd,{className:"w-3 h-3 mr-2"})," Adjust Camera"]})]})]})]}),s==="countdown"&&D.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in z-50",children:D.jsx("div",{className:"text-9xl font-black text-white animate-bounce drop-shadow-2xl",children:c})}),s==="analyzing"&&D.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col items-center justify-center p-6 z-40",children:[D.jsx("div",{className:"absolute inset-0 bg-white animate-[ping_0.2s_ease-out_1] opacity-0 pointer-events-none"}),t.type==="strum"?D.jsx("div",{className:"bg-green-500 text-slate-950 font-black text-3xl px-8 py-4 rounded-2xl animate-pulse shadow-[0_0_50px_rgba(74,222,128,0.5)] transform scale-110",children:"STRUM NOW!"}):D.jsxs("div",{className:"flex flex-col items-center bg-black/40 backdrop-blur rounded-2xl p-6 border border-white/10 shadow-2xl animate-in zoom-in duration-300",children:[D.jsx(pp,{className:"w-12 h-12 text-indigo-400 animate-spin mb-4"}),D.jsx("span",{className:"text-white font-bold tracking-widest",children:"ANALYZING..."})]})]}),s==="result"&&m&&!m.success&&D.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-950/90 backdrop-blur-xl p-6 animate-in zoom-in duration-300 pointer-events-auto",children:D.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl w-full max-w-sm text-center shadow-2xl",children:[D.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 ${m.success?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:m.success?D.jsx(pc,{size:40}):D.jsx($1,{size:40})}),D.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:m.success?"Perfect!":"Try Again"}),D.jsx("p",{className:"text-slate-400 mb-8 text-lg leading-relaxed",children:m.message}),D.jsxs("div",{className:"space-y-3",children:[D.jsx(Fi,{onClick:()=>e(m.xpEarned),variant:m.success?"success":"secondary",className:"w-full",children:m.success?"Next Lesson":"Back to Menu"}),!m.success&&D.jsx("button",{onClick:()=>{y(null),S()},className:"w-full py-4 text-slate-400 font-bold hover:text-white",children:"Retry Immediately"})]})]})}),k&&D.jsx("div",{className:"absolute inset-0 z-[60] bg-black/80 backdrop-blur flex items-center justify-center p-6 animate-in fade-in",children:D.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-2xl w-full max-w-sm p-6 shadow-2xl",children:[D.jsxs("div",{className:"flex justify-between items-center mb-6",children:[D.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[D.jsx(Kd,{className:"w-5 h-5 mr-2 text-indigo-400"})," Settings"]}),D.jsx("button",{onClick:()=>T(!1),children:D.jsx(Qd,{className:"text-slate-400 hover:text-white"})})]}),D.jsxs("div",{className:"space-y-4",children:[D.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800 rounded-xl",children:[D.jsxs("div",{className:"flex items-center",children:[D.jsx(q1,{className:"w-5 h-5 text-indigo-400 mr-3"}),D.jsxs("div",{className:"text-left",children:[D.jsx("div",{className:"text-white font-bold",children:"Left-Handed Mode"}),D.jsx("div",{className:"text-slate-400 text-xs",children:"For lefty guitars"})]})]}),D.jsx("button",{onClick:()=>M(C=>({...C,isLefty:!C.isLefty})),className:`w-12 h-6 rounded-full transition-colors relative ${O.isLefty?"bg-indigo-500":"bg-slate-600"}`,children:D.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${O.isLefty?"left-7":"left-1"}`})})]}),D.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800 rounded-xl",children:[D.jsxs("div",{className:"flex items-center",children:[D.jsx(W1,{className:"w-5 h-5 text-indigo-400 mr-3"}),D.jsxs("div",{className:"text-left",children:[D.jsx("div",{className:"text-white font-bold",children:"Debug Vision"}),D.jsx("div",{className:"text-slate-400 text-xs",children:"Show skeleton"})]})]}),D.jsx("button",{onClick:()=>M(C=>({...C,showDebug:!C.showDebug})),className:`w-12 h-6 rounded-full transition-colors relative ${O.showDebug?"bg-indigo-500":"bg-slate-600"}`,children:D.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${O.showDebug?"left-7":"left-1"}`})})]})]}),D.jsx(Fi,{onClick:()=>T(!1),className:"w-full mt-6",children:"Done"})]})})]})},$C=({onClose:t})=>{const[e,n]=pe.useState("--"),[r,i]=pe.useState(0),[s,a]=pe.useState(0),[c,h]=pe.useState(null);pe.useEffect(()=>{const V=(async()=>(await so.init(),so.subscribe(O=>{O.pitch>0&&(n(O.note),i(O.cents),a(Math.round(O.pitch)),h(O.likelyString))})))();return()=>{V.then(O=>O&&O()),so.stop()}},[]);const m=Math.max(-45,Math.min(45,r)),y=Math.abs(r)<5&&s>0;let _="Play a string",E="text-slate-500";return s>0&&(y?(E="text-green-400 drop-shadow-[0_0_10px_rgba(74,222,128,0.5)]",_="Perfect!"):r>0?(E="text-yellow-400",_="Too High (Loosen)"):(E="text-yellow-400",_="Too Low (Tighten)")),D.jsxs("div",{className:"fixed inset-0 bg-slate-950 z-[60] flex flex-col items-center justify-center animate-in slide-in-from-bottom duration-300",children:[D.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-4 bg-slate-800 rounded-full text-white hover:bg-slate-700 transition-colors",children:D.jsx(Qd,{})}),D.jsxs("h2",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-12 flex items-center",children:[D.jsx(X1,{className:"w-4 h-4 mr-2"})," Studio Tuner"]}),D.jsxs("div",{className:"relative w-80 h-80",children:[D.jsxs("div",{className:"absolute inset-0 rounded-full border-8 border-slate-800 bg-slate-900 shadow-2xl flex items-center justify-center relative overflow-hidden",children:[D.jsx("div",{className:"absolute top-4 w-1 h-3 bg-green-500/50 z-10"}),[...Array(9)].map((b,V)=>D.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-slate-700/30 transform pointer-events-none",style:{rotate:`${(V-4)*10}deg`}},V)),y&&D.jsx("div",{className:"absolute inset-0 bg-green-500/10 animate-pulse"}),D.jsxs("div",{className:"text-center z-20 relative",children:[D.jsx("div",{className:`text-9xl font-black transition-all duration-200 ${E}`,children:e}),D.jsxs("div",{className:"text-slate-500 font-mono text-xl mt-4 flex flex-col items-center",children:[D.jsx("span",{children:s>0?`${s} Hz`:"--"}),c&&D.jsxs("span",{className:"text-xs bg-slate-800 px-2 py-1 rounded mt-2 text-indigo-400",children:["String: ",c]})]})]})]}),D.jsx("div",{className:"absolute top-0 left-1/2 w-1.5 h-1/2 origin-bottom transition-transform duration-150 ease-out z-30",style:{transform:`translateX(-50%) rotate(${m}deg)`,background:y?"#4ade80":"#ef4444",boxShadow:`0 0 15px ${y?"#4ade80":"#ef4444"}`},children:D.jsx("div",{className:"w-6 h-6 rounded-full bg-white absolute -top-3 -left-2.5 shadow-lg border-2 border-slate-900"})})]}),D.jsx("div",{className:`mt-16 text-3xl font-bold transition-all duration-300 ${E}`,children:_}),D.jsx("div",{className:"absolute bottom-10 text-slate-600 text-sm",children:"440Hz Reference"})]})},HC=({onStart:t,loading:e})=>D.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col relative overflow-hidden",children:[D.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-indigo-900/40 via-slate-950 to-slate-950"}),D.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center flex-1 p-8 text-center animate-in fade-in duration-700",children:[D.jsxs("div",{className:"mb-12 relative group cursor-default",children:[D.jsx("div",{className:"absolute -inset-4 bg-indigo-500/20 blur-xl rounded-full animate-pulse group-hover:bg-indigo-500/30 transition-all"}),D.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-[2rem] flex items-center justify-center shadow-2xl transform rotate-6 border border-white/10 group-hover:rotate-12 transition-transform duration-500",children:D.jsx(U_,{className:"text-white w-16 h-16 drop-shadow-md"})})]}),D.jsx("h1",{className:"text-7xl font-black text-white mb-6 tracking-tight drop-shadow-2xl",children:"Remi"}),D.jsxs("p",{className:"text-slate-400 text-xl mb-12 max-w-md leading-relaxed font-light",children:["The AI Guitar Tutor that ",D.jsx("span",{className:"text-indigo-400 font-bold",children:"listens"})," and ",D.jsx("span",{className:"text-purple-400 font-bold",children:"watches"})," you play."]}),D.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-16 w-full max-w-sm",children:[D.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-800 backdrop-blur hover:bg-slate-800/50 transition-colors",children:[D.jsx(J1,{className:"w-6 h-6 text-yellow-400 mb-2 mx-auto"}),D.jsx("div",{className:"text-sm font-bold text-slate-300",children:"Instant Feedback"})]}),D.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-2xl border border-slate-800 backdrop-blur hover:bg-slate-800/50 transition-colors",children:[D.jsx(B1,{className:"w-6 h-6 text-green-400 mb-2 mx-auto"}),D.jsx("div",{className:"text-sm font-bold text-slate-300",children:"Audio Lock"})]})]}),D.jsxs(Fi,{onClick:t,className:"w-full max-w-xs h-16 text-xl rounded-2xl shadow-indigo-500/20",isLoading:e,children:[!e&&D.jsx(z_,{className:"mr-2 fill-slate-950"}),e?"Tuning...":"Start Learning"]})]})]});function WC(){const[t,e]=pe.useState(null),[n,r]=pe.useState("landing"),[i,s]=pe.useState(null),[a,c]=pe.useState(null),[h,m]=pe.useState(!0);pe.useEffect(()=>{(async()=>{const O=typeof window<"u"&&window.__initial_auth_token,M=await Ay(O);M&&M.uid==="offline_user"&&e(M)})();const V=Nc.onAuthStateChanged(O=>{O&&e(O)});return()=>V()},[]),pe.useEffect(()=>{if(!t)return;const b=WR(t.uid,V=>{c(V),m(!1)});return()=>b()},[t]);const y=async()=>{if(!t){m(!0);const b=await Ay();e(b)}r("dashboard")},_=b=>{s(b),r("practice")},E=async b=>{if(b>0&&t&&i){const V=await GR(t.uid,a,i.id,b);c(V)}s(null),r("dashboard")};return h&&!t?D.jsx("div",{className:"bg-slate-950 min-h-screen text-white flex items-center justify-center",children:D.jsx(pp,{className:"animate-spin w-8 h-8 text-indigo-500"})}):D.jsxs(D.Fragment,{children:[n==="landing"&&D.jsx(HC,{onStart:y,loading:h&&!a}),n==="dashboard"&&D.jsx(RC,{user:t,progress:a,onSelectLesson:_,onOpenTuner:()=>r("tuner")}),n==="practice"&&i&&D.jsx(BC,{lesson:i,onFinish:E}),n==="tuner"&&D.jsx($C,{onClose:()=>r("dashboard")})]})}td.createRoot(document.getElementById("root")).render(D.jsx(RE.StrictMode,{children:D.jsx(WC,{})}));
